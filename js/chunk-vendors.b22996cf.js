(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"0b16":function(t,e,r){"use strict";var n=r("1985"),i=r("35e8");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=x,e.resolve=E,e.resolveObject=S,e.format=_,e.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["<",">",'"',"`"," ","\r","\n","\t"],h=["{","}","|","\\","^","`"].concat(l),c=["'"].concat(h),f=["%","/","?",";","#"].concat(c),d=["/","?","#"],p=255,g=/^[+a-z0-9A-Z_-]{0,63}$/,v=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=r("b383");function x(t,e,r){if(t&&i.isObject(t)&&t instanceof o)return t;var n=new o;return n.parse(t,e,r),n}function _(t){return i.isString(t)&&(t=x(t)),t instanceof o?t.format():o.prototype.format.call(t)}function E(t,e){return x(t,!1,!0).resolve(e)}function S(t,e){return t?x(t,!1,!0).resolveObject(e):e}o.prototype.parse=function(t,e,r){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=-1!==o&&o<t.indexOf("#")?"?":"#",l=t.split(s),h=/\\/g;l[0]=l[0].replace(h,"/"),t=l.join(s);var x=t;if(x=x.trim(),!r&&1===t.split("#").length){var _=u.exec(x);if(_)return this.path=x,this.href=x,this.pathname=_[1],_[2]?(this.search=_[2],this.query=e?w.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var E=a.exec(x);if(E){E=E[0];var S=E.toLowerCase();this.protocol=S,x=x.substr(E.length)}if(r||E||x.match(/^\/\/[^@\/]+@[^@\/]+/)){var O="//"===x.substr(0,2);!O||E&&y[E]||(x=x.substr(2),this.slashes=!0)}if(!y[E]&&(O||E&&!b[E])){for(var T,A,P=-1,C=0;C<d.length;C++){var M=x.indexOf(d[C]);-1!==M&&(-1===P||M<P)&&(P=M)}A=-1===P?x.lastIndexOf("@"):x.lastIndexOf("@",P),-1!==A&&(T=x.slice(0,A),x=x.slice(A+1),this.auth=decodeURIComponent(T)),P=-1;for(C=0;C<f.length;C++){M=x.indexOf(f[C]);-1!==M&&(-1===P||M<P)&&(P=M)}-1===P&&(P=x.length),this.host=x.slice(0,P),x=x.slice(P),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var k=this.hostname.split(/\./),D=(C=0,k.length);C<D;C++){var R=k[C];if(R&&!R.match(g)){for(var j="",L=0,B=R.length;L<B;L++)R.charCodeAt(L)>127?j+="x":j+=R[L];if(!j.match(g)){var N=k.slice(0,C),F=k.slice(C+1),U=R.match(v);U&&(N.push(U[1]),F.unshift(U[2])),F.length&&(x="/"+F.join(".")+x),this.hostname=N.join(".");break}}}this.hostname.length>p?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=n.toASCII(this.hostname));var z=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+z,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==x[0]&&(x="/"+x))}if(!m[S])for(C=0,D=c.length;C<D;C++){var X=c[C];if(-1!==x.indexOf(X)){var Y=encodeURIComponent(X);Y===X&&(Y=escape(X)),x=x.split(X).join(Y)}}var H=x.indexOf("#");-1!==H&&(this.hash=x.substr(H),x=x.slice(0,H));var G=x.indexOf("?");if(-1!==G?(this.search=x.substr(G),this.query=x.substr(G+1),e&&(this.query=w.parse(this.query)),x=x.slice(0,G)):e&&(this.search="",this.query={}),x&&(this.pathname=x),b[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){z=this.pathname||"";var q=this.search||"";this.path=z+q}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=w.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||b[e])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})),s=s.replace("#","%23"),e+o+r+s+n},o.prototype.resolve=function(t){return this.resolveObject(x(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var r=new o,n=Object.keys(this),a=0;a<n.length;a++){var s=n[a];r[s]=this[s]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),l=0;l<u.length;l++){var h=u[l];"protocol"!==h&&(r[h]=t[h])}return b[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!b[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var d=c[f];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||y[t.protocol])r.pathname=t.pathname;else{var p=(t.pathname||"").split("/");while(p.length&&!(t.host=p.shift()));t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var g=r.pathname||"",v=r.search||"";r.path=g+v}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),w=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=w||m||r.host&&t.pathname,_=x,E=r.pathname&&r.pathname.split("/")||[],S=(p=t.pathname&&t.pathname.split("/")||[],r.protocol&&!b[r.protocol]);if(S&&(r.hostname="",r.port=null,r.host&&(""===E[0]?E[0]=r.host:E.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),x=x&&(""===p[0]||""===E[0])),w)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,E=p;else if(p.length)E||(E=[]),E.pop(),E=E.concat(p),r.search=t.search,r.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(S){r.hostname=r.host=E.shift();var O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");O&&(r.auth=O.shift(),r.host=r.hostname=O.shift())}return r.search=t.search,r.query=t.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!E.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var T=E.slice(-1)[0],A=(r.host||t.host||E.length>1)&&("."===T||".."===T)||""===T,P=0,C=E.length;C>=0;C--)T=E[C],"."===T?E.splice(C,1):".."===T?(E.splice(C,1),P++):P&&(E.splice(C,1),P--);if(!x&&!_)for(;P--;P)E.unshift("..");!x||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),A&&"/"!==E.join("/").substr(-1)&&E.push("");var M=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(S){r.hostname=r.host=M?"":E.length?E.shift():"";O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");O&&(r.auth=O.shift(),r.host=r.hostname=O.shift())}return x=x||r.host&&E.length,x&&!M&&E.unshift(""),E.length?r.pathname=E.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},1985:function(t,e,r){(function(t,n){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(o){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof n&&n;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,l=36,h=1,c=26,f=38,d=700,p=72,g=128,v="-",m=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=l-h,_=Math.floor,E=String.fromCharCode;function S(t){throw new RangeError(w[t])}function O(t,e){var r=t.length,n=[];while(r--)n[r]=e(t[r]);return n}function T(t,e){var r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(b,".");var i=t.split("."),o=O(i,e).join(".");return n+o}function A(t){var e,r,n=[],i=0,o=t.length;while(i<o)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<o?(r=t.charCodeAt(i++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--)):n.push(e);return n}function P(t){return O(t,(function(t){var e="";return t>65535&&(t-=65536,e+=E(t>>>10&1023|55296),t=56320|1023&t),e+=E(t),e})).join("")}function C(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:l}function M(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function I(t,e,r){var n=0;for(t=r?_(t/d):t>>1,t+=_(t/e);t>x*c>>1;n+=l)t=_(t/x);return _(n+(x+1)*t/(t+f))}function k(t){var e,r,n,i,o,a,s,f,d,m,y=[],b=t.length,w=0,x=g,E=p;for(r=t.lastIndexOf(v),r<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&S("not-basic"),y.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<b;){for(o=w,a=1,s=l;;s+=l){if(i>=b&&S("invalid-input"),f=C(t.charCodeAt(i++)),(f>=l||f>_((u-w)/a))&&S("overflow"),w+=f*a,d=s<=E?h:s>=E+c?c:s-E,f<d)break;m=l-d,a>_(u/m)&&S("overflow"),a*=m}e=y.length+1,E=I(w-o,e,0==o),_(w/e)>u-x&&S("overflow"),x+=_(w/e),w%=e,y.splice(w++,0,x)}return P(y)}function D(t){var e,r,n,i,o,a,s,f,d,m,y,b,w,x,O,T=[];for(t=A(t),b=t.length,e=g,r=0,o=p,a=0;a<b;++a)y=t[a],y<128&&T.push(E(y));n=i=T.length,i&&T.push(v);while(n<b){for(s=u,a=0;a<b;++a)y=t[a],y>=e&&y<s&&(s=y);for(w=n+1,s-e>_((u-r)/w)&&S("overflow"),r+=(s-e)*w,e=s,a=0;a<b;++a)if(y=t[a],y<e&&++r>u&&S("overflow"),y==e){for(f=r,d=l;;d+=l){if(m=d<=o?h:d>=o+c?c:d-o,f<m)break;O=f-m,x=l-m,T.push(E(M(m+O%x,0))),f=_(O/x)}T.push(E(M(f,0))),o=I(r,w,n==i),r=0,++n}++r,++e}return T.join("")}function R(t){return T(t,(function(t){return m.test(t)?k(t.slice(4).toLowerCase()):t}))}function j(t){return T(t,(function(t){return y.test(t)?"xn--"+D(t):t}))}s={version:"1.4.1",ucs2:{decode:A,encode:P},decode:k,encode:D,toASCII:j,toUnicode:R},i=function(){return s}.call(e,r,e,t),void 0===i||(t.exports=i)})()}).call(this,r("62e4")(t),r("c8ba"))},"22a2":function(t,e,r){"use strict";r.d(e,"a",(function(){return le})),r.d(e,"b",(function(){return Sn})),r.d(e,"d",(function(){return Ne})),r.d(e,"g",(function(){return dn})),r.d(e,"i",(function(){return Pr})),r.d(e,"k",(function(){return jr})),r.d(e,"m",(function(){return Se})),r.d(e,"n",(function(){return Ve})),r.d(e,"o",(function(){return ve})),r.d(e,"h",(function(){return x})),r.d(e,"c",(function(){return jt})),r.d(e,"e",(function(){return hi})),r.d(e,"f",(function(){return qo})),r.d(e,"j",(function(){return di})),r.d(e,"l",(function(){return Ti}));r("eb0a");var n=r("8114"),i=r.n(n);
/*!
 * @pixi/settings - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
function o(t){var e=!0;if(i.a.tablet||i.a.phone){if(e=!1,i.a.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var n=parseInt(r[1],10);n>=11&&(e=!0)}}if(i.a.android.device){var o=navigator.userAgent.match(/Android\s([0-9.]*)/);if(o){var a=parseInt(o[1],10);a>=7&&(e=!0)}}}return e?t:4}function a(){return!i.a.apple.device}var s={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:o(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:i.a.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:a(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},u=r("f142"),l=r.n(u),h=r("5664"),c=r.n(h),f=r("0b16"),d=r.n(f),p={WEBGL_LEGACY:0,WEBGL:1,WEBGL2:2},g={UNKNOWN:0,WEBGL:1,CANVAS:2},v={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19,NONE:20,SRC_OVER:0,SRC_IN:21,SRC_OUT:22,SRC_ATOP:23,DST_OVER:24,DST_IN:25,DST_OUT:26,DST_ATOP:27,ERASE:26,SUBTRACT:28},m={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},y={RGBA:6408,RGB:6407,ALPHA:6406,LUMINANCE:6409,LUMINANCE_ALPHA:6410,DEPTH_COMPONENT:6402,DEPTH_STENCIL:34041},b={TEXTURE_2D:3553,TEXTURE_CUBE_MAP:34067,TEXTURE_2D_ARRAY:35866,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074},w={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_5_6_5:33635,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,FLOAT:5126,HALF_FLOAT:36193},x={LINEAR:1,NEAREST:0},_={CLAMP:33071,REPEAT:10497,MIRRORED_REPEAT:33648},E={OFF:0,POW2:1,ON:2},S={AUTO:0,MANUAL:1},O={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"};
/*!
 * @pixi/utils - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
s.RETINA_PREFIX=/@([0-9\.]+)x/,s.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var T,A=!1,P="5.1.6";function C(t){if(!A){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c PixiJS "+P+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+P+" - "+t+" - http://www.pixijs.com/");A=!0}}function M(){return"undefined"===typeof T&&(T=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:s.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!r||!r.getContextAttributes().stencil);if(r){var i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,n}catch(o){return!1}}()),T}function I(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function k(t){return t=t.toString(16),t="000000".substr(0,6-t.length)+t,"#"+t}function D(t){return"string"===typeof t&&"#"===t[0]&&(t=t.substr(1)),parseInt(t,16)}function R(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[v.NORMAL_NPM]=v.NORMAL,t[v.ADD_NPM]=v.ADD,t[v.SCREEN_NPM]=v.SCREEN,e[v.NORMAL]=v.NORMAL_NPM,e[v.ADD]=v.ADD_NPM,e[v.SCREEN]=v.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}var j=R();function L(t,e){return j[e?1:0][t]}function B(t,e,r,n){return r=r||new Float32Array(4),n||void 0===n?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function N(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var r=t>>16&255,n=t>>8&255,i=255&t;return r=r*e+.5|0,n=n*e+.5|0,i=i*e+.5|0,(255*e<<24)+(r<<16)+(n<<8)+i}function F(t,e,r,n){return r=r||new Float32Array(4),r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,(n||void 0===n)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function U(t,e){void 0===e&&(e=null);var r=6*t;if(e=e||new Uint16Array(r),e.length!==r)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+r);for(var n=0,i=0;n<r;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function z(t,e,r){var n,i=t.length;if(!(e>=i||0===r)){r=e+r>i?i-e:r;var o=i-r;for(n=e;n<o;++n)t[n]=t[n+r];t.length=o}}var V=0;function X(){return++V}function Y(t){return 0===t?0:t<0?-1:1}function H(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function G(t){return!(t&t-1)&&!!t}function q(t){var e=(t>65535)<<4;t>>>=e;var r=(t>255)<<3;return t>>>=r,e|=r,r=(t>15)<<2,t>>>=r,e|=r,r=(t>3)<<1,t>>>=r,e|=r,e|t>>1}var W={},K=Object.create(null),$=Object.create(null);function Z(t){var e,r,n,i=t.width,o=t.height,a=t.getContext("2d"),s=a.getImageData(0,0,i,o),u=s.data,l=u.length,h={top:null,left:null,right:null,bottom:null},c=null;for(e=0;e<l;e+=4)0!==u[e+3]&&(r=e/4%i,n=~~(e/4/i),null===h.top&&(h.top=n),(null===h.left||r<h.left)&&(h.left=r),(null===h.right||h.right<r)&&(h.right=r+1),(null===h.bottom||h.bottom<n)&&(h.bottom=n));return null!==h.top&&(i=h.right-h.left,o=h.bottom-h.top+1,c=a.getImageData(h.left,h.top,i,o)),{height:o,width:i,data:c}}var J=function(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||s.RESOLUTION,this.resize(t,e)},Q={width:{configurable:!0},height:{configurable:!0}};J.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},J.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},J.prototype.destroy=function(){this.context=null,this.canvas=null},Q.width.get=function(){return this.canvas.width},Q.width.set=function(t){this.canvas.width=t},Q.height.get=function(){return this.canvas.height},Q.height.set=function(t){this.canvas.height=t},Object.defineProperties(J.prototype,Q);var tt;function et(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,tt||(tt=document.createElement("a")),tt.href=t,t=d.a.parse(tt.href);var r=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&r&&t.protocol===e.protocol?"":"anonymous"}function rt(t,e){var r=s.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):void 0!==e?e:1}var nt={};function it(t,e,r){if(void 0===r&&(r=3),!nt[e]){var n=(new Error).stack;"undefined"===typeof n?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(n=n.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(n))),nt[e]=!0}}
/*!
 * @pixi/math - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ot=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e};ot.prototype.clone=function(){return new ot(this.x,this.y)},ot.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},ot.prototype.copyTo=function(t){return t.set(this.x,this.y),t},ot.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},ot.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)};var at=function(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=0),this._x=r,this._y=n,this.cb=t,this.scope=e},st={x:{configurable:!0},y:{configurable:!0}};at.prototype.clone=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=t||this.cb,n=e||this.scope;return new at(r,n,this._x,this._y)},at.prototype.set=function(t,e){var r=t||0,n=e||(0!==e?r:0);this._x===r&&this._y===n||(this._x=r,this._y=n,this.cb.call(this.scope))},at.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},at.prototype.copyTo=function(t){return t.set(this._x,this._y),t},at.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},st.x.get=function(){return this._x},st.x.set=function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},st.y.get=function(){return this._y},st.y.set=function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},Object.defineProperties(at.prototype,st);var ut=2*Math.PI,lt=180/Math.PI,ht=Math.PI/180,ct={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},ft=function(t,e,r,n,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=0),this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o,this.array=null},dt={IDENTITY:{configurable:!0},TEMP_MATRIX:{configurable:!0}};ft.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},ft.prototype.set=function(t,e,r,n,i,o){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o,this},ft.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},ft.prototype.apply=function(t,e){e=e||new ot;var r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e},ft.prototype.applyInverse=function(t,e){e=e||new ot;var r=1/(this.a*this.d+this.c*-this.b),n=t.x,i=t.y;return e.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e},ft.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},ft.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},ft.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,o=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},ft.prototype.append=function(t){var e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this},ft.prototype.setTransform=function(t,e,r,n,i,o,a,s,u){return this.a=Math.cos(a+u)*i,this.b=Math.sin(a+u)*i,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=t-(r*this.a+n*this.c),this.ty=e-(r*this.b+n*this.d),this},ft.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},ft.prototype.decompose=function(t){var e=this.a,r=this.b,n=this.c,i=this.d,o=-Math.atan2(-n,i),a=Math.atan2(r,e),s=Math.abs(o+a);return s<1e-5||Math.abs(ut-s)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+i*i),t.position.x=this.tx,t.position.y=this.ty,t},ft.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,o=t*n-e*r;return this.a=n/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(t*this.ty-e*i)/o,this},ft.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},ft.prototype.clone=function(){var t=new ft;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},ft.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},ft.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},dt.IDENTITY.get=function(){return new ft},dt.TEMP_MATRIX.get=function(){return new ft},Object.defineProperties(ft,dt);var pt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],gt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],mt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],yt=[],bt=[],wt=Math.sign;function xt(){for(var t=0;t<16;t++){var e=[];yt.push(e);for(var r=0;r<16;r++)for(var n=wt(pt[t]*pt[r]+vt[t]*gt[r]),i=wt(gt[t]*pt[r]+mt[t]*gt[r]),o=wt(pt[t]*vt[r]+vt[t]*mt[r]),a=wt(gt[t]*vt[r]+mt[t]*mt[r]),s=0;s<16;s++)if(pt[s]===n&&gt[s]===i&&vt[s]===o&&mt[s]===a){e.push(s);break}}for(var u=0;u<16;u++){var l=new ft;l.set(pt[u],gt[u],vt[u],mt[u],0,0),bt.push(l)}}xt();var _t={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return pt[t]},uY:function(t){return gt[t]},vX:function(t){return vt[t]},vY:function(t){return mt[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return yt[t][e]},sub:function(t,e){return yt[t][_t.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2===(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?_t.S:_t.N:2*Math.abs(e)<=Math.abs(t)?t>0?_t.E:_t.W:e>0?t>0?_t.SE:_t.SW:t>0?_t.NE:_t.NW},matrixAppendRotationInv:function(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=bt[_t.inv(e)];i.tx=r,i.ty=n,t.append(i)}},Et=function(){this.worldTransform=new ft,this.localTransform=new ft,this.position=new at(this.onChange,this,0,0),this.scale=new at(this.onChange,this,1,1),this.pivot=new at(this.onChange,this,0,0),this.skew=new at(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0},St={rotation:{configurable:!0}};Et.prototype.onChange=function(){this._localID++},Et.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},Et.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},Et.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}},Et.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},St.rotation.get=function(){return this._rotation},St.rotation.set=function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},Object.defineProperties(Et.prototype,St),Et.IDENTITY=new Et;var Ot=function(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(n),this.type=ct.RECT},Tt={left:{configurable:!0},right:{configurable:!0},top:{configurable:!0},bottom:{configurable:!0}},At={EMPTY:{configurable:!0}};Tt.left.get=function(){return this.x},Tt.right.get=function(){return this.x+this.width},Tt.top.get=function(){return this.y},Tt.bottom.get=function(){return this.y+this.height},At.EMPTY.get=function(){return new Ot(0,0,0,0)},Ot.prototype.clone=function(){return new Ot(this.x,this.y,this.width,this.height)},Ot.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},Ot.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},Ot.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},Ot.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},Ot.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);this.x=e,this.width=Math.max(r-e,0),this.y=n,this.height=Math.max(i-n,0)},Ot.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=n-this.y},Ot.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=r-e,this.y=n,this.height=i-n},Object.defineProperties(Ot.prototype,Tt),Object.defineProperties(Ot,At);var Pt=function(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.x=t,this.y=e,this.radius=r,this.type=ct.CIRC};Pt.prototype.clone=function(){return new Pt(this.x,this.y,this.radius)},Pt.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-t,i=this.y-e;return n*=n,i*=i,n+i<=r},Pt.prototype.getBounds=function(){return new Ot(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)};var Ct=function(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=r,this.height=n,this.type=ct.ELIP};Ct.prototype.clone=function(){return new Ct(this.x,this.y,this.width,this.height)},Ct.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,n=(e-this.y)/this.height;return r*=r,n*=n,r+n<=1},Ct.prototype.getBounds=function(){return new Ot(this.x-this.width,this.y-this.height,this.width,this.height)};var Mt=function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];if(Array.isArray(t[0])&&(t=t[0]),t[0]instanceof ot){for(var r=[],n=0,i=t.length;n<i;n++)r.push(t[n].x,t[n].y);t=r}this.points=t,this.type=ct.POLY,this.closeStroke=!0};Mt.prototype.clone=function(){var t=new Mt(this.points.slice());return t.closeStroke=this.closeStroke,t},Mt.prototype.contains=function(t,e){for(var r=!1,n=this.points.length/2,i=0,o=n-1;i<n;o=i++){var a=this.points[2*i],s=this.points[2*i+1],u=this.points[2*o],l=this.points[2*o+1],h=s>e!==l>e&&t<(e-s)/(l-s)*(u-a)+a;h&&(r=!r)}return r};var It=function(t,e,r,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=20),this.x=t,this.y=e,this.width=r,this.height=n,this.radius=i,this.type=ct.RREC};It.prototype.clone=function(){return new It(this.x,this.y,this.width,this.height,this.radius)},It.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),n=e-(this.y+this.radius),i=this.radius*this.radius;if(r*r+n*n<=i)return!0;if(r=t-(this.x+this.width-this.radius),r*r+n*n<=i)return!0;if(n=e-(this.y+this.height-this.radius),r*r+n*n<=i)return!0;if(r=t-(this.x+this.radius),r*r+n*n<=i)return!0}return!1},
/*!
 * @pixi/display - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
s.SORTABLE_CHILDREN=!1;var kt=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null};kt.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},kt.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},kt.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Ot.EMPTY:(t=t||new Ot(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},kt.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},kt.prototype.addQuad=function(t){var e=this.minX,r=this.minY,n=this.maxX,i=this.maxY,o=t[0],a=t[1];e=o<e?o:e,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,o=t[2],a=t[3],e=o<e?o:e,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,o=t[4],a=t[5],e=o<e?o:e,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,o=t[6],a=t[7],e=o<e?o:e,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,this.minX=e,this.minY=r,this.maxX=n,this.maxY=i},kt.prototype.addFrame=function(t,e,r,n,i){var o=t.worldTransform,a=o.a,s=o.b,u=o.c,l=o.d,h=o.tx,c=o.ty,f=this.minX,d=this.minY,p=this.maxX,g=this.maxY,v=a*e+u*r+h,m=s*e+l*r+c;f=v<f?v:f,d=m<d?m:d,p=v>p?v:p,g=m>g?m:g,v=a*n+u*r+h,m=s*n+l*r+c,f=v<f?v:f,d=m<d?m:d,p=v>p?v:p,g=m>g?m:g,v=a*e+u*i+h,m=s*e+l*i+c,f=v<f?v:f,d=m<d?m:d,p=v>p?v:p,g=m>g?m:g,v=a*n+u*i+h,m=s*n+l*i+c,f=v<f?v:f,d=m<d?m:d,p=v>p?v:p,g=m>g?m:g,this.minX=f,this.minY=d,this.maxX=p,this.maxY=g},kt.prototype.addVertexData=function(t,e,r){for(var n=this.minX,i=this.minY,o=this.maxX,a=this.maxY,s=e;s<r;s+=2){var u=t[s],l=t[s+1];n=u<n?u:n,i=l<i?l:i,o=u>o?u:o,a=l>a?l:a}this.minX=n,this.minY=i,this.maxX=o,this.maxY=a},kt.prototype.addVertices=function(t,e,r,n){for(var i=t.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,l=i.tx,h=i.ty,c=this.minX,f=this.minY,d=this.maxX,p=this.maxY,g=r;g<n;g+=2){var v=e[g],m=e[g+1],y=o*v+s*m+l,b=u*m+a*v+h;c=y<c?y:c,f=b<f?b:f,d=y>d?y:d,p=b>p?b:p}this.minX=c,this.minY=f,this.maxX=d,this.maxY=p},kt.prototype.addBounds=function(t){var e=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>i?t.maxY:i},kt.prototype.addBoundsMask=function(t,e){var r=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=i&&n<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=r<a?r:a,this.minY=n<s?n:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},kt.prototype.addBoundsArea=function(t,e){var r=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=i&&n<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=r<a?r:a,this.minY=n<s?n:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}};var Dt=function(t){function e(){t.call(this),this.tempDisplayObjectParent=null,this.transform=new Et,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new kt,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._destroyed=!1,this.isSprite=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={_tempDisplayObjectParent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},worldTransform:{configurable:!0},localTransform:{configurable:!0},position:{configurable:!0},scale:{configurable:!0},pivot:{configurable:!0},skew:{configurable:!0},rotation:{configurable:!0},angle:{configurable:!0},zIndex:{configurable:!0},worldVisible:{configurable:!0},mask:{configurable:!0}};return e.mixin=function(t){for(var r=Object.keys(t),n=0;n<r.length;++n){var i=r[n];Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},r._tempDisplayObjectParent.get=function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent},e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&(this.calculateBounds(),this._lastBoundsID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Ot),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new Ot),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=r,this.transform=e,n},e.prototype.toGlobal=function(t,e,r){return void 0===r&&(r=!1),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,r,n){return e&&(t=e.toGlobal(t,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},e.prototype.render=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,r,n,i,o,a,s,u){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=1),void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=u,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},r.x.get=function(){return this.position.x},r.x.set=function(t){this.transform.position.x=t},r.y.get=function(){return this.position.y},r.y.set=function(t){this.transform.position.y=t},r.worldTransform.get=function(){return this.transform.worldTransform},r.localTransform.get=function(){return this.transform.localTransform},r.position.get=function(){return this.transform.position},r.position.set=function(t){this.transform.position.copyFrom(t)},r.scale.get=function(){return this.transform.scale},r.scale.set=function(t){this.transform.scale.copyFrom(t)},r.pivot.get=function(){return this.transform.pivot},r.pivot.set=function(t){this.transform.pivot.copyFrom(t)},r.skew.get=function(){return this.transform.skew},r.skew.set=function(t){this.transform.skew.copyFrom(t)},r.rotation.get=function(){return this.transform.rotation},r.rotation.set=function(t){this.transform.rotation=t},r.angle.get=function(){return this.transform.rotation*lt},r.angle.set=function(t){this.transform.rotation=t*ht},r.zIndex.get=function(){return this._zIndex},r.zIndex.set=function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},r.worldVisible.get=function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},r.mask.get=function(){return this._mask},r.mask.set=function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)},Object.defineProperties(e.prototype,r),e}(l.a);function Rt(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}Dt.prototype.displayObjectUpdateTransform=Dt.prototype.updateTransform;var jt=function(t){function e(){t.call(this),this.children=[],this.sortableChildren=s.SORTABLE_CHILDREN,this.sortDirty=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={width:{configurable:!0},height:{configurable:!0}};return e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments,r=arguments.length;if(r>1)for(var n=0;n<r;n++)this.addChild(e[n]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t,this.onChildrenChange(r<n?r:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);z(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments,r=arguments.length;if(r>1)for(var n=0;n<r;n++)this.removeChild(e[n]);else{var i=this.children.indexOf(t);if(-1===i)return null;t.parent=null,t.transform._parentID=-1,z(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this),this.emit("childRemoved",t,this,i)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,z(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0);var r,n=t,i="number"===typeof e?e:this.children.length,o=i-n;if(o>0&&o<=i){r=this.children.splice(n,o);for(var a=0;a<r.length;++a)r[a].parent=null,r[a].transform&&(r[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var s=0;s<r.length;++s)r[s].emit("removed",this),this.emit("childRemoved",r[s],this,s);return r}if(0===o&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var n=this.children[e];n._lastSortedIndex=e,t||0===n.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(Rt),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);for(var i=0,o=this.children.length;i<o;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var r="boolean"===typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(r)for(var i=0;i<n.length;++i)n[i].destroy(e)},r.width.get=function(){return this.scale.x*this.getLocalBounds().width},r.width.set=function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},r.height.get=function(){return this.scale.y*this.getLocalBounds().height},r.height.set=function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},Object.defineProperties(e.prototype,r),e}(Dt);jt.prototype.containerUpdateTransform=jt.prototype.updateTransform;
/*!
 * @pixi/accessibility - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Lt={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1};Dt.mixin(Lt);var Bt=9,Nt=100,Ft=0,Ut=0,zt=2,Vt=1,Xt=-1e3,Yt=-1e3,Ht=2,Gt=function(t){this._hookDiv=null,(i.a.tablet||i.a.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width=Nt+"px",e.style.height=Nt+"px",e.style.position="absolute",e.style.top=Ft+"px",e.style.left=Ut+"px",e.style.zIndex=zt,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessibility=!1,window.addEventListener("keydown",this._onKeyDown,!1)};Gt.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width=Vt+"px",e.style.height=Vt+"px",e.style.position="absolute",e.style.top=Xt+"px",e.style.left=Yt+"px",e.style.zIndex=Ht,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",(function(){t.isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},Gt.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},Gt.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},Gt.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessibility&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},Gt.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,r=0;r<e.length;r++)this.updateAccessibleObjects(e[r])}},Gt.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,r=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var i=0;i<this.children.length;i++){var o=this.children[i];if(o.renderId!==this.renderId)o._accessibleActive=!1,z(this.children,i,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,i--,0===this.children.length&&this.deactivate();else{n=o._accessibleDiv;var a=o.hitArea,s=o.worldTransform;o.hitArea?(n.style.left=(s.tx+a.x*s.a)*e+"px",n.style.top=(s.ty+a.y*s.d)*r+"px",n.style.width=a.width*s.a*e+"px",n.style.height=a.height*s.d*r+"px"):(a=o.getBounds(),this.capHitArea(a),n.style.left=a.x*e+"px",n.style.top=a.y*r+"px",n.style.width=a.width*e+"px",n.style.height=a.height*r+"px",n.title!==o.accessibleTitle&&null!==o.accessibleTitle&&(n.title=o.accessibleTitle),n.getAttribute("aria-label")!==o.accessibleHint&&null!==o.accessibleHint&&n.setAttribute("aria-label",o.accessibleHint))}}this.renderId++}},Gt.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},Gt.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=Nt+"px",e.style.height=Nt+"px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=zt,e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},Gt.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},Gt.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},Gt.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},Gt.prototype._onKeyDown=function(t){t.keyCode===Bt&&this.activate()},Gt.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},Gt.prototype.destroy=function(){this.destroyTouchHook(),this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null};
/*!
 * @pixi/runner - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var qt=function(t){this.items=[],this._name=t,this._aliasCount=0},Wt={empty:{configurable:!0},name:{configurable:!0}};qt.prototype.emit=function(t,e,r,n,i,o,a,s){if(arguments.length>8)throw new Error("max arguments reached");var u=this,l=u.name,h=u.items;this._aliasCount++;for(var c=0,f=h.length;c<f;c++)h[c][l](t,e,r,n,i,o,a,s);return h===this.items&&this._aliasCount--,this},qt.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},qt.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},qt.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},qt.prototype.contains=function(t){return-1!==this.items.indexOf(t)},qt.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},qt.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Wt.empty.get=function(){return 0===this.items.length},Wt.name.get=function(){return this._name},Object.defineProperties(qt.prototype,Wt),qt.prototype.dispatch=qt.prototype.emit,qt.prototype.run=qt.prototype.emit,
/*!
 * @pixi/ticker - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
s.TARGET_FPMS=.06;var Kt={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50},$t=function(t,e,r,n){void 0===e&&(e=null),void 0===r&&(r=0),void 0===n&&(n=!1),this.fn=t,this.context=e,this.priority=r,this.once=n,this.next=null,this.previous=null,this._destroyed=!1};$t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},$t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},$t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},$t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e};var Zt=function(){var t=this;this._head=new $t(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/s.TARGET_FPMS,this.elapsedMS=1/s.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}},Jt={FPS:{configurable:!0},minFPS:{configurable:!0},maxFPS:{configurable:!0}},Qt={shared:{configurable:!0},system:{configurable:!0}};Zt.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},Zt.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Zt.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Zt.prototype.add=function(t,e,r){return void 0===r&&(r=Kt.NORMAL),this._addListener(new $t(t,e,r))},Zt.prototype.addOnce=function(t,e,r){return void 0===r&&(r=Kt.NORMAL),this._addListener(new $t(t,e,r,!0))},Zt.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){while(e){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},Zt.prototype.remove=function(t,e){var r=this._head.next;while(r)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Zt.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Zt.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Zt.prototype.destroy=function(){if(!this._protected){this.stop();var t=this._head.next;while(t)t=t.destroy(!0);this._head.destroy(),this._head=null}},Zt.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var r=t-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=t-r%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*s.TARGET_FPMS;var n=this._head,i=n.next;while(i)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Jt.FPS.get=function(){return 1e3/this.elapsedMS},Jt.minFPS.get=function(){return 1e3/this._maxElapsedMS},Jt.minFPS.set=function(t){var e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,s.TARGET_FPMS);this._maxElapsedMS=1/r},Jt.maxFPS.get=function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},Jt.maxFPS.set=function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},Qt.shared.get=function(){if(!Zt._shared){var t=Zt._shared=new Zt;t.autoStart=!0,t._protected=!0}return Zt._shared},Qt.system.get=function(){if(!Zt._system){var t=Zt._system=new Zt;t.autoStart=!0,t._protected=!0}return Zt._system},Object.defineProperties(Zt.prototype,Jt),Object.defineProperties(Zt,Qt);var te=function(){};te.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Kt.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Zt.shared:new Zt,t.autoStart&&this.start()},te.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}};
/*!
 * @pixi/core - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var ee=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new qt("setRealSize",2),this.onUpdate=new qt("update"),this.onError=new qt("onError",1)},re={valid:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};ee.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.run(this._width,this._height)},ee.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},ee.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.run(t,e))},re.valid.get=function(){return!!this._width&&!!this._height},ee.prototype.update=function(){this.destroyed||this.onUpdate.run()},ee.prototype.load=function(){return Promise.resolve()},re.width.get=function(){return this._width},re.height.get=function(){return this._height},ee.prototype.upload=function(t,e,r){return!1},ee.prototype.style=function(t,e,r){return!1},ee.prototype.dispose=function(){},ee.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Object.defineProperties(ee.prototype,re);var ne=function(t){function e(e){var r=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;t.call(this,r,n),this.source=e,this.noSubImage=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=et(e):!1!==r&&(t.crossOrigin="string"===typeof r?r:"anonymous")},e.prototype.upload=function(t,e,r,n){var i=t.gl,o=e.realWidth,a=e.realHeight;return n=n||this.source,i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),this.noSubImage||e.target!==i.TEXTURE_2D||r.width!==o||r.height!==a?(r.width=o,r.height=a,i.texImage2D(e.target,0,e.format,e.format,e.type,n)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,e.type,n),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source.naturalWidth||this.source.videoWidth||this.source.width,r=this.source.naturalHeight||this.source.videoHeight||this.source.height;this.resize(e,r),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(ee),ie=function(t){function e(e,r){if(r=r||{},!(e instanceof HTMLImageElement)){var n=new Image;t.crossOrigin(n,e,r.crossorigin),n.src=e,e=n}t.call(this,e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(void 0!==r.createBitmap?r.createBitmap:s.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,this.premultiplyAlpha=!1!==r.premultiplyAlpha,this.bitmap=null,this._load=null,!1!==r.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(t){var e=this;return void 0!==t&&(this.createBitmap=t),this._load||(this._load=new Promise((function(t){e.url=e.source.src;var r=e,n=r.source,i=function(){e.destroyed||(n.onload=null,n.onerror=null,e.resize(n.width,n.height),e._load=null,e.createBitmap?t(e.process()):t(e))};n.complete&&n.src?i():(n.onload=i,n.onerror=function(t){return e.onError.run(t)})}))),this._load},e.prototype.process=function(){var t=this;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(this.source,0,0,this.source.width,this.source.height,{premultiplyAlpha:this.premultiplyAlpha?"premultiply":"none"}).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process):Promise.resolve(this)},e.prototype.upload=function(e,r,n){if(r.premultiplyAlpha=this.premultiplyAlpha,!this.createBitmap)return t.prototype.upload.call(this,e,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,r,n,this.bitmap),!this.preserveBitmap){var i=!0;for(var o in r._glTextures){var a=r._glTextures[o];if(a!==n&&a.dirtyId!==r.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e}(ne),oe=[];function ae(t,e){if(!t)return null;var r="";if("string"===typeof t){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(r=n[1].toLowerCase())}for(var i=oe.length-1;i>=0;--i){var o=oe[i];if(o.test&&o.test(t,r))return new o(t,e)}return new ie(t,e)}var se=function(t){function e(e,r){var n=r||{},i=n.width,o=n.height;if(!i||!o)throw new Error("BufferResource width or height invalid");t.call(this,i,o),this.data=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.upload=function(t,e,r){var n=t.gl;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),r.width===e.width&&r.height===e.height?n.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(r.width=e.width,r.height=e.height,n.texImage2D(e.target,0,r.internalFormat,e.width,e.height,0,e.format,r.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(ee),ue={scaleMode:x.NEAREST,format:y.RGBA,premultiplyAlpha:!1},le=function(t){function e(e,r){void 0===e&&(e=null),void 0===r&&(r=null),t.call(this),r=r||{};var n=r.premultiplyAlpha,i=r.mipmap,o=r.anisotropicLevel,a=r.scaleMode,u=r.width,l=r.height,h=r.wrapMode,c=r.format,f=r.type,d=r.target,p=r.resolution,g=r.resourceOptions;!e||e instanceof ee||(e=ae(e,g),e.internal=!0),this.width=u||0,this.height=l||0,this.resolution=p||s.RESOLUTION,this.mipmap=void 0!==i?i:s.MIPMAP_TEXTURES,this.anisotropicLevel=void 0!==o?o:s.ANISOTROPIC_LEVEL,this.wrapMode=h||s.WRAP_MODE,this.scaleMode=void 0!==a?a:s.SCALE_MODE,this.format=c||y.RGBA,this.type=f||w.UNSIGNED_BYTE,this.target=d||b.TEXTURE_2D,this.premultiplyAlpha=!1!==n,this.uid=X(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=u>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this.setResource(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={realWidth:{configurable:!0},realHeight:{configurable:!0}};return r.realWidth.get=function(){return Math.ceil(this.width*this.resolution-1e-4)},r.realHeight.get=function(){return Math.ceil(this.height*this.resolution-1e-4)},e.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=G(this.realWidth)&&G(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete $[this.cacheId],delete K[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.from=function(t,r){var n=null;"string"===typeof t?n=t:(t._pixiId||(t._pixiId="pixiid_"+X()),n=t._pixiId);var i=$[n];return i||(i=new e(t,r),i.cacheId=n,e.addToCache(i,n)),i},e.fromBuffer=function(t,r,n,i){t=t||new Float32Array(r*n*4);var o=new se(t,{width:r,height:n}),a=t instanceof Float32Array?w.FLOAT:w.UNSIGNED_BYTE;return new e(o,Object.assign(ue,i||{width:r,height:n,type:a}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),$[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),$[e]=t)},e.removeFromCache=function(t){if("string"===typeof t){var e=$[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete $[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete $[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},Object.defineProperties(e.prototype,r),e}(l.a);le._globalBatch=0;var he=function(t){function e(e,r){var n;r=r||{};var i=e;Array.isArray(e)&&(n=e,i=e.length),t.call(this,r.width,r.height),this.items=[],this.itemDirtyIds=[];for(var o=0;o<i;o++){var a=new le;this.items.push(a),this.itemDirtyIds.push(-1)}if(this.length=i,this._load=null,n)for(var s=0;s<i;s++)this.addResourceAt(ae(n[s],r),s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){var r=this.items[e];if(!r)throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=b.TEXTURE_2D_ARRAY;for(var r=0;r<this.length;r++)this.items[r].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var r=0;r<this.length;r++)this.items[r].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})),r=e.map((function(t){return t.load()}));return this._load=Promise.all(r).then((function(){var r=e[0],n=r.width,i=r.height;return t.resize(n,i),Promise.resolve(t)})),this._load},e.prototype.upload=function(t,e,r){var n=this,i=n.length,o=n.itemDirtyIds,a=n.items,s=t.gl;r.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var u=0;u<i;u++){var l=a[u];o[u]<l.dirtyId&&(o[u]=l.dirtyId,l.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,u,l.resource.width,l.resource.height,1,e.format,e.type,l.resource.source))}return!0},e}(ee),ce=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},e}(ne),fe=function(t){function e(r,n){if(n=n||{},t.call(this,r,n),this.length!==e.SIDES)throw new Error("Invalid length. Got "+this.length+", expected 6");for(var i=0;i<e.SIDES;i++)this.items[i].target=b.TEXTURE_CUBE_MAP_POSITIVE_X+i;!1!==n.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=b.TEXTURE_CUBE_MAP},e.prototype.upload=function(t,r,n){for(var i=this.itemDirtyIds,o=0;o<e.SIDES;o++){var a=this.items[o];i[o]<a.dirtyId&&(i[o]=a.dirtyId,a.valid&&a.resource.upload(t,a,n))}return!0},e}(he);fe.SIDES=6;var de=function(t){function e(e,r){r=r||{},t.call(this,document.createElement("canvas")),this._width=0,this._height=0,this.svg=e,this.scale=r.scale||1,this._overrideWidth=r.width,this._overrideHeight=r.height,this._resolve=null,this._crossorigin=r.crossorigin,this._load=null,!1!==r.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var e=this,r=new Image;t.crossOrigin(r,this.svg,this._crossorigin),r.src=this.svg,r.onerror=function(t){r.onerror=null,e.onError.run(t)},r.onload=function(){var t=r.width,n=r.height;if(!t||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=t*e.scale,o=n*e.scale;(e._overrideWidth||e._overrideHeight)&&(i=e._overrideWidth||e._overrideHeight/n*t,o=e._overrideHeight||e._overrideWidth/t*n),i=Math.round(i),o=Math.round(o);var a=e.source;a.width=i,a.height=o,a._pixiId="canvas_"+X(),a.getContext("2d").drawImage(r,0,0,t,n,0,0,i,o),e._resolve(),e._resolve=null}},e.getSize=function(t){var r=e.SVG_SIZE.exec(t),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,e){return"svg"===e||"string"===typeof t&&0===t.indexOf("data:image/svg+xml;base64")||"string"===typeof t&&0===t.indexOf("<svg")},e}(ne);de.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var pe=function(t){function e(e,r){if(r=r||{},!(e instanceof HTMLVideoElement)){var n=document.createElement("video");n.setAttribute("preload","auto"),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),"string"===typeof e&&(e=[e]),t.crossOrigin(n,e[0].src||e[0],r.crossorigin);for(var i=0;i<e.length;++i){var o=document.createElement("source"),a=e[i],s=a.src,u=a.mime;s=s||e[i];var l=s.split("?").shift().toLowerCase(),h=l.substr(l.lastIndexOf(".")+1);u=u||"video/"+h,o.src=s,o.type=u,n.appendChild(o)}e=n}t.call(this,e),this.noSubImage=!0,this._autoUpdate=!0,this._isAutoUpdating=!1,this._updateFPS=r.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==r.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==r.autoLoad&&this.load()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={autoUpdate:{configurable:!0},updateFPS:{configurable:!0}};return e.prototype.update=function(e){if(void 0===e&&(e=0),!this.destroyed){var r=Zt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this,e),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(r){t.valid?r(t):(t._resolve=r,e.load())})),this._load},e.prototype._onError=function(){this.source.removeEventListener("error",this._onError,!0),this.onError.run(event)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(Zt.shared.add(this.update,this),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(Zt.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){var t=this,e=t.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var r=this.valid;this.resize(e.videoWidth,e.videoHeight),!r&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},e.prototype.dispose=function(){this._isAutoUpdating&&Zt.shared.remove(this.update,this),this.source&&(this.source.removeEventListener("error",this._onError,!0),this.source.pause(),this.source.src="",this.source.load()),t.prototype.dispose.call(this)},r.autoUpdate.get=function(){return this._autoUpdate},r.autoUpdate.set=function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(Zt.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(Zt.shared.add(this.update,this),this._isAutoUpdating=!0))},r.updateFPS.get=function(){return this._updateFPS},r.updateFPS.set=function(t){t!==this._updateFPS&&(this._updateFPS=t)},e.test=function(t,r){return t instanceof HTMLVideoElement||e.TYPES.indexOf(r)>-1},Object.defineProperties(e.prototype,r),e}(ne);pe.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];var ge=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},e}(ne);oe.push(ie,ge,ce,pe,de,se,fe,he);var ve={INSTALLED:oe,autoDetectResource:ae,ArrayResource:he,BufferResource:se,CanvasResource:ce,CubeResource:fe,ImageResource:ie,ImageBitmapResource:ge,SVGResource:de,VideoResource:pe,Resource:ee,BaseImageResource:ne},me=function(t){this.renderer=t};me.prototype.destroy=function(){this.renderer=null};var ye=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.upload=function(t,e,r){var n=t.gl;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),r.width===e.width&&r.height===e.height?n.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(r.width=e.width,r.height=e.height,n.texImage2D(e.target,0,n.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},e}(se),be=function(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new qt("disposeFramebuffer",2)},we={colorTexture:{configurable:!0}};we.colorTexture.get=function(){return this.colorTextures[0]},be.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new le(null,{scaleMode:0,resolution:1,mipmap:!1,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},be.prototype.addDepthTexture=function(t){return this.depthTexture=t||new le(new ye(null,{width:this.width,height:this.height}),{scaleMode:0,resolution:1,width:this.width,height:this.height,mipmap:!1,format:y.DEPTH_COMPONENT,type:w.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},be.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},be.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},be.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var n=this.colorTextures[r],i=n.resolution;n.setSize(t/i,e/i)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(t/o,e/o)}}},be.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Object.defineProperties(be.prototype,we);var xe=function(t){function e(e){if("number"===typeof e){var r=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];e={width:r,height:n,scaleMode:i,resolution:o}}t.call(this,null,e);var a=e||{},s=a.width,u=a.height;this.mipmap=!1,this.width=Math.ceil(s)||100,this.height=Math.ceil(u)||100,this.valid=!0,this._canvasRenderTarget=null,this.clearColor=[0,0,0,0],this.framebuffer=new be(this.width*this.resolution,this.height*this.resolution).addColorTexture(0,this),this.stencilMaskStack=[],this.filterStack=[{}]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.framebuffer=null},e}(le),_e=function(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)};_e.prototype.set=function(t,e,r){var n=e.width,i=e.height;if(r){var o=t.width/2/n,a=t.height/2/i,s=t.x/n+o,u=t.y/i+a;r=_t.add(r,_t.NW),this.x0=s+o*_t.uX(r),this.y0=u+a*_t.uY(r),r=_t.add(r,2),this.x1=s+o*_t.uX(r),this.y1=u+a*_t.uY(r),r=_t.add(r,2),this.x2=s+o*_t.uX(r),this.y2=u+a*_t.uY(r),r=_t.add(r,2),this.x3=s+o*_t.uX(r),this.y3=u+a*_t.uY(r)}else this.x0=t.x/n,this.y0=t.y/i,this.x1=(t.x+t.width)/n,this.y1=t.y/i,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/i,this.x3=t.x/n,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3};var Ee=new _e,Se=function(t){function e(r,n,i,o,a,s){if(t.call(this),this.noFrame=!1,n||(this.noFrame=!0,n=new Ot(0,0,1,1)),r instanceof e&&(r=r.baseTexture),this.baseTexture=r,this._frame=n,this.trim=o,this.valid=!1,this.requiresUpdate=!1,this._uvs=Ee,this.uvMatrix=null,this.orig=i||n,this._rotate=Number(a||0),!0===a)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=s?new ot(s.x,s.y):new ot(0,0),this._updateID=0,this.textureCacheIds=[],r.valid?this.noFrame?r.valid&&this.onBaseTextureUpdated(r):this.frame=n:r.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&r.on("update",this.onBaseTextureUpdated,this)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={resolution:{configurable:!0},frame:{configurable:!0},rotate:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var r=this.baseTexture,n=r.resource;n&&K[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},e.prototype.updateUvs=function(){this._uvs===Ee&&(this._uvs=new _e),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,r){void 0===r&&(r={});var n=null;"string"===typeof t?n=t:(t._pixiId||(t._pixiId="pixiid_"+X()),n=t._pixiId);var i=K[n];return i||(r.resolution||(r.resolution=rt(t)),i=new e(new le(t,r)),i.baseTexture.cacheId=n,le.addToCache(i.baseTexture,n),e.addToCache(i,n)),i},e.fromBuffer=function(t,r,n,i){return new e(le.fromBuffer(t,r,n,i))},e.fromLoader=function(t,r,n){var i=new ie(t);i.url=r;var o=new le(i,{scaleMode:s.SCALE_MODE,resolution:rt(r)}),a=new e(o);return n||(n=r),le.addToCache(a.baseTexture,n),e.addToCache(a,n),n!==r&&(le.addToCache(a.baseTexture,r),e.addToCache(a,r)),a},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),K[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),K[e]=t)},e.removeFromCache=function(t){if("string"===typeof t){var e=K[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete K[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)K[t.textureCacheIds[n]]===t&&delete K[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},r.resolution.get=function(){return this.baseTexture.resolution},r.frame.get=function(){return this._frame},r.frame.set=function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,n=t.width,i=t.height,o=e+n>this.baseTexture.width,a=r+i>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",u="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,l="Y: "+r+" + "+i+" = "+(r+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+s+" "+l)}this.valid=n&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},r.rotate.get=function(){return this._rotate},r.rotate.set=function(t){this._rotate=t,this.valid&&this.updateUvs()},r.width.get=function(){return this.orig.width},r.height.get=function(){return this.orig.height},Object.defineProperties(e.prototype,r),e}(l.a);function Oe(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new Se(new le(new ce(t)))}function Te(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}Se.EMPTY=new Se(new le),Te(Se.EMPTY),Te(Se.EMPTY.baseTexture),Se.WHITE=Oe(),Te(Se.WHITE),Te(Se.WHITE.baseTexture);var Ae=function(t){function e(e,r){var n=null;if(!(e instanceof xe)){var i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4];console.warn("Please use RenderTexture.create("+i+", "+o+") instead of the ctor directly."),n=arguments[0],r=null,e=new xe({width:i,height:o,scaleMode:a,resolution:s})}t.call(this,e,r),this.legacyRenderer=n,this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},e.prototype.setResolution=function(t){var e=this,r=e.baseTexture;r.resolution!==t&&(r.setResolution(t),this.resize(r.width,r.height,!1))},e.create=function(t){return"number"===typeof t&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new e(new xe(t))},e}(Se),Pe=function(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0};Pe.prototype.createTexture=function(t,e){var r=new xe(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Ae(r)},Pe.prototype.getOptimalTexture=function(t,e,r){void 0===r&&(r=1);var n=Pe.SCREEN_KEY;t*=r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(t=H(t),e=H(e),n=(65535&t)<<16|65535&e),this.texturePool[n]||(this.texturePool[n]=[]);var i=this.texturePool[n].pop();return i||(i=this.createTexture(t,e)),i.filterPoolKey=n,i.setResolution(r),i},Pe.prototype.getFilterTexture=function(t,e){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution);return r.filterFrame=t.filterFrame,r},Pe.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},Pe.prototype.returnFilterTexture=function(t){this.returnTexture(t)},Pe.prototype.clear=function(t){if(t=!1!==t,t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var n=0;n<r.length;n++)r[n].destroy(!0)}this.texturePool={}},Pe.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=Pe.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=t.width>0&&t.height>0,r)for(var n=0;n<r.length;n++)r[n].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},Pe.SCREEN_KEY="screen";var Ce=function(t,e,r,n,i,o,a){void 0===r&&(r=!1),void 0===n&&(n=5126),this.buffer=t,this.size=e,this.normalized=r,this.type=n,this.stride=i,this.start=o,this.instance=a};Ce.prototype.destroy=function(){this.buffer=null},Ce.from=function(t,e,r,n,i){return new Ce(t,e,r,n,i)};var Me=0,Ie=function(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=Me++,this.disposeRunner=new qt("disposeBuffer",2)};function ke(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}Ie.prototype.update=function(t){this.data=t||this.data,this._updateID++},Ie.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Ie.prototype.destroy=function(){this.dispose(),this.data=null},Ie.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new Ie(t)};var De={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function Re(t,e){for(var r=0,n=0,i={},o=0;o<t.length;o++)n+=e[o],r+=t[o].length;for(var a=new ArrayBuffer(4*r),s=null,u=0,l=0;l<t.length;l++){var h=e[l],c=t[l],f=ke(c);i[f]||(i[f]=new De[f](a)),s=i[f];for(var d=0;d<c.length;d++){var p=(d/h|0)*n+u,g=d%h;s[p+g]=c[d]}u+=h}return new Float32Array(a)}var je={5126:4,5123:2,5121:1},Le=0,Be={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Ne=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Le++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new qt("disposeGeometry",2),this.refCount=0};Ne.prototype.addAttribute=function(t,e,r,n,i,o,a,s){if(void 0===n&&(n=!1),void 0===s&&(s=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e.data||(e instanceof Array&&(e=new Float32Array(e)),e=new Ie(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,r,n,i);return this}var h=this.buffers.indexOf(e);return-1===h&&(this.buffers.push(e),h=this.buffers.length-1),this.attributes[t]=new Ce(h,r,n,i,o,a,s),this.instanced=this.instanced||s,this},Ne.prototype.getAttribute=function(t){return this.attributes[t]},Ne.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},Ne.prototype.addIndex=function(t){return t.data||(t instanceof Array&&(t=new Uint16Array(t)),t=new Ie(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},Ne.prototype.getIndex=function(){return this.indexBuffer},Ne.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],n=new Ie;for(t in this.attributes){var i=this.attributes[t],o=this.buffers[i.buffer];e.push(o.data),r.push(i.size*je[i.type]/4),i.buffer=0}for(n.data=Re(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},Ne.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],r=this.buffers[e.buffer];return r.data.length/(e.stride/4||e.size)}return 0},Ne.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Ne.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer.destroy(),this.attributes=null},Ne.prototype.clone=function(){for(var t=new Ne,e=0;e<this.buffers.length;e++)t.buffers[e]=new Ie(this.buffers[e].data.slice());for(var r in this.attributes){var n=this.attributes[r];t.attributes[r]=new Ce(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},Ne.merge=function(t){for(var e,r=new Ne,n=[],i=[],o=[],a=0;a<t.length;a++){e=t[a];for(var s=0;s<e.buffers.length;s++)i[s]=i[s]||0,i[s]+=e.buffers[s].data.length,o[s]=0}for(var u=0;u<e.buffers.length;u++)n[u]=new(Be[ke(e.buffers[u].data)])(i[u]),r.buffers[u]=new Ie(n[u]);for(var l=0;l<t.length;l++){e=t[l];for(var h=0;h<e.buffers.length;h++)n[h].set(e.buffers[h].data,o[h]),o[h]+=e.buffers[h].data.length}if(r.attributes=e.attributes,e.indexBuffer){r.indexBuffer=r.buffers[e.buffers.indexOf(e.indexBuffer)],r.indexBuffer.index=!0;for(var c=0,f=0,d=0,p=0,g=0;g<e.buffers.length;g++)if(e.buffers[g]!==e.indexBuffer){p=g;break}for(var v in e.attributes){var m=e.attributes[v];(0|m.buffer)===p&&(f+=m.size*je[m.type]/4)}for(var y=0;y<t.length;y++){for(var b=t[y].indexBuffer.data,w=0;w<b.length;w++)r.indexBuffer.data[w+d]+=c;c+=e.buffers[p].data.length/f,d+=b.length}}return r};var Fe=function(t){function e(){t.call(this),this.addAttribute("aVertexPosition",[0,0,1,0,1,1,0,1]).addIndex([0,1,3,2])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ne),Ue=function(t){function e(){t.call(this),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Ie(this.vertices),this.uvBuffer=new Ie(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,e){var r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Ne),ze=0,Ve=function(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ze++,this.static=!!e};Ve.prototype.update=function(){this.dirtyId++},Ve.prototype.add=function(t,e,r){this.uniforms[t]=new Ve(e,r)},Ve.from=function(t,e){return new Ve(t,e)};var Xe=function(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new Ot,this.destinationFrame=new Ot,this.filters=[]};Xe.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null};var Ye=function(t){function e(e){t.call(this,e),this.defaultFilterStack=[{}],this.texturePool=new Pe,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new Fe,this.quadUv=new Ue,this.tempRect=new Ot,this.activeState={},this.globalUniforms=new Ve({outputFrame:this.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this._pixelsWidth=e.view.width,this._pixelsHeight=e.view.height}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e){for(var r=this.renderer,n=this.defaultFilterStack,i=this.statePool.pop()||new Xe,o=e[0].resolution,a=e[0].padding,s=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++){var h=e[l];o=Math.min(o,h.resolution),a=Math.max(a,h.padding),s=s||h.autoFit,u=u||h.legacy}1===n.length&&(this.defaultFilterStack[0].renderTexture=r.renderTexture.current),n.push(i),i.resolution=o,i.legacy=u,i.target=t,i.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),i.sourceFrame.pad(a),s&&i.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),i.sourceFrame.ceil(o),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,o),i.filters=e,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height,i.renderTexture.filterFrame=i.sourceFrame,r.renderTexture.bind(i.renderTexture,i.sourceFrame),r.renderTexture.clear()},e.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var i=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(i[0]=e.destinationFrame.width,i[1]=e.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=i[0]*e.resolution,o[1]=i[1]*e.resolution,o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*i[2]-.5*o[2],a[3]=e.sourceFrame.height*i[3]-.5*o[3],e.legacy){var s=n.filterArea;s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(1===r.length)r[0].apply(this,e.renderTexture,u.renderTexture,!1,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,h=this.getOptimalFilterTexture(l.width,l.height,e.resolution);h.filterFrame=l.filterFrame;var c=0;for(c=0;c<r.length-1;++c){r[c].apply(this,l,h,!0,e);var f=l;l=h,h=f}r[c].apply(this,l,u.renderTexture,!1,e),this.returnFilterTexture(l),this.returnFilterTexture(h)}e.clear(),this.statePool.push(e)},e.prototype.applyFilter=function(t,e,r,n){var i=this.renderer;i.renderTexture.bind(r,r?r.filterFrame:null),n&&i.renderTexture.clear(),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,i.state.set(t.state),i.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(m.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(m.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,n=r.sourceFrame,i=r.destinationFrame,o=e._texture,a=o.orig,s=t.set(i.width,0,0,i.height,n.x,n.y),u=e.worldTransform.copyTo(ft.TEMP_MATRIX);return u.invert(),s.prepend(u),s.scale(1/a.width,1/a.height),s.translate(e.anchor.x,e.anchor.y),s},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,e,r){return void 0===r&&(r=1),this.texturePool.getOptimalTexture(t,e,r)},e.prototype.getFilterTexture=function(t,e){if("number"===typeof t){var r=t;t=e,e=r}t=t||this.activeState.renderTexture;var n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return n.filterFrame=t.filterFrame,n},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e}(me),He=function(t){this.renderer=t};He.prototype.flush=function(){},He.prototype.destroy=function(){this.renderer=null},He.prototype.start=function(){},He.prototype.stop=function(){this.flush()},He.prototype.render=function(t){};var Ge=function(t){function e(e){t.call(this,e),this.emptyRenderer=new He(e),this.currentRenderer=this.emptyRenderer}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e}(me);s.PREFER_ENV=i.a.any?p.WEBGL:p.WEBGL2;var qe=0,We=function(t){function e(e){t.call(this,e),this.webGLVersion=1,this.extensions={},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={isLost:{configurable:!0}};return r.isLost.get=function(){return!this.gl||this.gl.isContextLost()},e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=qe++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=qe++,this.renderer.runners.contextChange.run(t)},e.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},e.prototype.createContext=function(t,e){var r;if(s.PREFER_ENV>=p.WEBGL2&&(r=t.getContext("webgl2",e)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),r},e.prototype.getExtensions=function(){var t=this,e=t.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBKIT_WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:e.getExtension("EXT_color_buffer_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.run(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.gl.flush()},e.prototype.validateContext=function(t){var e=t.getContextAttributes();e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")},Object.defineProperties(e.prototype,r),e}(me),Ke=function(t){function e(e){t.call(this,e),this.managedFramebuffers=[],this.unknownFramebuffer=new be(10,10)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={size:{configurable:!0}};return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ot,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;s.PREFER_ENV===p.WEBGL_LEGACY&&(e=null,r=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}},e.prototype.bind=function(t,e){var r=this,n=r.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++)t.colorTextures[o].texturePart?this.renderer.texture.unbind(t.colorTextures[o].texture):this.renderer.texture.unbind(t.colorTextures[o]);t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,e,r,n){var i=this.viewport;i.width===r&&i.height===n&&i.x===t&&i.y===e||(i.x=t,i.y=e,i.width=r,i.height=n,this.gl.viewport(t,e,r,n))},r.size.get=function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},e.prototype.clear=function(t,e,r,n){var i=this,o=i.gl;o.clearColor(t,e,r,n),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT)},e.prototype.initFramebuffer=function(t){var e=this,r=e.gl,n={framebuffer:r.createFramebuffer(),stencil:null,dirtyId:0,dirtyFormat:0,dirtySize:0};return t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},e.prototype.resizeFramebuffer=function(t){var e=this,r=e.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,o=0;o<i.length;o++)this.renderer.texture.bind(i[o],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t){var e=this,r=e.gl,n=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures,o=i.length;r.drawBuffers||(o=Math.min(o,1));for(var a=[],s=0;s<o;s++){var u=t.colorTextures[s];u.texturePart?(this.renderer.texture.bind(u.texture,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+s,r.TEXTURE_CUBE_MAP_NEGATIVE_X+u.side,u.texture._glTextures[this.CONTEXT_UID].texture,0)):(this.renderer.texture.bind(u,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+s,r.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,0)),a.push(r.COLOR_ATTACHMENT0+s)}if(a.length>1&&r.drawBuffers(a),t.depthTexture){var l=this.writeDepthTexture;if(l){var h=t.depthTexture;this.renderer.texture.bind(h,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,0)}}n.stencil||!t.stencil&&!t.depth||(n.stencil=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height),t.depthTexture||r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n.stencil))},e.prototype.disposeFramebuffer=function(t,e){var r=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(r){delete t.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(t);i>=0&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(r.framebuffer),r.stencil&&n.deleteRenderbuffer(r.stencil))}},e.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var r=t.width,n=t.height,i=this.gl,o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,r,n),e.stencil=o,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Ot},Object.defineProperties(e.prototype,r),e}(me),$e=function(t){this.buffer=t,this.updateID=-1,this.byteLength=-1,this.refCount=0},Ze={5126:4,5123:2,5121:1},Je=function(t){function e(e){t.call(this,e),this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.boundBuffers={},this.managedGeometries={},this.managedBuffers={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!t.createVertexArray){var r=this.renderer.context.extensions.vertexArrayObject;s.PREFER_ENV===p.WEBGL_LEGACY&&(r=null),r?(t.createVertexArray=function(){return r.createVertexArrayOES()},t.bindVertexArray=function(t){return r.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return r.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){},t.bindVertexArray=function(){},t.deleteVertexArray=function(){})}if(!t.vertexAttribDivisor){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(t,e){return n.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,o){return n.drawElementsInstancedANGLE(t,e,r,i,o)},t.drawArraysInstanced=function(t,e,r,i){return n.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},e.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this,n=r.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID];i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={});var o=i[e.program.id]||this.initGeometryVao(t,e.program);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this,r=e.gl,n=0;n<t.buffers.length;n++){var i=t.buffers[n],o=i._glBuffers[this.CONTEXT_UID];if(i._updateID!==o.updateID){o.updateID=i._updateID;var a=i.index?r.ELEMENT_ARRAY_BUFFER:r.ARRAY_BUFFER;if(r.bindBuffer(a,o.buffer),this._boundBuffer=o,o.byteLength>=i.data.byteLength)r.bufferSubData(a,0,i.data);else{var s=i.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;o.byteLength=i.data.byteLength,r.bufferData(a,i.data,s)}}}},e.prototype.checkCompatibility=function(t,e){var r=t.attributes,n=e.attributeData;for(var i in n)if(!r[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},e.prototype.getSignature=function(t,e){var r=t.attributes,n=e.attributeData,i=["g",t.id];for(var o in r)n[o]&&i.push(o);return i.join("-")},e.prototype.initGeometryVao=function(t,e){this.checkCompatibility(t,e);var r=this.gl,n=this.CONTEXT_UID,i=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[i];if(a)return o[e.id]=a,a;var s=t.buffers,u=t.attributes,l={},h={};for(var c in s)l[c]=0,h[c]=0;for(var f in u)!u[f].size&&e.attributeData[f]?u[f].size=e.attributeData[f].size:u[f].size||console.warn("PIXI Geometry attribute '"+f+"' size cannot be determined (likely the bound shader does not have the attribute)"),l[u[f].buffer]+=u[f].size*Ze[u[f].type];for(var d in u){var p=u[d],g=p.size;void 0===p.stride&&(l[p.buffer]===g*Ze[p.type]?p.stride=0:p.stride=l[p.buffer]),void 0===p.start&&(p.start=h[p.buffer],h[p.buffer]+=g*Ze[p.type])}a=r.createVertexArray(),r.bindVertexArray(a);for(var v=0;v<s.length;v++){var m=s[v];m._glBuffers[n]||(m._glBuffers[n]=new $e(r.createBuffer()),this.managedBuffers[m.id]=m,m.disposeRunner.add(this)),m._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[i]=a,a},e.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var r=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),r&&(e||n.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,i=t.buffers;if(t.disposeRunner.remove(this),r){for(var o=0;o<i.length;o++){var a=i[o]._glBuffers[this.CONTEXT_UID];a.refCount--,0!==a.refCount||e||this.disposeBuffer(i[o],e)}if(!e)for(var s in r)if("g"===s[0]){var u=r[s];this._activeVao===u&&this.unbind(),n.deleteVertexArray(u)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);e=Object.keys(this.managedBuffers);for(var n=0;n<e.length;n++)this.disposeBuffer(this.managedBuffers[e[n]],t)},e.prototype.activateVao=function(t,e){var r=this.gl,n=this.CONTEXT_UID,i=t.buffers,o=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[n].buffer);var a=null;for(var s in o){var u=o[s],l=i[u.buffer],h=l._glBuffers[n];if(e.attributeData[s]){a!==h&&(r.bindBuffer(r.ARRAY_BUFFER,h.buffer),a=h);var c=e.attributeData[s].location;if(r.enableVertexAttribArray(c),r.vertexAttribPointer(c,u.size,u.type||r.FLOAT,u.normalized,u.stride,u.start),u.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(c,1)}}}},e.prototype.draw=function(t,e,r,n){var i=this,o=i.gl,a=this._activeGeometry;if(a.indexBuffer){var s=a.indexBuffer.data.BYTES_PER_ELEMENT,u=2===s?o.UNSIGNED_SHORT:o.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,u,(r||0)*s,n||1):o.drawElements(t,e||a.indexBuffer.data.length,u,(r||0)*s):console.warn("unsupported index buffer type: uint32")}else a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),n||1):o.drawArrays(t,r,e||a.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e}(me);function Qe(t,e,r,n){var i=tr(t,t.VERTEX_SHADER,e),o=tr(t,t.FRAGMENT_SHADER,r),a=t.createProgram();if(t.attachShader(a,i),t.attachShader(a,o),n)for(var s in n)t.bindAttribLocation(a,n[s],s);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(a,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(a)),t.deleteProgram(a),a=null),t.deleteShader(i),t.deleteShader(o),a}function tr(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.warn(r),console.error(t.getShaderInfoLog(n)),null)}function er(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return rr(2*e);case"bvec3":return rr(3*e);case"bvec4":return rr(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function rr(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}var nr,ir={},or=ir;function ar(){if(or===ir||or.isContextLost()){var t,e=document.createElement("canvas");s.PREFER_ENV>=p.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),or=t}return or}function sr(){if(!nr){nr=O.MEDIUM;var t=ar();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);nr=e.precision?O.HIGH:O.MEDIUM}}return nr}function ur(t,e,r){if("precision"!==t.substring(0,9)){var n=e;return e===O.HIGH&&r!==O.HIGH&&(n=O.MEDIUM),"precision "+n+" float;\n"+t}return r!==O.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var lr={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function hr(t){return lr[t]}var cr=null,fr={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray"};function dr(t,e){if(!cr){var r=Object.keys(fr);cr={};for(var n=0;n<r.length;++n){var i=r[n];cr[t[i]]=fr[i]}}return cr[e]}var pr={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},gr={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function vr(t,e){var r=0,n="var v = null;\n    var cv = null\n    var gl = renderer.gl";for(var i in t.uniforms){var o=e[i];if(o)if("float"===o.type&&1===o.size)n+="\n            if(uv."+i+" !== ud."+i+".value)\n            {\n                ud."+i+".value = uv."+i+"\n                gl.uniform1f(ud."+i+".location, uv."+i+")\n            }\n";else if("sampler2D"!==o.type&&"samplerCube"!==o.type&&"sampler2DArray"!==o.type||1!==o.size||o.isArray)if("mat3"===o.type&&1===o.size)void 0!==t.uniforms[i].a?n+="\n                gl.uniformMatrix3fv(ud."+i+".location, false, uv."+i+".toArray(true));\n                \n":n+="\n                gl.uniformMatrix3fv(ud."+i+".location, false, uv."+i+");\n                \n";else if("vec2"===o.type&&1===o.size)void 0!==t.uniforms[i].x?n+="\n                cv = ud."+i+".value;\n                v = uv."+i+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud."+i+".location, v.x, v.y);\n                }\n":n+="\n                cv = ud."+i+".value;\n                v = uv."+i+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud."+i+".location, v[0], v[1]);\n                }\n                \n";else if("vec4"===o.type&&1===o.size)void 0!==t.uniforms[i].width?n+="\n                cv = ud."+i+".value;\n                v = uv."+i+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud."+i+".location, v.x, v.y, v.width, v.height)\n                }\n":n+="\n                cv = ud."+i+".value;\n                v = uv."+i+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud."+i+".location, v[0], v[1], v[2], v[3])\n                }\n                \n";else{var a=1===o.size?pr:gr,s=a[o.type].replace("location","ud."+i+".location");n+="\n            cv = ud."+i+".value;\n            v = uv."+i+";\n            "+s+";\n"}else n+="\n            renderer.texture.bind(uv."+i+", "+r+");\n\n            if(ud."+i+".value !== "+r+")\n            {\n                ud."+i+".value = "+r+";\n                gl.uniform1i(ud."+i+".location, "+r+");\n; // eslint-disable-line max-len\n            }\n",r++;else t.uniforms[i].group&&(n+="\n                    renderer.shader.syncUniformGroup(uv."+i+");\n                ")}return new Function("ud","uv","renderer",n)}var mr,yr=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function br(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");var r=e.createShader(e.FRAGMENT_SHADER);while(1){var n=yr.replace(/%forloop%/gi,wr(t));if(e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}function wr(t){for(var e="",r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}function xr(){if("boolean"===typeof mr)return mr;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");mr=!0===t({a:"b"},"a","b")}catch(e){mr=!1}return mr}var _r="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}",Er="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n",Sr=0,Or={},Tr=function t(e,r,n){void 0===n&&(n="pixi-shader"),this.id=Sr++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=r||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(n=n.replace(/\s+/g,"-"),Or[n]?(Or[n]++,n+="-"+Or[n]):Or[n]=1,this.vertexSrc="#define SHADER_NAME "+n+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+"\n"+this.fragmentSrc,this.vertexSrc=ur(this.vertexSrc,s.PRECISION_VERTEX,O.HIGH),this.fragmentSrc=ur(this.fragmentSrc,s.PRECISION_FRAGMENT,sr())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null},Ar={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};Tr.prototype.extractData=function(t,e){var r=ar();if(r){var n=Qe(r,t,e);this.attributeData=this.getAttributeData(n,r),this.uniformData=this.getUniformData(n,r),r.deleteProgram(n)}else this.uniformData={},this.attributeData={}},Tr.prototype.getAttributeData=function(t,e){for(var r={},n=[],i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<i;o++){var a=e.getActiveAttrib(t,o),s=dr(e,a.type),u={type:s,name:a.name,size:hr(s),location:0};r[a.name]=u,n.push(u)}n.sort((function(t,e){return t.name>e.name?1:-1}));for(var l=0;l<n.length;l++)n[l].location=l;return r},Tr.prototype.getUniformData=function(t,e){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<n;i++){var o=e.getActiveUniform(t,i),a=o.name.replace(/\[.*?\]/,""),s=o.name.match(/\[.*?\]/,""),u=dr(e,o.type);r[a]={type:u,size:o.size,isArray:s,value:er(u,o.size)}}return r},Ar.defaultVertexSrc.get=function(){return Er},Ar.defaultFragmentSrc.get=function(){return _r},Tr.from=function(t,e,r){var n=t+e,i=W[n];return i||(W[n]=i=new Tr(t,e,r)),i},Object.defineProperties(Tr,Ar);var Pr=function(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof Ve?e:new Ve(e):new Ve({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))},Cr={uniforms:{configurable:!0}};Pr.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){var n=e.uniforms[r];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},Pr.prototype.destroy=function(){this.uniformGroup=null},Cr.uniforms.get=function(){return this.uniformGroup.uniforms},Pr.from=function(t,e,r){var n=Tr.from(t,e);return new Pr(n,r)},Object.defineProperties(Pr.prototype,Cr);var Mr=0,Ir=1,kr=2,Dr=3,Rr=4,jr=function(){this.data=0,this.blendMode=v.NORMAL,this.polygonOffset=0,this.blend=!0},Lr={blend:{configurable:!0},offsets:{configurable:!0},culling:{configurable:!0},depthTest:{configurable:!0},clockwiseFrontFace:{configurable:!0},blendMode:{configurable:!0},polygonOffset:{configurable:!0}};Lr.blend.get=function(){return!!(this.data&1<<Mr)},Lr.blend.set=function(t){!!(this.data&1<<Mr)!==t&&(this.data^=1<<Mr)},Lr.offsets.get=function(){return!!(this.data&1<<Ir)},Lr.offsets.set=function(t){!!(this.data&1<<Ir)!==t&&(this.data^=1<<Ir)},Lr.culling.get=function(){return!!(this.data&1<<kr)},Lr.culling.set=function(t){!!(this.data&1<<kr)!==t&&(this.data^=1<<kr)},Lr.depthTest.get=function(){return!!(this.data&1<<Dr)},Lr.depthTest.set=function(t){!!(this.data&1<<Dr)!==t&&(this.data^=1<<Dr)},Lr.clockwiseFrontFace.get=function(){return!!(this.data&1<<Rr)},Lr.clockwiseFrontFace.set=function(t){!!(this.data&1<<Rr)!==t&&(this.data^=1<<Rr)},Lr.blendMode.get=function(){return this._blendMode},Lr.blendMode.set=function(t){this.blend=t!==v.NONE,this._blendMode=t},Lr.polygonOffset.get=function(){return this._polygonOffset},Lr.polygonOffset.set=function(t){this.offsets=!!t,this._polygonOffset=t},jr.for2d=function(){var t=new jr;return t.depthTest=!1,t.blend=!0,t},Object.defineProperties(jr.prototype,Lr);var Br="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",Nr="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n",Fr=function(t){function e(r,n,i){var o=Tr.from(r||e.defaultVertexSrc,n||e.defaultFragmentSrc);t.call(this,o,i),this.padding=0,this.resolution=s.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0,this.legacy=!!this.program.attributeData.aTextureCoord,this.state=new jr}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={blendMode:{configurable:!0}},n={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};return e.prototype.apply=function(t,e,r,n,i){t.applyFilter(this,e,r,n,i)},r.blendMode.get=function(){return this.state.blendMode},r.blendMode.set=function(t){this.state.blendMode=t},n.defaultVertexSrc.get=function(){return Br},n.defaultFragmentSrc.get=function(){return Nr},Object.defineProperties(e.prototype,r),Object.defineProperties(e,n),e}(Pr);Fr.SOURCE_KEY_MAP={};var Ur="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",zr="varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",Vr=new ft,Xr=function(t,e){this._texture=t,this.mapCoord=new ft,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._updateID=-1,this.clampOffset=0,this.clampMargin="undefined"===typeof e?.5:e,this.isSimple=!1},Yr={texture:{configurable:!0}};Yr.texture.get=function(){return this._texture},Yr.texture.set=function(t){this._texture=t,this._updateID=-1},Xr.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,n=0;n<t.length;n+=2){var i=t[n],o=t[n+1];e[n]=i*r.a+o*r.c+r.tx,e[n+1]=i*r.b+o*r.d+r.ty}return e},Xr.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._updateID===e._updateID)return!1;this._updateID=e._updateID;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=e.orig,i=e.trim;i&&(Vr.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(Vr));var o=e.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(e._frame.x+s+u)/o.width,a[1]=(e._frame.y+s+u)/o.height,a[2]=(e._frame.x+e._frame.width-s+u)/o.width,a[3]=(e._frame.y+e._frame.height-s+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},Object.defineProperties(Xr.prototype,Yr);var Hr=function(t){function e(e){var r=new ft;t.call(this,Ur,zr),e.renderable=!1,this.maskSprite=e,this.maskMatrix=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t,e,r,n){var i=this.maskSprite,o=this.maskSprite.texture;o.valid&&(o.transform||(o.transform=new Xr(o,0)),o.transform.update(),this.uniforms.npmAlpha=o.baseTexture.premultiplyAlpha?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.transform.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.transform.uClampFrame,t.applyFilter(this,e,r,n))},e}(Fr),Gr=function(t){function e(e){t.call(this,e),this.scissor=!1,this.scissorData=null,this.scissorRenderTarget=null,this.enableScissor=!1,this.alphaMaskPool=[],this.alphaMaskIndex=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e){if(e.isSprite)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencil.stencilMaskStack.length&&e.isFastRect()){var r=e.worldTransform,n=Math.atan2(r.b,r.a);n=Math.round(n*(180/Math.PI)),n%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.pop=function(t,e){e.isSprite?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencil.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new Hr(e)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=e;var n=t.filterArea;t.filterArea=e.getBounds(!0),this.renderer.filter.push(t,r),t.filterArea=n,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.batch.flush(),this.renderer.stencil.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.stencil.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var r=this.renderer._activeRenderTarget,n=e.getBounds();n.fit(r.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(n.x*i,(r.root?r.size.height-n.y-n.height:n.y)*i,n.width*i,n.height*i),this.scissorRenderTarget=r,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer,e=t.gl;e.disable(e.SCISSOR_TEST)},e}(me),qr=function(t){function e(e){t.call(this,e),this.stencilMaskStack=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.stencilMaskStack.length;this.stencilMaskStack=t,t.length!==r&&(0===t.length?e.disable(e.STENCIL_TEST):(e.enable(e.STENCIL_TEST),this._useCurrent()))},e.prototype.pushStencil=function(t){var e=this.renderer.gl,r=this.stencilMaskStack.length;0===r&&(this.renderer.framebuffer.forceStencil(),e.enable(e.STENCIL_TEST)),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,r,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent()},e.prototype.popStencil=function(){var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},e.prototype.destroy=function(){t.prototype.destroy.call(this,this),this.stencilMaskStack=null},e}(me),Wr=function(t){function e(e){t.call(this,e),this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ft,this.transform=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(t,e,r,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,e,r,n){var i=this.projectionMatrix;n?(i.a=1/t.width*2*r,i.d=-1/t.height*2*r,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2*r,i.d=1/t.height*2*r,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},e.prototype.setTransform=function(){},e}(me),Kr=new Ot,$r=function(t){function e(e){t.call(this,e),this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ot,this.destinationFrame=new Ot}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(t,e,r){void 0===t&&(t=null),this.current=t;var n,i=this.renderer;if(t){var o=t.baseTexture;n=o.resolution,r||(Kr.width=o.realWidth,Kr.height=o.realHeight,r=Kr),e||(e=r),this.renderer.framebuffer.bind(o.framebuffer,r),this.renderer.projection.update(r,e,n,!1),this.renderer.stencil.setMaskStack(o.stencilMaskStack)}else n=this.renderer.resolution,r||(Kr.width=i.width,Kr.height=i.height,r=Kr),e||(e=r),i.framebuffer.bind(null,r),this.renderer.projection.update(r,e,n,!0),this.renderer.stencil.setMaskStack(this.defaultMaskStack);this.sourceFrame.copyFrom(e),this.destinationFrame.x=r.x/n,this.destinationFrame.y=r.y/n,this.destinationFrame.width=r.width/n,this.destinationFrame.height=r.height/n,e===r&&this.sourceFrame.copyFrom(this.destinationFrame)},e.prototype.clear=function(t){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3])},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}(me),Zr=function(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}};Zr.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null};var Jr=0,Qr=function(t){function e(e){t.call(this,e),this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this.id=Jr++}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.systemCheck=function(){if(!xr())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),e||this.syncUniformGroup(t.uniformGroup),n},e.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t){var e=this.getglProgram();t.static&&t.dirtyId===e.uniformGroups[t.id]||(e.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,e))},e.prototype.syncUniforms=function(t,e){var r=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);r(e.uniformData,t.uniforms,this.renderer)},e.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=vr(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,e){var r=t.uniforms,n=[];for(var i in r)n.push(i),e[i]&&n.push(e[i].type);return n.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var e=this.gl,r=t.program,n={};for(var i in r.attributeData)n[i]=r.attributeData[i].location;var o=Qe(e,r.vertexSrc,r.fragmentSrc,n),a={};for(var s in r.uniformData){var u=r.uniformData[s];a[s]={location:e.getUniformLocation(o,s),value:er(u.type,u.size)}}var l=new Zr(o,a);return r.glPrograms[this.renderer.CONTEXT_UID]=l,l},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}(me);function tn(t,e){return void 0===e&&(e=[]),e[v.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.ADD]=[t.ONE,t.ONE],e[v.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.NONE]=[0,0],e[v.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[v.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[v.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[v.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[v.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[v.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[v.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[v.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[v.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[v.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}var en=0,rn=1,nn=2,on=3,an=4,sn=function(t){function e(e){t.call(this,e),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=v.NONE,this._blendEq=!1,this.map=[],this.map[en]=this.setBlend,this.map[rn]=this.setOffset,this.map[nn]=this.setCullFace,this.map[on]=this.setDepthTest,this.map[an]=this.setFrontFace,this.checks=[],this.defaultState=new jr,this.defaultState.blend=!0,this.defaultState.depth=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(t){this.gl=t,this.blendModes=tn(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){var e=this.stateId^t.data,r=0;while(e)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var r=0;r<this.checks.length;r++)this.checks[r](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],r=this.gl;2===e.length?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(0),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},e.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},e.checkPolygonOffset=function(t,e){t.setPolygonOffset(e.polygonOffset,0)},e}(me),un=function(t){function e(e){t.call(this,e),this.count=0,this.checkCount=0,this.maxIdle=s.GC_MAX_IDLE,this.checkCountMax=s.GC_MAX_CHECK_COUNT,this.mode=s.GC_MODE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postrender=function(){this.count++,this.mode!==S.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},e.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,n=0;n<e.length;n++){var i=e[n];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[n]=null,r=!0)}if(r){for(var o=0,a=0;a<e.length;a++)null!==e[a]&&(e[o++]=e[a]);e.length=o}},e.prototype.unload=function(t){var e=this.renderer.textureSystem;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},e}(me),ln=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},hn=function(t){function e(e){t.call(this,e),this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new le}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var n=new ln(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new ln(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var o=0;o<this.boundTextures.length;o++)this.bind(null,o)},e.prototype.bind=function(t,e){void 0===e&&(e=0);var r=this,n=r.gl;if(t){if(t=t.baseTexture||t,t.valid){t.touched=this.renderer.textureGC.count;var i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.boundTextures[e]!==t&&n.bindTexture(t.target,i.texture),i.dirtyId!==t.dirtyId&&this.updateTexture(t),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var e=this,r=e.gl,n=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(var o=0;o<n.length;o++)n[o]===t&&(this.currentLocation!==o&&(r.activeTexture(r.TEXTURE0+o),this.currentLocation=o),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[t.target].texture),n[o]=null)},e.prototype.initTexture=function(t){var e=new ln(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},e.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var r=this.renderer.gl;t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===w.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F)}},e.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var r=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(r,t,e));else{var n=t.realWidth,i=t.realHeight,o=r.gl;(e.width!==n||e.height!==i||e.dirtyId<0)&&(e.width=n,e.height=i,o.texImage2D(t.target,0,e.internalFormat,n,i,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,e){var r=this,n=r.gl;if(t=t.baseTexture||t,t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var i=this.managedTextures.indexOf(t);-1!==i&&z(this.managedTextures,i,1)}},e.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==E.POW2&&2===this.webGLVersion||t.isPowerOfTwo?(e.mipmap=t.mipmap>=1,e.wrapMode=t.wrapMode):(e.mipmap=0,e.wrapMode=_.CLAMP),t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,e){var r=this.gl;if(e.mipmap&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===x.LINEAR){var i=Math.min(t.anisotropicLevel,r.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode?r.LINEAR:r.NEAREST);r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode?r.LINEAR:r.NEAREST)},e}(me),cn=new ft,fn=function(t){function e(e,r){t.call(this),r=Object.assign({},s.RENDER_OPTIONS,r),r.roundPixels&&(s.ROUND_PIXELS=r.roundPixels,it("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),this.options=r,this.type=g.UNKNOWN,this.screen=new Ot(0,0,r.width,r.height),this.view=r.view||document.createElement("canvas"),this.resolution=r.resolution||s.RESOLUTION,this.transparent=r.transparent,this.autoDensity=r.autoDensity||r.autoResize||!1,this.preserveDrawingBuffer=r.preserveDrawingBuffer,this.clearBeforeRender=r.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,0],this._backgroundColorString="#000000",this.backgroundColor=r.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent=new jt,this._lastObjectRendered=this._tempDisplayObjectParent,this.plugins={}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={width:{configurable:!0},height:{configurable:!0},backgroundColor:{configurable:!0}};return e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},r.width.get=function(){return this.view.width},r.height.get=function(){return this.view.height},e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,r,n){n=n||t.getLocalBounds(),0===n.width&&(n.width=1),0===n.height&&(n.height=1);var i=Ae.create(0|n.width,0|n.height,e,r);return cn.tx=-n.x,cn.ty=-n.y,this.render(t,i,!1,cn,!!t.parent),i},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=g.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoDensity=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},r.backgroundColor.get=function(){return this._backgroundColor},r.backgroundColor.set=function(t){this._backgroundColor=t,this._backgroundColorString=k(t),I(t,this._backgroundColorRgba)},Object.defineProperties(e.prototype,r),e}(l.a),dn=function(t){function e(r){void 0===r&&(r={}),t.call(this,"WebGL",r),r=this.options,this.type=g.WEBGL,this.gl=null,this.CONTEXT_UID=0,this.runners={destroy:new qt("destroy"),contextChange:new qt("contextChange",1),reset:new qt("reset"),update:new qt("update"),postrender:new qt("postrender"),prerender:new qt("prerender"),resize:new qt("resize",2)},this.globalUniforms=new Ve({projectionMatrix:new ft},!0),this.addSystem(Gr,"mask").addSystem(We,"context").addSystem(sn,"state").addSystem(Qr,"shader").addSystem(hn,"texture").addSystem(Je,"geometry").addSystem(Ke,"framebuffer").addSystem(qr,"stencil").addSystem(Wr,"projection").addSystem(un,"textureGC").addSystem(Ye,"filter").addSystem($r,"renderTexture").addSystem(Ge,"batch"),this.initPlugins(e.__plugins),r.context?this.context.initFromContext(r.context):this.context.initFromOptions({alpha:this.transparent,antialias:r.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:this.options.powerPreference}),this.renderingToScreen=!0,C(2===this.context.webGLVersion?"WebGL 2":"WebGL 1"),this.resize(this.options.width,this.options.height)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t){if(M())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(t,e){e||(e=t.name);var r=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var n in this[e]=r,this.runners)this.runners[n].add(r);return this},e.prototype.render=function(t,e,r,n,i){if(this.renderingToScreen=!e,this.runners.prerender.run(),this.emit("prerender"),this.projection.transform=n,!this.context.isLost){if(e||(this._lastObjectRendered=t),!i){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.run(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(e,r){t.prototype.resize.call(this,e,r),this.runners.resize.run(e,r)},e.prototype.reset=function(){return this.runners.reset.run(),this},e.prototype.clear=function(){this.framebuffer.bind(),this.framebuffer.clear()},e.prototype.destroy=function(e){for(var r in this.runners.destroy.run(),this.runners)this.runners[r].destroy();t.prototype.destroy.call(this,e),this.gl=null},e.registerPlugin=function(t,r){e.__plugins=e.__plugins||{},e.__plugins[t]=r},e}(fn);function pn(t){return dn.create(t)}var gn="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",vn=function(){this.textures=[],this.ids=[],this.blend=0,this.textureCount=0,this.start=0,this.size=0,this.type=4},mn=function(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)},yn={int8View:{configurable:!0},uint8View:{configurable:!0},int16View:{configurable:!0},uint16View:{configurable:!0},int32View:{configurable:!0}};yn.int8View.get=function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},yn.uint8View.get=function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},yn.int16View.get=function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},yn.uint16View.get=function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},yn.int32View.get=function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},mn.prototype.view=function(t){return this[t+"View"]},mn.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},mn.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},Object.defineProperties(mn.prototype,yn);var bn=function(t){function e(e){t.call(this,e),this.shaderGenerator=null,this.geometryClass=null,this.vertexSize=null,this.state=jr.for2d(),this.size=8e3,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._drawCalls=[];for(var r=0;r<this.size/4;r++)this._drawCalls[r]=new vn;this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){var t=this.renderer.gl;s.PREFER_ENV===p.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),s.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=br(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedElements[this._bufferSize++]=t)},e.prototype.flush=function(){if(0!==this._vertexCount){var t,e,r=this.getAttributeBuffer(this._vertexCount),n=this.getIndexBuffer(this._indexCount),i=this.renderer.gl,o=this,a=o._bufferedElements,u=o._drawCalls,l=o.MAX_TEXTURES,h=o._packedGeometries,c=o.vertexSize,f=this.renderer.textureGC.count,d=0,p=0,g=0,v=u[0],m=0,y=-1;v.textureCount=0,v.start=0,v.blend=y;var b,w=++le._globalBatch;for(b=0;b<this._bufferSize;++b){var x=a[b];a[b]=null,t=x._texture.baseTexture;var _=j[t.premultiplyAlpha?1:0][x.blendMode];y!==_&&(y=_,e=null,g=l,w++),e!==t&&(e=t,t._batchEnabled!==w&&(g===l&&(w++,g=0,v.size=p-v.start,v=u[m++],v.textureCount=0,v.blend=y,v.start=p),t.touched=f,t._batchEnabled=w,t._id=g,v.textures[v.textureCount++]=t,g++)),this.packInterleavedGeometry(x,r,n,d,p),d+=x.vertexData.length/2*c,p+=x.indices.length}le._globalBatch=w,v.size=p-v.start,s.CAN_UPLOAD_SAME_BUFFER?(h[this._flushId]._buffer.update(r.rawBinaryData,0),h[this._flushId]._indexBuffer.update(n,0),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,h[this._flushId]=new this.geometryClass),h[this._flushId]._buffer.update(r.rawBinaryData,0),h[this._flushId]._indexBuffer.update(n,0),this.renderer.geometry.bind(h[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++);var E=this.renderer.texture,S=this.renderer.state;for(b=0;b<m;b++){for(var O=u[b],T=O.textureCount,A=0;A<T;A++)E.bind(O.textures[A],A),O.textures[A]=null;S.setBlendMode(O.blend),i.drawElements(O.type,O.size,i.UNSIGNED_SHORT,2*O.start)}this._bufferSize=0,this._vertexCount=0,this._indexCount=0}},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),s.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._drawCalls=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=H(Math.ceil(t/8)),r=q(e),n=8*e;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);var i=this._aBuffers[n];return i||(this._aBuffers[n]=i=new mn(n*this.vertexSize*4)),i},e.prototype.getIndexBuffer=function(t){var e=H(Math.ceil(t/12)),r=q(e),n=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);var i=this._iBuffers[r];return i||(this._iBuffers[r]=i=new Uint16Array(n)),i},e.prototype.packInterleavedGeometry=function(t,e,r,n,i){for(var o=e.uint32View,a=e.float32View,s=n/this.vertexSize,u=t.uvs,l=t.indices,h=t.vertexData,c=t._texture.baseTexture._id,f=Math.min(t.worldAlpha,1),d=f<1&&t._texture.baseTexture.premultiplyAlpha?N(t._tintRGB,f):t._tintRGB+(255*f<<24),p=0;p<h.length;p+=2)a[n++]=h[p],a[n++]=h[p+1],a[n++]=u[p],a[n++]=u[p+1],o[n++]=d,a[n++]=c;for(var g=0;g<l.length;g++)r[i++]=s+l[g]},e}(He),wn=function(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')};wn.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=Ve.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Tr(this.vertexSrc,n)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new ft,default:this.defaultGroupCache[t]};return new Pr(this.programCache[t],i)},wn.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n",e};var xn=function(t){function e(e){void 0===e&&(e=!1),t.call(this),this._buffer=new Ie(null,e,!1),this._indexBuffer=new Ie(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,w.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,w.FLOAT).addAttribute("aColor",this._buffer,4,!0,w.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,w.FLOAT).addIndex(this._indexBuffer)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ne),_n="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",En="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Sn=function(){},On={defaultVertexSrc:{configurable:!0},defaultFragmentTemplate:{configurable:!0}};Sn.create=function(t){var e=Object.assign({vertex:_n,fragment:En,geometryClass:xn,vertexSize:6},t),r=e.vertex,n=e.fragment,i=e.vertexSize,o=e.geometryClass;return function(t){function e(e){t.call(this,e),this.shaderGenerator=new wn(r,n),this.geometryClass=o,this.vertexSize=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(bn)},On.defaultVertexSrc.get=function(){return _n},On.defaultFragmentTemplate.get=function(){return En},Object.defineProperties(Sn,On);var Tn=Sn.create(),An=new Ot,Pn=4,Cn=function(t){this.renderer=t,t.extract=this};
/*!
 * @pixi/extract - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Cn.prototype.image=function(t,e,r){var n=new Image;return n.src=this.base64(t,e,r),n},Cn.prototype.base64=function(t,e,r){return this.canvas(t).toDataURL(e,r)},Cn.prototype.canvas=function(t){var e,r,n,i=this.renderer,o=!1,a=!1;t&&(t instanceof Ae?n=t:(n=this.renderer.generateTexture(t),a=!0)),n?(e=n.baseTexture.resolution,r=n.frame,o=!1,i.renderTexture.bind(n)):(e=this.renderer.resolution,o=!0,r=An,r.width=this.renderer.width,r.height=this.renderer.height,i.renderTexture.bind(null));var s=Math.floor(r.width*e),u=Math.floor(r.height*e),l=new J(s,u,1),h=new Uint8Array(Pn*s*u),c=i.gl;c.readPixels(r.x*e,r.y*e,s,u,c.RGBA,c.UNSIGNED_BYTE,h);var f=l.context.getImageData(0,0,s,u);return Cn.arrayPostDivide(h,f.data),l.context.putImageData(f,0,0),o&&(l.context.scale(1,-1),l.context.drawImage(l.canvas,0,-u)),a&&n.destroy(!0),l.canvas},Cn.prototype.pixels=function(t){var e,r,n,i=this.renderer,o=!1;t&&(t instanceof Ae?n=t:(n=this.renderer.generateTexture(t),o=!0)),n?(e=n.baseTexture.resolution,r=n.frame,i.renderTexture.bind(n)):(e=i.resolution,r=An,r.width=i.width,r.height=i.height,i.renderTexture.bind(null));var a=r.width*e,s=r.height*e,u=new Uint8Array(Pn*a*s),l=i.gl;return l.readPixels(r.x*e,r.y*e,a,s,l.RGBA,l.UNSIGNED_BYTE,u),o&&n.destroy(!0),Cn.arrayPostDivide(u,u),u},Cn.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},Cn.arrayPostDivide=function(t,e){for(var r=0;r<t.length;r+=4){var n=e[r+3]=t[r+3];0!==n?(e[r]=Math.round(Math.min(255*t[r]/n,255)),e[r+1]=Math.round(Math.min(255*t[r+1]/n,255)),e[r+2]=Math.round(Math.min(255*t[r+2]/n,255))):(e[r]=t[r],e[r+1]=t[r+1],e[r+2]=t[r+2])}};
/*!
 * @pixi/interaction - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Mn=function(){this.global=new ot,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0},In={pointerId:{configurable:!0}};In.pointerId.get=function(){return this.identifier},Mn.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)},Mn.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},Mn.prototype.reset=function(){this.isPrimary=!1},Object.defineProperties(Mn.prototype,In);var kn=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null};kn.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},kn.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null};var Dn=function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE},Rn={pointerId:{configurable:!0},flags:{configurable:!0},none:{configurable:!0},over:{configurable:!0},rightDown:{configurable:!0},leftDown:{configurable:!0}};Dn.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Rn.pointerId.get=function(){return this._pointerId},Rn.flags.get=function(){return this._flags},Rn.flags.set=function(t){this._flags=t},Rn.none.get=function(){return this._flags===this.constructor.FLAGS.NONE},Rn.over.get=function(){return 0!==(this._flags&this.constructor.FLAGS.OVER)},Rn.over.set=function(t){this._doSet(this.constructor.FLAGS.OVER,t)},Rn.rightDown.get=function(){return 0!==(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},Rn.rightDown.set=function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)},Rn.leftDown.get=function(){return 0!==(this._flags&this.constructor.FLAGS.LEFT_DOWN)},Rn.leftDown.set=function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)},Object.defineProperties(Dn.prototype,Rn),Dn.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4});var jn={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Dt.mixin(jn);var Ln=1,Bn={target:null,data:{global:null}},Nn=function(t){function e(e,r){t.call(this),r=r||{},this.renderer=e,this.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,this.interactionFrequency=r.interactionFrequency||10,this.mouse=new Mn,this.mouse.identifier=Ln,this.mouse.global.set(-999999),this.activeInteractionData={},this.activeInteractionData[Ln]=this.mouse,this.interactionDataPool=[],this.eventData=new kn,this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.mouseOverRenderer=!1,this.supportsTouchEvents="ontouchstart"in window,this.supportsPointerEvents=!!window.PointerEvent,this.onPointerUp=this.onPointerUp.bind(this),this.processPointerUp=this.processPointerUp.bind(this),this.onPointerCancel=this.onPointerCancel.bind(this),this.processPointerCancel=this.processPointerCancel.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.processPointerDown=this.processPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.processPointerMove=this.processPointerMove.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.processPointerOverOut=this.processPointerOverOut.bind(this),this.onPointerOver=this.onPointerOver.bind(this),this.cursorStyles={default:"inherit",pointer:"pointer"},this.currentCursorMode=null,this.cursor=null,this._tempPoint=new ot,this.resolution=1,this.delayedEvents=[],this.setTargetElement(this.renderer.view,this.renderer.resolution)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hitTest=function(t,e){return Bn.target=null,Bn.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(Bn,e,null,!0),Bn.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(Zt.system.add(this.update,this,Kt.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(Zt.system.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var r=this.activeInteractionData[e];if(r.originalEvent&&"touch"!==r.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(typeof e){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e);break}else"string"!==typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,r){r.stopPropagationHint&&t!==r.stopsPropagatingAt||(r.currentTarget=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},e.prototype.delayDispatchEvent=function(t,e,r){this.delayedEvents.push({displayObject:t,eventString:e,eventData:r})},e.prototype.mapPositionToPoint=function(t,e,r){var n;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var i=1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*i,t.y=(r-n.top)*(this.interactionDOMElement.height/n.height)*i},e.prototype.processInteractive=function(t,e,r,n,i,o){if(!e||!e.visible)return!1;var a=t.data.global;i=e.interactive||i;var s=!1,u=i,l=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(a,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(n=!1,l=!1)),u=!1):e._mask&&n&&(e._mask.containsPoint&&e._mask.containsPoint(a)||(n=!1)),l&&e.interactiveChildren&&e.children)for(var h=e.children,c=h.length-1;c>=0;c--){var f=h[c],d=this.processInteractive(t,f,r,n,u,!0);if(d){if(!f.parent)continue;u=!1,d&&(t.target&&(n=!1),s=!0)}}i&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(a)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),r&&r(t,e,!!s)));var p=this.delayedEvents;if(p.length&&!o){t.stopPropagationHint=!1;var g=p.length;this.delayedEvents=[];for(var v=0;v<g;v++){var m=p[v],y=m.displayObject,b=m.eventString,w=m.eventData;w.stopsPropagatingAt===y&&(w.stopPropagationHint=!0),this.dispatchEvent(y,b,w)}}return s},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized){var r=t.cancelable||!("cancelable"in t);r&&t.preventDefault()}for(var n=e.length,i=0;i<n;i++){var o=e[i],a=this.getInteractionDataForPointerId(o),s=this.configureInteractionEventForDOMEvent(this.eventData,o,a);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===o.pointerType)this.emit("touchstart",s);else if("mouse"===o.pointerType||"pen"===o.pointerType){var u=2===o.button;this.emit(u?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,r){var n=t.data,i=t.data.identifier;if(r)if(e.trackedPointers[i]||(e.trackedPointers[i]=new Dn(i)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button;o?e.trackedPointers[i].rightDown=!0:e.trackedPointers[i].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,r){for(var n=this.normalizeToPointerData(t),i=n.length,o=t.target!==this.interactionDOMElement?"outside":"",a=0;a<i;a++){var s=n[a],u=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,u);if(l.data.originalEvent=t,this.processInteractive(l,this.renderer._lastObjectRendered,r,e||!o),this.emit(e?"pointercancel":"pointerup"+o,l),"mouse"===s.pointerType||"pen"===s.pointerType){var h=2===s.button;this.emit(h?"rightup"+o:"mouseup"+o,l)}else"touch"===s.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,l),this.releaseInteractionDataForPointerId(s.pointerId,u))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var r=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===r.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,r){var n=t.data,i=t.data.identifier,o=e.trackedPointers[i],a="touch"===n.pointerType,s="mouse"===n.pointerType||"pen"===n.pointerType,u=!1;if(s){var l=2===n.button,h=Dn.FLAGS,c=l?h.RIGHT_DOWN:h.LEFT_DOWN,f=void 0!==o&&o.flags&c;r?(this.dispatchEvent(e,l?"rightup":"mouseup",t),f&&(this.dispatchEvent(e,l?"rightclick":"click",t),u=!0)):f&&this.dispatchEvent(e,l?"rightupoutside":"mouseupoutside",t),o&&(l?o.rightDown=!1:o.leftDown=!1)}r?(this.dispatchEvent(e,"pointerup",t),a&&this.dispatchEvent(e,"touchend",t),o&&(s&&!u||this.dispatchEvent(e,"pointertap",t),a&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),a&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[i]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var r=e.length,n=0;n<r;n++){var i=e[n],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=t,this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",a),"touch"===i.pointerType&&this.emit("touchmove",a),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",a)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,r){var n=t.data,i="touch"===n.pointerType,o="mouse"===n.pointerType||"pen"===n.pointerType;o&&this.processPointerOverOut(t,e,r),this.moveWhenInside&&!r||(this.dispatchEvent(e,"pointermove",t),i&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t),r=e[0];"mouse"===r.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(r),i=this.configureInteractionEventForDOMEvent(this.eventData,r,n);i.data.originalEvent=r,this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),"mouse"===r.pointerType||"pen"===r.pointerType?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,r){var n=t.data,i=t.data.identifier,o="mouse"===n.pointerType||"pen"===n.pointerType,a=e.trackedPointers[i];r&&!a&&(a=e.trackedPointers[i]=new Dn(i)),void 0!==a&&(r&&this.mouseOverRenderer?(a.over||(a.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):a.over&&(a.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),a.none&&delete e.trackedPointers[i]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t),r=e[0],n=this.getInteractionDataForPointerId(r),i=this.configureInteractionEventForDOMEvent(this.eventData,r,n);i.data.originalEvent=r,"mouse"===r.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",i),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mouseover",i)},e.prototype.getInteractionDataForPointerId=function(t){var e,r=t.pointerId;return r===Ln||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[r]?e=this.activeInteractionData[r]:(e=this.interactionDataPool.pop()||new Mn,e.identifier=r,this.activeInteractionData[r]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,r){return t.data=r,this.mapPositionToPoint(r.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=r.global.x,e.globalY=r.global.y),r.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var r=0,n=t.changedTouches.length;r<n;r++){var i=t.changedTouches[r];"undefined"===typeof i.button&&(i.button=t.touches.length?1:0),"undefined"===typeof i.buttons&&(i.buttons=t.touches.length?1:0),"undefined"===typeof i.isPrimary&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),"undefined"===typeof i.width&&(i.width=i.radiusX||1),"undefined"===typeof i.height&&(i.height=i.radiusY||1),"undefined"===typeof i.tiltX&&(i.tiltX=0),"undefined"===typeof i.tiltY&&(i.tiltY=0),"undefined"===typeof i.pointerType&&(i.pointerType="touch"),"undefined"===typeof i.pointerId&&(i.pointerId=i.identifier||0),"undefined"===typeof i.pressure&&(i.pressure=i.force||.5),"undefined"===typeof i.twist&&(i.twist=0),"undefined"===typeof i.tangentialPressure&&(i.tangentialPressure=0),"undefined"===typeof i.layerX&&(i.layerX=i.offsetX=i.clientX),"undefined"===typeof i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,e.push(i)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent||("undefined"===typeof t.isPrimary&&(t.isPrimary=!0),"undefined"===typeof t.width&&(t.width=1),"undefined"===typeof t.height&&(t.height=1),"undefined"===typeof t.tiltX&&(t.tiltX=0),"undefined"===typeof t.tiltY&&(t.tiltY=0),"undefined"===typeof t.pointerType&&(t.pointerType="mouse"),"undefined"===typeof t.pointerId&&(t.pointerId=Ln),"undefined"===typeof t.pressure&&(t.pressure=.5),"undefined"===typeof t.twist&&(t.twist=0),"undefined"===typeof t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0),e.push(t);return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(l.a),Fn={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive)return e;var r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},Un=function(){this.reset()};Un.prototype.clone=function(){var t=new Un;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},Un.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Se.WHITE,this.matrix=null,this.visible=!1},Un.prototype.destroy=function(){this.texture=null,this.matrix=null};var zn=function(t,e,r,n){void 0===e&&(e=null),void 0===r&&(r=null),void 0===n&&(n=null),this.shape=t,this.lineStyle=r,this.fillStyle=e,this.matrix=n,this.type=t.type,this.points=[],this.holes=[]};zn.prototype.clone=function(){return new zn(this.shape,this.fillStyle,this.lineStyle,this.matrix)},zn.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null};var Vn={build:function(t){var e,r,n=t.shape,i=t.points,o=n.x,a=n.y;if(i.length=0,t.type===ct.CIRC?(e=n.radius,r=n.radius):(e=n.width,r=n.height),0!==e&&0!==r){var s=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height));s/=2.3;for(var u=2*Math.PI/s,l=0;l<s;l++)i.push(o+Math.sin(-u*l)*e,a+Math.cos(-u*l)*r);i.push(i[0],i[1])}},triangulate:function(t,e){var r=t.points,n=e.points,i=e.indices,o=n.length/2,a=o;n.push(t.shape.x,t.shape.y);for(var s=0;s<r.length;s+=2)n.push(r[s],r[s+1]),i.push(o++,a,o)}};function Xn(t,e){t.lineStyle.native?Hn(t,e):Yn(t,e)}function Yn(t,e){var r=t.shape,n=t.points||r.points.slice(),i=e.closePointEps;if(0!==n.length){var o=t.lineStyle,a=new ot(n[0],n[1]),s=new ot(n[n.length-2],n[n.length-1]),u=r.type!==ct.POLY||r.closeStroke,l=Math.abs(a.x-s.x)<i&&Math.abs(a.y-s.y)<i;if(u){n=n.slice(),l&&(n.pop(),n.pop(),s.set(n[n.length-2],n[n.length-1]));var h=s.x+.5*(a.x-s.x),c=s.y+.5*(a.y-s.y);n.unshift(h,c),n.push(h,c)}var f=e.points,d=n.length/2,p=n.length,g=f.length/2,v=o.width/2,m=n[0],y=n[1],b=n[2],w=n[3],x=0,_=0,E=-(y-w),S=m-b,O=0,T=0,A=0,P=0,C=Math.sqrt(E*E+S*S);E/=C,S/=C,E*=v,S*=v;var M=o.alignment,I=2*(1-M),k=2*M;f.push(m-E*I,y-S*I),f.push(m+E*k,y+S*k);for(var D=1;D<d-1;++D){m=n[2*(D-1)],y=n[2*(D-1)+1],b=n[2*D],w=n[2*D+1],x=n[2*(D+1)],_=n[2*(D+1)+1],E=-(y-w),S=m-b,C=Math.sqrt(E*E+S*S),E/=C,S/=C,E*=v,S*=v,O=-(w-_),T=b-x,C=Math.sqrt(O*O+T*T),O/=C,T/=C,O*=v,T*=v;var R=-S+y-(-S+w),j=-E+b-(-E+m),L=(-E+m)*(-S+w)-(-E+b)*(-S+y),B=-T+_-(-T+w),N=-O+b-(-O+x),F=(-O+x)*(-T+w)-(-O+b)*(-T+_),U=R*N-B*j;if(Math.abs(U)<.1)U+=10.1,f.push(b-E*I,w-S*I),f.push(b+E*k,w+S*k);else{var z=(j*F-N*L)/U,V=(B*L-R*F)/U,X=(z-b)*(z-b)+(V-w)*(V-w);X>196*v*v?(A=E-O,P=S-T,C=Math.sqrt(A*A+P*P),A/=C,P/=C,A*=v,P*=v,f.push(b-A*I,w-P*I),f.push(b+A*k,w+P*k),f.push(b-A*k*I,w-P*I),p++):(f.push(b+(z-b)*I,w+(V-w)*I),f.push(b-(z-b)*k,w-(V-w)*k))}}m=n[2*(d-2)],y=n[2*(d-2)+1],b=n[2*(d-1)],w=n[2*(d-1)+1],E=-(y-w),S=m-b,C=Math.sqrt(E*E+S*S),E/=C,S/=C,E*=v,S*=v,f.push(b-E*I,w-S*I),f.push(b+E*k,w+S*k);for(var Y=e.indices,H=0;H<p-2;++H)Y.push(g,g+1,g+2),g++}}function Hn(t,e){var r=0,n=t.shape,i=t.points||n.points,o=n.type!==ct.POLY||n.closeStroke;if(0!==i.length){var a=e.points,s=e.indices,u=i.length/2,l=a.length/2,h=l;for(a.push(i[0],i[1]),r=1;r<u;r++)a.push(i[2*r],i[2*r+1]),s.push(h,h+1),h++;o&&s.push(h,l)}}var Gn={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var r=t.points,n=t.holes,i=e.points,o=e.indices;if(r.length>=6){for(var a=[],s=0;s<n.length;s++){var u=n[s];a.push(r.length/2),r=r.concat(u.points)}var l=c()(r,a,2);if(!l)return;for(var h=i.length/2,f=0;f<l.length;f+=3)o.push(l[f]+h),o.push(l[f+1]+h),o.push(l[f+2]+h);for(var d=0;d<r.length;d++)i.push(r[d])}}},qn={build:function(t){var e=t.shape,r=e.x,n=e.y,i=e.width,o=e.height,a=t.points;a.length=0,a.push(r,n,r+i,n,r+i,n+o,r,n+o)},triangulate:function(t,e){var r=t.points,n=e.points,i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},Wn={build:function(t){var e=t.shape,r=t.points,n=e.x,i=e.y,o=e.width,a=e.height,s=e.radius;r.length=0,$n(n,i+s,n,i,n+s,i,r),$n(n+o-s,i,n+o,i,n+o,i+s,r),$n(n+o,i+a-s,n+o,i+a,n+o-s,i+a,r),$n(n+s,i+a,n,i+a,n,i+a-s,r)},triangulate:function(t,e){for(var r=t.points,n=e.points,i=e.indices,o=n.length/2,a=c()(r,null,2),s=0,u=a.length;s<u;s+=3)i.push(a[s]+o),i.push(a[s+1]+o),i.push(a[s+2]+o);for(var l=0,h=r.length;l<h;l++)n.push(r[l],r[++l])}};function Kn(t,e,r){var n=e-t;return t+n*r}function $n(t,e,r,n,i,o,a){void 0===a&&(a=[]);for(var s=20,u=a,l=0,h=0,c=0,f=0,d=0,p=0,g=0,v=0;g<=s;++g)v=g/s,l=Kn(t,r,v),h=Kn(e,n,v),c=Kn(r,i,v),f=Kn(n,o,v),d=Kn(l,c,v),p=Kn(h,f,v),u.push(d,p);return u}var Zn=[],Jn=[],Qn=new ot,ti={};ti[ct.POLY]=Gn,ti[ct.CIRC]=Vn,ti[ct.ELIP]=Vn,ti[ct.RECT]=qn,ti[ct.RREC]=Wn;var ei=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},ri=function(t){function e(){t.call(this),this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.dirty=0,this.batchDirty=-1,this.cacheDirty=-1,this.clearDirty=0,this.drawCalls=[],this.batches=[],this.shapeIndex=0,this._bounds=new kt,this.boundsDirty=-1,this.boundsPadding=0,this.batchable=!1,this.indicesUint16=null,this.uvsFloat32=null,this.closePointEps=1e-4}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={bounds:{configurable:!0}};return r.bounds.get=function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].textures.length=0,Jn.push(this.drawCalls[t]);this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var r=this.batches[e];r.start=0,r.attribStart=0,r.style=null,Zn.push(r)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,r,n){var i=new zn(t,e,r,n);return this.graphicsData.push(i),this.dirty++,this},e.prototype.drawHole=function(t,e){if(!this.graphicsData.length)return null;var r=new zn(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,r=0;r<e.length;++r){var n=e[r];if(n.fillStyle.visible&&(n.shape&&(n.matrix?n.matrix.applyInverse(t,Qn):Qn.copyFrom(t),n.shape.contains(Qn.x,Qn.y)))){if(n.holes)for(var i=0;i<n.holes.length;i++){var o=n.holes[i];if(o.shape.contains(Qn.x,Qn.y))return!1}return!0}}return!1},e.prototype.updateBatches=function(){if(this.dirty!==this.cacheDirty)if(0!==this.graphicsData.length){if(this.dirty!==this.cacheDirty)for(var t=0;t<this.graphicsData.length;t++){var e=this.graphicsData[t];if(e.fillStyle&&!e.fillStyle.texture.baseTexture.valid)return;if(e.lineStyle&&!e.lineStyle.texture.baseTexture.valid)return}this.cacheDirty=this.dirty;var r=this.uvs,n=null,i=null,o=0,a=!1;if(this.batches.length>0){n=this.batches[this.batches.length-1];var s=n.style;i=s.texture.baseTexture,o=s.color+s.alpha,a=!!s.native}for(var u=this.shapeIndex;u<this.graphicsData.length;u++){this.shapeIndex++;var l=this.graphicsData[u],h=ti[l.type],c=l.fillStyle,f=l.lineStyle;h.build(l),l.matrix&&this.transformPoints(l.points,l.matrix);for(var d=0;d<2;d++){var p=0===d?c:f;if(p.visible){var g=p.texture.baseTexture,v=this.indices.length,m=this.points.length/2;!n||i===g&&o===p.color+p.alpha&&a===!!p.native||(n.size=v-n.start,n.attribSize=m-n.attribStart,n.size>0&&(n=null)),n||(n=Zn.pop()||new ei,this.batches.push(n),g.wrapMode=_.REPEAT,i=g,o=p.color+p.alpha,a=p.native,n.style=p,n.start=v,n.attribStart=m);var y=this.points.length/2;if(0===d)l.holes.length?(this.processHoles(l.holes),Gn.triangulate(l,this)):h.triangulate(l,this);else{Xn(l,this);for(var b=0;b<l.holes.length;b++)Xn(l.holes[b],this)}var w=this.points.length/2-y;this.addUvs(this.points,r,p.texture,y,w,p.matrix)}}}var x=this.indices.length,E=this.points.length/2;if(n)if(n.size=x-n.start,n.attribSize=E-n.attribStart,this.indicesUint16=new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var S=0;S<this.batches.length;S++)for(var O=this.batches[S],T=0;T<O.size;T++){var A=O.start+T;this.indicesUint16[A]=this.indicesUint16[A]-O.attribStart}}else this.buildDrawCalls();else this.batchable=!0}else this.batchable=!0},e.prototype.isBatchable=function(){for(var t=this.batches,r=0;r<t.length;r++)if(t[r].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++le._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].textures.length=0,Jn.push(this.drawCalls[e]);this.drawCalls.length=0;var r=this.uvs,n=this.colors,i=this.textureIds,o=Jn.pop()||new vn;o.textureCount=0,o.start=0,o.size=0,o.type=m.TRIANGLES;var a=0,s=null,u=0,l=!1,h=m.TRIANGLES,c=0;this.drawCalls.push(o);for(var f=0;f<this.batches.length;f++){var d=this.batches[f],p=8,g=d.style,v=g.texture.baseTexture;l!==!!g.native&&(l=g.native,h=l?m.LINES:m.TRIANGLES,s=null,a=p,t++),s!==v&&(s=v,v._batchEnabled!==t&&(a===p&&(t++,a=0,o.size>0&&(o=Jn.pop()||new vn,this.drawCalls.push(o)),o.start=c,o.size=0,o.textureCount=0,o.type=h),v.touched=1,v._batchEnabled=t,v._id=a,v.wrapMode=10497,o.textures[o.textureCount++]=v,a++)),o.size+=d.size,c+=d.size,u=v._id,this.addColors(n,g.color,g.alpha,d.attribSize),this.addTextureIds(i,u,d.attribSize)}le._globalBatch=t;for(var y=this.points,b=new ArrayBuffer(3*y.length*4),w=new Float32Array(b),x=new Uint32Array(b),_=0,E=0;E<y.length/2;E++)w[_++]=y[2*E],w[_++]=y[2*E+1],w[_++]=r[2*E],w[_++]=r[2*E+1],x[_++]=n[E],w[_++]=i[E];this._buffer.update(b),this._indexBuffer.update(this.indicesUint16)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=ti[r.type];n.build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}},e.prototype.calculateBounds=function(){var t=1/0,e=-1/0,r=1/0,n=-1/0;if(this.graphicsData.length)for(var i=null,o=0,a=0,s=0,u=0,l=0;l<this.graphicsData.length;l++){var h=this.graphicsData[l],c=h.type,f=h.lineStyle?h.lineStyle.width:0;if(i=h.shape,c===ct.RECT||c===ct.RREC)o=i.x-f/2,a=i.y-f/2,s=i.width+f,u=i.height+f,t=o<t?o:t,e=o+s>e?o+s:e,r=a<r?a:r,n=a+u>n?a+u:n;else if(c===ct.CIRC)o=i.x,a=i.y,s=i.radius+f/2,u=i.radius+f/2,t=o-s<t?o-s:t,e=o+s>e?o+s:e,r=a-u<r?a-u:r,n=a+u>n?a+u:n;else if(c===ct.ELIP)o=i.x,a=i.y,s=i.width+f/2,u=i.height+f/2,t=o-s<t?o-s:t,e=o+s>e?o+s:e,r=a-u<r?a-u:r,n=a+u>n?a+u:n;else for(var d=i.points,p=0,g=0,v=0,m=0,y=0,b=0,w=0,x=0,_=0;_+2<d.length;_+=2)o=d[_],a=d[_+1],p=d[_+2],g=d[_+3],v=Math.abs(p-o),m=Math.abs(g-a),u=f,s=Math.sqrt(v*v+m*m),s<1e-9||(y=(u/s*m+v)/2,b=(u/s*v+m)/2,w=(p+o)/2,x=(g+a)/2,t=w-y<t?w-y:t,e=w+y>e?w+y:e,r=x-b<r?x-b:r,n=x+b>n?x+b:n)}else t=0,e=0,r=0,n=0;var E=this.boundsPadding;this._bounds.minX=t-E,this._bounds.maxX=e+E,this._bounds.minY=r-E,this._bounds.maxY=n+E},e.prototype.transformPoints=function(t,e){for(var r=0;r<t.length/2;r++){var n=t[2*r],i=t[2*r+1];t[2*r]=e.a*n+e.c*i+e.tx,t[2*r+1]=e.b*n+e.d*i+e.ty}},e.prototype.addColors=function(t,e,r,n){var i=(e>>16)+(65280&e)+((255&e)<<16),o=N(i,r);while(n-- >0)t.push(o)},e.prototype.addTextureIds=function(t,e,r){while(r-- >0)t.push(e)},e.prototype.addUvs=function(t,e,r,n,i,o){var a=0,s=e.length,u=r.frame;while(a<i){var l=t[2*(n+a)],h=t[2*(n+a)+1];if(o){var c=o.a*l+o.c*h+o.tx;h=o.b*l+o.d*h+o.ty,l=c}a++,e.push(l/u.width,h/u.height)}var f=r.baseTexture;(u.width<f.width||u.height<f.height)&&this.adjustUvs(e,r,s,i)},e.prototype.adjustUvs=function(t,e,r,n){for(var i=e.baseTexture,o=1e-6,a=r+2*n,s=e.frame,u=s.width/i.width,l=s.height/i.height,h=s.x/s.width,c=s.y/s.height,f=Math.floor(t[r]+o),d=Math.floor(t[r+1]+o),p=r+2;p<a;p+=2)f=Math.min(f,Math.floor(t[p]+o)),d=Math.min(d,Math.floor(t[p+1]+o));h-=f,c-=d;for(var g=r;g<a;g+=2)t[g]=(t[g]+h)*u,t[g+1]=(t[g+1]+c)*l},Object.defineProperties(e.prototype,r),e}(xn);ri.BATCHABLE_SIZE=100;var ni=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.width=0,this.alignment=.5,this.native=!1},e}(Un),ii=function(){};ii.curveLength=function(t,e,r,n,i,o,a,s){for(var u=10,l=0,h=0,c=0,f=0,d=0,p=0,g=0,v=0,m=0,y=0,b=0,w=t,x=e,_=1;_<=u;++_)h=_/u,c=h*h,f=c*h,d=1-h,p=d*d,g=p*d,v=g*t+3*p*h*r+3*d*c*i+f*a,m=g*e+3*p*h*n+3*d*c*o+f*s,y=w-v,b=x-m,w=v,x=m,l+=Math.sqrt(y*y+b*b);return l},ii.curveTo=function(t,e,r,n,i,o,a){var s=a[a.length-2],u=a[a.length-1];a.length-=2;var l=Fn._segmentsCount(ii.curveLength(s,u,t,e,r,n,i,o)),h=0,c=0,f=0,d=0,p=0;a.push(s,u);for(var g=1,v=0;g<=l;++g)v=g/l,h=1-v,c=h*h,f=c*h,d=v*v,p=d*v,a.push(f*s+3*c*v*t+3*h*d*r+p*i,f*u+3*c*v*e+3*h*d*n+p*o)};var oi=function(){};oi.curveLength=function(t,e,r,n,i,o){var a=t-2*r+i,s=e-2*n+o,u=2*r-2*t,l=2*n-2*e,h=4*(a*a+s*s),c=4*(a*u+s*l),f=u*u+l*l,d=2*Math.sqrt(h+c+f),p=Math.sqrt(h),g=2*h*p,v=2*Math.sqrt(f),m=c/p;return(g*d+p*c*(d-v)+(4*f*h-c*c)*Math.log((2*p+m+d)/(m+v)))/(4*g)},oi.curveTo=function(t,e,r,n,i){for(var o=i[i.length-2],a=i[i.length-1],s=Fn._segmentsCount(oi.curveLength(o,a,t,e,r,n)),u=0,l=0,h=1;h<=s;++h){var c=h/s;u=o+(t-o)*c,l=a+(e-a)*c,i.push(u+(t+(r-t)*c-u)*c,l+(e+(n-e)*c-l)*c)}};var ai=function(){};ai.curveTo=function(t,e,r,n,i,o){var a=o[o.length-2],s=o[o.length-1],u=s-e,l=a-t,h=n-e,c=r-t,f=Math.abs(u*c-l*h);if(f<1e-8||0===i)return o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e),null;var d=u*u+l*l,p=h*h+c*c,g=u*h+l*c,v=i*Math.sqrt(d)/f,m=i*Math.sqrt(p)/f,y=v*g/d,b=m*g/p,w=v*c+m*l,x=v*h+m*u,_=l*(m+y),E=u*(m+y),S=c*(v+b),O=h*(v+b),T=Math.atan2(E-x,_-w),A=Math.atan2(O-x,S-w);return{cx:w+t,cy:x+e,radius:i,startAngle:T,endAngle:A,anticlockwise:l*h>c*u}},ai.arc=function(t,e,r,n,i,o,a,s,u){for(var l=a-o,h=Fn._segmentsCount(Math.abs(l)*i,40*Math.ceil(Math.abs(l)/ut)),c=l/(2*h),f=2*c,d=Math.cos(c),p=Math.sin(c),g=h-1,v=g%1/g,m=0;m<=g;++m){var y=m+v*m,b=c+o+f*y,w=Math.cos(b),x=-Math.sin(b);u.push((d*w+p*x)*i+r,(d*-x+p*w)*i+n)}};var si=function(t){function e(e,r,n,i,o,a){o=o||i/2;for(var s=-1*Math.PI/2+a,u=2*n,l=ut/u,h=[],c=0;c<u;c++){var f=c%2?o:i,d=c*l+s;h.push(e+f*Math.cos(d),r+f*Math.sin(d))}t.call(this,h)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Mt),ui=new Float32Array(3),li={},hi=function(t){function e(e){void 0===e&&(e=null),t.call(this),this.geometry=e||new ri,this.geometry.refCount++,this.shader=null,this.state=jr.for2d(),this._fillStyle=new Un,this._lineStyle=new ni,this._matrix=null,this._holeMode=!1,this.currentPath=null,this.batches=[],this.batchTint=-1,this.vertexData=null,this._transformID=-1,this.batchDirty=-1,this.pluginName="batch",this.tint=16777215,this.blendMode=v.NORMAL}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={blendMode:{configurable:!0},tint:{configurable:!0},fill:{configurable:!0},line:{configurable:!0}};return e.prototype.clone=function(){return this.finishPoly(),new e(this.geometry)},r.blendMode.set=function(t){this.state.blendMode=t},r.blendMode.get=function(){return this.state.blendMode},r.tint.get=function(){return this._tint},r.tint.set=function(t){this._tint=t},r.fill.get=function(){return this._fillStyle},r.line.get=function(){return this._lineStyle},e.prototype.lineStyle=function(t,e,r,n,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=1),void 0===n&&(n=.5),void 0===i&&(i=!1),this.lineTextureStyle(t,Se.WHITE,e,r,null,n,i),this},e.prototype.lineTextureStyle=function(t,e,r,n,i,o,a){void 0===t&&(t=0),void 0===e&&(e=Se.WHITE),void 0===r&&(r=16777215),void 0===n&&(n=1),void 0===i&&(i=null),void 0===o&&(o=.5),void 0===a&&(a=!1),this.currentPath&&this.startPoly();var s=t>0&&n>0;return s?(i&&(i=i.clone(),i.invert()),Object.assign(this._lineStyle,{color:r,width:t,alpha:n,matrix:i,texture:e,alignment:o,native:a,visible:s})):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Mt,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Mt,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var r=this.currentPath.points,n=r[r.length-2],i=r[r.length-1];return n===t&&i===e||r.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,r,n){this._initCurve();var i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),oi.curveTo(t,e,r,n,i),this},e.prototype.bezierCurveTo=function(t,e,r,n,i,o){return this._initCurve(),ii.curveTo(t,e,r,n,i,o,this.currentPath.points),this},e.prototype.arcTo=function(t,e,r,n,i){this._initCurve(t,e);var o=this.currentPath.points,a=ai.curveTo(t,e,r,n,i,o);if(a){var s=a.cx,u=a.cy,l=a.radius,h=a.startAngle,c=a.endAngle,f=a.anticlockwise;this.arc(s,u,l,h,c,f)}return this},e.prototype.arc=function(t,e,r,n,i,o){if(void 0===o&&(o=!1),n===i)return this;!o&&i<=n?i+=ut:o&&n<=i&&(n+=ut);var a=i-n;if(0===a)return this;var s=t+Math.cos(n)*r,u=e+Math.sin(n)*r,l=this.geometry.closePointEps,h=this.currentPath?this.currentPath.points:null;if(h){var c=Math.abs(h[h.length-2]-s),f=Math.abs(h[h.length-1]-u);c<l&&f<l||h.push(s,u)}else this.moveTo(s,u),h=this.currentPath.points;return ai.arc(s,u,t,e,r,n,i,o,h),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill(Se.WHITE,t,e)},e.prototype.beginTextureFill=function(t,e,r,n){void 0===t&&(t=Se.WHITE),void 0===e&&(e=16777215),void 0===r&&(r=1),void 0===n&&(n=null),this.currentPath&&this.startPoly();var i=r>0;return i?(n&&(n=n.clone(),n.invert()),Object.assign(this._fillStyle,{color:e,alpha:r,texture:t,matrix:n,visible:i})):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,r,n){return this.drawShape(new Ot(t,e,r,n))},e.prototype.drawRoundedRect=function(t,e,r,n,i){return this.drawShape(new It(t,e,r,n,i))},e.prototype.drawCircle=function(t,e,r){return this.drawShape(new Pt(t,e,r))},e.prototype.drawEllipse=function(t,e,r,n){return this.drawShape(new Ct(t,e,r,n))},e.prototype.drawPolygon=function(t){var e=arguments,r=t,n=!0;if(r.points&&(n=r.closeStroke,r=r.points),!Array.isArray(r)){r=new Array(arguments.length);for(var i=0;i<r.length;++i)r[i]=e[i]}var o=new Mt(r);return o.closeStroke=n,this.drawShape(o),this},e.prototype.drawShape=function(t){return this._holeMode?this.geometry.drawHole(t,this._matrix):this.geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.drawStar=function(t,e,r,n,i,o){return void 0===o&&(o=0),this.drawPolygon(new si(t,e,r,n,i,o))},e.prototype.clear=function(){return this.geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){return!1},e.prototype._render=function(t){this.finishPoly();var e=this.geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this.geometry,e=this.blendMode;this.batches=[],this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.vertexData=new Float32Array(t.points);for(var r=0,n=t.batches.length;r<n;r++){var i=t.batches[r],o=i.style.color,a=new Float32Array(this.vertexData.buffer,4*i.attribStart*2,2*i.attribSize),s=new Float32Array(t.uvsFloat32.buffer,4*i.attribStart*2,2*i.attribSize),u=new Uint16Array(t.indicesUint16.buffer,2*i.start,i.size),l={vertexData:a,blendMode:e,indices:u,uvs:s,_batchRGB:I(o),_tintRGB:o,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=l}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,r=this.batches.length;e<r;e++){var n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),r=this.geometry,n=this.tint,i=this.worldAlpha,o=e.uniforms,a=r.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(n>>16&255)/255*i,o.tint[1]=(n>>8&255)/255*i,o.tint[2]=(255&n)/255*i,o.tint[3]=i,t.shader.bind(e),t.geometry.bind(r,e),t.state.set(this.state);for(var s=0,u=a.length;s<u;s++)this._renderDrawCallDirect(t,r.drawCalls[s])},e.prototype._renderDrawCallDirect=function(t,e){for(var r=e.textureCount,n=0;n<r;n++)t.texture.bind(e.textures[n],n);t.geometry.draw(e.type,e.size,e.start)},e.prototype._resolveDirectShader=function(t){var e=this.shader,r=this.pluginName;if(!e){if(!li[r]){for(var n=new Int32Array(16),i=0;i<16;i++)n[i]=i;var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new ft,default:Ve.from({uSamplers:n},!0)},a=t.plugins[r]._shader.program;li[r]=new Pr(a,o)}e=li[r]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this.geometry.bounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this.geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=I(this.tint,ui),e=0;e<this.batches.length;e++){var r=this.batches[e],n=r._batchRGB,i=t[0]*n[0]*255,o=t[1]*n[1]*255,a=t[2]*n[2]*255,s=(i<<16)+(o<<8)+(0|a);r._tintRGB=(s>>16)+(65280&s)+((255&s)<<16)}}},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID;for(var t=this.transform.worldTransform,e=t.a,r=t.b,n=t.c,i=t.d,o=t.tx,a=t.ty,s=this.geometry.points,u=this.vertexData,l=0,h=0;h<s.length;h+=2){var c=s[h],f=s[h+1];u[l++]=e*c+n*f+o,u[l++]=i*f+r*c+a}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this.geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},Object.defineProperties(e.prototype,r),e}(jt);hi._TEMP_POINT=new ot;
/*!
 * @pixi/sprite - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var ci=new ot,fi=new Uint16Array([0,1,2,0,2,3]),di=function(t){function e(e){t.call(this),this._anchor=new at(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=v.NORMAL,this.shader=null,this._cachedTint=16777215,this.uvs=null,this.texture=e||Se.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=fi,this.size=4,this.start=0,this.pluginName="batch",this.isSprite=!0,this._roundPixels=s.ROUND_PIXELS}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={roundPixels:{configurable:!0},width:{configurable:!0},height:{configurable:!0},anchor:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Y(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Y(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,o=e.d,a=e.tx,s=e.ty,u=this.vertexData,l=t.trim,h=t.orig,c=this._anchor,f=0,d=0,p=0,g=0;if(l?(d=l.x-c._x*h.width,f=d+l.width,g=l.y-c._y*h.height,p=g+l.height):(d=-c._x*h.width,f=d+h.width,g=-c._y*h.height,p=g+h.height),u[0]=r*d+i*g+a,u[1]=o*g+n*d+s,u[2]=r*f+i*g+a,u[3]=o*g+n*f+s,u[4]=r*f+i*p+a,u[5]=o*p+n*f+s,u[6]=r*d+i*p+a,u[7]=o*p+n*d+s,this._roundPixels)for(var v=0;v<8;v++)u[v]=Math.round(u[v])}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,n=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,l=i.tx,h=i.ty,c=-n._x*r.width,f=c+r.width,d=-n._y*r.height,p=d+r.height;e[0]=o*c+s*d+l,e[1]=u*d+a*c+h,e[2]=o*f+s*d+l,e[3]=u*d+a*f+h,e[4]=o*f+s*p+l,e[5]=u*p+a*f+h,e[6]=o*c+s*p+l,e[7]=u*p+a*c+h},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ot),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,ci);var e=this._texture.orig.width,r=this._texture.orig.height,n=-e*this.anchor.x,i=0;return ci.x>=n&&ci.x<n+e&&(i=-r*this.anchor.y,ci.y>=i&&ci.y<i+r)},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var r="boolean"===typeof e?e:e&&e.texture;if(r){var n="boolean"===typeof e?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null,this.shader=null},e.from=function(t,r){var n=t instanceof Se?t:Se.from(t,r);return new e(n)},r.roundPixels.set=function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},r.roundPixels.get=function(){return this._roundPixels},r.width.get=function(){return Math.abs(this.scale.x)*this._texture.orig.width},r.width.set=function(t){var e=Y(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},r.height.get=function(){return Math.abs(this.scale.y)*this._texture.orig.height},r.height.set=function(t){var e=Y(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},r.anchor.get=function(){return this._anchor},r.anchor.set=function(t){this._anchor.copyFrom(t)},r.tint.get=function(){return this._tint},r.tint.set=function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},r.texture.get=function(){return this._texture},r.texture.set=function(t){this._texture!==t&&(this._texture=t||Se.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},Object.defineProperties(e.prototype,r),e}(jt),pi={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},gi={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:pi.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},vi=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],mi=function(t){this.styleID=0,this.reset(),_i(this,t,t)},yi={align:{configurable:!0},breakWords:{configurable:!0},dropShadow:{configurable:!0},dropShadowAlpha:{configurable:!0},dropShadowAngle:{configurable:!0},dropShadowBlur:{configurable:!0},dropShadowColor:{configurable:!0},dropShadowDistance:{configurable:!0},fill:{configurable:!0},fillGradientType:{configurable:!0},fillGradientStops:{configurable:!0},fontFamily:{configurable:!0},fontSize:{configurable:!0},fontStyle:{configurable:!0},fontVariant:{configurable:!0},fontWeight:{configurable:!0},letterSpacing:{configurable:!0},lineHeight:{configurable:!0},leading:{configurable:!0},lineJoin:{configurable:!0},miterLimit:{configurable:!0},padding:{configurable:!0},stroke:{configurable:!0},strokeThickness:{configurable:!0},textBaseline:{configurable:!0},trim:{configurable:!0},whiteSpace:{configurable:!0},wordWrap:{configurable:!0},wordWrapWidth:{configurable:!0}};function bi(t){return"number"===typeof t?k(t):("string"===typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function wi(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=bi(t[e]);return t}return bi(t)}function xi(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function _i(t,e,r){for(var n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}mi.prototype.clone=function(){var t={};return _i(t,this,gi),new mi(t)},mi.prototype.reset=function(){_i(this,gi,gi)},yi.align.get=function(){return this._align},yi.align.set=function(t){this._align!==t&&(this._align=t,this.styleID++)},yi.breakWords.get=function(){return this._breakWords},yi.breakWords.set=function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},yi.dropShadow.get=function(){return this._dropShadow},yi.dropShadow.set=function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},yi.dropShadowAlpha.get=function(){return this._dropShadowAlpha},yi.dropShadowAlpha.set=function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},yi.dropShadowAngle.get=function(){return this._dropShadowAngle},yi.dropShadowAngle.set=function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},yi.dropShadowBlur.get=function(){return this._dropShadowBlur},yi.dropShadowBlur.set=function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},yi.dropShadowColor.get=function(){return this._dropShadowColor},yi.dropShadowColor.set=function(t){var e=wi(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},yi.dropShadowDistance.get=function(){return this._dropShadowDistance},yi.dropShadowDistance.set=function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},yi.fill.get=function(){return this._fill},yi.fill.set=function(t){var e=wi(t);this._fill!==e&&(this._fill=e,this.styleID++)},yi.fillGradientType.get=function(){return this._fillGradientType},yi.fillGradientType.set=function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},yi.fillGradientStops.get=function(){return this._fillGradientStops},yi.fillGradientStops.set=function(t){xi(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},yi.fontFamily.get=function(){return this._fontFamily},yi.fontFamily.set=function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},yi.fontSize.get=function(){return this._fontSize},yi.fontSize.set=function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},yi.fontStyle.get=function(){return this._fontStyle},yi.fontStyle.set=function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},yi.fontVariant.get=function(){return this._fontVariant},yi.fontVariant.set=function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},yi.fontWeight.get=function(){return this._fontWeight},yi.fontWeight.set=function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},yi.letterSpacing.get=function(){return this._letterSpacing},yi.letterSpacing.set=function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},yi.lineHeight.get=function(){return this._lineHeight},yi.lineHeight.set=function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},yi.leading.get=function(){return this._leading},yi.leading.set=function(t){this._leading!==t&&(this._leading=t,this.styleID++)},yi.lineJoin.get=function(){return this._lineJoin},yi.lineJoin.set=function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},yi.miterLimit.get=function(){return this._miterLimit},yi.miterLimit.set=function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},yi.padding.get=function(){return this._padding},yi.padding.set=function(t){this._padding!==t&&(this._padding=t,this.styleID++)},yi.stroke.get=function(){return this._stroke},yi.stroke.set=function(t){var e=wi(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},yi.strokeThickness.get=function(){return this._strokeThickness},yi.strokeThickness.set=function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},yi.textBaseline.get=function(){return this._textBaseline},yi.textBaseline.set=function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},yi.trim.get=function(){return this._trim},yi.trim.set=function(t){this._trim!==t&&(this._trim=t,this.styleID++)},yi.whiteSpace.get=function(){return this._whiteSpace},yi.whiteSpace.set=function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},yi.wordWrap.get=function(){return this._wordWrap},yi.wordWrap.set=function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},yi.wordWrapWidth.get=function(){return this._wordWrapWidth},yi.wordWrapWidth.set=function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},mi.prototype.toFontString=function(){var t="number"===typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var r=e.length-1;r>=0;r--){var n=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&vi.indexOf(n)<0&&(n='"'+n+'"'),e[r]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},Object.defineProperties(mi.prototype,yi);var Ei=function(t,e,r,n,i,o,a,s,u){this.text=t,this.style=e,this.width=r,this.height=n,this.lines=i,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=s,this.fontProperties=u};Ei.measureText=function(t,e,r,n){void 0===n&&(n=Ei._canvas),r=void 0===r||null===r?e.wordWrap:r;var i=e.toFontString(),o=Ei.measureFont(i);0===o.fontSize&&(o.fontSize=e.fontSize,o.ascent=e.fontSize);var a=n.getContext("2d");a.font=i;for(var s=r?Ei.wordWrap(t,e,n):t,u=s.split(/(?:\r\n|\r|\n)/),l=new Array(u.length),h=0,c=0;c<u.length;c++){var f=a.measureText(u[c]).width+(u[c].length-1)*e.letterSpacing;l[c]=f,h=Math.max(h,f)}var d=h+e.strokeThickness;e.dropShadow&&(d+=e.dropShadowDistance);var p=e.lineHeight||o.fontSize+e.strokeThickness,g=Math.max(p,o.fontSize+e.strokeThickness)+(u.length-1)*(p+e.leading);return e.dropShadow&&(g+=e.dropShadowDistance),new Ei(t,e,d,g,u,l,p+e.leading,h,o)},Ei.wordWrap=function(t,e,r){void 0===r&&(r=Ei._canvas);for(var n=r.getContext("2d"),i=0,o="",a="",s={},u=e.letterSpacing,l=e.whiteSpace,h=Ei.collapseSpaces(l),c=Ei.collapseNewlines(l),f=!h,d=e.wordWrapWidth+u,p=Ei.tokenize(t),g=0;g<p.length;g++){var v=p[g];if(Ei.isNewline(v)){if(!c){a+=Ei.addLine(o),f=!h,o="",i=0;continue}v=" "}if(h){var m=Ei.isBreakingSpace(v),y=Ei.isBreakingSpace(o[o.length-1]);if(m&&y)continue}var b=Ei.getFromCache(v,u,s,n);if(b>d)if(""!==o&&(a+=Ei.addLine(o),o="",i=0),Ei.canBreakWords(v,e.breakWords))for(var w=v.split(""),x=0;x<w.length;x++){var _=w[x],E=1;while(w[x+E]){var S=w[x+E],O=_[_.length-1];if(Ei.canBreakChars(O,S,v,x,e.breakWords))break;_+=S,E++}x+=_.length-1;var T=Ei.getFromCache(_,u,s,n);T+i>d&&(a+=Ei.addLine(o),f=!1,o="",i=0),o+=_,i+=T}else{o.length>0&&(a+=Ei.addLine(o),o="",i=0);var A=g===p.length-1;a+=Ei.addLine(v,!A),f=!1,o="",i=0}else b+i>d&&(f=!1,a+=Ei.addLine(o),o="",i=0),(o.length>0||!Ei.isBreakingSpace(v)||f)&&(o+=v,i+=b)}return a+=Ei.addLine(o,!1),a},Ei.addLine=function(t,e){return void 0===e&&(e=!0),t=Ei.trimRight(t),t=e?t+"\n":t,t},Ei.getFromCache=function(t,e,r,n){var i=r[t];if(void 0===i){var o=t.length*e;i=n.measureText(t).width+o,r[t]=i}return i},Ei.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},Ei.collapseNewlines=function(t){return"normal"===t},Ei.trimRight=function(t){if("string"!==typeof t)return"";for(var e=t.length-1;e>=0;e--){var r=t[e];if(!Ei.isBreakingSpace(r))break;t=t.slice(0,-1)}return t},Ei.isNewline=function(t){return"string"===typeof t&&Ei._newlines.indexOf(t.charCodeAt(0))>=0},Ei.isBreakingSpace=function(t){return"string"===typeof t&&Ei._breakingSpaces.indexOf(t.charCodeAt(0))>=0},Ei.tokenize=function(t){var e=[],r="";if("string"!==typeof t)return e;for(var n=0;n<t.length;n++){var i=t[n];Ei.isBreakingSpace(i)||Ei.isNewline(i)?(""!==r&&(e.push(r),r=""),e.push(i)):r+=i}return""!==r&&e.push(r),e},Ei.canBreakWords=function(t,e){return e},Ei.canBreakChars=function(t,e,r,n,i){return!0},Ei.measureFont=function(t){if(Ei._fonts[t])return Ei._fonts[t];var e={},r=Ei._canvas,n=Ei._context;n.font=t;var i=Ei.METRICS_STRING+Ei.BASELINE_SYMBOL,o=Math.ceil(n.measureText(i).width),a=Math.ceil(n.measureText(Ei.BASELINE_SYMBOL).width),s=2*a;a=a*Ei.BASELINE_MULTIPLIER|0,r.width=o,r.height=s,n.fillStyle="#f00",n.fillRect(0,0,o,s),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(i,0,a);var u=n.getImageData(0,0,o,s).data,l=u.length,h=4*o,c=0,f=0,d=!1;for(c=0;c<a;++c){for(var p=0;p<h;p+=4)if(255!==u[f+p]){d=!0;break}if(d)break;f+=h}for(e.ascent=a-c,f=l-h,d=!1,c=s;c>a;--c){for(var g=0;g<h;g+=4)if(255!==u[f+g]){d=!0;break}if(d)break;f-=h}return e.descent=c-a,e.fontSize=e.ascent+e.descent,Ei._fonts[t]=e,e},Ei.clearMetrics=function(t){void 0===t&&(t=""),t?delete Ei._fonts[t]:Ei._fonts={}};var Si=function(){try{var t=new OffscreenCanvas(0,0);return t.getContext("2d")?t:document.createElement("canvas")}catch(e){return document.createElement("canvas")}}();Si.width=Si.height=10,Ei._canvas=Si,Ei._context=Si.getContext("2d"),Ei._fonts={},Ei.METRICS_STRING="|ÉqÅ",Ei.BASELINE_SYMBOL="M",Ei.BASELINE_MULTIPLIER=1.4,Ei._newlines=[10,13],Ei._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Oi={texture:!0,children:!1,baseTexture:!0},Ti=function(t){function e(e,r,n){n=n||document.createElement("canvas"),n.width=3,n.height=3;var i=Se.from(n);i.orig=new Ot,i.trim=new Ot,t.call(this,i),this.canvas=n,this.context=this.canvas.getContext("2d"),this._resolution=s.RESOLUTION,this._autoResolution=!0,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=r,this.localStyleID=-1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={width:{configurable:!0},height:{configurable:!0},style:{configurable:!0},text:{configurable:!0},resolution:{configurable:!0}};return e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var r,n,i=this.context,o=Ei.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=o.width,s=o.height,u=o.lines,l=o.lineHeight,h=o.lineWidths,c=o.maxLineWidth,f=o.fontProperties;this.canvas.width=Math.ceil((Math.max(1,a)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,s)+2*e.padding)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;for(var d=e.dropShadow?2:1,p=0;p<d;++p){var g=e.dropShadow&&0===p,v=g?2*s:0,m=v*this.resolution;if(g){i.fillStyle="black",i.strokeStyle="black";var y=e.dropShadowColor,b=I("number"===typeof y?y:D(y));i.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+e.dropShadowAlpha+")",i.shadowBlur=e.dropShadowBlur,i.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,i.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance+m}else i.fillStyle=this._generateFillStyle(e,u),i.strokeStyle=e.stroke,i.shadowColor=0,i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;for(var w=0;w<u.length;w++)r=e.strokeThickness/2,n=e.strokeThickness/2+w*l+f.ascent,"right"===e.align?r+=c-h[w]:"center"===e.align&&(r+=(c-h[w])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(u[w],r+e.padding,n+e.padding-v,!0),e.fill&&this.drawLetterSpacing(u[w],r+e.padding,n+e.padding-v)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,r,n){void 0===n&&(n=!1);var i=this._style,o=i.letterSpacing;if(0!==o)for(var a=e,s=Array.from?Array.from(t):t.split(""),u=this.context.measureText(t).width,l=0,h=0;h<s.length;++h){var c=s[h];n?this.context.strokeText(c,a,r):this.context.fillText(c,a,r),l=this.context.measureText(t.substring(h+1)).width,a+=u-l+o,u=l}else n?this.context.strokeText(t,e,r):this.context.fillText(t,e,r)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=Z(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var r=this._texture,n=this._style,i=n.trim?0:n.padding,o=r.baseTexture;r.trim.width=r._frame.width=Math.ceil(t.width/this._resolution),r.trim.height=r._frame.height=Math.ceil(t.height/this._resolution),r.trim.x=-i,r.trim.y=-i,r.orig.width=r._frame.width-2*i,r.orig.height=r._frame.height-2*i,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(1===t.fill.length)return t.fill[0];var r,n,i,o,a=Math.ceil(this.canvas.width/this._resolution),s=Math.ceil(this.canvas.height/this._resolution),u=t.fill.slice(),l=t.fillGradientStops.slice();if(!l.length)for(var h=u.length+1,c=1;c<h;++c)l.push(c/h);if(u.unshift(t.fill[0]),l.unshift(0),u.push(t.fill[t.fill.length-1]),l.push(1),t.fillGradientType===pi.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,0,a/2,s),n=(u.length+1)*e.length,i=0;for(var f=0;f<e.length;f++){i+=1;for(var d=0;d<u.length;d++)o="number"===typeof l[d]?l[d]/e.length+f/e.length:i/n,r.addColorStop(o,u[d]),i++}}else{r=this.context.createLinearGradient(0,s/2,a,s/2),n=u.length+1,i=1;for(var p=0;p<u.length;p++)o="number"===typeof l[p]?l[p]:i/n,r.addColorStop(o,u[p]),i++}return r},e.prototype.destroy=function(e){"boolean"===typeof e&&(e={children:e}),e=Object.assign({},Oi,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},r.width.get=function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},r.width.set=function(t){this.updateText(!0);var e=Y(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},r.height.get=function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},r.height.set=function(t){this.updateText(!0);var e=Y(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},r.style.get=function(){return this._style},r.style.set=function(t){t=t||{},this._style=t instanceof mi?t:new mi(t),this.localStyleID=-1,this.dirty=!0},r.text.get=function(){return this._text},r.text.set=function(t){t=String(null===t||void 0===t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},r.resolution.get=function(){return this._resolution},r.resolution.set=function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},Object.defineProperties(e.prototype,r),e}(di);
/*!
 * @pixi/prepare - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
s.UPLOADS_PER_FRAME=4;var Ai=function(t){this.maxItemsPerFrame=t,this.itemsLeft=0};Ai.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},Ai.prototype.allowedToUpload=function(){return this.itemsLeft-- >0};var Pi=function(t){var e=this;this.limiter=new Ai(s.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(Ri),this.registerFindHook(ji),this.registerFindHook(Ci),this.registerFindHook(Mi),this.registerFindHook(Ii),this.registerUploadHook(ki),this.registerUploadHook(Di)};function Ci(t,e){var r=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof Se){var i=t._textures[n].baseTexture;-1===e.indexOf(i)&&(e.push(i),r=!0)}return r}function Mi(t,e){return t instanceof le&&(-1===e.indexOf(t)&&e.push(t),!0)}function Ii(t,e){if(t._texture&&t._texture instanceof Se){var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function ki(t,e){return e instanceof Ti&&(e.updateText(!0),!0)}function Di(t,e){if(e instanceof mi){var r=e.toFontString();return Ei.measureFont(r),!0}return!1}function Ri(t,e){if(t instanceof Ti){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function ji(t,e){return t instanceof mi&&(-1===e.indexOf(t)&&e.push(t),!0)}Pi.prototype.upload=function(t,e){"function"===typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,Zt.system.addOnce(this.tick,this,Kt.UTILITY))):e&&e()},Pi.prototype.tick=function(){setTimeout(this.delayedTick,0)},Pi.prototype.prepareItems=function(){this.limiter.beginFrame();while(this.queue.length&&this.limiter.allowedToUpload()){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)Zt.system.addOnce(this.tick,this,Kt.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);this.completes.length=0;for(var o=0,a=i.length;o<a;o++)i[o]()}},Pi.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},Pi.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},Pi.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r;e++)if(this.addHooks[e](t,this.queue))break;if(t instanceof jt)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},Pi.prototype.destroy=function(){this.ticking&&Zt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null};var Li=function(t){function e(e){t.call(this,e),this.uploadHookHelper=this.renderer,this.registerFindHook(Fi),this.registerUploadHook(Bi),this.registerUploadHook(Ni)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pi);function Bi(t,e){return e instanceof le&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function Ni(t,e){return e instanceof hi&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function Fi(t,e){return t instanceof hi&&(e.push(t),!0)}var Ui=function(t){this.maxMilliseconds=t,this.frameStart=0};Ui.prototype.beginFrame=function(){this.frameStart=Date.now()},Ui.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds};
/*!
 * @pixi/app - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var zi=function t(e){var r=this;e=Object.assign({forceCanvas:!1},e),this.renderer=pn(e),this.stage=new jt,t._plugins.forEach((function(t){t.init.call(r,e)}))},Vi={view:{configurable:!0},screen:{configurable:!0}};zi.registerPlugin=function(t){zi._plugins.push(t)},zi.prototype.render=function(){this.renderer.render(this.stage)},Vi.view.get=function(){return this.renderer.view},Vi.screen.get=function(){return this.renderer.screen},zi.prototype.destroy=function(t,e){var r=this,n=zi._plugins.slice(0);n.reverse(),n.forEach((function(t){t.destroy.call(r)})),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},Object.defineProperties(zi.prototype,Vi),zi._plugins=[];var Xi=function(){};Xi.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.resize),this._resizeTo=t,t&&(window.addEventListener("resize",this.resize),this.resize())},get:function(){return this._resizeTo}}),this.resize=function(){e._resizeTo&&(e._resizeTo===window?e.renderer.resize(window.innerWidth,window.innerHeight):e.renderer.resize(e._resizeTo.clientWidth,e._resizeTo.clientHeight))},this._resizeTo=null,this.resizeTo=t.resizeTo||null},Xi.destroy=function(){this.resizeTo=null,this.resize=null},zi.registerPlugin(Xi);var Yi=r("bbad"),Hi=r.n(Yi),Gi=r("d5e4"),qi=r.n(Gi);
/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */
function Wi(){}function Ki(t,e,r,n){var i=0,o=t.length;(function a(s){s||i===o?r&&r(s):n?setTimeout((function(){e(t[i++],a)}),1):e(t[i++],a)})()}function $i(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function Zi(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var r=0,n={_tasks:[],concurrency:e,saturated:Wi,unsaturated:Wi,buffer:e/4,empty:Wi,drain:Wi,error:Wi,started:!1,paused:!1,push:function(t,e){i(t,!1,e)},kill:function(){r=0,n.drain=Wi,n.started=!1,n._tasks=[]},unshift:function(t,e){i(t,!0,e)},process:function(){while(!n.paused&&r<n.concurrency&&n._tasks.length){var e=n._tasks.shift();0===n._tasks.length&&n.empty(),r+=1,r===n.concurrency&&n.saturated(),t(e.data,$i(o(e)))}},length:function(){return n._tasks.length},running:function(){return r},idle:function(){return n._tasks.length+r===0},pause:function(){!0!==n.paused&&(n.paused=!0)},resume:function(){if(!1!==n.paused){n.paused=!1;for(var t=1;t<=n.concurrency;t++)n.process()}}};function i(t,e,r){if(null!=r&&"function"!==typeof r)throw new Error("task callback must be a function");if(n.started=!0,null==t&&n.idle())setTimeout((function(){return n.drain()}),1);else{var i={data:t,callback:"function"===typeof r?r:Wi};e?n._tasks.unshift(i):n._tasks.push(i),setTimeout((function(){return n.process()}),1)}}function o(t){return function(){r-=1,t.callback.apply(t,arguments),null!=arguments[0]&&n.error(arguments[0],t.data),r<=n.concurrency-n.buffer&&n.unsaturated(),n.idle()&&n.drain(),n.process()}}return n}var Ji={};function Qi(t,e){var r=this;Ji[t.url]?(t.data=Ji[t.url],t.complete()):t.onComplete.once((function(){return Ji[r.url]=r.data})),e()}function to(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function eo(t,e,r){return e&&to(t.prototype,e),r&&to(t,r),t}var ro=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),no=null,io=0,oo=200,ao=204,so=1223,uo=2;function lo(){}var ho=function(){function t(e,r,n){if("string"!==typeof e||"string"!==typeof r)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===r.indexOf("data:")),this.name=e,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=lo,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new qi.a,this.onProgress=new qi.a,this.onComplete=new qi.a,this.onAfterMiddleware=new qi.a}t.setExtensionLoadType=function(e,r){co(t._loadTypeMap,e,r)},t.setExtensionXhrType=function(e,r){co(t._xhrTypeMap,e,r)};var e=t.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else while(this.data.firstChild)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(e){var r=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(r)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"===typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:ro&&this.crossOrigin?this._loadXdr():this._loadXhr();break}},e._hasFlag=function(t){return 0!==(this._flags&t)},e._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&"undefined"!==typeof window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&"undefined"!==typeof window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},e._loadXhr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},e._loadXdr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},e._createSource=function(t,e,r){r||(r=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=r,n},e._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var t=this.xhr;this.abort(fo(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e._xhrOnTimeout=function(){var t=this.xhr;this.abort(fo(t)+" Request timed out.")},e._xhrOnAbort=function(){var t=this.xhr;this.abort(fo(t)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var e=this.xhr,r="",n="undefined"===typeof e.status?oo:e.status;""!==e.responseType&&"text"!==e.responseType&&"undefined"!==typeof e.responseType||(r=e.responseText),n===io&&(r.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=oo:n===so&&(n=ao);var i=n/100|0;if(i===uo){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=t.TYPE.JSON}catch(s){return void this.abort("Error trying to parse loaded json: "+s)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var o=new DOMParser;this.data=o.parseFromString(r,"text/xml")}else{var a=document.createElement("div");a.innerHTML=r,this.data=a}this.type=t.TYPE.XML}catch(s){return void this.abort("Error trying to parse loaded xml: "+s)}else this.data=e.response||r;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},e._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,no||(no=document.createElement("a")),no.href=t,t=Hi()(no.href,{strictMode:!0});var r=!t.port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&r&&n===e.protocol?"":"anonymous"},e._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},e._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var r=t.indexOf("/");e=t.substring(r+1,t.indexOf(";",r))}else{var n=t.indexOf("?"),i=t.indexOf("#"),o=Math.min(n>-1?n:t.length,i>-1?i:t.length);t=t.substring(0,o),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},e._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},eo(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function co(t,e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=r)}function fo(t){return t.toString().replace("object ","")}ho.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},ho.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},ho.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},ho.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},ho._loadTypeMap={gif:ho.LOAD_TYPE.IMAGE,png:ho.LOAD_TYPE.IMAGE,bmp:ho.LOAD_TYPE.IMAGE,jpg:ho.LOAD_TYPE.IMAGE,jpeg:ho.LOAD_TYPE.IMAGE,tif:ho.LOAD_TYPE.IMAGE,tiff:ho.LOAD_TYPE.IMAGE,webp:ho.LOAD_TYPE.IMAGE,tga:ho.LOAD_TYPE.IMAGE,svg:ho.LOAD_TYPE.IMAGE,"svg+xml":ho.LOAD_TYPE.IMAGE,mp3:ho.LOAD_TYPE.AUDIO,ogg:ho.LOAD_TYPE.AUDIO,wav:ho.LOAD_TYPE.AUDIO,mp4:ho.LOAD_TYPE.VIDEO,webm:ho.LOAD_TYPE.VIDEO},ho._xhrTypeMap={xhtml:ho.XHR_RESPONSE_TYPE.DOCUMENT,html:ho.XHR_RESPONSE_TYPE.DOCUMENT,htm:ho.XHR_RESPONSE_TYPE.DOCUMENT,xml:ho.XHR_RESPONSE_TYPE.DOCUMENT,tmx:ho.XHR_RESPONSE_TYPE.DOCUMENT,svg:ho.XHR_RESPONSE_TYPE.DOCUMENT,tsx:ho.XHR_RESPONSE_TYPE.DOCUMENT,gif:ho.XHR_RESPONSE_TYPE.BLOB,png:ho.XHR_RESPONSE_TYPE.BLOB,bmp:ho.XHR_RESPONSE_TYPE.BLOB,jpg:ho.XHR_RESPONSE_TYPE.BLOB,jpeg:ho.XHR_RESPONSE_TYPE.BLOB,tif:ho.XHR_RESPONSE_TYPE.BLOB,tiff:ho.XHR_RESPONSE_TYPE.BLOB,webp:ho.XHR_RESPONSE_TYPE.BLOB,tga:ho.XHR_RESPONSE_TYPE.BLOB,json:ho.XHR_RESPONSE_TYPE.JSON,text:ho.XHR_RESPONSE_TYPE.TEXT,txt:ho.XHR_RESPONSE_TYPE.TEXT,ttf:ho.XHR_RESPONSE_TYPE.BUFFER,otf:ho.XHR_RESPONSE_TYPE.BUFFER},ho.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var po="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function go(t){var e="",r=0;while(r<t.length){for(var n=[0,0,0],i=[0,0,0,0],o=0;o<n.length;++o)r<t.length?n[o]=255&t.charCodeAt(r++):n[o]=0;i[0]=n[0]>>2,i[1]=(3&n[0])<<4|n[1]>>4,i[2]=(15&n[1])<<2|n[2]>>6,i[3]=63&n[2];var a=r-(t.length-1);switch(a){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64;break;default:break}for(var s=0;s<i.length;++s)e+=po.charAt(i[s])}return e}var vo=window.URL||window.webkitURL;function mo(t,e){if(t.data){if(t.xhr&&t.xhrType===ho.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!==typeof t.data){if(0===t.data.type.indexOf("image")){var r=vo.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=ho.TYPE.IMAGE,void(t.data.onload=function(){vo.revokeObjectURL(r),t.data.onload=null,e()})}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+go(t.xhr.responseText),t.type=ho.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}var yo={caching:Qi,parsing:mo},bo=100,wo=/(#[\w-]+)?$/,xo=function(){function t(e,r){var n=this;void 0===e&&(e=""),void 0===r&&(r=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return n._loadResource(t,e)},this._queue=Zi(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new qi.a,this.onError=new qi.a,this.onLoad=new qi.a,this.onStart=new qi.a,this.onComplete=new qi.a;for(var i=0;i<t._defaultBeforeMiddleware.length;++i)this.pre(t._defaultBeforeMiddleware[i]);for(var o=0;o<t._defaultAfterMiddleware.length;++o)this.use(t._defaultAfterMiddleware[o])}var e=t.prototype;return e.add=function(t,e,r,n){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"===typeof t&&(n=e||t.callback||t.onComplete,r=t,e=t.url,t=t.name||t.key||t.url),"string"!==typeof e&&(n=r,r=e,e=t),"string"!==typeof e)throw new Error("No url passed to add resource to loader.");if("function"===typeof r&&(n=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new ho(t,e,r),"function"===typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var o=r.parentResource,a=[],s=0;s<o.children.length;++s)o.children[s].isComplete||a.push(o.children[s]);var u=o.progressChunk*(a.length+1),l=u/(a.length+2);o.children.push(this.resources[t]),o.progressChunk=l;for(var h=0;h<a.length;++h)a[h].progressChunk=l;this.resources[t].progressChunk=l}return this._queue.push(this.resources[t]),this},e.pre=function(t){return this._beforeMiddleware.push(t),this},e.use=function(t){return this._afterMiddleware.push(t),this},e.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},e.load=function(t){if("function"===typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=this._queue._tasks.length,r=bo/e,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=r;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(t){var e,r=Hi()(t,{strictMode:!0});if(e=r.protocol||!r.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=wo.exec(e)[0];e=e.substr(0,e.length-n.length),-1!==e.indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=n}return e},e._loadResource=function(t,e){var r=this;t._dequeue=e,Ki(this._beforeMiddleware,(function(e,n){e.call(r,t,(function(){n(t.isComplete?{}:null)}))}),(function(){t.isComplete?r._onLoad(t):(t._onLoadBinding=t.onComplete.once(r._onLoad,r),t.load())}),!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=bo,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),Ki(this._afterMiddleware,(function(r,n){r.call(e,t,n)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(bo,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},eo(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();xo._defaultBeforeMiddleware=[],xo._defaultAfterMiddleware=[],xo.pre=function(t){return xo._defaultBeforeMiddleware.push(t),xo},xo.use=function(t){return xo._defaultAfterMiddleware.push(t),xo};
/*!
 * @pixi/loaders - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var _o=function(){};_o.use=function(t,e){t.data&&t.type===ho.TYPE.IMAGE&&(t.texture=Se.fromLoader(t.data,t.url,t.name)),e()};var Eo=function(t){function e(r,n){var i=this;t.call(this,r,n),l.a.call(this);for(var o=0;o<e._plugins.length;++o){var a=e._plugins[o],s=a.pre,u=a.use;s&&this.pre(s),u&&this.use(u)}this.onStart.add((function(t){return i.emit("start",t)})),this.onProgress.add((function(t,e){return i.emit("progress",t,e)})),this.onError.add((function(t,e,r){return i.emit("error",t,e,r)})),this.onLoad.add((function(t,e){return i.emit("load",t,e)})),this.onComplete.add((function(t,e){return i.emit("complete",t,e)})),this._protected=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={shared:{configurable:!0}};return e.prototype.destroy=function(){this._protected||(this.removeAllListeners(),this.reset())},r.shared.get=function(){var t=e._shared;return t||(t=new e,t._protected=!0,e._shared=t),t},Object.defineProperties(e,r),e}(xo);Object.assign(Eo.prototype,l.a.prototype),Eo._plugins=[],Eo.registerPlugin=function(t){return Eo._plugins.push(t),t.add&&t.add(),Eo},Eo.registerPlugin({use:yo.parsing}),Eo.registerPlugin(_o);var So=function(){};So.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?Eo.shared:new Eo},So.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)};var Oo=ho,To=function(t,e,r){this.geometry=new Ne,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var i=t[n];i={attributeName:i.attributeName,size:i.size,uploadFunction:i.uploadFunction,type:i.type||w.FLOAT,offset:i.offset},e[n]?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()};
/*!
 * @pixi/particles - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */To.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new Ie(U(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var n=this.dynamicProperties[r];n.offset=e,e+=n.size,this.dynamicStride+=n.size}var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new Ie(this.dynamicData,!1,!1);var o=0;this.staticStride=0;for(var a=0;a<this.staticProperties.length;++a){var s=this.staticProperties[a];s.offset=o,o+=s.size,this.staticStride+=s.size}var u=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=new Ie(this.staticData,!0,!1);for(var l=0;l<this.dynamicProperties.length;++l){var h=this.dynamicProperties[l];t.addAttribute(h.attributeName,this.dynamicBuffer,0,h.type===w.UNSIGNED_BYTE,h.type,4*this.dynamicStride,4*h.offset)}for(var c=0;c<this.staticProperties.length;++c){var f=this.staticProperties[c];t.addAttribute(f.attributeName,this.staticBuffer,0,f.type===w.UNSIGNED_BYTE,f.type,4*this.staticStride,4*f.offset)}},To.prototype.uploadDynamic=function(t,e,r){for(var n=0;n<this.dynamicProperties.length;n++){var i=this.dynamicProperties[n];i.uploadFunction(t,e,r,i.type===w.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++},To.prototype.uploadStatic=function(t,e,r){for(var n=0;n<this.staticProperties.length;n++){var i=this.staticProperties[n];i.uploadFunction(t,e,r,i.type===w.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++},To.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()};var Ao="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n",Po="varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",Co=function(t){function e(e){t.call(this,e),this.shader=null,this.properties=null,this.tempMatrix=new ft,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:w.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Pr.from(Ao,Po,{})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){var e=t.children,r=t._maxSize,n=t._batchSize,i=this.renderer,o=e.length;if(0!==o){o>r&&!t.autoResize&&(o=r);var a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));var s=e[0]._texture.baseTexture;this.renderer.state.setBlendMode(L(t.blendMode,s.premultiplyAlpha));var u=i.gl,l=t.worldTransform.copyTo(this.tempMatrix);l.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=l.toArray(!0),this.shader.uniforms.uColor=B(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,s.premultiplyAlpha),this.shader.uniforms.uSampler=s,this.renderer.shader.bind(this.shader);for(var h=!1,c=0,f=0;c<o;c+=n,f+=1){var d=o-c;d>n&&(d=n),f>=a.length&&a.push(this._generateOneMoreBuffer(t));var p=a[f];p.uploadDynamic(e,c,d);var g=t._bufferUpdateIDs[f]||0;h=h||p._updateID<g,h&&(p._updateID=t._updateID,p.uploadStatic(e,c,d)),i.geometry.bind(p.geometry),u.drawElements(u.TRIANGLES,6*d,u.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],r=t._maxSize,n=t._batchSize,i=t._properties,o=0;o<r;o+=n)e.push(new To(this.properties,i,n));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,r=t._properties;return new To(this.properties,r,e)},e.prototype.uploadVertices=function(t,e,r,n,i,o){for(var a=0,s=0,u=0,l=0,h=0;h<r;++h){var c=t[e+h],f=c._texture,d=c.scale.x,p=c.scale.y,g=f.trim,v=f.orig;g?(s=g.x-c.anchor.x*v.width,a=s+g.width,l=g.y-c.anchor.y*v.height,u=l+g.height):(a=v.width*(1-c.anchor.x),s=v.width*-c.anchor.x,u=v.height*(1-c.anchor.y),l=v.height*-c.anchor.y),n[o]=s*d,n[o+1]=l*p,n[o+i]=a*d,n[o+i+1]=l*p,n[o+2*i]=a*d,n[o+2*i+1]=u*p,n[o+3*i]=s*d,n[o+3*i+1]=u*p,o+=4*i}},e.prototype.uploadPosition=function(t,e,r,n,i,o){for(var a=0;a<r;a++){var s=t[e+a].position;n[o]=s.x,n[o+1]=s.y,n[o+i]=s.x,n[o+i+1]=s.y,n[o+2*i]=s.x,n[o+2*i+1]=s.y,n[o+3*i]=s.x,n[o+3*i+1]=s.y,o+=4*i}},e.prototype.uploadRotation=function(t,e,r,n,i,o){for(var a=0;a<r;a++){var s=t[e+a].rotation;n[o]=s,n[o+i]=s,n[o+2*i]=s,n[o+3*i]=s,o+=4*i}},e.prototype.uploadUvs=function(t,e,r,n,i,o){for(var a=0;a<r;++a){var s=t[e+a]._texture._uvs;s?(n[o]=s.x0,n[o+1]=s.y0,n[o+i]=s.x1,n[o+i+1]=s.y1,n[o+2*i]=s.x2,n[o+2*i+1]=s.y2,n[o+3*i]=s.x3,n[o+3*i+1]=s.y3,o+=4*i):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+2*i]=0,n[o+2*i+1]=0,n[o+3*i]=0,n[o+3*i+1]=0,o+=4*i)}},e.prototype.uploadTint=function(t,e,r,n,i,o){for(var a=0;a<r;++a){var s=t[e+a],u=s._texture.baseTexture.premultiplyAlpha,l=s.alpha,h=l<1&&u?N(s._tintRGB,l):s._tintRGB+(255*l<<24);n[o]=h,n[o+i]=h,n[o+2*i]=h,n[o+3*i]=h,o+=4*i}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(He),Mo=function(t,e,r){void 0===r&&(r=null),this.baseTexture=t,this.textures={},this.animations={},this.data=e,this.resolution=this._updateResolution(r||(this.baseTexture.resource?this.baseTexture.resource.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null},Io={BATCH_SIZE:{configurable:!0}};Io.BATCH_SIZE.get=function(){return 1e3},Mo.prototype._updateResolution=function(t){var e=this.data.meta.scale,r=rt(t,null);return null===r&&(r=void 0!==e?parseFloat(e):1),1!==r&&this.baseTexture.setResolution(r),r},Mo.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=Mo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},Mo.prototype._processFrames=function(t){var e=t,r=Mo.BATCH_SIZE;while(e-t<r&&e<this._frameKeys.length){var n=this._frameKeys[e],i=this._frames[n],o=i.frame;if(o){var a=null,s=null,u=!1!==i.trimmed&&i.sourceSize?i.sourceSize:i.frame,l=new Ot(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);a=i.rotated?new Ot(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):new Ot(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),!1!==i.trimmed&&i.spriteSourceSize&&(s=new Ot(Math.floor(i.spriteSourceSize.x)/this.resolution,Math.floor(i.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[n]=new Se(this.baseTexture,a,l,s,i.rotated?2:0,i.anchor),Se.addToCache(this.textures[n],n)}e++}},Mo.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var r=0;r<t[e].length;r++){var n=t[e][r];this.animations[e].push(this.textures[n])}}},Mo.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},Mo.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*Mo.BATCH_SIZE),this._batchIndex++,setTimeout((function(){t._batchIndex*Mo.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())}),0)},Mo.prototype.destroy=function(t){for(var e in void 0===t&&(t=!1),this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},Object.defineProperties(Mo,Io);var ko=function(){};ko.use=function(t,e){var r=t.name+"_image";if(t.data&&t.type===Oo.TYPE.JSON&&t.data.frames&&!this.resources[r]){var n={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},i=ko.getResourcePath(t,this.baseUrl);this.add(r,i,n,(function(r){if(r.error)e(r.error);else{var n=new Mo(r.texture.baseTexture,t.data,t.url);n.parse((function(){t.spritesheet=n,t.textures=n.textures,e()}))}}))}else e()},ko.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:d.a.resolve(t.url.replace(e,""),t.data.meta.image)};
/*!
 * @pixi/sprite-tiling - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
new ot;var Do="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Ro="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n",jo="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",Lo=new ft,Bo=function(t){function e(e){t.call(this,e);var r={globals:this.renderer.globalUniforms};this.shader=Pr.from(Do,Ro,r),this.simpleShader=Pr.from(Do,jo,r),this.quad=new Ue}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){var e=this.renderer,r=this.quad,n=r.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&(n=r.uvs,n[0]=n[6]=-t.anchor.x,n[1]=n[3]=-t.anchor.y,n[2]=n[4]=1-t.anchor.x,n[5]=n[7]=1-t.anchor.y),r.invalidate();var i=t._texture,o=i.baseTexture,a=t.tileTransform.localTransform,s=t.uvMatrix,u=o.isPowerOfTwo&&i.frame.width===o.width&&i.frame.height===o.height;u&&(o._glTextures[e.CONTEXT_UID]?u=o.wrapMode!==_.CLAMP:o.wrapMode===_.CLAMP&&(o.wrapMode=_.REPEAT));var l=u?this.simpleShader:this.shader,h=i.width,c=i.height,f=t._width,d=t._height;Lo.set(a.a*h/f,a.b*h/d,a.c*c/f,a.d*c/d,a.tx/f,a.ty/d),Lo.invert(),u?Lo.prepend(s.mapCoord):(l.uniforms.uMapCoord=s.mapCoord.toArray(!0),l.uniforms.uClampFrame=s.uClampFrame,l.uniforms.uClampOffset=s.uClampOffset),l.uniforms.uTransform=Lo.toArray(!0),l.uniforms.uColor=F(t.tint,t.worldAlpha,l.uniforms.uColor,o.premultiplyAlpha),l.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),l.uniforms.uSampler=i,e.shader.bind(l),e.geometry.bind(r),e.state.setBlendMode(L(t.blendMode,o.premultiplyAlpha)),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(He),No=function(t){function e(e,r){var n=this;void 0===r&&(r={}),t.call(this),this._textWidth=0,this._textHeight=0,this._glyphs=[],this._font={tint:void 0!==r.tint?r.tint:16777215,align:r.align||"left",name:null,size:0},this.font=r.font,this._text=e,this._maxWidth=0,this._maxLineHeight=0,this._letterSpacing=0,this._anchor=new at((function(){n.dirty=!0}),this,0,0),this.dirty=!1,this.roundPixels=s.ROUND_PIXELS,this.updateText()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={tint:{configurable:!0},align:{configurable:!0},anchor:{configurable:!0},font:{configurable:!0},text:{configurable:!0},maxWidth:{configurable:!0},maxLineHeight:{configurable:!0},textWidth:{configurable:!0},letterSpacing:{configurable:!0},textHeight:{configurable:!0}};return e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],r=this._font.size/t.size,n=new ot,i=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",s=a.length,u=this._maxWidth*t.size/this._font.size,l=null,h=0,c=0,f=0,d=-1,p=0,g=0,v=0,m=0;m<s;m++){var y=a.charCodeAt(m),b=a.charAt(m);if(/(?:\s)/.test(b)&&(d=m,p=h),"\r"!==b&&"\n"!==b){var w=t.chars[y];w&&(l&&w.kerning[l]&&(n.x+=w.kerning[l]),i.push({texture:w.texture,line:f,charCode:y,position:new ot(n.x+w.xOffset+this._letterSpacing/2,n.y+w.yOffset)}),n.x+=w.xAdvance+this._letterSpacing,h=n.x,v=Math.max(v,w.yOffset+w.texture.height),l=y,-1!==d&&u>0&&n.x>u&&(++g,z(i,1+d-g,1+m-d),m=d,d=-1,o.push(p),c=Math.max(c,p),f++,n.x=0,n.y+=t.lineHeight,l=null))}else o.push(h),c=Math.max(c,h),++f,++g,n.x=0,n.y+=t.lineHeight,l=null}var x=a.charAt(a.length-1);"\r"!==x&&"\n"!==x&&(/(?:\s)/.test(x)&&(h=p),o.push(h),c=Math.max(c,h));for(var _=[],E=0;E<=f;E++){var S=0;"right"===this._font.align?S=c-o[E]:"center"===this._font.align&&(S=(c-o[E])/2),_.push(S)}for(var O=i.length,T=this.tint,A=0;A<O;A++){var P=this._glyphs[A];P?P.texture=i[A].texture:(P=new di(i[A].texture),P.roundPixels=this.roundPixels,this._glyphs.push(P)),P.position.x=(i[A].position.x+_[i[A].line])*r,P.position.y=i[A].position.y*r,P.scale.x=P.scale.y=r,P.tint=T,P.parent||this.addChild(P)}for(var C=O;C<this._glyphs.length;++C)this.removeChild(this._glyphs[C]);if(this._textWidth=c*r,this._textHeight=(n.y+t.lineHeight)*r,0!==this.anchor.x||0!==this.anchor.y)for(var M=0;M<O;M++)this._glyphs[M].x-=this._textWidth*this.anchor.x,this._glyphs[M].y-=this._textHeight*this.anchor.y;this._maxLineHeight=v*r},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},r.tint.get=function(){return this._font.tint},r.tint.set=function(t){this._font.tint="number"===typeof t&&t>=0?t:16777215,this.dirty=!0},r.align.get=function(){return this._font.align},r.align.set=function(t){this._font.align=t||"left",this.dirty=!0},r.anchor.get=function(){return this._anchor},r.anchor.set=function(t){"number"===typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},r.font.get=function(){return this._font},r.font.set=function(t){t&&("string"===typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"===typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)},r.text.get=function(){return this._text},r.text.set=function(t){t=String(null===t||void 0===t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},r.maxWidth.get=function(){return this._maxWidth},r.maxWidth.set=function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},r.maxLineHeight.get=function(){return this.validate(),this._maxLineHeight},r.textWidth.get=function(){return this.validate(),this._textWidth},r.letterSpacing.get=function(){return this._letterSpacing},r.letterSpacing.set=function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},r.textHeight.get=function(){return this.validate(),this._textHeight},e.registerFont=function(t,r){var n={},i=t.getElementsByTagName("info")[0],o=t.getElementsByTagName("common")[0],a=t.getElementsByTagName("page"),u=rt(a[0].getAttribute("file"),s.RESOLUTION),l={};n.font=i.getAttribute("face"),n.size=parseInt(i.getAttribute("size"),10),n.lineHeight=parseInt(o.getAttribute("lineHeight"),10)/u,n.chars={},r instanceof Se&&(r=[r]);for(var h=0;h<a.length;h++){var c=a[h].getAttribute("id"),f=a[h].getAttribute("file");l[c]=r instanceof Array?r[h]:r[f]}for(var d=t.getElementsByTagName("char"),p=0;p<d.length;p++){var g=d[p],v=parseInt(g.getAttribute("id"),10),m=g.getAttribute("page")||0,y=new Ot(parseInt(g.getAttribute("x"),10)/u+l[m].frame.x/u,parseInt(g.getAttribute("y"),10)/u+l[m].frame.y/u,parseInt(g.getAttribute("width"),10)/u,parseInt(g.getAttribute("height"),10)/u);n.chars[v]={xOffset:parseInt(g.getAttribute("xoffset"),10)/u,yOffset:parseInt(g.getAttribute("yoffset"),10)/u,xAdvance:parseInt(g.getAttribute("xadvance"),10)/u,kerning:{},texture:new Se(l[m].baseTexture,y),page:m}}for(var b=t.getElementsByTagName("kerning"),w=0;w<b.length;w++){var x=b[w],_=parseInt(x.getAttribute("first"),10)/u,E=parseInt(x.getAttribute("second"),10)/u,S=parseInt(x.getAttribute("amount"),10)/u;n.chars[E]&&(n.chars[E].kerning[_]=S)}return e.fonts[n.font]=n,n},Object.defineProperties(e.prototype,r),e}(jt);No.fonts={};var Fo=function(){};Fo.parse=function(t,e){t.bitmapFont=No.registerFont(t.data,e)},Fo.add=function(){Oo.setExtensionXhrType("fnt",Oo.XHR_RESPONSE_TYPE.DOCUMENT)},Fo.dirname=function(t){var e=t.replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},Fo.use=function(t,e){if(t.data&&t.type===Oo.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var r=t.isDataUrl?"":Fo.dirname(t.url);t.isDataUrl&&("."===r&&(r=""),this.baseUrl&&r&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(r+="/")),r=r.replace(this.baseUrl,""),r&&"/"!==r.charAt(r.length-1)&&(r+="/");for(var n=t.data.getElementsByTagName("page"),i={},o=function(r){i[r.metadata.pageFile]=r.texture,Object.keys(i).length===n.length&&(Fo.parse(t,i),e())},a=0;a<n.length;++a){var s=n[a].getAttribute("file"),u=r+s,l=!1;for(var h in this.resources){var c=this.resources[h];if(c.url===u){c.metadata.pageFile=s,c.texture?o(c):c.onAfterMiddleware.add(o),l=!0;break}}if(!l){var f={crossOrigin:t.crossOrigin,loadType:Oo.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:s},t.metadata.imageMetadata),parentResource:t};this.add(u,f,o)}}}else e();else e()};["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");var Uo="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",zo=function(t){function e(){var e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};t.call(this,gn,Uo,e),this.alpha=1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={matrix:{configurable:!0},alpha:{configurable:!0}};return e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r},e.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),n=Math.sin(t),i=Math.sqrt,o=1/3,a=i(o),s=r+(1-r)*o,u=o*(1-r)-a*n,l=o*(1-r)+a*n,h=o*(1-r)+a*n,c=r+o*(1-r),f=o*(1-r)-a*n,d=o*(1-r)-a*n,p=o*(1-r)+a*n,g=r+o*(1-r),v=[s,u,l,0,0,h,c,f,0,0,d,p,g,0,0,0,0,0,1,0];this._loadMatrix(v,e)},e.prototype.contrast=function(t,e){var r=(t||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var r=2*t/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.colorTone=function(t,e,r,n,i){t=t||.2,e=e||.15,r=r||16770432,n=n||3375104;var o=(r>>16&255)/255,a=(r>>8&255)/255,s=(255&r)/255,u=(n>>16&255)/255,l=(n>>8&255)/255,h=(255&n)/255,c=[.3,.59,.11,0,0,o,a,s,t,0,u,l,h,e,0,o-u,a-l,s-h,0,0];this._loadMatrix(c,i)},e.prototype.night=function(t,e){t=t||.1;var r=[-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},r.matrix.get=function(){return this.uniforms.m},r.matrix.set=function(t){this.uniforms.m=t},r.alpha.get=function(){return this.uniforms.uAlpha},r.alpha.set=function(t){this.uniforms.uAlpha=t},Object.defineProperties(e.prototype,r),e}(Fr);zo.prototype.grayscale=zo.prototype.greyscale;
/*!
 * @pixi/filter-displacement - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Vo=new ft;Dt.prototype._cacheAsBitmap=!1,Dt.prototype._cacheData=!1;var Xo=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(Dt.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new Xo),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),Dt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},Dt.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.batch.flush();var r=this.getLocalBounds().clone();if(this.filters){var n=this.filters[0].padding;r.pad(n)}r.ceil(s.RESOLUTION);var i=t.renderTexture.current,o=t.renderTexture.sourceFrame,a=t.projection.transform,u=Ae.create(r.width,r.height),l="cacheAsBitmap_"+X();this._cacheData.textureCacheId=l,le.addToCache(u.baseTexture,l),Se.addToCache(u,l);var h=Vo;h.tx=-r.x,h.ty=-r.y,this.transform.worldTransform.identity(),this.render=this._cacheData.originalRender,t.render(this,u,!0,h,!0),t.projection.transform=a,t.renderTexture.bind(i,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var c=new di(u);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-r.x/r.width,c.anchor.y=-r.y/r.height,c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)}},Dt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},Dt.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),r=this.alpha;this.alpha=1;var n=t.context;e.ceil(s.RESOLUTION);var i=Ae.create(e.width,e.height),o="cacheAsBitmap_"+X();this._cacheData.textureCacheId=o,le.addToCache(i.baseTexture,o),Se.addToCache(i,o);var a=Vo;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,i,!0,a,!1),t.context=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var u=new di(i);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-e.x/e.width,u.anchor.y=-e.y/e.height,u.alpha=r,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},Dt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},Dt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},Dt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,le.removeFromCache(this._cacheData.textureCacheId),Se.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Dt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},
/*!
 * @pixi/mixin-get-child-by-name - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Dt.prototype.name=null,jt.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null},
/*!
 * @pixi/mixin-get-global-position - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Dt.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new ot),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};
/*!
 * @pixi/mesh - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Yo=function(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0};Yo.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}};var Ho=new ot,Go=new Mt,qo=function(t){function e(e,r,n,i){void 0===i&&(i=m.TRIANGLES),t.call(this),this.geometry=e,e.refCount++,this.shader=r,this.state=n||jr.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=0,this._transformID=-1,this.tint=16777215,this.blendMode=v.NORMAL,this._roundPixels=s.ROUND_PIXELS,this.batchUvs=null}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={uvBuffer:{configurable:!0},verticesBuffer:{configurable:!0},material:{configurable:!0},blendMode:{configurable:!0},roundPixels:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return r.uvBuffer.get=function(){return this.geometry.buffers[1]},r.verticesBuffer.get=function(){return this.geometry.buffers[0]},r.material.set=function(t){this.shader=t},r.material.get=function(){return this.shader},r.blendMode.set=function(t){this.state.blendMode=t},r.blendMode.get=function(){return this.state.blendMode},r.roundPixels.set=function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},r.roundPixels.get=function(){return this._roundPixels},r.tint.get=function(){return this.shader.tint},r.tint.set=function(t){this.shader.tint=t},r.texture.get=function(){return this.shader.texture},r.texture.set=function(t){this.shader.texture=t},e.prototype._render=function(t){var r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===m.TRIANGLES&&r.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var r=this.transform.worldTransform,n=r.a,i=r.b,o=r.c,a=r.d,s=r.tx,u=r.ty,l=this.vertexData,h=0;h<l.length/2;h++){var c=e[2*h],f=e[2*h+1];l[2*h]=n*c+o*f+s,l[2*h+1]=i*c+a*f+u}if(this._roundPixels)for(var d=0;d<l.length;d++)l[d]=Math.round(l[d]);this.vertexDirty=t.vertexDirtyId}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Yo(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Ho);for(var e=this.geometry.getBuffer("aVertexPosition").data,r=Go.points,n=this.geometry.getIndex().data,i=n.length,o=4===this.drawMode?3:1,a=0;a+2<i;a+=o){var s=2*n[a],u=2*n[a+1],l=2*n[a+2];if(r[0]=e[s],r[1]=e[s+1],r[2]=e[u],r[3]=e[u+1],r[4]=e[l],r[5]=e[l+1],Go.contains(Ho.x,Ho.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},Object.defineProperties(e.prototype,r),e}(jt);qo.BATCHABLE_SIZE=100;dn.registerPlugin("accessibility",Gt),dn.registerPlugin("extract",Cn),dn.registerPlugin("interaction",Nn),dn.registerPlugin("particle",Co),dn.registerPlugin("prepare",Li),dn.registerPlugin("batch",Tn),dn.registerPlugin("tilingSprite",Bo),Eo.registerPlugin(Fo),Eo.registerPlugin(ko),zi.registerPlugin(te),zi.registerPlugin(So)},"320c":function(t,e,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function s(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map((function(t){return e[t]}));if("0123456789"!==n.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(o){return!1}}t.exports=s()?Object.assign:function(t,e){for(var r,s,u=a(t),l=1;l<arguments.length;l++){for(var h in r=Object(arguments[l]),r)i.call(r,h)&&(u[h]=r[h]);if(n){s=n(r);for(var c=0;c<s.length;c++)o.call(r,s[c])&&(u[s[c]]=r[s[c]])}}return u}},"35e8":function(t,e,r){"use strict";t.exports={isString:function(t){return"string"===typeof t},isObject:function(t){return"object"===typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},3907:function(t,e,r){(function(n){var i;(function(n){var o=n["Promise"],a=o&&"resolve"in o&&"reject"in o&&"all"in o&&"race"in o&&function(){var t;return new o((function(e){t=e})),"function"===typeof t}();e?(e.Promise=a?o:A,e.Polyfill=A):(i=function(){return a?o:A}.call(e,r,e,t),void 0===i||(t.exports=i));var s="pending",u="sealed",l="fulfilled",h="rejected",c=function(){};function f(t){return"[object Array]"===Object.prototype.toString.call(t)}var d,p="undefined"!==typeof setImmediate?setImmediate:setTimeout,g=[];function v(){for(var t=0;t<g.length;t++)g[t][0](g[t][1]);g=[],d=!1}function m(t,e){g.push([t,e]),d||(d=!0,p(v,0))}function y(t,e){function r(t){x(e,t)}function n(t){E(e,t)}try{t(r,n)}catch(i){n(i)}}function b(t){var e=t.owner,r=e.state_,n=e.data_,i=t[r],o=t.then;if("function"===typeof i){r=l;try{n=i(n)}catch(a){E(o,a)}}w(o,n)||(r===l&&x(o,n),r===h&&E(o,n))}function w(t,e){var r;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"===typeof e||"object"===typeof e)){var n=e.then;if("function"===typeof n)return n.call(e,(function(n){r||(r=!0,e!==n?x(t,n):_(t,n))}),(function(e){r||(r=!0,E(t,e))})),!0}}catch(i){return r||E(t,i),!0}return!1}function x(t,e){t!==e&&w(t,e)||_(t,e)}function _(t,e){t.state_===s&&(t.state_=u,t.data_=e,m(O,t))}function E(t,e){t.state_===s&&(t.state_=u,t.data_=e,m(T,t))}function S(t){var e=t.then_;t.then_=void 0;for(var r=0;r<e.length;r++)b(e[r])}function O(t){t.state_=l,S(t)}function T(t){t.state_=h,S(t)}function A(t){if("function"!==typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof A===!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],y(t,this)}A.prototype={constructor:A,state_:s,then_:null,data_:void 0,then:function(t,e){var r={owner:this,then:new this.constructor(c),fulfilled:t,rejected:e};return this.state_===l||this.state_===h?m(b,r):this.then_.push(r),r.then},catch:function(t){return this.then(null,t)}},A.all=function(t){var e=this;if(!f(t))throw new TypeError("You must pass an array to Promise.all().");return new e((function(e,r){var n=[],i=0;function o(t){return i++,function(r){n[t]=r,--i||e(n)}}for(var a,s=0;s<t.length;s++)a=t[s],a&&"function"===typeof a.then?a.then(o(s),r):n[s]=a;i||e(n)}))},A.race=function(t){var e=this;if(!f(t))throw new TypeError("You must pass an array to Promise.race().");return new e((function(e,r){for(var n,i=0;i<t.length;i++)n=t[i],n&&"function"===typeof n.then?n.then(e,r):e(n)}))},A.resolve=function(t){var e=this;return t&&"object"===typeof t&&t.constructor===e?t:new e((function(e){e(t)}))},A.reject=function(t){var e=this;return new e((function(e,r){r(t)}))}})("undefined"!=typeof window?window:"undefined"!=typeof n?n:"undefined"!=typeof self?self:this)}).call(this,r("c8ba"))},5664:function(t,e,r){"use strict";function n(t,e,r){r=r||2;var n,o,s,u,l,h,f,d=e&&e.length,p=d?e[0]*r:t.length,g=i(t,0,p,r,!0),v=[];if(!g||g.next===g.prev)return v;if(d&&(g=c(t,e,g,r)),t.length>80*r){n=s=t[0],o=u=t[1];for(var m=r;m<p;m+=r)l=t[m],h=t[m+1],l<n&&(n=l),h<o&&(o=h),l>s&&(s=l),h>u&&(u=h);f=Math.max(s-n,u-o),f=0!==f?1/f:0}return a(g,v,r,n,o,f),v}function i(t,e,r,n,i){var o,a;if(i===R(t,e,r,n)>0)for(o=e;o<r;o+=n)a=I(o,t[o],t[o+1],a);else for(o=r-n;o>=e;o-=n)a=I(o,t[o],t[o+1],a);return a&&E(a,a.next)&&(k(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!E(n,n.next)&&0!==_(n.prev,n,n.next))n=n.next;else{if(k(n),n=e=n.prev,n===n.next)break;r=!0}}while(r||n!==e);return e}function a(t,e,r,n,i,c,f){if(t){!f&&c&&v(t,n,i,c);var d,p,g=t;while(t.prev!==t.next)if(d=t.prev,p=t.next,c?u(t,n,i,c):s(t))e.push(d.i/r),e.push(t.i/r),e.push(p.i/r),k(t),t=p.next,g=p.next;else if(t=p,t===g){f?1===f?(t=l(o(t),e,r),a(t,e,r,n,i,c,2)):2===f&&h(t,e,r,n,i,c):a(o(t),e,r,n,i,c,1);break}}}function s(t){var e=t.prev,r=t,n=t.next;if(_(e,r,n)>=0)return!1;var i=t.next.next;while(i!==t.prev){if(w(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&_(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,r,n){var i=t.prev,o=t,a=t.next;if(_(i,o,a)>=0)return!1;var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,h=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,c=y(s,u,e,r,n),f=y(l,h,e,r,n),d=t.prevZ,p=t.nextZ;while(d&&d.z>=c&&p&&p.z<=f){if(d!==t.prev&&d!==t.next&&w(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&_(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&w(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&_(p.prev,p,p.next)>=0)return!1;p=p.nextZ}while(d&&d.z>=c){if(d!==t.prev&&d!==t.next&&w(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&_(d.prev,d,d.next)>=0)return!1;d=d.prevZ}while(p&&p.z<=f){if(p!==t.prev&&p!==t.next&&w(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&_(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function l(t,e,r){var n=t;do{var i=n.prev,a=n.next.next;!E(i,a)&&S(i,n,n.next,a)&&P(i,a)&&P(a,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(a.i/r),k(n),k(n.next),n=t=a),n=n.next}while(n!==t);return o(n)}function h(t,e,r,n,i,s){var u=t;do{var l=u.next.next;while(l!==u.prev){if(u.i!==l.i&&x(u,l)){var h=M(u,l);return u=o(u,u.next),h=o(h,h.next),a(u,e,r,n,i,s),void a(h,e,r,n,i,s)}l=l.next}u=u.next}while(u!==t)}function c(t,e,r,n){var a,s,u,l,h,c=[];for(a=0,s=e.length;a<s;a++)u=e[a]*n,l=a<s-1?e[a+1]*n:t.length,h=i(t,u,l,n,!1),h===h.next&&(h.steiner=!0),c.push(b(h));for(c.sort(f),a=0;a<c.length;a++)d(c[a],r),r=o(r,r.next);return r}function f(t,e){return t.x-e.x}function d(t,e){if(e=p(t,e),e){var r=M(e,t);o(e,e.next),o(r,r.next)}}function p(t,e){var r,n=e,i=t.x,o=t.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===a)return r;var u,l=r,h=r.x,c=r.y,f=1/0;n=r;do{i>=n.x&&n.x>=h&&i!==n.x&&w(o<c?i:a,o,h,c,o<c?a:i,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(i-n.x),P(n,t)&&(u<f||u===f&&(n.x>r.x||n.x===r.x&&g(r,n)))&&(r=n,f=u)),n=n.next}while(n!==l);return r}function g(t,e){return _(t.prev,t,e.prev)<0&&_(e.next,t,t.next)<0}function v(t,e,r,n){var i=t;do{null===i.z&&(i.z=y(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,m(i)}function m(t){var e,r,n,i,o,a,s,u,l=1;do{r=t,t=null,o=null,a=0;while(r){for(a++,n=r,s=0,e=0;e<l;e++)if(s++,n=n.nextZ,!n)break;u=l;while(s>0||u>0&&n)0!==s&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,l*=2}while(a>1);return t}function y(t,e,r,n,i){return t=32767*(t-r)*i,e=32767*(e-n)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function b(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function w(t,e,r,n,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(n-s)-(r-a)*(e-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!A(t,e)&&(P(t,e)&&P(e,t)&&C(t,e)&&(_(t.prev,t,e.prev)||_(t,e.prev,e))||E(t,e)&&_(t.prev,t,t.next)>0&&_(e.prev,e,e.next)>0)}function _(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function E(t,e){return t.x===e.x&&t.y===e.y}function S(t,e,r,n){var i=T(_(t,e,r)),o=T(_(t,e,n)),a=T(_(r,n,t)),s=T(_(r,n,e));return i!==o&&a!==s||(!(0!==i||!O(t,r,e))||(!(0!==o||!O(t,n,e))||(!(0!==a||!O(r,t,n))||!(0!==s||!O(r,e,n)))))}function O(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function T(t){return t>0?1:t<0?-1:0}function A(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&S(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function P(t,e){return _(t.prev,t,t.next)<0?_(t,e,t.next)>=0&&_(t,t.prev,e)>=0:_(t,e,t.prev)<0||_(t,t.next,e)<0}function C(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!==r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}function M(t,e){var r=new D(t.i,t.x,t.y),n=new D(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function I(t,e,r,n){var i=new D(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function k(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function D(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(t,e,r,n){for(var i=0,o=e,a=r-n;o<r;o+=n)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=n,t.exports.default=n,n.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,a=Math.abs(R(t,0,o,r));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*r,h=s<u-1?e[s+1]*r:t.length;a-=Math.abs(R(t,l,h,r))}var c=0;for(s=0;s<n.length;s+=3){var f=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;c+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},n.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)r.vertices.push(t[i][o][a]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}},"62e4":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"7a23":function(t,e,r){"use strict";r.d(e,"a",(function(){return Dr})),r.d(e,"c",(function(){return Vr})),r.d(e,"d",(function(){return Zr})),r.d(e,"e",(function(){return Wr})),r.d(e,"f",(function(){return Fr})),r.d(e,"b",(function(){return ji}));var n=r("9ff4");const i=new WeakMap,o=[];let a;const s=Symbol(""),u=Symbol("");function l(t){return t&&!0===t._isEffect}function h(t,e=n["b"]){l(t)&&(t=t.raw);const r=d(t,e);return e.lazy||r(),r}function c(t){t.active&&(p(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let f=0;function d(t,e){const r=function(){if(!r.active)return e.scheduler?void 0:t();if(!o.includes(r)){p(r);try{return y(),o.push(r),a=r,t()}finally{o.pop(),b(),a=o[o.length-1]}}};return r.id=f++,r.allowRecurse=!!e.allowRecurse,r._isEffect=!0,r.active=!0,r.raw=t,r.deps=[],r.options=e,r}function p(t){const{deps:e}=t;if(e.length){for(let r=0;r<e.length;r++)e[r].delete(t);e.length=0}}let g=!0;const v=[];function m(){v.push(g),g=!1}function y(){v.push(g),g=!0}function b(){const t=v.pop();g=void 0===t||t}function w(t,e,r){if(!g||void 0===a)return;let n=i.get(t);n||i.set(t,n=new Map);let o=n.get(r);o||n.set(r,o=new Set),o.has(a)||(o.add(a),a.deps.push(o))}function x(t,e,r,o,l,h){const c=i.get(t);if(!c)return;const f=new Set,d=t=>{t&&t.forEach(t=>{(t!==a||t.allowRecurse)&&f.add(t)})};if("clear"===e)c.forEach(d);else if("length"===r&&Object(n["n"])(t))c.forEach((t,e)=>{("length"===e||e>=o)&&d(t)});else switch(void 0!==r&&d(c.get(r)),e){case"add":Object(n["n"])(t)?Object(n["r"])(r)&&d(c.get("length")):(d(c.get(s)),Object(n["s"])(t)&&d(c.get(u)));break;case"delete":Object(n["n"])(t)||(d(c.get(s)),Object(n["s"])(t)&&d(c.get(u)));break;case"set":Object(n["s"])(t)&&d(c.get(s));break}const p=t=>{t.options.scheduler?t.options.scheduler(t):t()};f.forEach(p)}const _=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(n["C"])),E=P(),S=P(!1,!0),O=P(!0),T=P(!0,!0),A={};function P(t=!1,e=!1){return function(r,i,o){if("__v_isReactive"===i)return!t;if("__v_isReadonly"===i)return t;if("__v_raw"===i&&o===(t?st:at).get(r))return r;const a=Object(n["n"])(r);if(!t&&a&&Object(n["k"])(A,i))return Reflect.get(A,i,o);const s=Reflect.get(r,i,o);if(Object(n["C"])(i)?_.has(i):"__proto__"===i||"__v_isRef"===i)return s;if(t||w(r,"get",i),e)return s;if(yt(s)){const t=!a||!Object(n["r"])(i);return t?s.value:s}return Object(n["u"])(s)?t?ft(s):ht(s):s}}["includes","indexOf","lastIndexOf"].forEach(t=>{const e=Array.prototype[t];A[t]=function(...t){const r=mt(this);for(let e=0,i=this.length;e<i;e++)w(r,"get",e+"");const n=e.apply(r,t);return-1===n||!1===n?e.apply(r,t.map(mt)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{const e=Array.prototype[t];A[t]=function(...t){m();const r=e.apply(this,t);return b(),r}});const C=I(),M=I(!0);function I(t=!1){return function(e,r,i,o){const a=e[r];if(!t&&(i=mt(i),!Object(n["n"])(e)&&yt(a)&&!yt(i)))return a.value=i,!0;const s=Object(n["n"])(e)&&Object(n["r"])(r)?Number(r)<e.length:Object(n["k"])(e,r),u=Reflect.set(e,r,i,o);return e===mt(o)&&(s?Object(n["j"])(i,a)&&x(e,"set",r,i,a):x(e,"add",r,i)),u}}function k(t,e){const r=Object(n["k"])(t,e),i=t[e],o=Reflect.deleteProperty(t,e);return o&&r&&x(t,"delete",e,void 0,i),o}function D(t,e){const r=Reflect.has(t,e);return Object(n["C"])(e)&&_.has(e)||w(t,"has",e),r}function R(t){return w(t,"iterate",Object(n["n"])(t)?"length":s),Reflect.ownKeys(t)}const j={get:E,set:C,deleteProperty:k,has:D,ownKeys:R},L={get:O,set(t,e){return!0},deleteProperty(t,e){return!0}},B=Object(n["h"])({},j,{get:S,set:M}),N=(Object(n["h"])({},L,{get:T}),t=>Object(n["u"])(t)?ht(t):t),F=t=>Object(n["u"])(t)?ft(t):t,U=t=>t,z=t=>Reflect.getPrototypeOf(t);function V(t,e,r=!1,n=!1){t=t["__v_raw"];const i=mt(t),o=mt(e);e!==o&&!r&&w(i,"get",e),!r&&w(i,"get",o);const{has:a}=z(i),s=r?F:n?U:N;return a.call(i,e)?s(t.get(e)):a.call(i,o)?s(t.get(o)):void 0}function X(t,e=!1){const r=this["__v_raw"],n=mt(r),i=mt(t);return t!==i&&!e&&w(n,"has",t),!e&&w(n,"has",i),t===i?r.has(t):r.has(t)||r.has(i)}function Y(t,e=!1){return t=t["__v_raw"],!e&&w(mt(t),"iterate",s),Reflect.get(t,"size",t)}function H(t){t=mt(t);const e=mt(this),r=z(e),n=r.has.call(e,t);return e.add(t),n||x(e,"add",t,t),this}function G(t,e){e=mt(e);const r=mt(this),{has:i,get:o}=z(r);let a=i.call(r,t);a||(t=mt(t),a=i.call(r,t));const s=o.call(r,t);return r.set(t,e),a?Object(n["j"])(e,s)&&x(r,"set",t,e,s):x(r,"add",t,e),this}function q(t){const e=mt(this),{has:r,get:n}=z(e);let i=r.call(e,t);i||(t=mt(t),i=r.call(e,t));const o=n?n.call(e,t):void 0,a=e.delete(t);return i&&x(e,"delete",t,void 0,o),a}function W(){const t=mt(this),e=0!==t.size,r=void 0,n=t.clear();return e&&x(t,"clear",void 0,void 0,r),n}function K(t,e){return function(r,n){const i=this,o=i["__v_raw"],a=mt(o),u=t?F:e?U:N;return!t&&w(a,"iterate",s),o.forEach((t,e)=>r.call(n,u(t),u(e),i))}}function $(t,e,r){return function(...i){const o=this["__v_raw"],a=mt(o),l=Object(n["s"])(a),h="entries"===t||t===Symbol.iterator&&l,c="keys"===t&&l,f=o[t](...i),d=e?F:r?U:N;return!e&&w(a,"iterate",c?u:s),{next(){const{value:t,done:e}=f.next();return e?{value:t,done:e}:{value:h?[d(t[0]),d(t[1])]:d(t),done:e}},[Symbol.iterator](){return this}}}}function Z(t){return function(...e){return"delete"!==t&&this}}const J={get(t){return V(this,t)},get size(){return Y(this)},has:X,add:H,set:G,delete:q,clear:W,forEach:K(!1,!1)},Q={get(t){return V(this,t,!1,!0)},get size(){return Y(this)},has:X,add:H,set:G,delete:q,clear:W,forEach:K(!1,!0)},tt={get(t){return V(this,t,!0)},get size(){return Y(this,!0)},has(t){return X.call(this,t,!0)},add:Z("add"),set:Z("set"),delete:Z("delete"),clear:Z("clear"),forEach:K(!0,!1)},et=["keys","values","entries",Symbol.iterator];function rt(t,e){const r=e?Q:t?tt:J;return(e,i,o)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get(Object(n["k"])(r,i)&&i in e?r:e,i,o)}et.forEach(t=>{J[t]=$(t,!1,!1),tt[t]=$(t,!0,!1),Q[t]=$(t,!1,!0)});const nt={get:rt(!1,!1)},it={get:rt(!1,!0)},ot={get:rt(!0,!1)};const at=new WeakMap,st=new WeakMap;function ut(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lt(t){return t["__v_skip"]||!Object.isExtensible(t)?0:ut(Object(n["L"])(t))}function ht(t){return t&&t["__v_isReadonly"]?t:dt(t,!1,j,nt)}function ct(t){return dt(t,!1,B,it)}function ft(t){return dt(t,!0,L,ot)}function dt(t,e,r,i){if(!Object(n["u"])(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const o=e?st:at,a=o.get(t);if(a)return a;const s=lt(t);if(0===s)return t;const u=new Proxy(t,2===s?i:r);return o.set(t,u),u}function pt(t){return gt(t)?pt(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function gt(t){return!(!t||!t["__v_isReadonly"])}function vt(t){return pt(t)||gt(t)}function mt(t){return t&&mt(t["__v_raw"])||t}function yt(t){return Boolean(t&&!0===t.__v_isRef)}function bt(t){return yt(t)?t.value:t}const wt={get:(t,e,r)=>bt(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const i=t[e];return yt(i)&&!yt(r)?(i.value=r,!0):Reflect.set(t,e,r,n)}};function xt(t){return pt(t)?t:new Proxy(t,wt)}class _t{constructor(t,e){this._object=t,this._key=e,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}function Et(t,e){return yt(t[e])?t[e]:new _t(t,e)}class St{constructor(t,e,r){this._setter=e,this._dirty=!0,this.__v_isRef=!0,this.effect=h(t,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,x(mt(this),"set","value"))}}),this["__v_isReadonly"]=r}get value(){return this._dirty&&(this._value=this.effect(),this._dirty=!1),w(mt(this),"get","value"),this._value}set value(t){this._setter(t)}}function Ot(t){let e,r;return Object(n["o"])(t)?(e=t,r=n["d"]):(e=t.get,r=t.set),new St(e,r,Object(n["o"])(t)||!t.set)}function Tt(t,e,r,n){let i;try{i=n?t(...n):t()}catch(o){Pt(o,e,r)}return i}function At(t,e,r,i){if(Object(n["o"])(t)){const o=Tt(t,e,r,i);return o&&Object(n["w"])(o)&&o.catch(t=>{Pt(t,e,r)}),o}const o=[];for(let n=0;n<t.length;n++)o.push(At(t[n],e,r,i));return o}function Pt(t,e,r,n=!0){const i=e?e.vnode:null;if(e){let n=e.parent;const i=e.proxy,o=r;while(n){const e=n.ec;if(e)for(let r=0;r<e.length;r++)if(!1===e[r](t,i,o))return;n=n.parent}const a=e.appContext.config.errorHandler;if(a)return void Tt(a,null,10,[t,i,o])}Ct(t,r,i,n)}function Ct(t,e,r,n=!0){console.error(t)}let Mt=!1,It=!1;const kt=[];let Dt=0;const Rt=[];let jt=null,Lt=0;const Bt=[];let Nt=null,Ft=0;const Ut=Promise.resolve();let zt=null,Vt=null;function Xt(t){const e=zt||Ut;return t?e.then(this?t.bind(this):t):e}function Yt(t){kt.length&&kt.includes(t,Mt&&t.allowRecurse?Dt+1:Dt)||t===Vt||(kt.push(t),Ht())}function Ht(){Mt||It||(It=!0,zt=Ut.then(Qt))}function Gt(t){const e=kt.indexOf(t);e>-1&&kt.splice(e,1)}function qt(t,e,r,i){Object(n["n"])(t)?r.push(...t):e&&e.includes(t,t.allowRecurse?i+1:i)||r.push(t),Ht()}function Wt(t){qt(t,jt,Rt,Lt)}function Kt(t){qt(t,Nt,Bt,Ft)}function $t(t,e=null){if(Rt.length){for(Vt=e,jt=[...new Set(Rt)],Rt.length=0,Lt=0;Lt<jt.length;Lt++)jt[Lt]();jt=null,Lt=0,Vt=null,$t(t,e)}}function Zt(t){if(Bt.length){const t=[...new Set(Bt)];if(Bt.length=0,Nt)return void Nt.push(...t);for(Nt=t,Nt.sort((t,e)=>Jt(t)-Jt(e)),Ft=0;Ft<Nt.length;Ft++)Nt[Ft]();Nt=null,Ft=0}}const Jt=t=>null==t.id?1/0:t.id;function Qt(t){It=!1,Mt=!0,$t(t),kt.sort((t,e)=>Jt(t)-Jt(e));try{for(Dt=0;Dt<kt.length;Dt++){const t=kt[Dt];t&&Tt(t,null,14)}}finally{Dt=0,kt.length=0,Zt(t),Mt=!1,zt=null,(kt.length||Bt.length)&&Qt(t)}}new Set;new Map;function te(t,e,...r){const i=t.vnode.props||n["b"];let o=r;const a=e.startsWith("update:"),s=a&&e.slice(7);if(s&&s in i){const t=("modelValue"===s?"model":s)+"Modifiers",{number:e,trim:a}=i[t]||n["b"];a?o=r.map(t=>t.trim()):e&&(o=r.map(n["K"]))}let u=Object(n["J"])(Object(n["e"])(e)),l=i[u];!l&&a&&(u=Object(n["J"])(Object(n["l"])(e)),l=i[u]),l&&At(l,t,6,o);const h=i[u+"Once"];if(h){if(t.emitted){if(t.emitted[u])return}else(t.emitted={})[u]=!0;At(h,t,6,o)}}function ee(t,e,r=!1){if(!e.deopt&&void 0!==t.__emits)return t.__emits;const i=t.emits;let o={},a=!1;if(!Object(n["o"])(t)){const i=t=>{a=!0,Object(n["h"])(o,ee(t,e,!0))};!r&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}return i||a?(Object(n["n"])(i)?i.forEach(t=>o[t]=null):Object(n["h"])(o,i),t.__emits=o):t.__emits=null}function re(t,e){return!(!t||!Object(n["v"])(e))&&(e=e.slice(2).replace(/Once$/,""),Object(n["k"])(t,e[0].toLowerCase()+e.slice(1))||Object(n["k"])(t,Object(n["l"])(e))||Object(n["k"])(t,e))}let ne=null;function ie(t){ne=t}function oe(t){const{type:e,vnode:r,proxy:i,withProxy:o,props:a,propsOptions:[s],slots:u,attrs:l,emit:h,render:c,renderCache:f,data:d,setupState:p,ctx:g}=t;let v;ne=t;try{let t;if(4&r.shapeFlag){const e=o||i;v=Jr(c.call(e,e,f,a,p,d,g)),t=l}else{const r=e;0,v=Jr(r.length>1?r(a,{attrs:l,slots:u,emit:h}):r(a,null)),t=e.props?l:se(l)}let m=v;if(!1!==e.inheritAttrs&&t){const e=Object.keys(t),{shapeFlag:r}=m;e.length&&(1&r||6&r)&&(s&&e.some(n["t"])&&(t=ue(t,s)),m=$r(m,t))}r.dirs&&(m.dirs=m.dirs?m.dirs.concat(r.dirs):r.dirs),r.transition&&(m.transition=r.transition),v=m}catch(m){Pt(m,t,1),v=Wr(jr)}return ne=null,v}function ae(t){let e;for(let r=0;r<t.length;r++){const n=t[r];if(!Xr(n))return;if(n.type!==jr||"v-if"===n.children){if(e)return;e=n}}return e}const se=t=>{let e;for(const r in t)("class"===r||"style"===r||Object(n["v"])(r))&&((e||(e={}))[r]=t[r]);return e},ue=(t,e)=>{const r={};for(const i in t)Object(n["t"])(i)&&i.slice(9)in e||(r[i]=t[i]);return r};function le(t,e,r){const{props:n,children:i,component:o}=t,{props:a,children:s,patchFlag:u}=e,l=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(r&&u>=0))return!(!i&&!s||s&&s.$stable)||n!==a&&(n?!a||he(n,a,l):!!a);if(1024&u)return!0;if(16&u)return n?he(n,a,l):!!a;if(8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const r=t[e];if(a[r]!==n[r]&&!re(l,r))return!0}}return!1}function he(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(e[o]!==t[o]&&!re(r,o))return!0}return!1}function ce({vnode:t,parent:e},r){while(e&&e.subTree===t)(t=e.vnode).el=r,e=e.parent}const fe=t=>t.__isSuspense;function de(t){const{shapeFlag:e,children:r}=t;let n,i;return 32&e?(n=pe(r.default),i=pe(r.fallback)):(n=pe(r),i=Jr(null)),{content:n,fallback:i}}function pe(t){if(Object(n["o"])(t)&&(t=t()),Object(n["n"])(t)){const e=ae(t);0,t=e}return Jr(t)}function ge(t,e){e&&e.pendingBranch?Object(n["n"])(t)?e.effects.push(...t):e.effects.push(t):Kt(t)}let ve=0;const me=t=>ve+=t;function ye(t,e=ne){if(!e)return t;const r=(...r)=>{ve||Fr(!0);const n=ne;ie(e);const i=t(...r);return ie(n),ve||Ur(),i};return r._c=!0,r}let be=null;function we(t,e,r,i=!1){const o={},a={};Object(n["g"])(a,Hr,1),_e(t,e,o,a),r?t.props=i?o:ct(o):t.type.props?t.props=o:t.props=a,t.attrs=a}function xe(t,e,r,i){const{props:o,attrs:a,vnode:{patchFlag:s}}=t,u=mt(o),[l]=t.propsOptions;if(!(i||s>0)||16&s){let i;_e(t,e,o,a);for(const a in u)e&&(Object(n["k"])(e,a)||(i=Object(n["l"])(a))!==a&&Object(n["k"])(e,i))||(l?!r||void 0===r[a]&&void 0===r[i]||(o[a]=Ee(l,e||n["b"],a,void 0,t)):delete o[a]);if(a!==u)for(const t in a)e&&Object(n["k"])(e,t)||delete a[t]}else if(8&s){const r=t.vnode.dynamicProps;for(let i=0;i<r.length;i++){const s=r[i],h=e[s];if(l)if(Object(n["k"])(a,s))a[s]=h;else{const e=Object(n["e"])(s);o[e]=Ee(l,u,e,h,t)}else a[s]=h}}x(t,"set","$attrs")}function _e(t,e,r,i){const[o,a]=t.propsOptions;if(e)for(const s in e){const a=e[s];if(Object(n["x"])(s))continue;let u;o&&Object(n["k"])(o,u=Object(n["e"])(s))?r[u]=a:re(t.emitsOptions,s)||(i[s]=a)}if(a){const e=mt(r);for(let n=0;n<a.length;n++){const i=a[n];r[i]=Ee(o,e,i,e[i],t)}}}function Ee(t,e,r,i,o){const a=t[r];if(null!=a){const t=Object(n["k"])(a,"default");if(t&&void 0===i){const t=a.default;a.type!==Function&&Object(n["o"])(t)?(On(o),i=t(e),On(null)):i=t}a[0]&&(Object(n["k"])(e,r)||t?!a[1]||""!==i&&i!==Object(n["l"])(r)||(i=!0):i=!1)}return i}function Se(t,e,r=!1){if(!e.deopt&&t.__props)return t.__props;const i=t.props,o={},a=[];let s=!1;if(!Object(n["o"])(t)){const i=t=>{s=!0;const[r,i]=Se(t,e,!0);Object(n["h"])(o,r),i&&a.push(...i)};!r&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}if(!i&&!s)return t.__props=n["a"];if(Object(n["n"])(i))for(let u=0;u<i.length;u++){0;const t=Object(n["e"])(i[u]);Oe(t)&&(o[t]=n["b"])}else if(i){0;for(const t in i){const e=Object(n["e"])(t);if(Oe(e)){const r=i[t],s=o[e]=Object(n["n"])(r)||Object(n["o"])(r)?{type:r}:r;if(s){const t=Pe(Boolean,s.type),r=Pe(String,s.type);s[0]=t>-1,s[1]=r<0||t<r,(t>-1||Object(n["k"])(s,"default"))&&a.push(e)}}}}return t.__props=[o,a]}function Oe(t){return"$"!==t[0]}function Te(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Ae(t,e){return Te(t)===Te(e)}function Pe(t,e){if(Object(n["n"])(e)){for(let r=0,n=e.length;r<n;r++)if(Ae(e[r],t))return r}else if(Object(n["o"])(e))return Ae(e,t)?0:-1;return-1}function Ce(t,e,r=En,n=!1){if(r){const i=r[t]||(r[t]=[]),o=e.__weh||(e.__weh=(...n)=>{if(r.isUnmounted)return;m(),On(r);const i=At(e,r,t,n);return On(null),b(),i});return n?i.unshift(o):i.push(o),o}}const Me=t=>(e,r=En)=>!An&&Ce(t,e,r),Ie=Me("bm"),ke=Me("m"),De=Me("bu"),Re=Me("u"),je=Me("bum"),Le=Me("um"),Be=Me("rtg"),Ne=Me("rtc"),Fe=(t,e=En)=>{Ce("ec",t,e)};const Ue={};function ze(t,e,r){return Ve(t,e,r)}function Ve(t,e,{immediate:r,deep:i,flush:o,onTrack:a,onTrigger:s}=n["b"],u=En){let l,f,d=!1;if(yt(t)?(l=()=>t.value,d=!!t._shallow):pt(t)?(l=()=>t,i=!0):l=Object(n["n"])(t)?()=>t.map(t=>yt(t)?t.value:pt(t)?Ye(t):Object(n["o"])(t)?Tt(t,u,2):void 0):Object(n["o"])(t)?e?()=>Tt(t,u,2):()=>{if(!u||!u.isUnmounted)return f&&f(),Tt(t,u,3,[p])}:n["d"],e&&i){const t=l;l=()=>Ye(t())}const p=t=>{f=y.options.onStop=()=>{Tt(t,u,4)}};let g=Object(n["n"])(t)?[]:Ue;const v=()=>{if(y.active)if(e){const t=y();(i||d||Object(n["j"])(t,g))&&(f&&f(),At(e,u,3,[t,g===Ue?void 0:g,p]),g=t)}else y()};let m;v.allowRecurse=!!e,m="sync"===o?v:"post"===o?()=>Er(v,u&&u.suspense):()=>{!u||u.isMounted?Wt(v):v()};const y=h(l,{lazy:!0,onTrack:a,onTrigger:s,scheduler:m});return Dn(y,u),e?r?v():g=y():"post"===o?Er(y,u&&u.suspense):y(),()=>{c(y),u&&Object(n["I"])(u.effects,y)}}function Xe(t,e,r){const i=this.proxy,o=Object(n["B"])(t)?()=>i[t]:t.bind(i);return Ve(o,e.bind(i),r,this)}function Ye(t,e=new Set){if(!Object(n["u"])(t)||e.has(t))return t;if(e.add(t),yt(t))Ye(t.value,e);else if(Object(n["n"])(t))for(let r=0;r<t.length;r++)Ye(t[r],e);else if(Object(n["z"])(t)||Object(n["s"])(t))t.forEach(t=>{Ye(t,e)});else for(const r in t)Ye(t[r],e);return t}function He(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ke(()=>{t.isMounted=!0}),je(()=>{t.isUnmounting=!0}),t}const Ge=[Function,Array],qe={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ge,onEnter:Ge,onAfterEnter:Ge,onEnterCancelled:Ge,onBeforeLeave:Ge,onLeave:Ge,onAfterLeave:Ge,onLeaveCancelled:Ge,onBeforeAppear:Ge,onAppear:Ge,onAfterAppear:Ge,onAppearCancelled:Ge},setup(t,{slots:e}){const r=Sn(),n=He();let i;return()=>{const o=e.default&&tr(e.default(),!0);if(!o||!o.length)return;const a=mt(t),{mode:s}=a;const u=o[0];if(n.isLeaving)return Ze(u);const l=Je(u);if(!l)return Ze(u);const h=$e(l,a,n,r);Qe(l,h);const c=r.subTree,f=c&&Je(c);let d=!1;const{getTransitionKey:p}=l.type;if(p){const t=p();void 0===i?i=t:t!==i&&(i=t,d=!0)}if(f&&f.type!==jr&&(!Yr(l,f)||d)){const t=$e(f,a,n,r);if(Qe(f,t),"out-in"===s)return n.isLeaving=!0,t.afterLeave=()=>{n.isLeaving=!1,r.update()},Ze(u);"in-out"===s&&(t.delayLeave=(t,e,r)=>{const i=Ke(n,f);i[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=r})}return u}}},We=qe;function Ke(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function $e(t,e,r,n){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:s,onEnter:u,onAfterEnter:l,onEnterCancelled:h,onBeforeLeave:c,onLeave:f,onAfterLeave:d,onLeaveCancelled:p,onBeforeAppear:g,onAppear:v,onAfterAppear:m,onAppearCancelled:y}=e,b=String(t.key),w=Ke(r,t),x=(t,e)=>{t&&At(t,n,9,e)},_={mode:o,persisted:a,beforeEnter(e){let n=s;if(!r.isMounted){if(!i)return;n=g||s}e._leaveCb&&e._leaveCb(!0);const o=w[b];o&&Yr(t,o)&&o.el._leaveCb&&o.el._leaveCb(),x(n,[e])},enter(t){let e=u,n=l,o=h;if(!r.isMounted){if(!i)return;e=v||u,n=m||l,o=y||h}let a=!1;const s=t._enterCb=e=>{a||(a=!0,x(e?o:n,[t]),_.delayedLeave&&_.delayedLeave(),t._enterCb=void 0)};e?(e(t,s),e.length<=1&&s()):s()},leave(e,n){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),r.isUnmounting)return n();x(c,[e]);let o=!1;const a=e._leaveCb=r=>{o||(o=!0,n(),x(r?p:d,[e]),e._leaveCb=void 0,w[i]===t&&delete w[i])};w[i]=t,f?(f(e,a),f.length<=1&&a()):a()},clone(t){return $e(t,e,r,n)}};return _}function Ze(t){if(er(t))return t=$r(t),t.children=null,t}function Je(t){return er(t)?t.children?t.children[0]:void 0:t}function Qe(t,e){6&t.shapeFlag&&t.component?Qe(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function tr(t,e=!1){let r=[],n=0;for(let i=0;i<t.length;i++){const o=t[i];o.type===Dr?(128&o.patchFlag&&n++,r=r.concat(tr(o.children,e))):(e||o.type!==jr)&&r.push(o)}if(n>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}const er=t=>t.type.__isKeepAlive;RegExp,RegExp;function rr(t,e){return Object(n["n"])(t)?t.some(t=>rr(t,e)):Object(n["B"])(t)?t.split(",").indexOf(e)>-1:!!t.test&&t.test(e)}function nr(t,e){or(t,"a",e)}function ir(t,e){or(t,"da",e)}function or(t,e,r=En){const n=t.__wdc||(t.__wdc=()=>{let e=r;while(e){if(e.isDeactivated)return;e=e.parent}t()});if(Ce(e,n,r),r){let t=r.parent;while(t&&t.parent)er(t.parent.vnode)&&ar(n,e,r,t),t=t.parent}}function ar(t,e,r,i){const o=Ce(e,t,i,!0);Le(()=>{Object(n["I"])(i[e],o)},r)}function sr(t){let e=t.shapeFlag;256&e&&(e-=256),512&e&&(e-=512),t.shapeFlag=e}function ur(t){return 128&t.shapeFlag?t.ssContent:t}const lr=t=>"_"===t[0]||"$stable"===t,hr=t=>Object(n["n"])(t)?t.map(Jr):[Jr(t)],cr=(t,e,r)=>ye(t=>hr(e(t)),r),fr=(t,e)=>{const r=t._ctx;for(const i in t){if(lr(i))continue;const o=t[i];if(Object(n["o"])(o))e[i]=cr(i,o,r);else if(null!=o){0;const t=hr(o);e[i]=()=>t}}},dr=(t,e)=>{const r=hr(e);t.slots.default=()=>r},pr=(t,e)=>{if(32&t.vnode.shapeFlag){const r=e._;r?(t.slots=e,Object(n["g"])(e,"_",r)):fr(e,t.slots={})}else t.slots={},e&&dr(t,e);Object(n["g"])(t.slots,Hr,1)},gr=(t,e)=>{const{vnode:r,slots:i}=t;let o=!0,a=n["b"];if(32&r.shapeFlag){const t=e._;t?1===t?o=!1:Object(n["h"])(i,e):(o=!e.$stable,fr(e,i)),a=e}else e&&(dr(t,e),a={default:1});if(o)for(const n in i)lr(n)||n in a||delete i[n]};function vr(t,e,r,n){const i=t.dirs,o=e&&e.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);const u=s.dir[n];u&&At(u,r,8,[t.el,s,t,e])}}function mr(){return{app:null,config:{isNativeTag:n["c"],performance:!1,globalProperties:{},optionMergeStrategies:{},isCustomElement:n["c"],errorHandler:void 0,warnHandler:void 0},mixins:[],components:{},directives:{},provides:Object.create(null)}}let yr=0;function br(t,e){return function(r,i=null){null==i||Object(n["u"])(i)||(i=null);const o=mr(),a=new Set;let s=!1;const u=o.app={_uid:yr++,_component:r,_props:i,_container:null,_context:o,version:Nn,get config(){return o.config},set config(t){0},use(t,...e){return a.has(t)||(t&&Object(n["o"])(t.install)?(a.add(t),t.install(u,...e)):Object(n["o"])(t)&&(a.add(t),t(u,...e))),u},mixin(t){return o.mixins.includes(t)||(o.mixins.push(t),(t.props||t.emits)&&(o.deopt=!0)),u},component(t,e){return e?(o.components[t]=e,u):o.components[t]},directive(t,e){return e?(o.directives[t]=e,u):o.directives[t]},mount(n,a){if(!s){const l=Wr(r,i);return l.appContext=o,a&&e?e(l,n):t(l,n),s=!0,u._container=n,n.__vue_app__=u,l.component.proxy}},unmount(){s&&t(null,u._container)},provide(t,e){return o.provides[t]=e,u}};return u}}function wr(){}const xr=t=>!!t.type.__asyncLoader;const _r={scheduler:Yt,allowRecurse:!0};const Er=ge,Sr=(t,e,r,i)=>{if(Object(n["n"])(t))return void t.forEach((t,o)=>Sr(t,e&&(Object(n["n"])(e)?e[o]:e),r,i));let o;o=!i||xr(i)?null:4&i.shapeFlag?i.component.exposed||i.component.proxy:i.el;const{i:a,r:s}=t;const u=e&&e.r,l=a.refs===n["b"]?a.refs={}:a.refs,h=a.setupState;if(null!=u&&u!==s&&(Object(n["B"])(u)?(l[u]=null,Object(n["k"])(h,u)&&(h[u]=null)):yt(u)&&(u.value=null)),Object(n["B"])(s)){const t=()=>{l[s]=o,Object(n["k"])(h,s)&&(h[s]=o)};o?(t.id=-1,Er(t,r)):t()}else if(yt(s)){const t=()=>{s.value=o};o?(t.id=-1,Er(t,r)):t()}else Object(n["o"])(s)&&Tt(s,a,12,[o,l])};function Or(t){return Tr(t)}function Tr(t,e){wr();const{insert:r,remove:i,patchProp:o,forcePatchProp:a,createElement:s,createText:u,createComment:l,setText:f,setElementText:d,parentNode:p,nextSibling:g,setScopeId:v=n["d"],cloneNode:m,insertStaticContent:y}=t,b=(t,e,r,n=null,i=null,o=null,a=!1,s=!1)=>{t&&!Yr(t,e)&&(n=q(t),V(t,i,o,!0),t=null),-2===e.patchFlag&&(s=!1,e.dynamicChildren=null);const{type:u,ref:l,shapeFlag:h}=e;switch(u){case Rr:w(t,e,r,n);break;case jr:x(t,e,r,n);break;case Lr:null==t&&_(e,r,n,a);break;case Dr:k(t,e,r,n,i,o,a,s);break;default:1&h?O(t,e,r,n,i,o,a,s):6&h?D(t,e,r,n,i,o,a,s):(64&h||128&h)&&u.process(t,e,r,n,i,o,a,s,K)}null!=l&&i&&Sr(l,t&&t.ref,o,e)},w=(t,e,n,i)=>{if(null==t)r(e.el=u(e.children),n,i);else{const r=e.el=t.el;e.children!==t.children&&f(r,e.children)}},x=(t,e,n,i)=>{null==t?r(e.el=l(e.children||""),n,i):e.el=t.el},_=(t,e,r,n)=>{[t.el,t.anchor]=y(t.children,e,r,n)},E=({el:t,anchor:e},n,i)=>{let o;while(t&&t!==e)o=g(t),r(t,n,i),t=o;r(e,n,i)},S=({el:t,anchor:e})=>{let r;while(t&&t!==e)r=g(t),i(t),t=r;i(e)},O=(t,e,r,n,i,o,a,s)=>{a=a||"svg"===e.type,null==t?T(e,r,n,i,o,a,s):C(t,e,i,o,a,s)},T=(t,e,i,a,u,l,h)=>{let c,f;const{type:p,props:g,shapeFlag:v,transition:y,scopeId:b,patchFlag:w,dirs:x}=t;if(t.el&&void 0!==m&&-1===w)c=t.el=m(t.el);else{if(c=t.el=s(t.type,l,g&&g.is),8&v?d(c,t.children):16&v&&P(t.children,c,null,a,u,l&&"foreignObject"!==p,h||!!t.dynamicChildren),x&&vr(t,null,a,"created"),g){for(const e in g)Object(n["x"])(e)||o(c,e,null,g[e],l,t.children,a,u,G);(f=g.onVnodeBeforeMount)&&Ar(f,a,t)}A(c,b,t,a)}x&&vr(t,null,a,"beforeMount");const _=(!u||u&&!u.pendingBranch)&&y&&!y.persisted;_&&y.beforeEnter(c),r(c,e,i),((f=g&&g.onVnodeMounted)||_||x)&&Er(()=>{f&&Ar(f,a,t),_&&y.enter(c),x&&vr(t,null,a,"mounted")},u)},A=(t,e,r,n)=>{if(e&&v(t,e),n){const i=n.type.__scopeId;i&&i!==e&&v(t,i+"-s");let o=n.subTree;0,r===o&&A(t,n.vnode.scopeId,n.vnode,n.parent)}},P=(t,e,r,n,i,o,a,s=0)=>{for(let u=s;u<t.length;u++){const s=t[u]=a?Qr(t[u]):Jr(t[u]);b(null,s,e,r,n,i,o,a)}},C=(t,e,r,i,s,u)=>{const l=e.el=t.el;let{patchFlag:h,dynamicChildren:c,dirs:f}=e;h|=16&t.patchFlag;const p=t.props||n["b"],g=e.props||n["b"];let v;if((v=g.onVnodeBeforeUpdate)&&Ar(v,r,e,t),f&&vr(e,t,r,"beforeUpdate"),h>0){if(16&h)I(l,e,p,g,r,i,s);else if(2&h&&p.class!==g.class&&o(l,"class",null,g.class,s),4&h&&o(l,"style",p.style,g.style,s),8&h){const n=e.dynamicProps;for(let e=0;e<n.length;e++){const u=n[e],h=p[u],c=g[u];(c!==h||a&&a(l,u))&&o(l,u,h,c,s,t.children,r,i,G)}}1&h&&t.children!==e.children&&d(l,e.children)}else u||null!=c||I(l,e,p,g,r,i,s);const m=s&&"foreignObject"!==e.type;c?M(t.dynamicChildren,c,l,r,i,m):u||N(t,e,l,null,r,i,m),((v=g.onVnodeUpdated)||f)&&Er(()=>{v&&Ar(v,r,e,t),f&&vr(e,t,r,"updated")},i)},M=(t,e,r,n,i,o)=>{for(let a=0;a<e.length;a++){const s=t[a],u=e[a],l=s.type===Dr||!Yr(s,u)||6&s.shapeFlag||64&s.shapeFlag?p(s.el):r;b(s,u,l,null,n,i,o,!0)}},I=(t,e,r,i,s,u,l)=>{if(r!==i){for(const h in i){if(Object(n["x"])(h))continue;const c=i[h],f=r[h];(c!==f||a&&a(t,h))&&o(t,h,f,c,l,e.children,s,u,G)}if(r!==n["b"])for(const a in r)Object(n["x"])(a)||a in i||o(t,a,r[a],null,l,e.children,s,u,G)}},k=(t,e,n,i,o,a,s,l)=>{const h=e.el=t?t.el:u(""),c=e.anchor=t?t.anchor:u("");let{patchFlag:f,dynamicChildren:d}=e;f>0&&(l=!0),null==t?(r(h,n,i),r(c,n,i),P(e.children,n,c,o,a,s,l)):f>0&&64&f&&d&&t.dynamicChildren?(M(t.dynamicChildren,d,n,o,a,s),(null!=e.key||o&&e===o.subTree)&&Pr(t,e,!0)):N(t,e,n,c,o,a,s,l)},D=(t,e,r,n,i,o,a,s)=>{null==t?512&e.shapeFlag?i.ctx.activate(e,r,n,a,s):R(e,r,n,i,o,a,s):j(t,e,s)},R=(t,e,r,n,i,o,a)=>{const s=t.component=_n(t,n,i);if(er(t)&&(s.ctx.renderer=K),Pn(s),s.asyncDep){if(i&&i.registerDep(s,L),!t.el){const t=s.subTree=Wr(jr);x(null,t,e,r)}}else L(s,t,e,r,i,o,a)},j=(t,e,r)=>{const n=e.component=t.component;if(le(t,e,r)){if(n.asyncDep&&!n.asyncResolved)return void B(n,e,r);n.next=e,Gt(n.update),n.update()}else e.component=t.component,e.el=t.el,n.vnode=e},L=(t,e,r,i,o,a,s)=>{t.update=h((function(){if(t.isMounted){let e,{next:r,bu:i,u:u,parent:l,vnode:h}=t,c=r;0,r?(r.el=h.el,B(t,r,s)):r=h,i&&Object(n["m"])(i),(e=r.props&&r.props.onVnodeBeforeUpdate)&&Ar(e,l,r,h);const f=oe(t);0;const d=t.subTree;t.subTree=f,b(d,f,p(d.el),q(d),t,o,a),r.el=f.el,null===c&&ce(t,f.el),u&&Er(u,o),(e=r.props&&r.props.onVnodeUpdated)&&Er(()=>{Ar(e,l,r,h)},o)}else{let s;const{el:u,props:l}=e,{bm:h,m:c,parent:f}=t;h&&Object(n["m"])(h),(s=l&&l.onVnodeBeforeMount)&&Ar(s,f,e);const d=t.subTree=oe(t);if(u&&Z?Z(e.el,d,t,o):(b(null,d,r,i,t,o,a),e.el=d.el),c&&Er(c,o),s=l&&l.onVnodeMounted){const t=e;Er(()=>{Ar(s,f,t)},o)}const{a:p}=t;p&&256&e.shapeFlag&&Er(p,o),t.isMounted=!0,e=r=i=null}}),_r)},B=(t,e,r)=>{e.component=t;const n=t.vnode.props;t.vnode=e,t.next=null,xe(t,e.props,n,r),gr(t,e.children),$t(void 0,t.update)},N=(t,e,r,n,i,o,a,s=!1)=>{const u=t&&t.children,l=t?t.shapeFlag:0,h=e.children,{patchFlag:c,shapeFlag:f}=e;if(c>0){if(128&c)return void U(u,h,r,n,i,o,a,s);if(256&c)return void F(u,h,r,n,i,o,a,s)}8&f?(16&l&&G(u,i,o),h!==u&&d(r,h)):16&l?16&f?U(u,h,r,n,i,o,a,s):G(u,i,o,!0):(8&l&&d(r,""),16&f&&P(h,r,n,i,o,a,s))},F=(t,e,r,i,o,a,s,u)=>{t=t||n["a"],e=e||n["a"];const l=t.length,h=e.length,c=Math.min(l,h);let f;for(f=0;f<c;f++){const n=e[f]=u?Qr(e[f]):Jr(e[f]);b(t[f],n,r,null,o,a,s,u)}l>h?G(t,o,a,!0,!1,c):P(e,r,i,o,a,s,u,c)},U=(t,e,r,i,o,a,s,u)=>{let l=0;const h=e.length;let c=t.length-1,f=h-1;while(l<=c&&l<=f){const n=t[l],i=e[l]=u?Qr(e[l]):Jr(e[l]);if(!Yr(n,i))break;b(n,i,r,null,o,a,s,u),l++}while(l<=c&&l<=f){const n=t[c],i=e[f]=u?Qr(e[f]):Jr(e[f]);if(!Yr(n,i))break;b(n,i,r,null,o,a,s,u),c--,f--}if(l>c){if(l<=f){const t=f+1,n=t<h?e[t].el:i;while(l<=f)b(null,e[l]=u?Qr(e[l]):Jr(e[l]),r,n,o,a,s),l++}}else if(l>f)while(l<=c)V(t[l],o,a,!0),l++;else{const d=l,p=l,g=new Map;for(l=p;l<=f;l++){const t=e[l]=u?Qr(e[l]):Jr(e[l]);null!=t.key&&g.set(t.key,l)}let v,m=0;const y=f-p+1;let w=!1,x=0;const _=new Array(y);for(l=0;l<y;l++)_[l]=0;for(l=d;l<=c;l++){const n=t[l];if(m>=y){V(n,o,a,!0);continue}let i;if(null!=n.key)i=g.get(n.key);else for(v=p;v<=f;v++)if(0===_[v-p]&&Yr(n,e[v])){i=v;break}void 0===i?V(n,o,a,!0):(_[i-p]=l+1,i>=x?x=i:w=!0,b(n,e[i],r,null,o,a,s,u),m++)}const E=w?Cr(_):n["a"];for(v=E.length-1,l=y-1;l>=0;l--){const t=p+l,n=e[t],u=t+1<h?e[t+1].el:i;0===_[l]?b(null,n,r,u,o,a,s):w&&(v<0||l!==E[v]?z(n,r,u,2):v--)}}},z=(t,e,n,i,o=null)=>{const{el:a,type:s,transition:u,children:l,shapeFlag:h}=t;if(6&h)return void z(t.component.subTree,e,n,i);if(128&h)return void t.suspense.move(e,n,i);if(64&h)return void s.move(t,e,n,K);if(s===Dr){r(a,e,n);for(let t=0;t<l.length;t++)z(l[t],e,n,i);return void r(t.anchor,e,n)}if(s===Lr)return void E(t,e,n);const c=2!==i&&1&h&&u;if(c)if(0===i)u.beforeEnter(a),r(a,e,n),Er(()=>u.enter(a),o);else{const{leave:t,delayLeave:i,afterLeave:o}=u,s=()=>r(a,e,n),l=()=>{t(a,()=>{s(),o&&o()})};i?i(a,s,l):l()}else r(a,e,n)},V=(t,e,r,n=!1,i=!1)=>{const{type:o,props:a,ref:s,children:u,dynamicChildren:l,shapeFlag:h,patchFlag:c,dirs:f}=t;if(null!=s&&Sr(s,null,r,null),256&h)return void e.ctx.deactivate(t);const d=1&h&&f;let p;if((p=a&&a.onVnodeBeforeUnmount)&&Ar(p,e,t),6&h)H(t.component,r,n);else{if(128&h)return void t.suspense.unmount(r,n);d&&vr(t,null,e,"beforeUnmount"),l&&(o!==Dr||c>0&&64&c)?G(l,e,r,!1,!0):(o===Dr&&(128&c||256&c)||!i&&16&h)&&G(u,e,r),64&h&&(n||!Ir(t.props))&&t.type.remove(t,K),n&&X(t)}((p=a&&a.onVnodeUnmounted)||d)&&Er(()=>{p&&Ar(p,e,t),d&&vr(t,null,e,"unmounted")},r)},X=t=>{const{type:e,el:r,anchor:n,transition:o}=t;if(e===Dr)return void Y(r,n);if(e===Lr)return void S(t);const a=()=>{i(r),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:n}=o,i=()=>e(r,a);n?n(t.el,a,i):i()}else a()},Y=(t,e)=>{let r;while(t!==e)r=g(t),i(t),t=r;i(e)},H=(t,e,r)=>{const{bum:i,effects:o,update:a,subTree:s,um:u}=t;if(i&&Object(n["m"])(i),o)for(let n=0;n<o.length;n++)c(o[n]);a&&(c(a),V(s,t,e,r)),u&&Er(u,e),Er(()=>{t.isUnmounted=!0},e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},G=(t,e,r,n=!1,i=!1,o=0)=>{for(let a=o;a<t.length;a++)V(t[a],e,r,n,i)},q=t=>6&t.shapeFlag?q(t.component.subTree):128&t.shapeFlag?t.suspense.next():g(t.anchor||t.el),W=(t,e)=>{null==t?e._vnode&&V(e._vnode,null,null,!0):b(e._vnode||null,t,e),Zt(),e._vnode=t},K={p:b,um:V,m:z,r:X,mt:R,mc:P,pc:N,pbc:M,n:q,o:t};let $,Z;return e&&([$,Z]=e(K)),{render:W,hydrate:$,createApp:br(W,$)}}function Ar(t,e,r,n=null){At(t,e,7,[r,n])}function Pr(t,e,r=!1){const i=t.children,o=e.children;if(Object(n["n"])(i)&&Object(n["n"])(o))for(let n=0;n<i.length;n++){const t=i[n];let e=o[n];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=o[n]=Qr(o[n]),e.el=t.el),r||Pr(t,e))}}function Cr(t){const e=t.slice(),r=[0];let n,i,o,a,s;const u=t.length;for(n=0;n<u;n++){const u=t[n];if(0!==u){if(i=r[r.length-1],t[i]<u){e[n]=i,r.push(n);continue}o=0,a=r.length-1;while(o<a)s=(o+a)/2|0,t[r[s]]<u?o=s+1:a=s;u<t[r[o]]&&(o>0&&(e[n]=r[o-1]),r[o]=n)}}o=r.length,a=r[o-1];while(o-- >0)r[o]=a,a=e[a];return r}const Mr=t=>t.__isTeleport,Ir=t=>t&&(t.disabled||""===t.disabled);const kr=Symbol();const Dr=Symbol(void 0),Rr=Symbol(void 0),jr=Symbol(void 0),Lr=Symbol(void 0),Br=[];let Nr=null;function Fr(t=!1){Br.push(Nr=t?null:[])}function Ur(){Br.pop(),Nr=Br[Br.length-1]||null}let zr=1;function Vr(t,e,r,i,o){const a=Wr(t,e,r,i,o,!0);return a.dynamicChildren=Nr||n["a"],Ur(),zr>0&&Nr&&Nr.push(a),a}function Xr(t){return!!t&&!0===t.__v_isVNode}function Yr(t,e){return t.type===e.type&&t.key===e.key}const Hr="__vInternal",Gr=({key:t})=>null!=t?t:null,qr=({ref:t})=>null!=t?Object(n["B"])(t)||yt(t)||Object(n["o"])(t)?{i:ne,r:t}:t:null,Wr=Kr;function Kr(t,e=null,r=null,i=0,o=null,a=!1){if(t&&t!==kr||(t=jr),Xr(t)){const n=$r(t,e,!0);return r&&tn(n,r),n}if(jn(t)&&(t=t.__vccOpts),e){(vt(e)||Hr in e)&&(e=Object(n["h"])({},e));let{class:t,style:r}=e;t&&!Object(n["B"])(t)&&(e.class=Object(n["G"])(t)),Object(n["u"])(r)&&(vt(r)&&!Object(n["n"])(r)&&(r=Object(n["h"])({},r)),e.style=Object(n["H"])(r))}const s=Object(n["B"])(t)?1:fe(t)?128:Mr(t)?64:Object(n["u"])(t)?4:Object(n["o"])(t)?2:0;const u={__v_isVNode:!0,["__v_skip"]:!0,type:t,props:e,key:e&&Gr(e),ref:e&&qr(e),scopeId:be,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null};if(tn(u,r),128&s){const{content:t,fallback:e}=de(u);u.ssContent=t,u.ssFallback=e}return zr>0&&!a&&Nr&&(i>0||6&s)&&32!==i&&Nr.push(u),u}function $r(t,e,r=!1){const{props:i,ref:o,patchFlag:a}=t,s=e?en(i||{},e):i;return{__v_isVNode:!0,["__v_skip"]:!0,type:t.type,props:s,key:s&&Gr(s),ref:e&&e.ref?r&&o?Object(n["n"])(o)?o.concat(qr(e)):[o,qr(e)]:qr(e):o,scopeId:t.scopeId,children:t.children,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Dr?-1===a?16:16|a:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&$r(t.ssContent),ssFallback:t.ssFallback&&$r(t.ssFallback),el:t.el,anchor:t.anchor}}function Zr(t=" ",e=0){return Wr(Rr,null,t,e)}function Jr(t){return null==t||"boolean"===typeof t?Wr(jr):Object(n["n"])(t)?Wr(Dr,null,t):"object"===typeof t?null===t.el?t:$r(t):Wr(Rr,null,String(t))}function Qr(t){return null===t.el?t:$r(t)}function tn(t,e){let r=0;const{shapeFlag:i}=t;if(null==e)e=null;else if(Object(n["n"])(e))r=16;else if("object"===typeof e){if(1&i||64&i){const r=e.default;return void(r&&(r._c&&me(1),tn(t,r()),r._c&&me(-1)))}{r=32;const n=e._;n||Hr in e?3===n&&ne&&(1024&ne.vnode.patchFlag?(e._=2,t.patchFlag|=1024):e._=1):e._ctx=ne}}else Object(n["o"])(e)?(e={default:e,_ctx:ne},r=32):(e=String(e),64&i?(r=16,e=[Zr(e)]):r=8);t.children=e,t.shapeFlag|=r}function en(...t){const e=Object(n["h"])({},t[0]);for(let r=1;r<t.length;r++){const i=t[r];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=Object(n["G"])([e.class,i.class]));else if("style"===t)e.style=Object(n["H"])([e.style,i.style]);else if(Object(n["v"])(t)){const r=e[t],n=i[t];r!==n&&(e[t]=r?[].concat(r,i[t]):n)}else""!==t&&(e[t]=i[t])}return e}function rn(t,e){if(En){let r=En.provides;const n=En.parent&&En.parent.provides;n===r&&(r=En.provides=Object.create(n)),r[t]=e}else 0}function nn(t,e,r=!1){const i=En||ne;if(i){const o=null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(o&&t in o)return o[t];if(arguments.length>1)return r&&Object(n["o"])(e)?e():e}else 0}let on=!1;function an(t,e,r=[],i=[],o=[],a=!1){const{mixins:s,extends:u,data:l,computed:h,methods:c,watch:f,provide:d,inject:p,components:g,directives:v,beforeMount:m,mounted:y,beforeUpdate:b,updated:w,activated:x,deactivated:_,beforeDestroy:E,beforeUnmount:S,destroyed:O,unmounted:T,render:A,renderTracked:P,renderTriggered:C,errorCaptured:M,expose:I}=e,k=t.proxy,D=t.ctx,R=t.appContext.mixins;a&&A&&t.render===n["d"]&&(t.render=A),a||(on=!0,sn("beforeCreate","bc",e,t,R),on=!1,hn(t,R,r,i,o)),u&&an(t,u,r,i,o,!0),s&&hn(t,s,r,i,o);if(p)if(Object(n["n"])(p))for(let n=0;n<p.length;n++){const t=p[n];D[t]=nn(t)}else for(const j in p){const t=p[j];Object(n["u"])(t)?D[j]=nn(t.from||j,t.default,!0):D[j]=nn(t)}if(c)for(const j in c){const t=c[j];Object(n["o"])(t)&&(D[j]=t.bind(k))}if(a?l&&r.push(l):(r.length&&r.forEach(e=>cn(t,e,k)),l&&cn(t,l,k)),h)for(const j in h){const t=h[j],e=Object(n["o"])(t)?t.bind(k,k):Object(n["o"])(t.get)?t.get.bind(k,k):n["d"];0;const r=!Object(n["o"])(t)&&Object(n["o"])(t.set)?t.set.bind(k):n["d"],i=Ln({get:e,set:r});Object.defineProperty(D,j,{enumerable:!0,configurable:!0,get:()=>i.value,set:t=>i.value=t})}if(f&&i.push(f),!a&&i.length&&i.forEach(t=>{for(const e in t)fn(t[e],D,k,e)}),d&&o.push(d),!a&&o.length&&o.forEach(t=>{const e=Object(n["o"])(t)?t.call(k):t;Reflect.ownKeys(e).forEach(t=>{rn(t,e[t])})}),a&&(g&&Object(n["h"])(t.components||(t.components=Object(n["h"])({},t.type.components)),g),v&&Object(n["h"])(t.directives||(t.directives=Object(n["h"])({},t.type.directives)),v)),a||sn("created","c",e,t,R),m&&Ie(m.bind(k)),y&&ke(y.bind(k)),b&&De(b.bind(k)),w&&Re(w.bind(k)),x&&nr(x.bind(k)),_&&ir(_.bind(k)),M&&Fe(M.bind(k)),P&&Ne(P.bind(k)),C&&Be(C.bind(k)),S&&je(S.bind(k)),T&&Le(T.bind(k)),Object(n["n"])(I))if(a)0;else if(I.length){const e=t.exposed||(t.exposed=xt({}));I.forEach(t=>{e[t]=Et(k,t)})}else t.exposed||(t.exposed=n["b"])}function sn(t,e,r,n,i){ln(t,e,i,n);const{extends:o,mixins:a}=r;o&&un(t,e,o,n),a&&ln(t,e,a,n);const s=r[t];s&&At(s.bind(n.proxy),n,e)}function un(t,e,r,n){r.extends&&un(t,e,r.extends,n);const i=r[t];i&&At(i.bind(n.proxy),n,e)}function ln(t,e,r,n){for(let i=0;i<r.length;i++){const o=r[i].mixins;o&&ln(t,e,o,n);const a=r[i][t];a&&At(a.bind(n.proxy),n,e)}}function hn(t,e,r,n,i){for(let o=0;o<e.length;o++)an(t,e[o],r,n,i,!0)}function cn(t,e,r){const i=e.call(r,r);Object(n["u"])(i)&&(t.data===n["b"]?t.data=ht(i):Object(n["h"])(t.data,i))}function fn(t,e,r,i){const o=i.includes(".")?dn(r,i):()=>r[i];if(Object(n["B"])(t)){const r=e[t];Object(n["o"])(r)&&ze(o,r)}else if(Object(n["o"])(t))ze(o,t.bind(r));else if(Object(n["u"])(t))if(Object(n["n"])(t))t.forEach(t=>fn(t,e,r,i));else{const i=Object(n["o"])(t.handler)?t.handler.bind(r):e[t.handler];Object(n["o"])(i)&&ze(o,i,t)}else 0}function dn(t,e){const r=e.split(".");return()=>{let e=t;for(let t=0;t<r.length&&e;t++)e=e[r[t]];return e}}function pn(t){const e=t.type,{__merged:r,mixins:n,extends:i}=e;if(r)return r;const o=t.appContext.mixins;if(!o.length&&!n&&!i)return e;const a={};return o.forEach(e=>gn(a,e,t)),gn(a,e,t),e.__merged=a}function gn(t,e,r){const i=r.appContext.config.optionMergeStrategies,{mixins:o,extends:a}=e;a&&gn(t,a,r),o&&o.forEach(e=>gn(t,e,r));for(const s in e)i&&Object(n["k"])(i,s)?t[s]=i[s](t[s],e[s],r.proxy,s):t[s]=e[s]}const vn=t=>t&&(t.proxy?t.proxy:vn(t.parent)),mn=Object(n["h"])(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>vn(t.parent),$root:t=>t.root&&t.root.proxy,$emit:t=>t.emit,$options:t=>pn(t),$forceUpdate:t=>()=>Yt(t.update),$nextTick:t=>Xt.bind(t.proxy),$watch:t=>Xe.bind(t)}),yn={get({_:t},e){const{ctx:r,setupState:i,data:o,props:a,accessCache:s,type:u,appContext:l}=t;if("__v_skip"===e)return!0;let h;if("$"!==e[0]){const u=s[e];if(void 0!==u)switch(u){case 0:return i[e];case 1:return o[e];case 3:return r[e];case 2:return a[e]}else{if(i!==n["b"]&&Object(n["k"])(i,e))return s[e]=0,i[e];if(o!==n["b"]&&Object(n["k"])(o,e))return s[e]=1,o[e];if((h=t.propsOptions[0])&&Object(n["k"])(h,e))return s[e]=2,a[e];if(r!==n["b"]&&Object(n["k"])(r,e))return s[e]=3,r[e];on||(s[e]=4)}}const c=mn[e];let f,d;return c?("$attrs"===e&&w(t,"get",e),c(t)):(f=u.__cssModules)&&(f=f[e])?f:r!==n["b"]&&Object(n["k"])(r,e)?(s[e]=3,r[e]):(d=l.config.globalProperties,Object(n["k"])(d,e)?d[e]:void 0)},set({_:t},e,r){const{data:i,setupState:o,ctx:a}=t;if(o!==n["b"]&&Object(n["k"])(o,e))o[e]=r;else if(i!==n["b"]&&Object(n["k"])(i,e))i[e]=r;else if(e in t.props)return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(a[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:i,appContext:o,propsOptions:a}},s){let u;return void 0!==r[s]||t!==n["b"]&&Object(n["k"])(t,s)||e!==n["b"]&&Object(n["k"])(e,s)||(u=a[0])&&Object(n["k"])(u,s)||Object(n["k"])(i,s)||Object(n["k"])(mn,s)||Object(n["k"])(o.config.globalProperties,s)}};const bn=Object(n["h"])({},yn,{get(t,e){if(e!==Symbol.unscopables)return yn.get(t,e,t)},has(t,e){const r="_"!==e[0]&&!Object(n["p"])(e);return r}});const wn=mr();let xn=0;function _n(t,e,r){const i=t.type,o=(e?e.appContext:t.appContext)||wn,a={uid:xn++,vnode:t,type:i,parent:e,appContext:o,root:null,next:null,subTree:null,update:null,render:null,proxy:null,exposed:null,withProxy:null,effects:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Se(i,o),emitsOptions:ee(i,o),emit:null,emitted:null,ctx:n["b"],data:n["b"],props:n["b"],attrs:n["b"],slots:n["b"],refs:n["b"],setupState:n["b"],setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=te.bind(null,a),a}let En=null;const Sn=()=>En||ne,On=t=>{En=t};let Tn,An=!1;function Pn(t,e=!1){An=e;const{props:r,children:n,shapeFlag:i}=t.vnode,o=4&i;we(t,r,o,e),pr(t,n);const a=o?Cn(t,e):void 0;return An=!1,a}function Cn(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,yn);const{setup:i}=r;if(i){const r=t.setupContext=i.length>1?kn(t):null;En=t,m();const o=Tt(i,t,0,[t.props,r]);if(b(),En=null,Object(n["w"])(o)){if(e)return o.then(e=>{Mn(t,e)});t.asyncDep=o}else Mn(t,o)}else In(t)}function Mn(t,e,r){Object(n["o"])(e)?t.render=e:Object(n["u"])(e)&&(t.setupState=xt(e)),In(t)}function In(t,e){const r=t.type;t.render||(Tn&&r.template&&!r.render&&(r.render=Tn(r.template,{isCustomElement:t.appContext.config.isCustomElement,delimiters:r.delimiters})),t.render=r.render||n["d"],t.render._rc&&(t.withProxy=new Proxy(t.ctx,bn))),En=t,m(),an(t,r),b(),En=null}function kn(t){const e=e=>{t.exposed=xt(e)};return{attrs:t.attrs,slots:t.slots,emit:t.emit,expose:e}}function Dn(t,e=En){e&&(e.effects||(e.effects=[])).push(t)}function Rn(t){return Object(n["o"])(t)&&t.displayName||t.name}function jn(t){return Object(n["o"])(t)&&"__vccOpts"in t}function Ln(t){const e=Ot(t);return Dn(e.effect),e}function Bn(t,e,r){const i=arguments.length;return 2===i?Object(n["u"])(e)&&!Object(n["n"])(e)?Xr(e)?Wr(t,null,[e]):Wr(t,e):Wr(t,null,e):(i>3?r=Array.prototype.slice.call(arguments,2):3===i&&Xr(r)&&(r=[r]),Wr(t,e,r))}Symbol("");const Nn="3.0.5",Fn="http://www.w3.org/2000/svg",Un="undefined"!==typeof document?document:null;let zn,Vn;const Xn={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r)=>e?Un.createElementNS(Fn,t):Un.createElement(t,r?{is:r}:void 0),createText:t=>Un.createTextNode(t),createComment:t=>Un.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Un.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){return t.cloneNode(!0)},insertStaticContent(t,e,r,n){const i=n?Vn||(Vn=Un.createElementNS(Fn,"svg")):zn||(zn=Un.createElement("div"));i.innerHTML=t;const o=i.firstChild;let a=o,s=a;while(a)s=a,Xn.insert(a,e,r),a=i.firstChild;return[o,s]}};function Yn(t,e,r){if(null==e&&(e=""),r)t.setAttribute("class",e);else{const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),t.className=e}}function Hn(t,e,r){const i=t.style;if(r)if(Object(n["B"])(r))e!==r&&(i.cssText=r);else{for(const t in r)qn(i,t,r[t]);if(e&&!Object(n["B"])(e))for(const t in e)null==r[t]&&qn(i,t,"")}else t.removeAttribute("style")}const Gn=/\s*!important$/;function qn(t,e,r){if(Object(n["n"])(r))r.forEach(r=>qn(t,e,r));else if(e.startsWith("--"))t.setProperty(e,r);else{const i=$n(t,e);Gn.test(r)?t.setProperty(Object(n["l"])(i),r.replace(Gn,""),"important"):t[i]=r}}const Wn=["Webkit","Moz","ms"],Kn={};function $n(t,e){const r=Kn[e];if(r)return r;let i=Object(n["e"])(e);if("filter"!==i&&i in t)return Kn[e]=i;i=Object(n["f"])(i);for(let n=0;n<Wn.length;n++){const r=Wn[n]+i;if(r in t)return Kn[e]=r}return e}const Zn="http://www.w3.org/1999/xlink";function Jn(t,e,r,i){if(i&&e.startsWith("xlink:"))null==r?t.removeAttributeNS(Zn,e.slice(6,e.length)):t.setAttributeNS(Zn,e,r);else{const i=Object(n["A"])(e);null==r||i&&!1===r?t.removeAttribute(e):t.setAttribute(e,i?"":r)}}function Qn(t,e,r,n,i,o,a){if("innerHTML"===e||"textContent"===e)return n&&a(n,i,o),void(t[e]=null==r?"":r);if("value"!==e||"PROGRESS"===t.tagName){if(""===r||null==r){const n=typeof t[e];if(""===r&&"boolean"===n)return void(t[e]=!0);if(null==r&&"string"===n)return t[e]="",void t.removeAttribute(e);if("number"===n)return t[e]=0,void t.removeAttribute(e)}try{t[e]=r}catch(s){0}}else{t._value=r;const e=null==r?"":r;t.value!==e&&(t.value=e)}}let ti=Date.now;"undefined"!==typeof document&&ti()>document.createEvent("Event").timeStamp&&(ti=()=>performance.now());let ei=0;const ri=Promise.resolve(),ni=()=>{ei=0},ii=()=>ei||(ri.then(ni),ei=ti());function oi(t,e,r,n){t.addEventListener(e,r,n)}function ai(t,e,r,n){t.removeEventListener(e,r,n)}function si(t,e,r,n,i=null){const o=t._vei||(t._vei={}),a=o[e];if(n&&a)a.value=n;else{const[r,s]=li(e);if(n){const a=o[e]=hi(n,i);oi(t,r,a,s)}else a&&(ai(t,r,a,s),o[e]=void 0)}}const ui=/(?:Once|Passive|Capture)$/;function li(t){let e;if(ui.test(t)){let r;e={};while(r=t.match(ui))t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t.slice(2).toLowerCase(),e]}function hi(t,e){const r=t=>{const n=t.timeStamp||ti();n>=r.attached-1&&At(ci(t,r.value),e,5,[t])};return r.value=t,r.attached=ii(),r}function ci(t,e){if(Object(n["n"])(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(t=>e=>!e._stopped&&t(e))}return e}const fi=/^on[a-z]/,di=(t,e)=>"value"===e,pi=(t,e,r,i,o=!1,a,s,u,l)=>{switch(e){case"class":Yn(t,i,o);break;case"style":Hn(t,r,i);break;default:Object(n["v"])(e)?Object(n["t"])(e)||si(t,e,r,i,s):gi(t,e,i,o)?Qn(t,e,i,a,s,u,l):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),Jn(t,e,i,o));break}};function gi(t,e,r,i){return i?"innerHTML"===e||!!(e in t&&fi.test(e)&&Object(n["o"])(r)):"spellcheck"!==e&&"draggable"!==e&&(("form"!==e||"string"!==typeof r)&&(("list"!==e||"INPUT"!==t.tagName)&&((!fi.test(e)||!Object(n["B"])(r))&&e in t)))}const vi="transition",mi="animation",yi=(t,{slots:e})=>Bn(We,wi(t),e);yi.displayName="Transition";const bi={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};yi.props=Object(n["h"])({},We.props,bi);function wi(t){let{name:e="v",type:r,css:i=!0,duration:o,enterFromClass:a=e+"-enter-from",enterActiveClass:s=e+"-enter-active",enterToClass:u=e+"-enter-to",appearFromClass:l=a,appearActiveClass:h=s,appearToClass:c=u,leaveFromClass:f=e+"-leave-from",leaveActiveClass:d=e+"-leave-active",leaveToClass:p=e+"-leave-to"}=t;const g={};for(const n in t)n in bi||(g[n]=t[n]);if(!i)return g;const v=xi(o),m=v&&v[0],y=v&&v[1],{onBeforeEnter:b,onEnter:w,onEnterCancelled:x,onLeave:_,onLeaveCancelled:E,onBeforeAppear:S=b,onAppear:O=w,onAppearCancelled:T=x}=g,A=(t,e,r)=>{Si(t,e?c:u),Si(t,e?h:s),r&&r()},P=(t,e)=>{Si(t,p),Si(t,d),e&&e()},C=t=>(e,n)=>{const i=t?O:w,o=()=>A(e,t,n);i&&i(e,o),Oi(()=>{Si(e,t?l:a),Ei(e,t?c:u),i&&i.length>1||Ai(e,r,m,o)})};return Object(n["h"])(g,{onBeforeEnter(t){b&&b(t),Ei(t,a),Ei(t,s)},onBeforeAppear(t){S&&S(t),Ei(t,l),Ei(t,h)},onEnter:C(!1),onAppear:C(!0),onLeave(t,e){const n=()=>P(t,e);Ei(t,f),Ii(),Ei(t,d),Oi(()=>{Si(t,f),Ei(t,p),_&&_.length>1||Ai(t,r,y,n)}),_&&_(t,n)},onEnterCancelled(t){A(t,!1),x&&x(t)},onAppearCancelled(t){A(t,!0),T&&T(t)},onLeaveCancelled(t){P(t),E&&E(t)}})}function xi(t){if(null==t)return null;if(Object(n["u"])(t))return[_i(t.enter),_i(t.leave)];{const e=_i(t);return[e,e]}}function _i(t){const e=Object(n["K"])(t);return e}function Ei(t,e){e.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t._vtc||(t._vtc=new Set)).add(e)}function Si(t,e){e.split(/\s+/).forEach(e=>e&&t.classList.remove(e));const{_vtc:r}=t;r&&(r.delete(e),r.size||(t._vtc=void 0))}function Oi(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Ti=0;function Ai(t,e,r,n){const i=t._endId=++Ti,o=()=>{i===t._endId&&n()};if(r)return setTimeout(o,r);const{type:a,timeout:s,propCount:u}=Pi(t,e);if(!a)return n();const l=a+"end";let h=0;const c=()=>{t.removeEventListener(l,f),o()},f=e=>{e.target===t&&++h>=u&&c()};setTimeout(()=>{h<u&&c()},s+1),t.addEventListener(l,f)}function Pi(t,e){const r=window.getComputedStyle(t),n=t=>(r[t]||"").split(", "),i=n(vi+"Delay"),o=n(vi+"Duration"),a=Ci(i,o),s=n(mi+"Delay"),u=n(mi+"Duration"),l=Ci(s,u);let h=null,c=0,f=0;e===vi?a>0&&(h=vi,c=a,f=o.length):e===mi?l>0&&(h=mi,c=l,f=u.length):(c=Math.max(a,l),h=c>0?a>l?vi:mi:null,f=h?h===vi?o.length:u.length:0);const d=h===vi&&/\b(transform|all)(,|$)/.test(r[vi+"Property"]);return{type:h,timeout:c,propCount:f,hasTransform:d}}function Ci(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map((e,r)=>Mi(e)+Mi(t[r])))}function Mi(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Ii(){return document.body.offsetHeight}new WeakMap,new WeakMap;const ki=Object(n["h"])({patchProp:pi,forcePatchProp:di},Xn);let Di;function Ri(){return Di||(Di=Or(ki))}const ji=(...t)=>{const e=Ri().createApp(...t);const{mount:r}=e;return e.mount=t=>{const i=Li(t);if(!i)return;const o=e._component;Object(n["o"])(o)||o.render||o.template||(o.template=i.innerHTML),i.innerHTML="";const a=r(i);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e};function Li(t){if(Object(n["B"])(t)){const e=document.querySelector(t);return e}return t}},8114:function(t,e,r){var n,i,o;!function(r){var a=/iPhone/i,s=/iPod/i,u=/iPad/i,l=/\bAndroid(?:.+)Mobile\b/i,h=/Android/i,c=/\bAndroid(?:.+)SD4930UR\b/i,f=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,d=/Windows Phone/i,p=/\bWindows(?:.+)ARM\b/i,g=/BlackBerry/i,v=/BB10/i,m=/Opera Mini/i,y=/\b(CriOS|Chrome)(?:.+)Mobile/i,b=/Mobile(?:.+)Firefox\b/i;function w(t,e){return t.test(e)}function x(t){var e=t||("undefined"!=typeof navigator?navigator.userAgent:""),r=e.split("[FBAN");void 0!==r[1]&&(e=r[0]),void 0!==(r=e.split("Twitter"))[1]&&(e=r[0]);var n={apple:{phone:w(a,e)&&!w(d,e),ipod:w(s,e),tablet:!w(a,e)&&w(u,e)&&!w(d,e),device:(w(a,e)||w(s,e)||w(u,e))&&!w(d,e)},amazon:{phone:w(c,e),tablet:!w(c,e)&&w(f,e),device:w(c,e)||w(f,e)},android:{phone:!w(d,e)&&w(c,e)||!w(d,e)&&w(l,e),tablet:!w(d,e)&&!w(c,e)&&!w(l,e)&&(w(f,e)||w(h,e)),device:!w(d,e)&&(w(c,e)||w(f,e)||w(l,e)||w(h,e))||w(/\bokhttp\b/i,e)},windows:{phone:w(d,e),tablet:w(p,e),device:w(d,e)||w(p,e)},other:{blackberry:w(g,e),blackberry10:w(v,e),opera:w(m,e),firefox:w(b,e),chrome:w(y,e),device:w(g,e)||w(v,e)||w(m,e)||w(b,e)||w(y,e)}};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}t.exports&&"undefined"==typeof window?t.exports=x:t.exports&&"undefined"!=typeof window?(t.exports=x(),t.exports.isMobile=x):(i=[],n=r.isMobile=x(),o="function"===typeof n?n.apply(e,i):n,void 0===o||(t.exports=o))}(this)},"91dd":function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var a={};if("string"!==typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"===typeof o.maxKeys&&(u=o.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var h=0;h<l;++h){var c,f,d,p,g=t[h].replace(s,"%20"),v=g.indexOf(r);v>=0?(c=g.substr(0,v),f=g.substr(v+1)):(c=g,f=""),d=decodeURIComponent(c),p=decodeURIComponent(f),n(a,d)?i(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},"9a2d":function(t,e,r){"use strict";(function(t,n){r.d(e,"a",(function(){return Zm}));var i=r("22a2"),o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};function a(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}function s(t,e,r){return r={path:e,exports:{},require:function(t,e){return u(t,void 0===e||null===e?r.path:e)}},t(r,r.exports),r.exports}function u(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var l=s((function(t){var e=function(t){var e,r=Object.prototype,n=r.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),a=new P(n||[]);return o._invoke=S(t,r,a),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(n){return{type:"throw",arg:n}}}t.wrap=u;var h="suspendedStart",c="suspendedYield",f="executing",d="completed",p={};function g(){}function v(){}function m(){}var y={};y[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(C([])));w&&w!==r&&n.call(w,o)&&(y=w);var x=m.prototype=g.prototype=Object.create(y);function _(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t,e){function r(i,o,a,s){var u=l(t[i],t,o);if("throw"!==u.type){var h=u.arg,c=h.value;return c&&"object"===typeof c&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){h.value=t,a(h)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;function o(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}this._invoke=o}function S(t,e,r){var n=h;return function(i,o){if(n===f)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw o;return M()}r.method=i,r.arg=o;while(1){var a=r.delegate;if(a){var s=O(a,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var u=l(t,e,r);if("normal"===u.type){if(n=r.done?d:c,u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}function O(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator["return"]&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=l(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(t){if(t){var r=t[o];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){while(++i<t.length)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:M}}function M(){return{value:e,done:!0}}return v.prototype=x.constructor=m,m.constructor=v,m[s]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},_(E.prototype),E.prototype[a]=function(){return this},t.AsyncIterator=E,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new E(u(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(x),x[s]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;A(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=e}catch(r){Function("r","regeneratorRuntime = r")(e)}})),h=l;function c(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(l){return void r(l)}s.done?e(u):Promise.resolve(u).then(n,i)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){c(o,n,i,a,s,"next",t)}function s(t){c(o,n,i,a,s,"throw",t)}a(void 0)}))}}var d=f;function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g=p;function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var m=v;function y(t){if(Array.isArray(t))return m(t)}var b=y;function w(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var x=w;function _(t,e){if(t){if("string"===typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}var E=_;function S(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var O=S;function T(t){return b(t)||x(t)||E(t)||O()}var A=T;function P(t){if(Array.isArray(t))return t}var C=P;function M(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)if(r.push(a.value),e&&r.length===e)break}catch(u){i=!0,o=u}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw o}}return r}}var I=M;function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var D=k;function R(t,e){return C(t)||I(t,e)||E(t,e)||D()}var j=R,L=1e-6,B="undefined"!==typeof Float32Array?Float32Array:Array;function N(){var t=new B(16);return B!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function F(t){var e=new B(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function U(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],h=e[8],c=e[9],f=e[10],d=e[11],p=e[12],g=e[13],v=e[14],m=e[15],y=r*s-n*a,b=r*u-i*a,w=r*l-o*a,x=n*u-i*s,_=n*l-o*s,E=i*l-o*u,S=h*g-c*p,O=h*v-f*p,T=h*m-d*p,A=c*v-f*g,P=c*m-d*g,C=f*m-d*v,M=y*C-b*P+w*A+x*T-_*O+E*S;return M?(M=1/M,t[0]=(s*C-u*P+l*A)*M,t[1]=(i*P-n*C-o*A)*M,t[2]=(g*E-v*_+m*x)*M,t[3]=(f*_-c*E-d*x)*M,t[4]=(u*T-a*C-l*O)*M,t[5]=(r*C-i*T+o*O)*M,t[6]=(v*w-p*E-m*b)*M,t[7]=(h*E-f*w+d*b)*M,t[8]=(a*P-s*T+l*S)*M,t[9]=(n*T-r*P-o*S)*M,t[10]=(p*_-g*w+m*y)*M,t[11]=(c*w-h*_-d*y)*M,t[12]=(s*O-a*A-u*S)*M,t[13]=(r*A-n*O+i*S)*M,t[14]=(g*b-p*x-v*y)*M,t[15]=(h*x-c*b+f*y)*M,t):null}function z(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=e[9],d=e[10],p=e[11],g=e[12],v=e[13],m=e[14],y=e[15],b=r[0],w=r[1],x=r[2],_=r[3];return t[0]=b*n+w*s+x*c+_*g,t[1]=b*i+w*u+x*f+_*v,t[2]=b*o+w*l+x*d+_*m,t[3]=b*a+w*h+x*p+_*y,b=r[4],w=r[5],x=r[6],_=r[7],t[4]=b*n+w*s+x*c+_*g,t[5]=b*i+w*u+x*f+_*v,t[6]=b*o+w*l+x*d+_*m,t[7]=b*a+w*h+x*p+_*y,b=r[8],w=r[9],x=r[10],_=r[11],t[8]=b*n+w*s+x*c+_*g,t[9]=b*i+w*u+x*f+_*v,t[10]=b*o+w*l+x*d+_*m,t[11]=b*a+w*h+x*p+_*y,b=r[12],w=r[13],x=r[14],_=r[15],t[12]=b*n+w*s+x*c+_*g,t[13]=b*i+w*u+x*f+_*v,t[14]=b*o+w*l+x*d+_*m,t[15]=b*a+w*h+x*p+_*y,t}function V(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function X(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Y(t,e,r){var n,i,o,a=r[0],s=r[1],u=r[2],l=Math.hypot(a,s,u);return l<L?null:(l=1/l,a*=l,s*=l,u*=l,n=Math.sin(e),i=Math.cos(e),o=1-i,t[0]=a*a*o+i,t[1]=s*a*o+u*n,t[2]=u*a*o-s*n,t[3]=0,t[4]=a*s*o-u*n,t[5]=s*s*o+i,t[6]=u*s*o+a*n,t[7]=0,t[8]=a*u*o+s*n,t[9]=s*u*o-a*n,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function H(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function G(t,e){var r=e[0],n=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],l=e[9],h=e[10];return t[0]=Math.hypot(r,n,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,l,h),t}function q(){var t=new B(4);return B!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function W(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t}Math.hypot||(Math.hypot=function(){var t=0,e=arguments.length;while(e--)t+=arguments[e]*arguments[e];return Math.sqrt(t)});(function(){var t=q()})();function K(){var t=new B(2);return B!=Float32Array&&(t[0]=0,t[1]=0),t}function $(t,e){var r=t[0],n=t[1],i=e[0],o=e[1],a=r*r+n*n;a>0&&(a=1/Math.sqrt(a));var s=i*i+o*o;s>0&&(s=1/Math.sqrt(s));var u=(r*i+n*o)*a*s;return u>1?0:u<-1?Math.PI:Math.acos(u)}(function(){var t=K()})();const Z=(t=[0,0],e=1,r=0,n=[0,0],i=[0,1/0])=>{const o=new Float32Array(16),a=new Float32Array(16),s=new Float32Array(16);let u=N(),l=[...n.slice(0,2),0,1];const h=[...i],c=()=>Math.acos(u[0]),f=()=>G(o,u)[0],d=()=>[...h],p=()=>1/f(),g=()=>H(o,u).slice(0,2),v=()=>W(o,l,U(s,u)).slice(0,2),m=()=>u,y=()=>l.slice(0,2),b=([t=0,e=0]=[],r=1,n=0)=>{u=N(),w([-t,-e]),_(n),x(1/r)},w=([t=0,e=0]=[])=>{o[0]=t,o[1]=e,o[2]=0;const r=V(a,o);z(u,r,u)},x=(t,e)=>{if(t<=0)return;const r=f(),n=r*t;if(t=Math.max(h[0],Math.min(n,h[1]))/r,1===t)return;o[0]=t,o[1]=t,o[2]=1;const i=X(a,o),c=e?[...e,0]:l,d=V(o,c);z(u,d,z(u,i,z(u,U(s,d),u)))},_=t=>{const e=N();Y(e,t,[0,0,1]),z(u,e,u)},E=t=>{h[0]=t[0],h[1]=t[1]},S=t=>{!t||t.length<16||(u=t)},O=t=>{l=[...t.slice(0,2),0,1]},T=()=>{b(t,e,r)};return b(t,e,r),{get translation(){return g()},get target(){return v()},get scaling(){return f()},get scaleBounds(){return d()},get distance(){return p()},get rotation(){return c()},get view(){return m()},get viewCenter(){return y()},lookAt:b,translate:w,pan:w,rotate:_,scale:x,zoom:x,reset:T,set:(...t)=>(console.warn("Deprecated. Please use `setView()` instead."),S(...t)),setScaleBounds:E,setView:S,setViewCenter:O}},J=(t,{distance:e=1,target:r=[0,0],rotation:n=0,isNdc:i=!0,isFixed:o=!1,isPan:a=!0,panSpeed:s=1,isRotate:u=!0,rotateSpeed:l=1,isZoom:h=!0,zoomSpeed:c=1,viewCenter:f=null,scaleBounds:d=null,onKeyDown:p=(()=>{}),onKeyUp:g=(()=>{}),onMouseDown:v=(()=>{}),onMouseUp:m=(()=>{}),onMouseMove:y=(()=>{}),onWheel:b=(()=>{})}={})=>{let w=Z(r,e,n,f,d),x=!1,_=0,E=0,S=0,O=0,T=!1,A=0,P=0,C=0,M=1,I=1,k=1,D=!1;const R=i?t=>t/M*2*k:t=>t,j=i?t=>t/I*2:t=>-t,L=i?t=>(t/M*2-1)*k:t=>t,B=i?t=>1-t/I*2:t=>t,N=()=>{if(o)return!1;if(x=!1,a&&T&&!D&&(w.pan([R(s*(_-S)),j(s*(O-E))]),x=!0),h&&A){const t=c*Math.exp(A/I),e=L(_),r=B(E);w.scale(1/t,[e,r]),x=!0}if(u&&T&&D){const t=M/2,e=I/2,r=S-t,n=e-O,i=_-t,o=e-E,a=$([r,n],[i,o]),s=r*o-i*n;w.rotate(l*a*Math.sign(s)),x=!0}return A=0,S=_,O=E,x},F=({isFixed:t=null,isPan:e=null,isRotate:r=null,isZoom:n=null,panSpeed:i=null,rotateSpeed:f=null,zoomSpeed:d=null}={})=>{o=null!==t?t:o,a=null!==e?e:a,u=null!==r?r:u,h=null!==n?n:h,s=+i>0?i:s,l=+f>0?f:l,c=+d>0?d:c},U=()=>{const e=t.getBoundingClientRect();P=e.top,C=e.left,M=e.width,I=e.height,k=M/I},z=t=>{D=!1,g(t)},V=t=>{D=t.altKey,p(t)},X=t=>{T=!1,m(t)},Y=t=>{T=1===t.buttons,v(t)},H=t=>{S=_,O=E,_=t.clientX-C,E=t.clientY-P,y(t)},G=t=>{t.preventDefault();const e=1===t.deltaMode?12:1;A+=e*(t.deltaY||0),b(t)},q=()=>{w=void 0,window.removeEventListener("keydown",V),window.removeEventListener("keyup",z),t.removeEventListener("mousedown",Y),window.removeEventListener("mouseup",X),window.removeEventListener("mousemove",H),t.removeEventListener("wheel",G)};return window.addEventListener("keydown",V,{passive:!0}),window.addEventListener("keyup",z,{passive:!0}),t.addEventListener("mousedown",Y,{passive:!0}),window.addEventListener("mouseup",X,{passive:!0}),window.addEventListener("mousemove",H,{passive:!0}),t.addEventListener("wheel",G,{passive:!1}),U(),w.config=F,w.dispose=q,w.refresh=U,w.tick=N,w},Q=(()=>{try{return new window.BroadcastChannel("pub-sub-es")}catch(t){return{postMessage:()=>{}}}})(),tt=t=>(e,r,n=1/0)=>(t[e]||(t[e]=[],t.__times__[e]=[]),t[e].push(r),t.__times__[e].push(+n||1/0),{event:e,handler:r}),et=t=>(e,r)=>{if("object"===typeof e&&(r=e.handler,e=e.event),!t[e])return;const n=t[e].indexOf(r);-1===n||n>=t[e].length||(t[e].splice(n,1),t.__times__[e].splice(n,1))},rt=(t,e)=>(r,n,i)=>{if(!t[r])return;const o=et(t);if(t[r].forEach((e,i)=>{e(n),t.__times__[r][i]--,t.__times__[r][i]<1&&o(r,e)}),e&&!i)try{Q.postMessage({event:r,news:n})}catch(a){if(!(a instanceof DOMException))throw a;console.warn(`Could not broadcast '${r}' globally. Payload is not clonable.`)}},nt=t=>()=>{Object.keys(t).filter(t=>"_"!==t[0]).forEach(e=>{t[e]=void 0,t.__times__[e]=void 0,delete t[e],delete t.__times__[e]})},it=()=>({__times__:{}}),ot=(t=it())=>(t.__times__||(t.__times__={}),{publish:rt(t),subscribe:tt(t),unsubscribe:et(t),clear:nt(t),stack:t}),at=it(),st={publish:rt(at,!0),subscribe:tt(at),unsubscribe:et(at),stack:at};Q.onmessage=({data:{event:t,news:e}})=>st.publish(t,e,!0);const ut=(t,e,r=window.requestAnimationFrame)=>{let n,i=!1;return(...o)=>{if(n=o,!i)return i=!0,r(()=>{const r=t(...n);i=!1,e&&e(r)})}};var lt,ht,ct,ft,dt,pt,gt,vt,mt,yt,bt,wt,xt,_t,Et,St=s((function(t,e){!function(e,r){t.exports=r()}(0,(function(){function t(t,n,i,o,a){!function t(r,n,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=n-i+1,l=Math.log(s),h=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*h*(s-h)/s)*(u-s/2<0?-1:1),f=Math.max(i,Math.floor(n-u*h/s+c)),d=Math.min(o,Math.floor(n+(s-u)*h/s+c));t(r,n,f,d,a)}var p=r[n],g=i,v=o;for(e(r,i,n),a(r[o],p)>0&&e(r,i,o);g<v;){for(e(r,g,v),g++,v--;a(r[g],p)<0;)g++;for(;a(r[v],p)>0;)v--}0===a(r[i],p)?e(r,i,v):e(r,++v,o),v<=n&&(i=v+1),n<=v&&(o=v-1)}}(t,n,i||0,o||t.length-1,a||r)}function e(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,r,n,i){i||(i=p(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<r;o++){var a=t.children[o];s(i,t.leaf?n(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,r,n,i,o){for(var a=[r,n];a.length;)if(!((n=a.pop())-(r=a.pop())<=i)){var s=r+Math.ceil((n-r)/i/2)*i;t(e,s,r,n,o),a.push(r,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,r=[];if(!d(t,e))return r;for(var n=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?n(a):a;d(t,s)&&(e.leaf?r.push(a):f(t,s)?this._all(a,r):i.push(a))}e=i.pop()}return r},n.prototype.collides=function(t){var e=this.data;if(!d(t,e))return!1;for(var r=[];e;){for(var n=0;n<e.children.length;n++){var i=e.children[n],o=e.leaf?this.toBBox(i):i;if(d(t,o)){if(e.leaf||f(t,o))return!0;r.push(i)}}e=r.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=p([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var r,n,o,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],r=l.pop(),o=!0),a.leaf){var h=i(t,a.children,e);if(-1!==h)return a.children.splice(h,1),u.push(a),this._condense(u),this}o||a.leaf||!f(a,s)?n?(r++,a=n.children[r],o=!1):a=null:(u.push(a),l.push(r),r=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},n.prototype._build=function(t,e,r,n){var i,a=r-e+1,s=this._maxEntries;if(a<=s)return o(i=p(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(i=p([])).leaf=!1,i.height=n;var u=Math.ceil(a/s),l=u*Math.ceil(Math.sqrt(s));g(t,e,r,l,this.compareMinX);for(var h=e;h<=r;h+=l){var c=Math.min(h+l-1,r);g(t,h,c,u,this.compareMinY);for(var f=h;f<=c;f+=u){var d=Math.min(f+u-1,c);i.children.push(this._build(t,f,d,n-1))}}return o(i,this.toBBox),i},n.prototype._chooseSubtree=function(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var u=e.children[s],l=h(u),c=(f=t,d=u,(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-l);c<o?(o=c,i=l<i?l:i,a=u):c===o&&l<i&&(i=l,a=u)}e=a||e.children[0]}var f,d;return e},n.prototype._insert=function(t,e,r){var n=r?t:this.toBBox(t),i=[],o=this._chooseSubtree(n,this.data,e,i);for(o.children.push(t),s(o,n);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(n,i,e)},n.prototype._split=function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var a=this._chooseSplitIndex(r,i,n),s=p(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,o(r,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},n.prototype._splitRoot=function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,r){for(var n,i,o,s,u,l,c,f=1/0,d=1/0,p=e;p<=r-e;p++){var g=a(t,0,p,this.toBBox),v=a(t,p,r,this.toBBox),m=(i=g,o=v,s=void 0,u=void 0,l=void 0,c=void 0,s=Math.max(i.minX,o.minX),u=Math.max(i.minY,o.minY),l=Math.min(i.maxX,o.maxX),c=Math.min(i.maxY,o.maxY),Math.max(0,l-s)*Math.max(0,c-u)),y=h(g)+h(v);m<f?(f=m,n=p,d=y<d?y:d):m===f&&y<d&&(d=y,n=p)}return n||r-e},n.prototype._chooseSplitAxis=function(t,e,r){var n=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,r,n){t.children.sort(n);for(var i=this.toBBox,o=a(t,0,e,i),u=a(t,r-e,r,i),l=c(o)+c(u),h=e;h<r-e;h++){var f=t.children[h];s(o,t.leaf?i(f):f),l+=c(o)}for(var d=r-e-1;d>=e;d--){var p=t.children[d];s(u,t.leaf?i(p):p),l+=c(u)}return l},n.prototype._adjustParentBBoxes=function(t,e,r){for(var n=r;n>=0;n--)s(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,r=void 0;e>=0;e--)0===t[e].children.length?e>0?(r=t[e-1].children).splice(r.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},n}))})),Ot=!1;function Tt(){if(!Ot){Ot=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),r=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(wt=/\b(iPhone|iP[ao]d)/.exec(t),xt=/\b(iP[ao]d)/.exec(t),yt=/Android/i.exec(t),_t=/FBAN\/\w+;/i.exec(t),Et=/Mobile/i.exec(t),bt=!!/Win64/.exec(t),e){lt=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,lt&&document&&document.documentMode&&(lt=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(t);pt=n?parseFloat(n[1])+4:lt,ht=e[2]?parseFloat(e[2]):NaN,ct=e[3]?parseFloat(e[3]):NaN,ft=e[4]?parseFloat(e[4]):NaN,ft?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),dt=e&&e[1]?parseFloat(e[1]):NaN):dt=NaN}else lt=ht=ct=dt=ft=NaN;if(r){if(r[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);gt=!i||parseFloat(i[1].replace("_","."))}else gt=!1;vt=!!r[2],mt=!!r[3]}else gt=vt=mt=!1}}var At,Pt={ie:function(){return Tt()||lt},ieCompatibilityMode:function(){return Tt()||pt>lt},ie64:function(){return Pt.ie()&&bt},firefox:function(){return Tt()||ht},opera:function(){return Tt()||ct},webkit:function(){return Tt()||ft},safari:function(){return Pt.webkit()},chrome:function(){return Tt()||dt},windows:function(){return Tt()||vt},osx:function(){return Tt()||gt},linux:function(){return Tt()||mt},iphone:function(){return Tt()||wt},mobile:function(){return Tt()||wt||xt||yt||Et},nativeApp:function(){return Tt()||_t},android:function(){return Tt()||yt},ipad:function(){return Tt()||xt}},Ct=Pt,Mt=!("undefined"===typeof window||!window.document||!window.document.createElement),It={canUseDOM:Mt,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:Mt&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:Mt&&!!window.screen,isInWorker:!Mt},kt=It;
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */
function Dt(t,e){if(!kt.canUseDOM||e&&!("addEventListener"in document))return!1;var r="on"+t,n=r in document;if(!n){var i=document.createElement("div");i.setAttribute(r,"return;"),n="function"===typeof i[r]}return!n&&At&&"wheel"===t&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}kt.canUseDOM&&(At=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var Rt=Dt,jt=10,Lt=40,Bt=800;function Nt(t){var e=0,r=0,n=0,i=0;return"detail"in t&&(r=t.detail),"wheelDelta"in t&&(r=-t.wheelDelta/120),"wheelDeltaY"in t&&(r=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=r,r=0),n=e*jt,i=r*jt,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(n=t.deltaX),(n||i)&&t.deltaMode&&(1==t.deltaMode?(n*=Lt,i*=Lt):(n*=Bt,i*=Bt)),n&&!e&&(e=n<1?-1:1),i&&!r&&(r=i<1?-1:1),{spinX:e,spinY:r,pixelX:n,pixelY:i}}Nt.getEventType=function(){return Ct.firefox()?"DOMMouseScroll":Rt("wheel")?"wheel":"mousewheel"};var Ft=Nt,Ut=Ft,zt="BATCHING_REDUCER.BATCH";function Vt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zt;return{type:e,meta:{batch:!0},payload:t}}function Xt(t){return function e(r,n){return n&&n.meta&&n.meta.batch?n.payload.reduce(e,r):t(r,n)}}const Yt=t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,Ht=t=>--t*t*t+1,Gt=(t,e,r)=>(r=Math.min(1,Math.max(0,r)),t*(1-r)+e*r),qt=(t,e,r)=>t.map((t,n)=>Gt(t,e[n],r)),Wt=t=>t,Kt=(t,e,r=6)=>Math.abs(t-e)<10**-r,$t=(t,e=Wt)=>{const r=new Set,n=[];for(let i=0;i<t.length;i++){const o=e(t[i]);r.has(o)||(r.add(o),n.push(o))}return n},Zt=Array.isArray,Jt=t=>!!(t&&t.constructor&&t.call&&t.apply),Qt=t=>!!t&&t.constructor===Object,te=t=>Math.sqrt(t.reduce((t,e)=>t+e**2,0)),ee=t=>t.reduce((t,e)=>t>e?t:e,-1/0),re=t=>{switch(t.length){case 0:return[];case 1:return t[0];default:return t.reduce((t,e)=>e.map((e,r)=>t[r]>e?t[r]:e),new Array(t[0].length).fill(-1/0))}},ne=t=>he(t)/t.length,ie=t=>{switch(t.length){case 0:return[];case 1:return t[0];default:return t.reduce((e,r)=>r.map((r,n)=>e[n]+r/t.length),new Array(t[0].length).fill(0))}},oe=t=>t[Math.floor(t.length/2)],ae=oe,se=t=>t.reduce((t,e)=>t<e?t:e,1/0),ue=t=>{switch(t.length){case 0:return[];case 1:return t[0];default:return t.reduce((t,e)=>e.map((e,r)=>t[r]<e?t[r]:e),new Array(t[0].length).fill(1/0))}},le=t=>{const e=te(t);return t.map(t=>t/e)},he=t=>t.reduce((t,e)=>t+e,0),ce=t=>{switch(t.length){case 0:return[];case 1:return t[0];default:return t.reduce((t,e)=>e.map((e,r)=>t[r]+e),new Array(t[0].length).fill(0))}},fe="http://www.w3.org/2000/svg",de=(t,e)=>{if(t.namespaceURI===fe){if(!ge(t,e)){const r=t.getAttribute("class")||"";t.setAttribute("class",`${r} ${e}`)}}else t.classList?t.classList.add(e):ge(t,e)||(t.className+=" "+e)},pe=t=>{const e=document.createElement("div");return e.insertAdjacentHTML("beforeend",t),e.firstChild},ge=(t,e)=>{if(t.namespaceURI===fe){const r=t.getAttribute("class");return r&&!!r.match(new RegExp(`(\\s|^)${e}(\\s|$)`))}return t.classList?t.classList.contains(e):!!t.className.match(new RegExp(`(\\s|^)${e}(\\s|$)`))},ve=t=>{while(t.firstChild)t.removeChild(t.firstChild)},me=t=>{t.removeChild(t.lastChild)},ye=(t,e)=>{const r=new RegExp(`(\\s|^)${e}(\\s|$)`);if(t.namespaceURI===fe){const e=t.getAttribute("class")||"";t.setAttribute("class",e.replace(r," "))}else t.classList?t.classList.remove(e):ge(t,e)&&(t.className=t.className.replace(r," "))},be=(t,...e)=>(e.forEach(e=>{const r=Object.keys(e).reduce((t,r)=>(t[r]=Object.getOwnPropertyDescriptor(e,r),t),{});Object.getOwnPropertySymbols(e).forEach(t=>{const n=Object.getOwnPropertyDescriptor(e,t);n.enumerable&&(r[t]=n)}),Object.defineProperties(t,r)}),t),we=t=>{let e;return xe(e,t)},xe=(t,e)=>{if(null===e||"object"!==typeof e)return e;if(e.constructor!==Object&&e.constructor!==Array)return e;if(e.constructor===Date||e.constructor===RegExp||e.constructor===Function||e.constructor===String||e.constructor===Number||e.constructor===Boolean)return new e.constructor(e);const r=t||new e.constructor;return Object.keys(e).forEach(t=>{const n=Object.getOwnPropertyDescriptor(e,t);"undefined"===typeof r[t]&&("undefined"===typeof n.value?Object.defineProperty(r,t,n):r[t]=xe(void 0,e[t]))}),r},_e=(t,e)=>{if(null===e||"object"!==typeof e)return e;if(e.constructor!==Object&&e.constructor!==Array)return new e.constructor(e);const r=new t.constructor;let n=!1;return Object.keys(e).forEach(i=>{const o=Object.getOwnPropertyDescriptor(e,i);void 0===t[i]?"undefined"===typeof o.value?Object.defineProperty(r,i,o):r[i]=xe(void 0,e[i]):r[i]=_e(t[i],e[i]),n=n||r[i]!==t[i]}),n=n||Object.keys(t).filter(t=>"undefined"===typeof e[t]).length,n?r:t},Ee=t=>t.split(/(?=[A-Z])/).join("_").toUpperCase(),Se=t=>`${t[0].toUpperCase()}${t.substr(1)}`,Oe=t=>e=>Array.prototype.forEach.call(e,t),Te=(...t)=>e=>t.reduce((t,e)=>e(t),e),Ae=t=>e=>be({__proto__:{constructor:t}},e),Pe=(t,e)=>r=>be(r,{[t](...t){return e.apply(this,t)}}),Ce=(t,{initialValue:e,getter:r,setter:n,cloner:i=Wt,transformer:o=Wt,validator:a=(()=>!0)}={})=>s=>{let u=e;const l=r?()=>r():()=>i(u),h=n?t=>n(t):t=>{const e=o(t);u=a(e)?e:u};return be(s,{get[t](){return l()},["set"+Se(t)](t){h(t)}})},Me=(t,e)=>r=>be(r,{get[t](){return e()}}),Ie=(t,e)=>r=>be(r,{get[t](){return e}}),ke=(t,e,r,n)=>Math.abs(t-r)+Math.abs(e-n),De=(t,e,r,n)=>Math.sqrt((t-r)**2+(e-n)**2),Re=t=>(e,r)=>{const n=r.minX-e.minX,i=r.minX-e.maxX,o=r.maxX-e.minX,a=r.maxX-e.maxX,s=n<0&&o>0||i<0&&a>0||n>0&&i<0||o>0&&a<0,u=r.minY-e.minY,l=r.minY-e.maxY,h=r.maxY-e.minY,c=r.maxY-e.maxY,f=u<0&&h>0||l<0&&c>0||u>0&&l<0||h>0&&c<0;if(s&&f)return 0;const d=Math.min(Math.abs(u),Math.abs(l),Math.abs(h),Math.abs(c));if(s)return d;const p=Math.min(Math.abs(n),Math.abs(i),Math.abs(o),Math.abs(a));return f?p:(p**t+d**t)**(1/t)},je=([t,e]=[],r=[])=>{let n,i,o,a,s=!1;for(let u=0,l=r.length-2;u<r.length;u+=2)n=r[u],i=r[u+1],o=r[l],a=r[l+1],i>e!==a>e&&t<(o-n)*(e-i)/(a-i)+n&&(s=!s),l=u;return s},Le=(t,e)=>new Map(function*(){yield*t,yield*e}()),Be=t=>new Worker(window.URL.createObjectURL(new Blob([`(${t.toString()})()`],{type:"text/javascript"}))),Ne=()=>{},Fe=(t,e)=>t-e,Ue=(t,{getter:e=Wt,comparator:r=Fe,ignoreNull:n=!1}={})=>Object.entries(t).map(n?([t,r])=>null===e(r)?void 0:[t,e(r)]:([t,r])=>[t,e(r)]).sort((t,e)=>r(t[1],e[1])).reduce((t,e,r)=>e?(t[e[0]]=r,t):t,new t.constructor),ze=(t,e)=>{let r;const n=(...n)=>{const i=()=>{r=null,t(...n)};clearTimeout(r),r=setTimeout(i,e)};return n.cancel=()=>{clearTimeout(r)},n.now=(...e)=>t(...e),n},Ve=(t=1)=>new Promise(e=>{let r=0;const n=()=>requestAnimationFrame(()=>{r++,r<t?n():e()});n()}),Xe=(t,e,r=null)=>{let n,i=0;r=null===r?e:r;const o=(...e)=>{const o=()=>{i>0&&(t(...e),i=0)};clearTimeout(n),n=setTimeout(o,r)};let a=!1;const s=(...r)=>{a?(i++,o(...r)):(t(...r),o(...r),a=!0,i=0,setTimeout(()=>{a=!1},e))};return s.reset=()=>{a=!1},s.cancel=()=>{clearTimeout(n)},s.now=(...e)=>t(...e),s},Ye=t=>new Promise(e=>setTimeout(e,t));var He=32,Ge=He,qe=2147483647,We=-1<<He-1,Ke=function(t){return(t>0)-(t<0)},$e=function(t){var e=t>>He-1;return(t^e)-e},Ze=function(t,e){return e^(t^e)&-(t<e)},Je=function(t,e){return t^(t^e)&-(t<e)},Qe=function(t){return!(t&t-1)&&!!t},tr=function(t){var e,r;return e=(t>65535)<<4,t>>>=e,r=(t>255)<<3,t>>>=r,e|=r,r=(t>15)<<2,t>>>=r,e|=r,r=(t>3)<<1,t>>>=r,e|=r,e|t>>1},er=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},rr=function(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24};function nr(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}var ir=nr,or=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},ar=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},sr=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1},ur=new Array(256);(function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}})(ur);var lr=function(t){return ur[255&t]<<24|ur[t>>>8&255]<<16|ur[t>>>16&255]<<8|ur[t>>>24&255]},hr=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},cr=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},fr=function(t,e,r){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),t|r<<2},dr=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},pr=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>nr(t)+1},gr={INT_BITS:Ge,INT_MAX:qe,INT_MIN:We,sign:Ke,abs:$e,min:Ze,max:Je,isPow2:Qe,log2:tr,log10:er,popCount:rr,countTrailingZeros:ir,nextPow2:or,prevPow2:ar,parity:sr,reverse:lr,interleave2:hr,deinterleave2:cr,interleave3:fr,deinterleave3:dr,nextCombination:pr};function vr(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}var mr=vr,yr=function(t){return null!=t&&(br(t)||wr(t)||!!t._isBuffer)};
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */function br(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function wr(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&br(t.slice(0,0))}var xr="undefined"!==typeof Float64Array;function _r(t,e){return t[0]-e[0]}function Er(){var t,e=this.stride,r=new Array(e.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(e[t]),t];r.sort(_r);var n=new Array(r.length);for(t=0;t<n.length;++t)n[t]=r[t][1];return n}function Sr(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n="generic"===t;if(-1===e){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",o=new Function(i);return o()}if(0===e){i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",o=new Function("TrivialArray",i);return o(Tr[t][0])}i=["'use strict'"];var a=mr(e),s=a.map((function(t){return"i"+t})),u="this.offset+"+a.map((function(t){return"this.stride["+t+"]*i"+t})).join("+"),l=a.map((function(t){return"b"+t})).join(","),h=a.map((function(t){return"c"+t})).join(",");i.push("function "+r+"(a,"+l+","+h+",d){this.data=a","this.shape=["+l+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map((function(t){return"this.shape["+t+"]"})).join("*"),"}})"),1===e?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+r+"_order(){"),2===e?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+s.join(",")+",v){"),n?i.push("return this.data.set("+u+",v)}"):i.push("return this.data["+u+"]=v}"),i.push("proto.get=function "+r+"_get("+s.join(",")+"){"),n?i.push("return this.data.get("+u+")}"):i.push("return this.data["+u+"]}"),i.push("proto.index=function "+r+"_index(",s.join(),"){return "+u+"}"),i.push("proto.hi=function "+r+"_hi("+s.join(",")+"){return new "+r+"(this.data,"+a.map((function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")})).join(",")+","+a.map((function(t){return"this.stride["+t+"]"})).join(",")+",this.offset)}");var c=a.map((function(t){return"a"+t+"=this.shape["+t+"]"})),f=a.map((function(t){return"c"+t+"=this.stride["+t+"]"}));i.push("proto.lo=function "+r+"_lo("+s.join(",")+"){var b=this.offset,d=0,"+c.join(",")+","+f.join(","));for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");i.push("return new "+r+"(this.data,"+a.map((function(t){return"a"+t})).join(",")+","+a.map((function(t){return"c"+t})).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+s.join(",")+"){var "+a.map((function(t){return"a"+t+"=this.shape["+t+"]"})).join(",")+","+a.map((function(t){return"b"+t+"=this.stride["+t+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");i.push("return new "+r+"(this.data,"+a.map((function(t){return"a"+t})).join(",")+","+a.map((function(t){return"b"+t})).join(",")+",c)}");var p=new Array(e),g=new Array(e);for(d=0;d<e;++d)p[d]="a[i"+d+"]",g[d]="b[i"+d+"]";i.push("proto.transpose=function "+r+"_transpose("+s+"){"+s.map((function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+p.join(",")+","+g.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+s+"){var a=[],b=[],c=this.offset");for(d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map((function(t){return"shape["+t+"]"})).join(",")+","+a.map((function(t){return"stride["+t+"]"})).join(",")+",offset)}");o=new Function("CTOR_LIST","ORDER",i.join("\n"));return o(Tr[t],Er)}function Or(t){if(yr(t))return"buffer";if(xr)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var Tr={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function Ar(t,e,r,n){if(void 0===t){var i=Tr.array[0];return i([])}"number"===typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var o=e.length;if(void 0===r){r=new Array(o);for(var a=o-1,s=1;a>=0;--a)r[a]=s,s*=e[a]}if(void 0===n){n=0;for(a=0;a<o;++a)r[a]<0&&(n-=(e[a]-1)*r[a])}var u=Or(t),l=Tr[u];while(l.length<=o+1)l.push(Sr(u,l.length-1));i=l[o+1];return i(t,e,r,n)}var Pr=Ar;function Cr(t,e){for(var r=1,n=t.length,i=t[0],o=t[0],a=1;a<n;++a)if(o=i,i=t[a],e(i,o)){if(a===r){r++;continue}t[r++]=i}return t.length=r,t}function Mr(t){for(var e=1,r=t.length,n=t[0],i=t[0],o=1;o<r;++o,i=n)if(i=n,n=t[o],n!==i){if(o===e){e++;continue}t[e++]=n}return t.length=e,t}function Ir(t,e,r){return 0===t.length?t:e?(r||t.sort(e),Cr(t,e)):(r||t.sort(),Mr(t))}var kr=Ir;function Dr(t,e,r){var n,i,o=t.length,a=e.arrayArgs.length,s=e.indexArgs.length>0,u=[],l=[],h=0,c=0;for(n=0;n<o;++n)l.push(["i",n,"=0"].join(""));for(i=0;i<a;++i)for(n=0;n<o;++n)c=h,h=t[n],0===n?l.push(["d",i,"s",n,"=t",i,"p",h].join("")):l.push(["d",i,"s",n,"=(t",i,"p",h,"-s",c,"*t",i,"p",c,")"].join(""));for(l.length>0&&u.push("var "+l.join(",")),n=o-1;n>=0;--n)h=t[n],u.push(["for(i",n,"=0;i",n,"<s",h,";++i",n,"){"].join(""));for(u.push(r),n=0;n<o;++n){for(c=h,h=t[n],i=0;i<a;++i)u.push(["p",i,"+=d",i,"s",n].join(""));s&&(n>0&&u.push(["index[",c,"]-=s",c].join("")),u.push(["++index[",h,"]"].join(""))),u.push("}")}return u.join("\n")}function Rr(t,e,r,n){for(var i=e.length,o=r.arrayArgs.length,a=r.blockSize,s=r.indexArgs.length>0,u=[],l=0;l<o;++l)u.push(["var offset",l,"=p",l].join(""));for(l=t;l<i;++l)u.push(["for(var j"+l+"=SS[",e[l],"]|0;j",l,">0;){"].join("")),u.push(["if(j",l,"<",a,"){"].join("")),u.push(["s",e[l],"=j",l].join("")),u.push(["j",l,"=0"].join("")),u.push(["}else{s",e[l],"=",a].join("")),u.push(["j",l,"-=",a,"}"].join("")),s&&u.push(["index[",e[l],"]=j",l].join(""));for(l=0;l<o;++l){for(var h=["offset"+l],c=t;c<i;++c)h.push(["j",c,"*t",l,"p",e[c]].join(""));u.push(["p",l,"=(",h.join("+"),")"].join(""))}u.push(Dr(e,r,n));for(l=t;l<i;++l)u.push("}");return u.join("\n")}function jr(t){var e=0,r=t[0].length;while(e<r){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function Lr(t,e,r){for(var n=t.body,i=[],o=[],a=0;a<t.args.length;++a){var s=t.args[a];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),l="",h=e.arrayArgs.indexOf(a);switch(e.argTypes[a]){case"offset":var c=e.offsetArgIndex.indexOf(a),f=e.offsetArgs[c];h=f.array,l="+q"+c;case"array":l="p"+h+l;var d="l"+a,p="a"+h;if(0===e.arrayBlockIndices[h])1===s.count?"generic"===r[h]?s.lvalue?(i.push(["var ",d,"=",p,".get(",l,")"].join("")),n=n.replace(u,d),o.push([p,".set(",l,",",d,")"].join(""))):n=n.replace(u,[p,".get(",l,")"].join("")):n=n.replace(u,[p,"[",l,"]"].join("")):"generic"===r[h]?(i.push(["var ",d,"=",p,".get(",l,")"].join("")),n=n.replace(u,d),s.lvalue&&o.push([p,".set(",l,",",d,")"].join(""))):(i.push(["var ",d,"=",p,"[",l,"]"].join("")),n=n.replace(u,d),s.lvalue&&o.push([p,"[",l,"]=",d].join("")));else{for(var g=[s.name],v=[l],m=0;m<Math.abs(e.arrayBlockIndices[h]);m++)g.push("\\s*\\[([^\\]]+)\\]"),v.push("$"+(m+1)+"*t"+h+"b"+m);if(u=new RegExp(g.join(""),"g"),l=v.join("+"),"generic"===r[h])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[p,"[",l,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+e.scalarArgs.indexOf(a));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape");break}}}return[i.join("\n"),n,o.join("\n")].join("\n").trim()}function Br(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?e[n]="u"+i.charAt(1)+o:e[n]=i.charAt(0)+o,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}function Nr(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),i=new Array(t.arrayArgs.length),o=0;o<t.arrayArgs.length;++o)i[o]=e[2*o],n[o]=e[2*o+1];var a=[],s=[],u=[],l=[],h=[];for(o=0;o<t.arrayArgs.length;++o){t.arrayBlockIndices[o]<0?(u.push(0),l.push(r),a.push(r),s.push(r+t.arrayBlockIndices[o])):(u.push(t.arrayBlockIndices[o]),l.push(t.arrayBlockIndices[o]+r),a.push(0),s.push(t.arrayBlockIndices[o]));for(var c=[],f=0;f<n[o].length;f++)u[o]<=n[o][f]&&n[o][f]<l[o]&&c.push(n[o][f]-u[o]);h.push(c)}var d=["SS"],p=["'use strict'"],g=[];for(f=0;f<r;++f)g.push(["s",f,"=SS[",f,"]"].join(""));for(o=0;o<t.arrayArgs.length;++o){d.push("a"+o),d.push("t"+o),d.push("p"+o);for(f=0;f<r;++f)g.push(["t",o,"p",f,"=t",o,"[",u[o]+f,"]"].join(""));for(f=0;f<Math.abs(t.arrayBlockIndices[o]);++f)g.push(["t",o,"b",f,"=t",o,"[",a[o]+f,"]"].join(""))}for(o=0;o<t.scalarArgs.length;++o)d.push("Y"+o);if(t.shapeArgs.length>0&&g.push("shape=SS.slice(0)"),t.indexArgs.length>0){var v=new Array(r);for(o=0;o<r;++o)v[o]="0";g.push(["index=[",v.join(","),"]"].join(""))}for(o=0;o<t.offsetArgs.length;++o){var m=t.offsetArgs[o],y=[];for(f=0;f<m.offset.length;++f)0!==m.offset[f]&&(1===m.offset[f]?y.push(["t",m.array,"p",f].join("")):y.push([m.offset[f],"*t",m.array,"p",f].join("")));0===y.length?g.push("q"+o+"=0"):g.push(["q",o,"=",y.join("+")].join(""))}var b=kr([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));g=g.concat(b),g.length>0&&p.push("var "+g.join(","));for(o=0;o<t.arrayArgs.length;++o)p.push("p"+o+"|=0");t.pre.body.length>3&&p.push(Lr(t.pre,t,i));var w=Lr(t.body,t,i),x=jr(h);x<r?p.push(Rr(x,h[0],t,w)):p.push(Dr(h[0],t,w)),t.post.body.length>3&&p.push(Lr(t.post,t,i)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+p.join("\n")+"\n----------");var _=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",x,Br(i)].join(""),E=new Function(["function ",_,"(",d.join(","),"){",p.join("\n"),"} return ",_].join(""));return E()}var Fr=Nr;function Ur(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],o=[],a=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],s=[],u=[],l=0;l<t.arrayArgs.length;++l){var h=t.arrayArgs[l];r.push(["t",h,"=array",h,".dtype,","r",h,"=array",h,".order"].join("")),i.push("t"+h),i.push("r"+h),o.push("t"+h),o.push("r"+h+".join()"),a.push("array"+h+".data"),a.push("array"+h+".stride"),a.push("array"+h+".offset|0"),l>0&&(s.push("array"+t.arrayArgs[0]+".shape.length===array"+h+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[l]))),u.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+h+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[l])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(l=0;l<t.scalarArgs.length;++l)a.push("scalar"+t.scalarArgs[l]);r.push(["type=[",o.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",a.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------");var c=new Function("compile",e.join("\n"));return c(Fr.bind(void 0,t))}var zr=Ur;function Vr(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function Xr(t){var e=new Vr;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var n=0;n<r.length;++n){var i=r[n];if("array"===i||"object"===typeof i&&i.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===i)e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if("index"===i){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===i){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!==typeof i||!i.offset)throw new Error("cwise: Unknown argument type "+r[n]);e.argTypes[n]="offset",e.offsetArgs.push({array:i.array,offset:i.offset}),e.offsetArgIndex.push(n)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,zr(e)}var Yr=Xr,Hr=s((function(t,e){var r={body:"",args:[],thisVars:[],localVars:[]};function n(t){if(!t)return r;for(var e=0;e<t.args.length;++e){var n=t.args[e];t.args[e]=0===e?{name:n,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:{name:n,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function i(t){return Yr({args:t.args,pre:n(t.pre),body:n(t.body),post:n(t.proc),funcName:t.funcName})}function o(t){for(var e=[],r=0;r<t.args.length;++r)e.push("a"+r);var n=new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""));return n(i(t))}var a={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var t in a){var r=a[t];e[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:t}),e[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+r+"=b"},rvalue:!0,funcName:t+"eq"}),e[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:t+"s"}),e[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+r+"=s"},rvalue:!0,funcName:t+"seq"})}})();var s={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var t in s){var r=s[t];e[t]=o({args:["array","array"],body:{args:["a","b"],body:"a="+r+"b"},funcName:t}),e[t+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+r+"a"},rvalue:!0,count:2,funcName:t+"eq"})}})();var u={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var t in u){var r=u[t];e[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:t}),e[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:t+"s"}),e[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+r+"b"},rvalue:!0,count:2,funcName:t+"eq"}),e[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+r+"s"},rvalue:!0,count:2,funcName:t+"seq"})}})();var l=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var t=0;t<l.length;++t){var r=l[t];e[r]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:r}),e[r+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"})}})();var h=["max","min","atan2","pow"];(function(){for(var t=0;t<h.length;++t){var r=h[t];e[r]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r}),e[r+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r+"s"}),e[r+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"}),e[r+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"seq"})}})();var c=["atan2","pow"];(function(){for(var t=0;t<c.length;++t){var r=c[t];e[r+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"op"}),e[r+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"ops"}),e[r+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opeq"}),e[r+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opseq"})}})(),e.any=Yr({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=Yr({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=Yr({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=Yr({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=Yr({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=Yr({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=Yr({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=Yr({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=Yr({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=Yr({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=Yr({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=Yr({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=Yr({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})),Gr=s((function(t,e){(function(t,r){r(e)})(0,(function(t){var e,r,n,i,o,a,s,u,l,h,c,f,d,p,g,v,m,y;function b(t,e){if(!t)throw new Error("ASSERT: "+e)}function w(t){return t>=48&&t<=57}function x(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function _(t){return"01234567".indexOf(t)>=0}function E(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function S(t){return 10===t||13===t||8232===t||8233===t}function O(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&s.NonAsciiIdentifierStart.test(String.fromCharCode(t))}function T(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&s.NonAsciiIdentifierPart.test(String.fromCharCode(t))}function A(t){switch(t){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function P(t){switch(t){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function C(t){return"eval"===t||"arguments"===t}function M(t){if(h&&P(t))return!0;switch(t.length){case 2:return"if"===t||"in"===t||"do"===t;case 3:return"var"===t||"for"===t||"new"===t||"try"===t||"let"===t;case 4:return"this"===t||"else"===t||"case"===t||"void"===t||"with"===t||"enum"===t;case 5:return"while"===t||"break"===t||"catch"===t||"throw"===t||"const"===t||"yield"===t||"class"===t||"super"===t;case 6:return"return"===t||"typeof"===t||"delete"===t||"switch"===t||"export"===t||"import"===t;case 7:return"default"===t||"finally"===t||"extends"===t;case 8:return"function"===t||"continue"===t||"debugger"===t;case 10:return"instanceof"===t;default:return!1}}function I(t,e,r,n,i){var o;b("number"===typeof r,"Comment must have valid position"),m.lastCommentStart>=r||(m.lastCommentStart=r,o={type:t,value:e},y.range&&(o.range=[r,n]),y.loc&&(o.loc=i),y.comments.push(o),y.attachComment&&(y.leadingComments.push(o),y.trailingComments.push(o)))}function k(t){var e,r,n,i;e=c-t,r={start:{line:f,column:c-d-t}};while(c<p)if(n=l.charCodeAt(c),++c,S(n))return y.comments&&(i=l.slice(e+t,c-1),r.end={line:f,column:c-d-1},I("Line",i,e,c-1,r)),13===n&&10===l.charCodeAt(c)&&++c,++f,void(d=c);y.comments&&(i=l.slice(e+t,c),r.end={line:f,column:c-d},I("Line",i,e,c,r))}function D(){var t,e,r,n;y.comments&&(t=c-2,e={start:{line:f,column:c-d-2}});while(c<p)if(r=l.charCodeAt(c),S(r))13===r&&10===l.charCodeAt(c+1)&&++c,++f,++c,d=c,c>=p&&ot({},a.UnexpectedToken,"ILLEGAL");else if(42===r){if(47===l.charCodeAt(c+1))return++c,++c,void(y.comments&&(n=l.slice(t+2,c-2),e.end={line:f,column:c-d},I("Block",n,t,c,e)));++c}else++c;ot({},a.UnexpectedToken,"ILLEGAL")}function R(){var t,e;e=0===c;while(c<p)if(t=l.charCodeAt(c),E(t))++c;else if(S(t))++c,13===t&&10===l.charCodeAt(c)&&++c,++f,d=c,e=!0;else if(47===t)if(t=l.charCodeAt(c+1),47===t)++c,++c,k(2),e=!0;else{if(42!==t)break;++c,++c,D()}else if(e&&45===t){if(45!==l.charCodeAt(c+1)||62!==l.charCodeAt(c+2))break;c+=3,k(3)}else{if(60!==t)break;if("!--"!==l.slice(c+1,c+4))break;++c,++c,++c,++c,k(4)}}function j(t){var e,r,n,i=0;for(r="u"===t?4:2,e=0;e<r;++e){if(!(c<p&&x(l[c])))return"";n=l[c++],i=16*i+"0123456789abcdef".indexOf(n.toLowerCase())}return String.fromCharCode(i)}function L(){var t,e;t=l.charCodeAt(c++),e=String.fromCharCode(t),92===t&&(117!==l.charCodeAt(c)&&ot({},a.UnexpectedToken,"ILLEGAL"),++c,t=j("u"),t&&"\\"!==t&&O(t.charCodeAt(0))||ot({},a.UnexpectedToken,"ILLEGAL"),e=t);while(c<p){if(t=l.charCodeAt(c),!T(t))break;++c,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==l.charCodeAt(c)&&ot({},a.UnexpectedToken,"ILLEGAL"),++c,t=j("u"),t&&"\\"!==t&&T(t.charCodeAt(0))||ot({},a.UnexpectedToken,"ILLEGAL"),e+=t)}return e}function B(){var t,e;t=c++;while(c<p){if(e=l.charCodeAt(c),92===e)return c=t,L();if(!T(e))break;++c}return l.slice(t,c)}function N(){var t,r,n;return t=c,r=92===l.charCodeAt(c)?L():B(),n=1===r.length?e.Identifier:M(r)?e.Keyword:"null"===r?e.NullLiteral:"true"===r||"false"===r?e.BooleanLiteral:e.Identifier,{type:n,value:r,lineNumber:f,lineStart:d,start:t,end:c}}function F(){var t,r,n,i,o=c,s=l.charCodeAt(c),u=l[c];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++c,y.tokenize&&(40===s?y.openParenToken=y.tokens.length:123===s&&(y.openCurlyToken=y.tokens.length)),{type:e.Punctuator,value:String.fromCharCode(s),lineNumber:f,lineStart:d,start:o,end:c};default:if(t=l.charCodeAt(c+1),61===t)switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return c+=2,{type:e.Punctuator,value:String.fromCharCode(s)+String.fromCharCode(t),lineNumber:f,lineStart:d,start:o,end:c};case 33:case 61:return c+=2,61===l.charCodeAt(c)&&++c,{type:e.Punctuator,value:l.slice(o,c),lineNumber:f,lineStart:d,start:o,end:c}}}return i=l.substr(c,4),">>>="===i?(c+=4,{type:e.Punctuator,value:i,lineNumber:f,lineStart:d,start:o,end:c}):(n=i.substr(0,3),">>>"===n||"<<="===n||">>="===n?(c+=3,{type:e.Punctuator,value:n,lineNumber:f,lineStart:d,start:o,end:c}):(r=n.substr(0,2),u===r[1]&&"+-<>&|".indexOf(u)>=0||"=>"===r?(c+=2,{type:e.Punctuator,value:r,lineNumber:f,lineStart:d,start:o,end:c}):"<>=!+-*%&|^/".indexOf(u)>=0?(++c,{type:e.Punctuator,value:u,lineNumber:f,lineStart:d,start:o,end:c}):void ot({},a.UnexpectedToken,"ILLEGAL")))}function U(t){var r="";while(c<p){if(!x(l[c]))break;r+=l[c++]}return 0===r.length&&ot({},a.UnexpectedToken,"ILLEGAL"),O(l.charCodeAt(c))&&ot({},a.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseInt("0x"+r,16),lineNumber:f,lineStart:d,start:t,end:c}}function z(t){var r="0"+l[c++];while(c<p){if(!_(l[c]))break;r+=l[c++]}return(O(l.charCodeAt(c))||w(l.charCodeAt(c)))&&ot({},a.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseInt(r,8),octal:!0,lineNumber:f,lineStart:d,start:t,end:c}}function V(){var t,e;for(t=c+1;t<p;++t){if(e=l[t],"8"===e||"9"===e)return!1;if(!_(e))return!0}return!0}function X(){var t,r,n;if(n=l[c],b(w(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),r=c,t="","."!==n){if(t=l[c++],n=l[c],"0"===t){if("x"===n||"X"===n)return++c,U(r);if(_(n)&&V())return z(r)}while(w(l.charCodeAt(c)))t+=l[c++];n=l[c]}if("."===n){t+=l[c++];while(w(l.charCodeAt(c)))t+=l[c++];n=l[c]}if("e"===n||"E"===n)if(t+=l[c++],n=l[c],"+"!==n&&"-"!==n||(t+=l[c++]),w(l.charCodeAt(c)))while(w(l.charCodeAt(c)))t+=l[c++];else ot({},a.UnexpectedToken,"ILLEGAL");return O(l.charCodeAt(c))&&ot({},a.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseFloat(t),lineNumber:f,lineStart:d,start:r,end:c}}function Y(){var t,r,n,i,o,s,u,h,g="",v=!1;u=f,h=d,t=l[c],b("'"===t||'"'===t,"String literal must starts with a quote"),r=c,++c;while(c<p){if(n=l[c++],n===t){t="";break}if("\\"===n)if(n=l[c++],n&&S(n.charCodeAt(0)))++f,"\r"===n&&"\n"===l[c]&&++c,d=c;else switch(n){case"u":case"x":s=c,o=j(n),o?g+=o:(c=s,g+=n);break;case"n":g+="\n";break;case"r":g+="\r";break;case"t":g+="\t";break;case"b":g+="\b";break;case"f":g+="\f";break;case"v":g+="\v";break;default:_(n)?(i="01234567".indexOf(n),0!==i&&(v=!0),c<p&&_(l[c])&&(v=!0,i=8*i+"01234567".indexOf(l[c++]),"0123".indexOf(n)>=0&&c<p&&_(l[c])&&(i=8*i+"01234567".indexOf(l[c++]))),g+=String.fromCharCode(i)):g+=n;break}else{if(S(n.charCodeAt(0)))break;g+=n}}return""!==t&&ot({},a.UnexpectedToken,"ILLEGAL"),{type:e.StringLiteral,value:g,octal:v,startLineNumber:u,startLineStart:h,lineNumber:f,lineStart:d,start:r,end:c}}function H(t,e){var r;try{r=new RegExp(t,e)}catch(n){ot({},a.InvalidRegExp)}return r}function G(){var t,e,r,n,i;t=l[c],b("/"===t,"Regular expression literal must start with a slash"),e=l[c++],r=!1,n=!1;while(c<p)if(t=l[c++],e+=t,"\\"===t)t=l[c++],S(t.charCodeAt(0))&&ot({},a.UnterminatedRegExp),e+=t;else if(S(t.charCodeAt(0)))ot({},a.UnterminatedRegExp);else if(r)"]"===t&&(r=!1);else{if("/"===t){n=!0;break}"["===t&&(r=!0)}return n||ot({},a.UnterminatedRegExp),i=e.substr(1,e.length-2),{value:i,literal:e}}function q(){var t,e,r,n;e="",r="";while(c<p){if(t=l[c],!T(t.charCodeAt(0)))break;if(++c,"\\"===t&&c<p)if(t=l[c],"u"===t){if(++c,n=c,t=j("u"),t)for(r+=t,e+="\\u";n<c;++n)e+=l[n];else c=n,r+="u",e+="\\u";at({},a.UnexpectedToken,"ILLEGAL")}else e+="\\",at({},a.UnexpectedToken,"ILLEGAL");else r+=t,e+=t}return{value:r,literal:e}}function W(){var t,r,n,i;return v=null,R(),t=c,r=G(),n=q(),i=H(r.value,n.value),y.tokenize?{type:e.RegularExpression,value:i,lineNumber:f,lineStart:d,start:t,end:c}:{literal:r.literal+n.literal,value:i,start:t,end:c}}function K(){var t,e,r,n;return R(),t=c,e={start:{line:f,column:c-d}},r=W(),e.end={line:f,column:c-d},y.tokenize||(y.tokens.length>0&&(n=y.tokens[y.tokens.length-1],n.range[0]===t&&"Punctuator"===n.type&&("/"!==n.value&&"/="!==n.value||y.tokens.pop())),y.tokens.push({type:"RegularExpression",value:r.literal,range:[t,c],loc:e})),r}function $(t){return t.type===e.Identifier||t.type===e.Keyword||t.type===e.BooleanLiteral||t.type===e.NullLiteral}function Z(){var t,e;if(t=y.tokens[y.tokens.length-1],!t)return K();if("Punctuator"===t.type){if("]"===t.value)return F();if(")"===t.value)return e=y.tokens[y.openParenToken-1],!e||"Keyword"!==e.type||"if"!==e.value&&"while"!==e.value&&"for"!==e.value&&"with"!==e.value?F():K();if("}"===t.value){if(y.tokens[y.openCurlyToken-3]&&"Keyword"===y.tokens[y.openCurlyToken-3].type){if(e=y.tokens[y.openCurlyToken-4],!e)return F()}else{if(!y.tokens[y.openCurlyToken-4]||"Keyword"!==y.tokens[y.openCurlyToken-4].type)return F();if(e=y.tokens[y.openCurlyToken-5],!e)return K()}return n.indexOf(e.value)>=0?F():K()}return K()}return"Keyword"===t.type&&"this"!==t.value?K():F()}function J(){var t;return R(),c>=p?{type:e.EOF,lineNumber:f,lineStart:d,start:c,end:c}:(t=l.charCodeAt(c),O(t)?N():40===t||41===t||59===t?F():39===t||34===t?Y():46===t?w(l.charCodeAt(c+1))?X():F():w(t)?X():y.tokenize&&47===t?Z():F())}function Q(){var t,n,i;return R(),t={start:{line:f,column:c-d}},n=J(),t.end={line:f,column:c-d},n.type!==e.EOF&&(i=l.slice(n.start,n.end),y.tokens.push({type:r[n.type],value:i,range:[n.start,n.end],loc:t})),n}function tt(){var t;return t=v,c=t.end,f=t.lineNumber,d=t.lineStart,v="undefined"!==typeof y.tokens?Q():J(),c=t.end,f=t.lineNumber,d=t.lineStart,t}function et(){var t,e,r;t=c,e=f,r=d,v="undefined"!==typeof y.tokens?Q():J(),c=t,f=e,d=r}function rt(t,e){this.line=t,this.column=e}function nt(t,e,r,n){this.start=new rt(t,e),this.end=new rt(r,n)}function it(){var t,e,r,n;return t=c,e=f,r=d,R(),n=f!==e,c=t,f=e,d=r,n}function ot(t,e){var r,n=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,(function(t,e){return b(e<n.length,"Message reference must be in range"),n[e]}));throw"number"===typeof t.lineNumber?(r=new Error("Line "+t.lineNumber+": "+i),r.index=t.start,r.lineNumber=t.lineNumber,r.column=t.start-d+1):(r=new Error("Line "+f+": "+i),r.index=c,r.lineNumber=f,r.column=c-d+1),r.description=i,r}function at(){try{ot.apply(null,arguments)}catch(t){if(!y.errors)throw t;y.errors.push(t)}}function st(t){if(t.type===e.EOF&&ot(t,a.UnexpectedEOS),t.type===e.NumericLiteral&&ot(t,a.UnexpectedNumber),t.type===e.StringLiteral&&ot(t,a.UnexpectedString),t.type===e.Identifier&&ot(t,a.UnexpectedIdentifier),t.type===e.Keyword){if(A(t.value))ot(t,a.UnexpectedReserved);else if(h&&P(t.value))return void at(t,a.StrictReservedWord);ot(t,a.UnexpectedToken,t.value)}ot(t,a.UnexpectedToken,t.value)}function ut(t){var r=tt();r.type===e.Punctuator&&r.value===t||st(r)}function lt(t){var r=tt();r.type===e.Keyword&&r.value===t||st(r)}function ht(t){return v.type===e.Punctuator&&v.value===t}function ct(t){return v.type===e.Keyword&&v.value===t}function ft(){var t;return v.type===e.Punctuator&&(t=v.value,"="===t||"*="===t||"/="===t||"%="===t||"+="===t||"-="===t||"<<="===t||">>="===t||">>>="===t||"&="===t||"^="===t||"|="===t)}function dt(){var t,r=c,n=f,i=d,o=v;if(59===l.charCodeAt(c)||ht(";"))tt();else{if(t=f,R(),f!==t)return c=r,f=n,d=i,void(v=o);v.type===e.EOF||ht("}")||st(v)}}function pt(t){return t.type===i.Identifier||t.type===i.MemberExpression}function gt(){var t,e=[];t=v,ut("[");while(!ht("]"))ht(",")?(tt(),e.push(null)):(e.push(Rt()),ht("]")||ut(","));return tt(),g.markEnd(g.createArrayExpression(e),t)}function vt(t,e){var r,n,i;return r=h,i=v,n=se(),e&&h&&C(t[0].name)&&at(e,a.StrictParamName),h=r,g.markEnd(g.createFunctionExpression(null,t,[],n),i)}function mt(){var t,r;return r=v,t=tt(),t.type===e.StringLiteral||t.type===e.NumericLiteral?(h&&t.octal&&at(t,a.StrictOctalLiteral),g.markEnd(g.createLiteral(t),r)):g.markEnd(g.createIdentifier(t.value),r)}function yt(){var t,r,n,i,o,s;return t=v,s=v,t.type===e.Identifier?(n=mt(),"get"!==t.value||ht(":")?"set"!==t.value||ht(":")?(ut(":"),i=Rt(),g.markEnd(g.createProperty("init",n,i),s)):(r=mt(),ut("("),t=v,t.type!==e.Identifier?(ut(")"),at(t,a.UnexpectedToken,t.value),i=vt([])):(o=[Nt()],ut(")"),i=vt(o,t)),g.markEnd(g.createProperty("set",r,i),s)):(r=mt(),ut("("),ut(")"),i=vt([]),g.markEnd(g.createProperty("get",r,i),s))):t.type!==e.EOF&&t.type!==e.Punctuator?(r=mt(),ut(":"),i=Rt(),g.markEnd(g.createProperty("init",r,i),s)):void st(t)}function bt(){var t,e,r,n,s,u=[],l={},c=String;s=v,ut("{");while(!ht("}"))t=yt(),e=t.key.type===i.Identifier?t.key.name:c(t.key.value),n="init"===t.kind?o.Data:"get"===t.kind?o.Get:o.Set,r="$"+e,Object.prototype.hasOwnProperty.call(l,r)?(l[r]===o.Data?h&&n===o.Data?at({},a.StrictDuplicateProperty):n!==o.Data&&at({},a.AccessorDataProperty):n===o.Data?at({},a.AccessorDataProperty):l[r]&n&&at({},a.AccessorGetSet),l[r]|=n):l[r]=n,u.push(t),ht("}")||ut(",");return ut("}"),g.markEnd(g.createObjectExpression(u),s)}function wt(){var t;return ut("("),t=jt(),ut(")"),t}function xt(){var t,r,n,i;if(ht("("))return wt();if(ht("["))return gt();if(ht("{"))return bt();if(t=v.type,i=v,t===e.Identifier)n=g.createIdentifier(tt().value);else if(t===e.StringLiteral||t===e.NumericLiteral)h&&v.octal&&at(v,a.StrictOctalLiteral),n=g.createLiteral(tt());else if(t===e.Keyword){if(ct("function"))return he();ct("this")?(tt(),n=g.createThisExpression()):st(tt())}else t===e.BooleanLiteral?(r=tt(),r.value="true"===r.value,n=g.createLiteral(r)):t===e.NullLiteral?(r=tt(),r.value=null,n=g.createLiteral(r)):ht("/")||ht("/=")?(n="undefined"!==typeof y.tokens?g.createLiteral(K()):g.createLiteral(W()),et()):st(tt());return g.markEnd(n,i)}function _t(){var t=[];if(ut("("),!ht(")"))while(c<p){if(t.push(Rt()),ht(")"))break;ut(",")}return ut(")"),t}function Et(){var t,e;return e=v,t=tt(),$(t)||st(t),g.markEnd(g.createIdentifier(t.value),e)}function St(){return ut("."),Et()}function Ot(){var t;return ut("["),t=jt(),ut("]"),t}function Tt(){var t,e,r;return r=v,lt("new"),t=Pt(),e=ht("(")?_t():[],g.markEnd(g.createNewExpression(t,e),r)}function At(){var t,e,r,n,i=m.allowIn;for(n=v,m.allowIn=!0,t=ct("new")?Tt():xt();;){if(ht("."))r=St(),t=g.createMemberExpression(".",t,r);else if(ht("("))e=_t(),t=g.createCallExpression(t,e);else{if(!ht("["))break;r=Ot(),t=g.createMemberExpression("[",t,r)}g.markEnd(t,n)}return m.allowIn=i,t}function Pt(){var t,e,r;b(m.allowIn,"callee of new expression always allow in keyword."),r=v,t=ct("new")?Tt():xt();while(ht(".")||ht("["))ht("[")?(e=Ot(),t=g.createMemberExpression("[",t,e)):(e=St(),t=g.createMemberExpression(".",t,e)),g.markEnd(t,r);return t}function Ct(){var t,r,n=v;return t=At(),v.type===e.Punctuator&&(!ht("++")&&!ht("--")||it()||(h&&t.type===i.Identifier&&C(t.name)&&at({},a.StrictLHSPostfix),pt(t)||at({},a.InvalidLHSInAssignment),r=tt(),t=g.markEnd(g.createPostfixExpression(r.value,t),n))),t}function Mt(){var t,r,n;return v.type!==e.Punctuator&&v.type!==e.Keyword?r=Ct():ht("++")||ht("--")?(n=v,t=tt(),r=Mt(),h&&r.type===i.Identifier&&C(r.name)&&at({},a.StrictLHSPrefix),pt(r)||at({},a.InvalidLHSInAssignment),r=g.createUnaryExpression(t.value,r),r=g.markEnd(r,n)):ht("+")||ht("-")||ht("~")||ht("!")?(n=v,t=tt(),r=Mt(),r=g.createUnaryExpression(t.value,r),r=g.markEnd(r,n)):ct("delete")||ct("void")||ct("typeof")?(n=v,t=tt(),r=Mt(),r=g.createUnaryExpression(t.value,r),r=g.markEnd(r,n),h&&"delete"===r.operator&&r.argument.type===i.Identifier&&at({},a.StrictDelete)):r=Ct(),r}function It(t,r){var n=0;if(t.type!==e.Punctuator&&t.type!==e.Keyword)return 0;switch(t.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=r?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11;break}return n}function kt(){var t,e,r,n,i,o,a,s,u,l;if(t=v,u=Mt(),n=v,i=It(n,m.allowIn),0===i)return u;n.prec=i,tt(),e=[t,v],a=Mt(),o=[u,n,a];while((i=It(v,m.allowIn))>0){while(o.length>2&&i<=o[o.length-2].prec)a=o.pop(),s=o.pop().value,u=o.pop(),r=g.createBinaryExpression(s,u,a),e.pop(),t=e[e.length-1],g.markEnd(r,t),o.push(r);n=tt(),n.prec=i,o.push(n),e.push(v),r=Mt(),o.push(r)}l=o.length-1,r=o[l],e.pop();while(l>1)r=g.createBinaryExpression(o[l-1].value,o[l-2],r),l-=2,t=e.pop(),g.markEnd(r,t);return r}function Dt(){var t,e,r,n,i;return i=v,t=kt(),ht("?")&&(tt(),e=m.allowIn,m.allowIn=!0,r=Rt(),m.allowIn=e,ut(":"),n=Rt(),t=g.createConditionalExpression(t,r,n),g.markEnd(t,i)),t}function Rt(){var t,e,r,n,o;return t=v,o=v,n=e=Dt(),ft()&&(pt(e)||at({},a.InvalidLHSInAssignment),h&&e.type===i.Identifier&&C(e.name)&&at(t,a.StrictLHSAssignment),t=tt(),r=Rt(),n=g.markEnd(g.createAssignmentExpression(t.value,e,r),o)),n}function jt(){var t,e=v;if(t=Rt(),ht(",")){t=g.createSequenceExpression([t]);while(c<p){if(!ht(","))break;tt(),t.expressions.push(Rt())}g.markEnd(t,e)}return t}function Lt(){var t,e=[];while(c<p){if(ht("}"))break;if(t=ce(),"undefined"===typeof t)break;e.push(t)}return e}function Bt(){var t,e;return e=v,ut("{"),t=Lt(),ut("}"),g.markEnd(g.createBlockStatement(t),e)}function Nt(){var t,r;return r=v,t=tt(),t.type!==e.Identifier&&st(t),g.markEnd(g.createIdentifier(t.value),r)}function Ft(t){var e,r,n=null;return r=v,e=Nt(),h&&C(e.name)&&at({},a.StrictVarName),"const"===t?(ut("="),n=Rt()):ht("=")&&(tt(),n=Rt()),g.markEnd(g.createVariableDeclarator(e,n),r)}function Ut(t){var e=[];do{if(e.push(Ft(t)),!ht(","))break;tt()}while(c<p);return e}function zt(){var t;return lt("var"),t=Ut(),dt(),g.createVariableDeclaration(t,"var")}function Vt(t){var e,r;return r=v,lt(t),e=Ut(t),dt(),g.markEnd(g.createVariableDeclaration(e,t),r)}function Xt(){return ut(";"),g.createEmptyStatement()}function Yt(){var t=jt();return dt(),g.createExpressionStatement(t)}function Ht(){var t,e,r;return lt("if"),ut("("),t=jt(),ut(")"),e=ae(),ct("else")?(tt(),r=ae()):r=null,g.createIfStatement(t,e,r)}function Gt(){var t,e,r;return lt("do"),r=m.inIteration,m.inIteration=!0,t=ae(),m.inIteration=r,lt("while"),ut("("),e=jt(),ut(")"),ht(";")&&tt(),g.createDoWhileStatement(t,e)}function qt(){var t,e,r;return lt("while"),ut("("),t=jt(),ut(")"),r=m.inIteration,m.inIteration=!0,e=ae(),m.inIteration=r,g.createWhileStatement(t,e)}function Wt(){var t,e,r;return r=v,t=tt(),e=Ut(),g.markEnd(g.createVariableDeclaration(e,t.value),r)}function Kt(){var t,e,r,n,i,o,s,u=m.allowIn;return t=e=r=null,lt("for"),ut("("),ht(";")?tt():(ct("var")||ct("let")?(m.allowIn=!1,t=Wt(),m.allowIn=u,1===t.declarations.length&&ct("in")&&(tt(),n=t,i=jt(),t=null)):(m.allowIn=!1,t=jt(),m.allowIn=u,ct("in")&&(pt(t)||at({},a.InvalidLHSInForIn),tt(),n=t,i=jt(),t=null)),"undefined"===typeof n&&ut(";")),"undefined"===typeof n&&(ht(";")||(e=jt()),ut(";"),ht(")")||(r=jt())),ut(")"),s=m.inIteration,m.inIteration=!0,o=ae(),m.inIteration=s,"undefined"===typeof n?g.createForStatement(t,e,r,o):g.createForInStatement(n,i,o)}function $t(){var t,r=null;return lt("continue"),59===l.charCodeAt(c)?(tt(),m.inIteration||ot({},a.IllegalContinue),g.createContinueStatement(null)):it()?(m.inIteration||ot({},a.IllegalContinue),g.createContinueStatement(null)):(v.type===e.Identifier&&(r=Nt(),t="$"+r.name,Object.prototype.hasOwnProperty.call(m.labelSet,t)||ot({},a.UnknownLabel,r.name)),dt(),null!==r||m.inIteration||ot({},a.IllegalContinue),g.createContinueStatement(r))}function Zt(){var t,r=null;return lt("break"),59===l.charCodeAt(c)?(tt(),m.inIteration||m.inSwitch||ot({},a.IllegalBreak),g.createBreakStatement(null)):it()?(m.inIteration||m.inSwitch||ot({},a.IllegalBreak),g.createBreakStatement(null)):(v.type===e.Identifier&&(r=Nt(),t="$"+r.name,Object.prototype.hasOwnProperty.call(m.labelSet,t)||ot({},a.UnknownLabel,r.name)),dt(),null!==r||m.inIteration||m.inSwitch||ot({},a.IllegalBreak),g.createBreakStatement(r))}function Jt(){var t=null;return lt("return"),m.inFunctionBody||at({},a.IllegalReturn),32===l.charCodeAt(c)&&O(l.charCodeAt(c+1))?(t=jt(),dt(),g.createReturnStatement(t)):it()?g.createReturnStatement(null):(ht(";")||ht("}")||v.type===e.EOF||(t=jt()),dt(),g.createReturnStatement(t))}function Qt(){var t,e;return h&&(R(),at({},a.StrictModeWith)),lt("with"),ut("("),t=jt(),ut(")"),e=ae(),g.createWithStatement(t,e)}function te(){var t,e,r,n=[];r=v,ct("default")?(tt(),t=null):(lt("case"),t=jt()),ut(":");while(c<p){if(ht("}")||ct("default")||ct("case"))break;e=ae(),n.push(e)}return g.markEnd(g.createSwitchCase(t,n),r)}function ee(){var t,e,r,n,i;if(lt("switch"),ut("("),t=jt(),ut(")"),ut("{"),e=[],ht("}"))return tt(),g.createSwitchStatement(t,e);n=m.inSwitch,m.inSwitch=!0,i=!1;while(c<p){if(ht("}"))break;r=te(),null===r.test&&(i&&ot({},a.MultipleDefaultsInSwitch),i=!0),e.push(r)}return m.inSwitch=n,ut("}"),g.createSwitchStatement(t,e)}function re(){var t;return lt("throw"),it()&&ot({},a.NewlineAfterThrow),t=jt(),dt(),g.createThrowStatement(t)}function ne(){var t,e,r;return r=v,lt("catch"),ut("("),ht(")")&&st(v),t=Nt(),h&&C(t.name)&&at({},a.StrictCatchVariable),ut(")"),e=Bt(),g.markEnd(g.createCatchClause(t,e),r)}function ie(){var t,e=[],r=null;return lt("try"),t=Bt(),ct("catch")&&e.push(ne()),ct("finally")&&(tt(),r=Bt()),0!==e.length||r||ot({},a.NoCatchOrFinally),g.createTryStatement(t,[],e,r)}function oe(){return lt("debugger"),dt(),g.createDebuggerStatement()}function ae(){var t,r,n,o,s=v.type;if(s===e.EOF&&st(v),s===e.Punctuator&&"{"===v.value)return Bt();if(o=v,s===e.Punctuator)switch(v.value){case";":return g.markEnd(Xt(),o);case"(":return g.markEnd(Yt(),o)}if(s===e.Keyword)switch(v.value){case"break":return g.markEnd(Zt(),o);case"continue":return g.markEnd($t(),o);case"debugger":return g.markEnd(oe(),o);case"do":return g.markEnd(Gt(),o);case"for":return g.markEnd(Kt(),o);case"function":return g.markEnd(le(),o);case"if":return g.markEnd(Ht(),o);case"return":return g.markEnd(Jt(),o);case"switch":return g.markEnd(ee(),o);case"throw":return g.markEnd(re(),o);case"try":return g.markEnd(ie(),o);case"var":return g.markEnd(zt(),o);case"while":return g.markEnd(qt(),o);case"with":return g.markEnd(Qt(),o)}return t=jt(),t.type===i.Identifier&&ht(":")?(tt(),n="$"+t.name,Object.prototype.hasOwnProperty.call(m.labelSet,n)&&ot({},a.Redeclaration,"Label",t.name),m.labelSet[n]=!0,r=ae(),delete m.labelSet[n],g.markEnd(g.createLabeledStatement(t,r),o)):(dt(),g.markEnd(g.createExpressionStatement(t),o))}function se(){var t,r,n,o,s,u,f,d,y,b=[];y=v,ut("{");while(c<p){if(v.type!==e.StringLiteral)break;if(r=v,t=ce(),b.push(t),t.expression.type!==i.Literal)break;n=l.slice(r.start+1,r.end-1),"use strict"===n?(h=!0,o&&at(o,a.StrictOctalLiteral)):!o&&r.octal&&(o=r)}s=m.labelSet,u=m.inIteration,f=m.inSwitch,d=m.inFunctionBody,m.labelSet={},m.inIteration=!1,m.inSwitch=!1,m.inFunctionBody=!0;while(c<p){if(ht("}"))break;if(t=ce(),"undefined"===typeof t)break;b.push(t)}return ut("}"),m.labelSet=s,m.inIteration=u,m.inSwitch=f,m.inFunctionBody=d,g.markEnd(g.createBlockStatement(b),y)}function ue(t){var e,r,n,i,o,s,u=[];if(ut("("),!ht(")")){i={};while(c<p){if(r=v,e=Nt(),o="$"+r.value,h?(C(r.value)&&(n=r,s=a.StrictParamName),Object.prototype.hasOwnProperty.call(i,o)&&(n=r,s=a.StrictParamDupe)):t||(C(r.value)?(t=r,s=a.StrictParamName):P(r.value)?(t=r,s=a.StrictReservedWord):Object.prototype.hasOwnProperty.call(i,o)&&(t=r,s=a.StrictParamDupe)),u.push(e),i[o]=!0,ht(")"))break;ut(",")}}return ut(")"),{params:u,stricted:n,firstRestricted:t,message:s}}function le(){var t,e,r,n,i,o,s,u,l,c=[];return l=v,lt("function"),r=v,t=Nt(),h?C(r.value)&&at(r,a.StrictFunctionName):C(r.value)?(o=r,s=a.StrictFunctionName):P(r.value)&&(o=r,s=a.StrictReservedWord),i=ue(o),c=i.params,n=i.stricted,o=i.firstRestricted,i.message&&(s=i.message),u=h,e=se(),h&&o&&ot(o,s),h&&n&&at(n,s),h=u,g.markEnd(g.createFunctionDeclaration(t,c,[],e),l)}function he(){var t,e,r,n,i,o,s,u,l=null,c=[];return u=v,lt("function"),ht("(")||(t=v,l=Nt(),h?C(t.value)&&at(t,a.StrictFunctionName):C(t.value)?(r=t,n=a.StrictFunctionName):P(t.value)&&(r=t,n=a.StrictReservedWord)),i=ue(r),c=i.params,e=i.stricted,r=i.firstRestricted,i.message&&(n=i.message),s=h,o=se(),h&&r&&ot(r,n),h&&e&&at(e,n),h=s,g.markEnd(g.createFunctionExpression(l,c,[],o),u)}function ce(){if(v.type===e.Keyword)switch(v.value){case"const":case"let":return Vt(v.value);case"function":return le();default:return ae()}if(v.type!==e.EOF)return ae()}function fe(){var t,r,n,o,s=[];while(c<p){if(r=v,r.type!==e.StringLiteral)break;if(t=ce(),s.push(t),t.expression.type!==i.Literal)break;n=l.slice(r.start+1,r.end-1),"use strict"===n?(h=!0,o&&at(o,a.StrictOctalLiteral)):!o&&r.octal&&(o=r)}while(c<p){if(t=ce(),"undefined"===typeof t)break;s.push(t)}return s}function de(){var t,e;return R(),et(),e=v,h=!1,t=fe(),g.markEnd(g.createProgram(t),e)}function pe(){var t,e,r,n=[];for(t=0;t<y.tokens.length;++t)e=y.tokens[t],r={type:e.type,value:e.value},y.range&&(r.range=e.range),y.loc&&(r.loc=e.loc),n.push(r);y.tokens=n}function ge(t,r){var n,i;n=String,"string"===typeof t||t instanceof String||(t=n(t)),g=u,l=t,c=0,f=l.length>0?1:0,d=0,p=l.length,v=null,m={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},r=r||{},r.tokens=!0,y.tokens=[],y.tokenize=!0,y.openParenToken=-1,y.openCurlyToken=-1,y.range="boolean"===typeof r.range&&r.range,y.loc="boolean"===typeof r.loc&&r.loc,"boolean"===typeof r.comment&&r.comment&&(y.comments=[]),"boolean"===typeof r.tolerant&&r.tolerant&&(y.errors=[]);try{if(et(),v.type===e.EOF)return y.tokens;tt();while(v.type!==e.EOF)try{tt()}catch(o){if(v,y.errors){y.errors.push(o);break}throw o}pe(),i=y.tokens,"undefined"!==typeof y.comments&&(i.comments=y.comments),"undefined"!==typeof y.errors&&(i.errors=y.errors)}catch(a){throw a}finally{y={}}return i}function ve(t,e){var r,n;n=String,"string"===typeof t||t instanceof String||(t=n(t)),g=u,l=t,c=0,f=l.length>0?1:0,d=0,p=l.length,v=null,m={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},"undefined"!==typeof e&&(y.range="boolean"===typeof e.range&&e.range,y.loc="boolean"===typeof e.loc&&e.loc,y.attachComment="boolean"===typeof e.attachComment&&e.attachComment,y.loc&&null!==e.source&&void 0!==e.source&&(y.source=n(e.source)),"boolean"===typeof e.tokens&&e.tokens&&(y.tokens=[]),"boolean"===typeof e.comment&&e.comment&&(y.comments=[]),"boolean"===typeof e.tolerant&&e.tolerant&&(y.errors=[]),y.attachComment&&(y.range=!0,y.comments=[],y.bottomRightStack=[],y.trailingComments=[],y.leadingComments=[]));try{r=de(),"undefined"!==typeof y.comments&&(r.comments=y.comments),"undefined"!==typeof y.tokens&&(pe(),r.tokens=y.tokens),"undefined"!==typeof y.errors&&(r.errors=y.errors)}catch(i){throw i}finally{y={}}return r}e={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},r={},r[e.BooleanLiteral]="Boolean",r[e.EOF]="<end>",r[e.Identifier]="Identifier",r[e.Keyword]="Keyword",r[e.NullLiteral]="Null",r[e.NumericLiteral]="Numeric",r[e.Punctuator]="Punctuator",r[e.StringLiteral]="String",r[e.RegularExpression]="RegularExpression",n=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],i={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},o={Data:1,Get:2,Set:4},a={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},s={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},u={name:"SyntaxTree",processComment:function(t){var e,r;if(!(t.type===i.Program&&t.body.length>0)){y.trailingComments.length>0?y.trailingComments[0].range[0]>=t.range[1]?(r=y.trailingComments,y.trailingComments=[]):y.trailingComments.length=0:y.bottomRightStack.length>0&&y.bottomRightStack[y.bottomRightStack.length-1].trailingComments&&y.bottomRightStack[y.bottomRightStack.length-1].trailingComments[0].range[0]>=t.range[1]&&(r=y.bottomRightStack[y.bottomRightStack.length-1].trailingComments,delete y.bottomRightStack[y.bottomRightStack.length-1].trailingComments);while(y.bottomRightStack.length>0&&y.bottomRightStack[y.bottomRightStack.length-1].range[0]>=t.range[0])e=y.bottomRightStack.pop();e?e.leadingComments&&e.leadingComments[e.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=e.leadingComments,delete e.leadingComments):y.leadingComments.length>0&&y.leadingComments[y.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=y.leadingComments,y.leadingComments=[]),r&&(t.trailingComments=r),y.bottomRightStack.push(t)}},markEnd:function(t,e){return y.range&&(t.range=[e.start,c]),y.loc&&(t.loc=new nt(void 0===e.startLineNumber?e.lineNumber:e.startLineNumber,e.start-(void 0===e.startLineStart?e.lineStart:e.startLineStart),f,c-d),this.postProcess(t)),y.attachComment&&this.processComment(t),t},postProcess:function(t){return y.source&&(t.loc.source=y.source),t},createArrayExpression:function(t){return{type:i.ArrayExpression,elements:t}},createAssignmentExpression:function(t,e,r){return{type:i.AssignmentExpression,operator:t,left:e,right:r}},createBinaryExpression:function(t,e,r){var n="||"===t||"&&"===t?i.LogicalExpression:i.BinaryExpression;return{type:n,operator:t,left:e,right:r}},createBlockStatement:function(t){return{type:i.BlockStatement,body:t}},createBreakStatement:function(t){return{type:i.BreakStatement,label:t}},createCallExpression:function(t,e){return{type:i.CallExpression,callee:t,arguments:e}},createCatchClause:function(t,e){return{type:i.CatchClause,param:t,body:e}},createConditionalExpression:function(t,e,r){return{type:i.ConditionalExpression,test:t,consequent:e,alternate:r}},createContinueStatement:function(t){return{type:i.ContinueStatement,label:t}},createDebuggerStatement:function(){return{type:i.DebuggerStatement}},createDoWhileStatement:function(t,e){return{type:i.DoWhileStatement,body:t,test:e}},createEmptyStatement:function(){return{type:i.EmptyStatement}},createExpressionStatement:function(t){return{type:i.ExpressionStatement,expression:t}},createForStatement:function(t,e,r,n){return{type:i.ForStatement,init:t,test:e,update:r,body:n}},createForInStatement:function(t,e,r){return{type:i.ForInStatement,left:t,right:e,body:r,each:!1}},createFunctionDeclaration:function(t,e,r,n){return{type:i.FunctionDeclaration,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(t,e,r,n){return{type:i.FunctionExpression,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(t){return{type:i.Identifier,name:t}},createIfStatement:function(t,e,r){return{type:i.IfStatement,test:t,consequent:e,alternate:r}},createLabeledStatement:function(t,e){return{type:i.LabeledStatement,label:t,body:e}},createLiteral:function(t){return{type:i.Literal,value:t.value,raw:l.slice(t.start,t.end)}},createMemberExpression:function(t,e,r){return{type:i.MemberExpression,computed:"["===t,object:e,property:r}},createNewExpression:function(t,e){return{type:i.NewExpression,callee:t,arguments:e}},createObjectExpression:function(t){return{type:i.ObjectExpression,properties:t}},createPostfixExpression:function(t,e){return{type:i.UpdateExpression,operator:t,argument:e,prefix:!1}},createProgram:function(t){return{type:i.Program,body:t}},createProperty:function(t,e,r){return{type:i.Property,key:e,value:r,kind:t}},createReturnStatement:function(t){return{type:i.ReturnStatement,argument:t}},createSequenceExpression:function(t){return{type:i.SequenceExpression,expressions:t}},createSwitchCase:function(t,e){return{type:i.SwitchCase,test:t,consequent:e}},createSwitchStatement:function(t,e){return{type:i.SwitchStatement,discriminant:t,cases:e}},createThisExpression:function(){return{type:i.ThisExpression}},createThrowStatement:function(t){return{type:i.ThrowStatement,argument:t}},createTryStatement:function(t,e,r,n){return{type:i.TryStatement,block:t,guardedHandlers:e,handlers:r,finalizer:n}},createUnaryExpression:function(t,e){return"++"===t||"--"===t?{type:i.UpdateExpression,operator:t,argument:e,prefix:!0}:{type:i.UnaryExpression,operator:t,argument:e,prefix:!0}},createVariableDeclaration:function(t,e){return{type:i.VariableDeclaration,declarations:t,kind:e}},createVariableDeclarator:function(t,e){return{type:i.VariableDeclarator,id:t,init:e}},createWhileStatement:function(t,e){return{type:i.WhileStatement,test:t,body:e}},createWithStatement:function(t,e){return{type:i.WithStatement,object:t,body:e}}},t.version="1.2.5",t.tokenize=ge,t.parse=ve,t.Syntax=function(){var t,e={};for(t in"function"===typeof Object.create&&(e=Object.create(null)),i)i.hasOwnProperty(t)&&(e[t]=i[t]);return"function"===typeof Object.freeze&&Object.freeze(e),e}()}))})),qr=0;function Wr(t,e,r){this.name=t,this.lvalue=e,this.rvalue=r,this.count=0}function Kr(t,e,r,n){this.body=t,this.args=e,this.thisVars=r,this.localVars=n}function $r(t){if("eval"===t)throw new Error("cwise-parser: eval() not allowed");return"undefined"!==typeof window?t in window:"undefined"!==typeof o?t in o:"undefined"!==typeof self&&t in self}function Zr(t){for(var e=t.body[0].expression.callee.params,r=new Array(e.length),n=0;n<e.length;++n)r[n]=e[n].name;return r}function Jr(t){for(var e=["(",t,")()"].join(""),r=Gr.parse(e,{range:!0}),n="_inline_"+qr+++"_",i=Zr(r),o=new Array(i.length),a=0;a<i.length;++a)o[a]=new Wr([n,"arg",a,"_"].join(""),!1,!1);for(var s=new Array(e.length),u=(a=0,e.length);a<u;++a)s[a]=e.charAt(a);var l=[],h=[];function c(t){var e=n+t.replace(/\_/g,"__");return l.push(e),e}function f(t){var e="this_"+t.replace(/\_/g,"__");return h.push(e),e}function d(t,e){for(var r=t.range[0],n=t.range[1],i=r+1;i<n;++i)s[i]="";s[r]=e}function p(t){return"'"+t.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function g(t){return s.slice(t.range[0],t.range[1]).join("")}var v=1,m=2;function y(t){return"AssignmentExpression"===t.parent.type&&t.parent.left===t?"="===t.parent.operator?v:v|m:"UpdateExpression"===t.parent.type?v|m:m}(function t(e,r){if(e.parent=r,"MemberExpression"===e.type)e.computed?(t(e.object,e),t(e.property,e)):"ThisExpression"===e.object.type?d(e,f(e.property.name)):t(e.object,e);else{if("ThisExpression"===e.type)throw new Error("cwise-parser: Computed this is not allowed");if("Identifier"===e.type){var n=e.name,a=i.indexOf(n);if(a>=0){var s=o[a],u=y(e);u&v&&(s.lvalue=!0),u&m&&(s.rvalue=!0),++s.count,d(e,s.name)}else $r(n)||d(e,c(n))}else if("Literal"===e.type)"string"===typeof e.value&&d(e,p(e.value));else{if("WithStatement"===e.type)throw new Error("cwise-parser: with() statements not allowed");for(var l=Object.keys(e),h=0,g=l.length;h<g;++h)if("parent"!==l[h]){var b=e[l[h]];if(b)if(b instanceof Array)for(var w=0;w<b.length;++w)b[w]&&"string"===typeof b[w].type&&t(b[w],e);else"string"===typeof b.type&&t(b,e)}}}})(r.body[0].expression.callee.body,void 0),kr(l),kr(h);var b=new Kr(g(r.body[0].expression.callee.body),o,h,l);return b}var Qr=Jr,tn=["args","body"],en=["pre","post","printCode","funcName","blockSize"];function rn(t){for(var e in t)tn.indexOf(e)<0&&en.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var r=0;r<tn.length;++r)if(!t[tn[r]])throw new Error("cwise: Missing argument: "+tn[r]);return Yr({args:t.args,pre:Qr(t.pre||function(){}),body:Qr(t.body),post:Qr(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}var nn=rn;function on(t,e,r,n,i,o){Hr.add(t,r,i),Hr.add(e,n,o)}var an=on;function sn(t,e,r,n){Hr.addeq(t,r),Hr.addeq(e,n)}var un=sn;function ln(t,e,r,n,i,o){Hr.adds(t,r,i),Hr.adds(t,n,o)}var hn=ln;function cn(t,e,r,n){Hr.addseq(t,r),Hr.addseq(e,n)}var fn=cn;function dn(t,e,r,n,i,o){Hr.sub(t,r,i),Hr.sub(e,n,o)}var pn=dn;function gn(t,e,r,n){Hr.subeq(t,r),Hr.subeq(e,n)}var vn=gn;function mn(t,e,r,n,i,o){Hr.subs(t,r,i),Hr.subs(e,n,o)}var yn=mn;function bn(t,e,r,n){Hr.subseq(t,r),Hr.subseq(e,n)}var wn=bn;function xn(t,e,r,n){Hr.neg(t,r),Hr.neg(e,n)}var _n=xn;function En(t,e){Hr.negeq(t),Hr.negeq(e)}var Sn=En;function On(t,e,r,n){Hr.assign(t,r),Hr.neg(e,n)}var Tn=On;function An(t,e){Hr.negeq(e)}for(var Pn=An,Cn=nn({args:["array","array","array","array","array","array"],body:function(t,e,r,n,i,o){}}),Mn=nn({args:["array","array","array","array"],body:function(t,e,r,n){}}),In=nn({args:["array","array","array","array","scalar","scalar"],pre:function(t,e,r,n,i,o){this.u=i+o,this.v=o-i},body:function(t,e,r,n,i,o){var a=r,s=n,u=i*(a+s);this.u,this.v}}),kn=nn({args:["array","array","scalar","scalar"],pre:function(t,e,r,n){this.u=r+n,this.v=n-r},body:function(t,e,r,n){var i=t,o=e,a=r*(i+o);t=a-o*this.u,e=a+i*this.v}}),Dn=nn({args:["array","array","array","array","array","array"],body:function(t,e,r,n,i,o){}}),Rn=nn({args:["array","array","array","array"],body:function(t,e,r,n){}}),jn=nn({args:["array","array","array","array","scalar","scalar"],pre:function(t,e,r,n,i,o){var a=i*i+o*o;i/=a,o/=-a,this.c=i,this.u=i+o,this.v=o-i},body:function(t,e,r,n,i,o){var a=r,s=n,u=this.c*(a+s);this.u,this.v}}),Ln=nn({args:["array","array","scalar","scalar"],pre:function(t,e,r,n){var i=r*r+n*n;r/=i,n/=-i,this.c=r,this.u=r+n,this.v=n-r},body:function(t,e,r,n){var i=t,o=e,a=this.c*(i+o);t=a-o*this.u,e=a+i*this.v}}),Bn=nn({args:["array","array","array","array"],body:function(t,e,r,n){}}),Nn=nn({args:["array","array"],body:function(t,e){}}),Fn=nn({args:["array","array","array","array"],pre:function(){this.exp=Math.exp,this.cos=Math.cos,this.sin=Math.sin},body:function(t,e,r,n){var i=this.exp(r);this.cos(n),this.sin(n)}}),Un=nn({args:["array","array"],pre:function(){this.exp=Math.exp,this.cos=Math.cos,this.sin=Math.sin},body:function(t,e){var r=this.exp(t),n=out_ir;t=r*this.cos(n),this.sin(n)}}),zn=nn({args:["array","array","array"],body:function(t,e,r){}}),Vn=nn({args:["array","array","array"],pre:function(){this.sqrt=Math.sqrt},body:function(t,e,r){this.sqrt(e*e+r*r)}}),Xn=Hr.atan2,Yn={add:an,addeq:un,adds:hn,addseq:fn,sub:pn,subeq:vn,subs:yn,subseq:wn,neg:_n,negeq:Sn,conj:Tn,conjeq:Pn,mul:Cn,muleq:Mn,muls:In,mulseq:kn,div:Dn,diveq:Rn,divs:jn,divseq:Ln,recip:Bn,recipeq:Nn,exp:Fn,expeq:Un,mag:zn,abs:Vn,arg:Xn},Hn=ei,Gn=ni,qn=ai,Wn=[],Kn=[],$n="undefined"!==typeof Uint8Array?Uint8Array:Array,Zn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jn=0,Qn=Zn.length;Jn<Qn;++Jn)Wn[Jn]=Zn[Jn],Kn[Zn.charCodeAt(Jn)]=Jn;function ti(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");-1===r&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function ei(t){var e=ti(t),r=e[0],n=e[1];return 3*(r+n)/4-n}function ri(t,e,r){return 3*(e+r)/4-r}function ni(t){var e,r,n=ti(t),i=n[0],o=n[1],a=new $n(ri(t,i,o)),s=0,u=o>0?i-4:i;for(r=0;r<u;r+=4)e=Kn[t.charCodeAt(r)]<<18|Kn[t.charCodeAt(r+1)]<<12|Kn[t.charCodeAt(r+2)]<<6|Kn[t.charCodeAt(r+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=255&e;return 2===o&&(e=Kn[t.charCodeAt(r)]<<2|Kn[t.charCodeAt(r+1)]>>4,a[s++]=255&e),1===o&&(e=Kn[t.charCodeAt(r)]<<10|Kn[t.charCodeAt(r+1)]<<4|Kn[t.charCodeAt(r+2)]>>2,a[s++]=e>>8&255,a[s++]=255&e),a}function ii(t){return Wn[t>>18&63]+Wn[t>>12&63]+Wn[t>>6&63]+Wn[63&t]}function oi(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(ii(n));return i.join("")}function ai(t){for(var e,r=t.length,n=r%3,i=[],o=16383,a=0,s=r-n;a<s;a+=o)i.push(oi(t,a,a+o>s?s:a+o));return 1===n?(e=t[r-1],i.push(Wn[e>>2]+Wn[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(Wn[e>>10]+Wn[e>>4&63]+Wn[e<<2&63]+"=")),i.join("")}Kn["-".charCodeAt(0)]=62,Kn["_".charCodeAt(0)]=63;var si={byteLength:Hn,toByteArray:Gn,fromByteArray:qn},ui=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,h=-7,c=r?i-1:0,f=r?-1:1,d=t[e+c];for(c+=f,o=d&(1<<-h)-1,d>>=-h,h+=s;h>0;o=256*o+t[e+c],c+=f,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=n;h>0;a=256*a+t[e+c],c+=f,h-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=l}return(d?-1:1)*a*Math.pow(2,o-n)},li=function(t,e,r,n,i,o){var a,s,u,l=8*o-i-1,h=(1<<l)-1,c=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+c>=1?f/u:f*Math.pow(2,1-c),e*u>=2&&(a++,u/=2),a+c>=h?(s=0,a=h):a+c>=1?(s=(e*u-1)*Math.pow(2,i),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;t[r+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[r+d]=255&a,d+=p,a/=256,l-=8);t[r+d-p]|=128*g},hi={read:ui,write:li},ci={}.toString,fi=Array.isArray||function(t){return"[object Array]"==ci.call(t)},di=s((function(t,e){function r(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function n(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=a.prototype):(null===t&&(t=new a(e)),t.length=e),t}function a(t,e,r){if(!a.TYPED_ARRAY_SUPPORT&&!(this instanceof a))return new a(t,e,r);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return s(this,t,e,r)}function s(t,e,r,n){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?d(t,e,r,n):"string"===typeof e?c(t,e,r):p(t,e)}function u(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e,r,n){return u(e),e<=0?i(t,e):void 0!==r?"string"===typeof n?i(t,e).fill(r,n):i(t,e).fill(r):i(t,e)}function h(t,e){if(u(e),t=i(t,e<0?0:0|g(e)),!a.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function c(t,e,r){if("string"===typeof r&&""!==r||(r="utf8"),!a.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|m(e,r);t=i(t,n);var o=t.write(e,r);return o!==n&&(t=t.slice(0,o)),t}function f(t,e){var r=e.length<0?0:0|g(e.length);t=i(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function d(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),a.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=a.prototype):t=f(t,e),t}function p(t,e){if(a.isBuffer(e)){var r=0|g(e.length);return t=i(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||J(e.length)?i(t,0):f(t,e);if("Buffer"===e.type&&fi(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function v(t){return+t!=t&&(t=0),a.alloc(+t)}function m(t,e){if(a.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(t).length;default:if(n)return q(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return R(this,e,r);case"utf8":case"utf-8":return C(this,e,r);case"ascii":return k(this,e,r);case"latin1":case"binary":return D(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function w(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=a.from(e,n)),a.isBuffer(e))return 0===e.length?-1:x(t,e,r,n,i);if("number"===typeof e)return e&=255,a.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):x(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function x(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var h=-1;for(o=r;o<s;o++)if(l(t,o)===l(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===u)return h*a}else-1!==h&&(o-=o-h),h=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var c=!0,f=0;f<u;f++)if(l(t,o+f)!==l(e,f)){c=!1;break}if(c)return o}return-1}function _(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function E(t,e,r,n){return Z(q(e,t.length-r),t,r,n)}function S(t,e,r,n){return Z(W(e),t,r,n)}function O(t,e,r,n){return S(t,e,r,n)}function T(t,e,r,n){return Z($(e),t,r,n)}function A(t,e,r,n){return Z(K(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?si.fromByteArray(t):si.fromByteArray(t.slice(e,r))}function C(t,e,r){r=Math.min(t.length,r);var n=[],i=e;while(i<r){var o,a,s,u,l=t[i],h=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c<=r)switch(c){case 1:l<128&&(h=l);break;case 2:o=t[i+1],128===(192&o)&&(u=(31&l)<<6|63&o,u>127&&(h=u));break;case 3:o=t[i+1],a=t[i+2],128===(192&o)&&128===(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a,u>2047&&(u<55296||u>57343)&&(h=u));break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s,u>65535&&u<1114112&&(h=u))}null===h?(h=65533,c=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=c}return I(n)}e.Buffer=a,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==o.TYPED_ARRAY_SUPPORT?o.TYPED_ARRAY_SUPPORT:r(),e.kMaxLength=n(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,e,r){return s(null,t,e,r)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,e,r){return l(null,t,e,r)},a.allocUnsafe=function(t){return h(null,t)},a.allocUnsafeSlow=function(t){return h(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!fi(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=a.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},a.byteLength=m,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)b(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)b(this,e,e+3),b(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)b(this,e,e+7),b(this,e+1,e+6),b(this,e+2,e+5),b(this,e+3,e+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):y.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,e,r,n,i){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var o=i-n,s=r-e,u=Math.min(o,s),l=this.slice(n,i),h=t.slice(e,r),c=0;c<u;++c)if(l[c]!==h[c]){o=l[c],s=h[c];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},a.prototype.indexOf=function(t,e,r){return w(this,t,e,r,!0)},a.prototype.lastIndexOf=function(t,e,r){return w(this,t,e,r,!1)},a.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return _(this,t,e,r);case"utf8":case"utf-8":return E(this,t,e,r);case"ascii":return S(this,t,e,r);case"latin1":case"binary":return O(this,t,e,r);case"base64":return T(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function I(t){var e=t.length;if(e<=M)return String.fromCharCode.apply(String,t);var r="",n=0;while(n<e)r+=String.fromCharCode.apply(String,t.slice(n,n+=M));return r}function k(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function R(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=G(t[o]);return i}function j(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function L(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,r,n,i,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function N(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function F(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function U(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(t,e,r,n,i){return i||U(t,e,r,4),hi.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,i){return i||U(t,e,r,8),hi.write(t,e,r,n,52,8),r+8}a.prototype.slice=function(t,e){var r,n=this.length;if(t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t),a.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=a.prototype;else{var i=e-t;r=new a(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},a.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);var n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return n},a.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);var n=this[t+--e],i=1;while(e>0&&(i*=256))n+=this[t+--e]*i;return n},a.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);var n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},a.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);var n=e,i=1,o=this[t+--n];while(n>0&&(i*=256))o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},a.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),hi.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),hi.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),hi.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),hi.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;B(this,t,e,r,i,0)}var o=1,a=0;this[e]=255&t;while(++a<r&&(o*=256))this[e+a]=t/o&255;return e+r},a.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;B(this,t,e,r,i,0)}var o=r-1,a=1;this[e+o]=255&t;while(--o>=0&&(a*=256))this[e+o]=t/a&255;return e+r},a.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},a.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},a.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):F(this,t,e,!0),e+4},a.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},a.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);B(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;this[e]=255&t;while(++o<r&&(a*=256))t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},a.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);B(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;this[e+o]=255&t;while(--o>=0&&(a*=256))t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},a.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},a.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},a.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):F(this,t,e,!0),e+4},a.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},a.prototype.writeFloatLE=function(t,e,r){return z(this,t,e,!0,r)},a.prototype.writeFloatBE=function(t,e,r){return z(this,t,e,!1,r)},a.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},a.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},a.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},a.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=a.isBuffer(t)?t:q(new a(t,n).toString()),u=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%u]}return this};var X=/[^+\/0-9A-Za-z-_]/g;function Y(t){if(t=H(t).replace(X,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function H(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function G(t){return t<16?"0"+t.toString(16):t.toString(16)}function q(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function K(t,e){for(var r,n,i,o=[],a=0;a<t.length;++a){if((e-=2)<0)break;r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n)}return o}function $(t){return si.toByteArray(Y(t))}function Z(t,e,r,n){for(var i=0;i<n;++i){if(i+r>=e.length||i>=t.length)break;e[i+r]=t[i]}return i}function J(t){return t!==t}}));function pi(t,e,r){var n=0|t[r];if(n<=0)return[];var i,o=new Array(n);if(r===t.length-1)for(i=0;i<n;++i)o[i]=e;else for(i=0;i<n;++i)o[i]=pi(t,e,r+1);return o}function gi(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function vi(t,e){switch("undefined"===typeof e&&(e=0),typeof t){case"number":if(t>0)return gi(0|t,e);break;case"object":if("number"===typeof t.length)return pi(t,e,0);break}return[]}var mi=vi,yi=s((function(t,e){o.__TYPEDARRAY_POOL||(o.__TYPEDARRAY_POOL={UINT8:mi([32,0]),UINT16:mi([32,0]),UINT32:mi([32,0]),INT8:mi([32,0]),INT16:mi([32,0]),INT32:mi([32,0]),FLOAT:mi([32,0]),DOUBLE:mi([32,0]),DATA:mi([32,0]),UINT8C:mi([32,0]),BUFFER:mi([32,0])});var r="undefined"!==typeof Uint8ClampedArray,n=o.__TYPEDARRAY_POOL;n.UINT8C||(n.UINT8C=mi([32,0])),n.BUFFER||(n.BUFFER=mi([32,0]));var i=n.DATA,a=n.BUFFER;function s(t){if(t){var e=t.length||t.byteLength,r=gr.log2(e);i[r].push(t)}}function u(t){s(t.buffer)}function l(t){t=gr.nextPow2(t);var e=gr.log2(t),r=i[e];return r.length>0?r.pop():new ArrayBuffer(t)}function h(t){return new Uint8Array(l(t),0,t)}function c(t){return new Uint16Array(l(2*t),0,t)}function f(t){return new Uint32Array(l(4*t),0,t)}function d(t){return new Int8Array(l(t),0,t)}function p(t){return new Int16Array(l(2*t),0,t)}function g(t){return new Int32Array(l(4*t),0,t)}function v(t){return new Float32Array(l(4*t),0,t)}function m(t){return new Float64Array(l(8*t),0,t)}function y(t){return r?new Uint8ClampedArray(l(t),0,t):h(t)}function b(t){return new DataView(l(t),0,t)}function w(t){t=gr.nextPow2(t);var e=gr.log2(t),r=a[e];return r.length>0?r.pop():new di.Buffer(t)}e.free=function(t){if(di.Buffer.isBuffer(t))a[gr.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var e=t.length||t.byteLength,r=0|gr.log2(e);i[r].push(t)}},e.freeUint8=e.freeUint16=e.freeUint32=e.freeInt8=e.freeInt16=e.freeInt32=e.freeFloat32=e.freeFloat=e.freeFloat64=e.freeDouble=e.freeUint8Clamped=e.freeDataView=u,e.freeArrayBuffer=s,e.freeBuffer=function(t){a[gr.log2(t.length)].push(t)},e.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return l(t);switch(e){case"uint8":return h(t);case"uint16":return c(t);case"uint32":return f(t);case"int8":return d(t);case"int16":return p(t);case"int32":return g(t);case"float":case"float32":return v(t);case"double":case"float64":return m(t);case"uint8_clamped":return y(t);case"buffer":return w(t);case"data":case"dataview":return b(t);default:return null}return null},e.mallocArrayBuffer=l,e.mallocUint8=h,e.mallocUint16=c,e.mallocUint32=f,e.mallocInt8=d,e.mallocInt16=p,e.mallocInt32=g,e.mallocFloat32=e.mallocFloat=v,e.mallocFloat64=e.mallocDouble=m,e.mallocUint8Clamped=y,e.mallocDataView=b,e.mallocBuffer=w,e.clearCache=function(){for(var t=0;t<32;++t)n.UINT8[t].length=0,n.UINT16[t].length=0,n.UINT32[t].length=0,n.INT8[t].length=0,n.INT16[t].length=0,n.INT32[t].length=0,n.FLOAT[t].length=0,n.DOUBLE[t].length=0,n.UINT8C[t].length=0,i[t].length=0,a[t].length=0}}));function bi(t,e,r,n,i,o,a){t|=0,e|=0,r|=0,i|=0,o|=0,gr.isPow2(r)?Ei(t,e,r,n,i,o):Si(t,e,r,n,i,o,a)}var wi=bi;function xi(t){return gr.isPow2(t)?0:2*t+4*gr.nextPow2(2*t+1)}var _i=xi;function Ei(t,e,r,n,i,o){var a,s,u,l,h,c,f,d,p,g,v,m,y,b,w,x,_,E,S,O,T,A,P,C,M;for(t|=0,e|=0,r|=0,i|=0,o|=0,a=r,s=gr.log2(a),E=0;E<e;++E){for(f=a>>1,h=0,u=0;u<a-1;u++){u<h&&(y=n[i+u],n[i+u]=n[i+h],n[i+h]=y,y=n[o+u],n[o+u]=n[o+h],n[o+h]=y),c=f;while(c<=h)h-=c,c>>=1;h+=c}for(v=-1,m=0,g=1,d=0;d<s;d++){for(p=g,g<<=1,x=1,_=0,h=0;h<p;h++){for(u=h;u<a;u+=g)l=u+p,S=n[i+l],O=n[o+l],T=n[i+u],A=n[o+u],P=x*(S+O),C=S*(_-x),M=O*(x+_),b=P-M,w=P+C,n[i+l]=T-b,n[o+l]=A-w,n[i+u]+=b,n[o+u]+=w;P=v*(x+_),C=x*(m-v),M=_*(v+m),x=P-M,_=P+C}m=Math.sqrt((1-v)/2),t<0&&(m=-m),v=Math.sqrt((1+v)/2)}if(t<0){var I=1/a;for(u=0;u<a;u++)n[i+u]*=I,n[o+u]*=I}i+=r,o+=r}}function Si(t,e,r,n,i,o,a){t|=0,e|=0,r|=0,i|=0,o|=0,a|=0;var s,u,l,h,c,f,d,p,g,v=gr.nextPow2(2*r+1),m=a,y=m+r,b=y+r,w=b+v,x=w+v,_=x+v,E=-t*Math.PI/r;for(g=0;g<r;++g)u=E*(g*g%(2*r)),h=Math.cos(u),c=Math.sin(u),n[x+(v-g)]=n[x+g]=n[m+g]=h,n[_+(v-g)]=n[_+g]=n[y+g]=c;for(g=r;g<=v-r;++g)n[x+g]=0;for(g=r;g<=v-r;++g)n[_+g]=0;for(Ei(1,1,v,n,x,_),E=t<0?1/r:1,s=0;s<e;++s){for(g=0;g<r;++g)u=n[i+g],l=n[o+g],h=n[m+g],c=-n[y+g],f=h*(u+l),d=u*(c-h),p=l*(h+c),n[b+g]=f-p,n[w+g]=f+d;for(g=r;g<v;++g)n[b+g]=0;for(g=r;g<v;++g)n[w+g]=0;for(Ei(1,1,v,n,b,w),g=0;g<v;++g)u=n[b+g],l=n[w+g],h=n[x+g],c=n[_+g],f=h*(u+l),d=u*(c-h),p=l*(h+c),n[b+g]=f-p,n[w+g]=f+d;for(Ei(-1,1,v,n,b,w),g=0;g<r;++g)u=n[b+g],l=n[w+g],h=n[m+g],c=-n[y+g],f=h*(u+l),d=u*(c-h),p=l*(h+c),n[i+g]=E*(f-p),n[o+g]=E*(f+d);i+=r,o+=r}}function Oi(t,e,r){var n,i,o=e.shape,a=o.length,s=1,u=new Array(a),l=0;for(n=a-1;n>=0;--n)if(u[n]=s,s*=o[n],l=Math.max(l,wi.scratchMemory(o[n])),e.shape[n]!==r.shape[n])throw new Error("Shape mismatch, real and imaginary arrays must have same size");var h,c=4*s+l;h="array"===e.dtype||"float64"===e.dtype||"custom"===e.dtype?yi.mallocDouble(c):yi.mallocFloat(c);var f,d,p,g,v=Pr(h,o.slice(0),u,0),m=Pr(h,o.slice(0),u.slice(0),s),y=Pr(h,o.slice(0),u.slice(0),2*s),b=Pr(h,o.slice(0),u.slice(0),3*s),w=4*s;for(Hr.assign(v,e),Hr.assign(m,r),n=a-1;n>=0;--n){if(wi(t,s/o[n],o[n],h,v.offset,m.offset,w),0===n)break;for(d=1,p=y.stride,g=b.stride,i=n-1;i<a;++i)g[i]=p[i]=d,d*=o[i];for(i=n-2;i>=0;--i)g[i]=p[i]=d,d*=o[i];Hr.assign(y,v),Hr.assign(b,m),f=v,v=y,y=f,f=m,m=b,b=f}Hr.assign(e,v),Hr.assign(r,m),yi.free(h)}wi.scratchMemory=_i;var Ti=Oi,Ai=s((function(t){var e=nn({args:["array","array","array","array"],body:function(t,e,r,n){}});function r(t,r,n,i,o,a,s,u){if(n.shape.length!==o.shape.length||t.shape.length!==n.shape.length)throw new Error("ndarray-convolve: Dimension mismatch");var l,h=n.shape.length,c=1,f=new Array(h),d=new Array(h);if(u)for(l=h-1;l>=0;--l)d[l]=n.shape[l],f[l]=c,c*=d[l];else for(l=h-1;l>=0;--l)d[l]=gr.nextPow2(n.shape[l]+o.shape[l]-1),f[l]=c,c*=d[l];var p=yi.mallocDouble(c),g=Pr(p,d,f,0);Hr.assigns(g,0),Hr.assign(g.hi.apply(g,n.shape),n);var v=yi.mallocDouble(c),m=Pr(v,d,f,0);Hr.assigns(m,0),i&&Hr.assign(m.hi.apply(m,i.shape),i),Ti(1,g,m);var y=yi.mallocDouble(c),b=Pr(y,d,f,0);Hr.assigns(b,0),Hr.assign(b.hi.apply(b,o.shape),o);var w=yi.mallocDouble(c),x=Pr(w,d,f,0);Hr.assigns(x,0),a&&Hr.assign(x.hi.apply(m,a.shape),a),Ti(1,b,x),s?e(g,m,b,x):Yn.muleq(g,m,b,x),Ti(-1,g,m);var _,E,S=new Array(h),O=new Array(h),T=!1;for(l=0;l<h;++l)t.shape[l]>d[l]&&(T=!0),O[l]=u?0:Math.max(0,Math.min(d[l]-t.shape[l],Math.floor(o.shape[l]/2))),S[l]=Math.min(t.shape[l],d[l]-O[l]);T&&Hr.assign(t,0),_=g.lo.apply(g,O),_=_.hi.apply(_,S),Hr.assign(t.hi.apply(t,S),_),r&&(T&&Hr.assign(r,0),E=m.lo.apply(m,O),E=E.hi.apply(E,S),Hr.assign(r.hi.apply(r,S),E)),yi.freeDouble(p),yi.freeDouble(v),yi.freeDouble(y),yi.freeDouble(w)}t.exports=function(t,e,n,i,o,a){if(2===arguments.length)r(t,void 0,t,void 0,e,void 0,!1,!1);else if(3===arguments.length)r(t,void 0,e,void 0,n,void 0,!1,!1);else if(4===arguments.length)r(t,e,t,e,n,i,!1,!1);else{if(6!==arguments.length)throw new Error("ndarray-convolve: Invalid arguments for convolve");r(t,e,n,i,o,a,!1,!1)}return t},t.exports.wrap=function(t,e,n,i,o,a){if(2===arguments.length)r(t,void 0,t,void 0,e,void 0,!1,!0);else if(3===arguments.length)r(t,void 0,e,void 0,n,void 0,!1,!0);else if(4===arguments.length)r(t,e,t,e,n,i,!1,!0);else{if(6!==arguments.length)throw new Error("ndarray-convolve: Invalid arguments for convolve");r(t,e,n,i,o,a,!1,!0)}return t},t.exports.correlate=function(t,e,n,i,o,a){if(2===arguments.length)r(t,void 0,t,void 0,e,void 0,!0,!1);else if(3===arguments.length)r(t,void 0,e,void 0,n,void 0,!0,!1);else if(4===arguments.length)r(t,e,t,e,n,i,!0,!1);else{if(6!==arguments.length)throw new Error("ndarray-convolve: Invalid arguments for correlate");r(t,e,n,i,o,a,!0,!1)}return t},t.exports.correlate.wrap=function(t,e,n,i,o,a){if(2===arguments.length)r(t,void 0,t,void 0,e,void 0,!0,!0);else if(3===arguments.length)r(t,void 0,e,void 0,n,void 0,!0,!0);else if(4===arguments.length)r(t,e,t,e,n,i,!0,!0);else{if(6!==arguments.length)throw new Error("ndarray-convolve: Invalid arguments for correlate");r(t,e,n,i,o,a,!0,!0)}return t}})),Pi=100,Ci=function(t,e){var r=new Set,n=[],i=!1,o=function(){r.size?h():(a(),i&&e.publish("animationEnd"),i=!1)},a=function(){n.forEach((function(t){return t.onDone()})),n=[]},s=function(){var t=n.slice(0,Pi);n.splice(0,Pi),t.forEach((function(t){return t.onDone()}))},u=Xe(s,50),l=function(){i=!0,r.forEach((function(t){t.update()&&n.push(t)})),t(),n.forEach((function(t){return r["delete"](t)})),u()},h=ut(l,o),c=function(t){r.add(t),t.register(),h()},f=function(t){t.forEach((function(t){r.add(t),t.register()})),h()},d=function(t){r["delete"](t)};return{add:c,addBatch:f,cancel:d}},Mi=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return be(t,{clone:function(){return t.constructor.apply(t,e)}})}},Ii=function(t){var e;return t.isSprite?(e=new i["j"](t.texture),e.interactive=t.interactive,e.x=t.x,e.y=t.y,e.anchor=t.anchor,e.width=t.width,e.height=t.height,e.angle=t.angle):t instanceof i["f"]&&(e=new i["f"](t.geometry,t.shader,t.state),e.interactive=t.interactive,e.x=t.x,e.y=t.y,e.anchor=t.anchor,e.width=t.width,e.height=t.height,e.angle=t.angle),e},ki=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if("string"===typeof t||t instanceof String){if("#"===t[0])return[parseInt(t.substr(1),16),e];if("rgb"===t.substring(0,3)){var r=t.match(/(\d+),\s*(\d+),\s*(\d+),?\s*([\d.]+)?/);return[r.slice(1,4).map((function(t,e){return+t<<8*(2-e)})).reduce((function(t,e){return e+t}),0),Number.isNaN(+r[4])?1:+r[4]]}return[t.match(/(\d+),\s*(\d+),\s*(\d+)/).slice(1).map((function(t,e){return+t<<8*(2-e)})).reduce((function(t,e){return e+t}),0),e]}return[parseInt(t,10),e]};function Di(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Ri=Di;function ji(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Li(t,e,r){return e&&ji(t.prototype,e),r&&ji(t,r),t}var Bi=Li,Ni=s((function(t){function e(r,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(r,n)}t.exports=e}));function Fi(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ni(t,e)}var Ui=Fi,zi=s((function(t){function e(r){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(r)}t.exports=e}));function Vi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Xi=Vi;function Yi(t,e){return!e||"object"!==zi(e)&&"function"!==typeof e?Xi(t):e}var Hi=Yi,Gi=s((function(t){function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(r)}t.exports=e}));function qi(t){var e=Wi();return function(){var r,n=Gi(t);if(e){var i=Gi(this).constructor;Reflect.construct(n,arguments,i)}else n.apply(this,arguments);return Hi(this,r)}}function Wi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}i["o"].Resource;var Ki=function(t,e){switch(e){case"Infinity":return 1/0;case"-Infinity":return-1/0;default:return e}},$i=function(t){return JSON.parse(t,Ki)},Zi=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===t?e:t},Ji=function(t){return Qt(t)&&t.data&&(t.data.constructor===Float32Array||t.data.constructor===Uint8Array)&&t.shape},Qi=function(t){for(var e=1/0,r=-1/0,n=1/0,i=-1/0,o=0;o<t.length;o+=2)e=t[o]<e?t[o]:e,r=t[o]>r?t[o]:r,n=t[o+1]<n?t[o+1]:n,i=t[o+1]>i?t[o+1]:i;return{minX:e,minY:n,maxX:r,maxY:i}},to=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Jt(t)?t(e,e.id,r):t},eo=function(t,e){return Jt(t)?t(e):t},ro=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t=new Set(t);var r=[],n=e.filter((function(e){return t.has(e)?(t["delete"](e),!0):(r.push(e),!1)})),i=Array.from(t);return[i,r,n]},no=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t},e=1,r=Math.log10(e),n=10,i=Math.log10(n),o=i-r,a=0,s=1,u=1,l=function(e){return Math.min(s,Math.max(a,s-(i-t(e))/o*u))};return l.domain=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===a.length)return[e,n];var s=j(a,2),u=s[0],h=s[1];return e=u,r=t(u),n=h,i=t(h),o=i-r||1,l},l.range=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===t.length)return[a,s];var e=j(t,2),r=e[0],n=e[1];return a=r,s=n,u=s-a,l},l},io=["left","center","right"],oo=["top","center","bottom"],ao=1e-9,so=0,uo=16777215,lo=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),ho="cubic-bezier(0.645, 0.045, 0.355, 1)",co=!1,fo={passive:!1},po={passive:!0},go="inherit",vo="index",mo={property:function(t,e){return e},isCustom:!0},yo=.85,bo=.15,wo=!0,xo=.1,_o=.8,Eo=1,So=2,Oo=10,To=2500,Ao=250,Po="auto",Co="panZoom",Mo="scroll",Io=[Po,Co,Mo],ko=1,Do=0,Ro=16777215,jo=["top","right"],Lo=go,Bo=go,No=["#E69F00","#56B4E9","#009E73","#F0E442","#0072B2","#D55E00","#CC79A7"],Fo={color:"#808080"},Uo=100,zo=function(t){var e=["top","left"],r=Zt(t)?t[1]:t,n=Zt(t)?t[0]:t;return oo.indexOf(n)>=0&&(e[0]=n),io.indexOf(r)>=0&&(e[1]=r),e},Vo=function(t){var e=t;return e instanceof i["m"]||e instanceof i["e"]||e instanceof i["f"]||(e=Ji(t)?i["m"].fromBuffer(t.data,t.shape[0],t.shape[1]):i["m"].from(t)),e},Xo=function(t,e){return[t,e,0,1]},Yo=function(t,e){switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},Ho=function(t){return JSON.stringify(t,Yo)},Go=function(t){return $t(t).join("-")},qo=function(){var t=document.createElement("fake-element"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionEnd"};for(var r in e)if(void 0!==t.style[r])return e[r];return"transitionEnd"},Wo=function(t){return Math.pow(2,t)},Ko="\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = vec4(color.rgb + (1.0 - color.rgb) * vColor.rgb * color.w, color.w);\n}\n",$o=i["b"].create({fragment:Ko});i["g"].registerPlugin("brighten-tint",$o);var Zo="\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = vColor * vec4(color.a - color.rgb, color.a);\n}\n",Jo=i["b"].create({fragment:Zo});i["g"].registerPlugin("invert",Jo);var Qo=function(t){return function(e){var r=0;return be(e,{brightness:function(e){if(r=e,0===e)t.tint=16777215,t.pluginName="batch";else{var n=parseInt(255*(e<0?1+e:e),10);t.tint=he(new Array(3).fill().map((function(t,e){return n<<8*(2-e)}))),t.pluginName=e<0?"batch":"brighten-tint"}},invert:function(e){t.pluginName=e?"invert":"batch"},tint:function(e){if(0===+r){var n="undefined"===typeof e||null===e?16777215:ki(e,null)[0];t.tint=n}}})}},ta=function(t){return function(e){return be(e,{destroy:function(){t.destroy({baseTexture:!0,children:!0,texture:!0})}})}},ea=function(t,e,r){return function(n){return be(n,{scale:function(t){n.scaleFactor=t,n.scaleX(t),n.scaleY(t)},scaleX:function(r){n.scaleXFactor=r,t.width=e*r},scaleY:function(e){n.scaleYFactor=e,t.height=r*e}})}},ra=function(t,e,r){return function(n){return be(n,{get aspectRatio(){return t.width/t.height},get height(){return t.height},get center(){return[t.width/2,t.height/2]},get originalHeight(){return r},get size(){return Math.max(t.width,t.height)},get width(){return t.width},get originalWidth(){return e}})}},na=function t(e){var r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o.anchor,s=void 0===a?[.5,.5]:a,u=Vo(e);u instanceof i["m"]?(r=new i["j"](u),(n=r.anchor).set.apply(n,A(s))):r=u;return Te(Ae(t),Ie("displayObject",r),Ie("sprite",r),Mi(u,{anchor:s}),Qo(r),ea(r,u.width,u.height),ra(r,u.width,u.height),ta(r))({})},ia=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.backgroundFactory,o=r.fontSize,a=void 0===o?8:o,s=r.darkMode,u=void 0!==s&&s,l=r.onDestroy,h=void 0===l?Ne:l,c=new i["c"],f=e;if(!(e instanceof i["m"])){var d=new i["l"](e,{fontFamily:"sans-serif",fontSize:a*window.devicePixelRatio,fill:16777215,align:"center"});d.updateText(),f=d.texture}var p,g=na(f);n&&(p=n.create(),c.addChild(p)),c.addChild(g.displayObject),g.displayObject.width/=window.devicePixelRatio,g.displayObject.height/=window.devicePixelRatio;var v=!1,m=function(){return function(t){return be(t,{destroy:function(){v||(v=!0,h())}})}},y=function(t){g.invert(t),n.setColor(t?[1,1,1,1]:[0,0,0,1])};return y(u),Te(Ae(t),Ie("displayObject",c),Ie("background",p),Ie("image",g),Mi(f,{backgroundFactory:n,fontSize:a,darkMode:u,onDestroy:h}),m())({setDarkMode:y})},oa=[0,0,0,1],aa=.5,sa=[0,0],ua=[.5,.5],la=[-1,-1,1,-1,1,1,-1,1],ha=[0,1,2,0,3,2],ca="precision mediump float;\n// From PIXI\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\n\nattribute vec2 aVertexPosition;\n\nvarying vec2 vTexPos;\n\nvoid main() {\n  gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTexPos = aVertexPosition;\n}\n",fa="precision mediump float;\nfloat udRoundBox(vec2 p, vec2 b, float r) {\n  return length(max(abs(p) - b, 0.0)) - r;\n}\n\nuniform vec2 uRectPos;\nuniform vec2 uRectSize;\nuniform vec4 uColor;\nuniform float uRounding;\nuniform float uSize;\n\nvarying vec2 vTexPos;\n\nvoid main() {\n  float texel = 1.0 / uSize;\n  float dist = udRoundBox(vTexPos - uRectPos, uRectSize, uRounding);\n\n  gl_FragColor = vec4(uColor.rgb, uColor.a * max(0.0, 1.0 - (dist * uSize * 2.0)));\n}",da=new i["d"];da.addAttribute("aVertexPosition",la,2),da.addIndex(ha);var pa=new i["k"],ga=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.color,n=void 0===r?oa:r,o=e.rounding,a=void 0===o?aa:o,s=e.size,u=void 0===s?1:s,l={uColor:n,uRounding:a,uRectPos:sa,uRectSize:ua,uSize:u},h=new i["n"](l),c=i["i"].from(ca,fa,h),f=function(){var t=new i["f"](da,c,pa);return t.width=l.uSize/window.devicePixelRatio,t.height=l.uSize/window.devicePixelRatio,t},d=f(),p=function(t){l.uColor=t},g=function(){d.destroy(),l={}},v=function(t){l.uSize=t*window.devicePixelRatio};return Te(Ae(t))({create:f,destroy:g,setColor:p,setSize:v})},va=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fontSize,r=void 0===e?8:e,n=new Map,i={},o=ga({size:r*window.devicePixelRatio*1.5}),a=function(t){return function(){i[t]=Math.max(0,i[t]-1),0===i[t]&&(n.get(t).image.destroy(),n["delete"](t),delete i[t])}},s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.darkMode;if(n.has(t))return++i[t],n.get(t).clone();var u=ia(t,{backgroundFactory:o,darkMode:s,fontSize:r,onDestroy:a(t)});return i[t]=1,n.set(t,u),u},u=function(){n.forEach((function(t){return t.destroy()})),n.clear(),i={}};return{clear:u,create:s,destroy:u}},ma=function(){var t=document.createElement("style");document.head.appendChild(t);var e=t.sheet,r=function(t){var r=e.length;return e.insertRule(t,r),r},n=function(t){e.deleteRule(t)},i=function(){document.head.removeChild(t)};return{addRule:r,destroy:i,removeRule:n}},ya="pilingjs-breadcrumbs-button",ba=[".".concat(ya," {\n  position: relative;\n  display: flex;\n  align-items: center;\n  line-height: 1em;\n  height: 2em;\n  margin-right: -0.25em;\n  padding: 0 0.5em 0 1em;\n  border-radius: 0 0.25em 0.25em 0;\n  text-color: black;\n  box-shadow: inset 0 0 0 1px #ccc;\n  background: white;\n}"),".pilingjs-darkmode .".concat(ya," {\n  text-color: white;\n  box-shadow: inset 0 0 0 1px #333;\n  background: black;\n}"),"li:first-child .".concat(ya," {\n  padding: 0.5em;\n  border-radius: 0.25em;\n}"),".".concat(ya,":focus {\n  outline: none;\n}"),".".concat(ya,".").concat(ya,"-right-arrow {\n  position: relative;\n  display: block;\n  border-radius: 0;\n  border-left-color: #ccc;\n  background: #ccc;\n}"),".pilingjs-darkmode .".concat(ya,".").concat(ya,"-right-arrow {\n  border-left-color: #333;\n  background: #333;\n}"),".".concat(ya,".").concat(ya,"-right-arrow:hover, .pilingjs-darkmode .").concat(ya,".").concat(ya,"-right-arrow:hover {\n  color: black;\n  border-left-color: #ff7ff6;\n  box-shadow: inset 0 0 0 1px #ff7ff6;\n  background: #ff7ff6;\n}"),".".concat(ya,".").concat(ya,"-right-arrow:after {\n  left: 100%;\n  top: 50%;\n  border: solid transparent;\n  content: '';\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n  border-color: rgba(0, 0, 0, 0);\n  border-left-color: inherit;\n  border-width: 0.5em;\n  margin-top: -0.5em;\n}")],wa=function t(e){var r=e.element,n=e.store,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(i.darkMode,i.maxDepth),a=void 0===o?3:o,s=i.onEnter,u=void 0===s?Ne:s,l=i.onLeave,h=void 0===l?Ne:l,c=a,f=document.createElement("nav");f.className="pilingjs-breadcrumbs",f.style.position="absolute",f.style.top=0,f.style.left=0;var d=document.createElement("ol");d.className="pilingjs-breadcrumbs-list",d.style.display="flex",d.style.margin=0,d.style.padding=0,d.style.listStyle="none",f.appendChild(d);var p=ma();ba.forEach(p.addRule);var g=[],v=[],m=[],y=function(){Oe((function(t,e,r){e+1===r.length?(t.style.zIndex=1,t.className="".concat(ya)):(t.style.zIndex=r.length-e,t.className="".concat(ya," ").concat(ya,"-right-arrow"))}))(d.querySelectorAll("button"))},b=function(){return m[m.length-1]},w=function(t){var e=n.state.piles;return t.flatMap((function(t){return e[t].items})).sort().join("-")},x=function(t){var e=n["export"](),r=new Set;return t.forEach((function(t){e.piles[t].items.forEach((function(t){return r.add(t)}))})),Object.keys(e.piles).filter((function(t){return!r.has(t)})).forEach((function(t){e.piles[t].items=[]})),e},_=function(t){return Object.values(t.piles).filter((function(t){return t.items.length})).reduce((function(t,e){return t+e.items.length}),0)},E=function(t,e){var r=0===e?"Root":"".concat(e,". Level"),n=_(t);return"<li><button><span><strong>".concat(r,"</strong> (").concat(n,")</span></button></li>")},S=function(t){return function(){if(0!==t){var e=g.length;while(g.length>t+1)me(d),m.pop(),g.pop();e>t&&P()}else C()}},O=function(t,e){var r=E(t,e),n=pe(r);n.querySelector("button").addEventListener("click",S(e)),d.appendChild(n),y()},T=function(t){var e=w(t),i=b();if(g.length>=c)console.warn("Not allowed! You reached the maximum depth (".concat(c,")"));else if(e!==i){var o=n["export"]();g=[].concat(A(g),[o]);var a=r.getBoundingClientRect(),s=a.width,l=a.height;v=[].concat(A(v),[{width:s,height:l}]),1===g.length&&O(o,0);var h=x(t);n["import"](h),m=[].concat(A(m),[e]),O(h,g.length),u()}else console.warn("Not allowed! You're already on this level.")},P=function(){if(g.length){me(d),y(),m.pop();var t=g.pop();n["import"](t);var e=v.pop();h(e)}else console.warn("Not allowed! You're already on the root level.")},C=function(){g.length?(ve(d),n["import"](g[0]),h(v[0]),m=[],g=[],v=[]):console.warn("Not allowed! You're already on the root level.")},M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.darkMode,t.maxDepth),r=void 0===e?null:e;c=Zi(r,c),y()},I=function(){p.destroy()};return y(),Te(Ie("nav",f),Me("size",(function(){return g.length})),Ae(t))({destroy:I,enter:T,leave:P,leaveAll:C,set:M})};!function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var l="function"==typeof u&&u;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=r[a]={exports:{}};e[a][0].call(c.exports,(function(t){return i(e[a][1][t]||t)}),c,c.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof u&&u,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){(function(){this.skmeans;var n=t("./main.js");void 0!==r&&(void 0!==e&&e.exports&&(r=e.exports=n),r.skmeans=n),"undefined"!=typeof window&&(window.skmeans=n)}).call(this)},{"./main.js":4}],2:[function(t,e,r){e.exports={eudist:function(t,e){for(var r=t.length,n=0,i=0;i<r;i++){var o=(t[i]||0)-(e[i]||0);n+=o*o}return n},mandist:function(t,e){for(var r=t.length,n=0,i=0,o=0;o<r;o++)n+=0<=(i=(t[o]||0)-(e[o]||0))?i:-i;return n},dist:function(t,e,r){var n=Math.abs(t-e);return r?n:n*n}}},{}],3:[function(t,e,r){var n=t("./distance.js"),i=n.eudist,o=n.dist;e.exports={kmrand:function(t,e){for(var r={},n=[],i=e<<2,o=t.length,a=0<t[0].length;n.length<e&&0<i--;){var s=t[Math.floor(Math.random()*o)],u=a?s.join("_"):"".concat(s);r[u]||(r[u]=!0,n.push(s))}if(n.length<e)throw new Error("Error initializating clusters");return n},kmpp:function(t,e,r){var n=r||(t[0].length?i:o),a=[],s=t.length,u=0<t[0].length,l=t[Math.floor(Math.random()*s)];for(u?l.join("_"):"".concat(l),a.push(l);a.length<e;){for(var h=[],c=a.length,f=0,d=[],p=0;p<s;p++){for(var g=1/0,v=0;v<c;v++){var m=n(t[p],a[v]);m<=g&&(g=m)}h[p]=g}for(var y=0;y<s;y++)f+=h[y];for(var b=0;b<s;b++)d[b]={i:b,v:t[b],pr:h[b]/f,cs:0};d.sort((function(t,e){return t.pr-e.pr})),d[0].cs=d[0].pr;for(var w=1;w<s;w++)d[w].cs=d[w-1].cs+d[w].pr;for(var x=Math.random(),_=0;_<s-1&&d[_++].cs<x;);a.push(d[_-1].v)}return a}}},{"./distance.js":2}],4:[function(t,e,r){var n=t("./distance.js"),i=t("./kinit.js"),o=n.eudist,a=(n.mandist,n.dist,i.kmrand),s=i.kmpp;function u(t,e,r){r=r||[];for(var n=0;n<t;n++)r[n]=e;return r}function l(t,e){for(var r=Array.isArray(t),n=this.centroids,i=n.length,a=1/0,s=0,u=0;u<i;u++){var l=e?e(t,n[u]):r?o(t,n[u]):Math.abs(t-n[u]);l<=a&&(a=l,s=u)}return{idx:s,centroid:n[s]}}e.exports=function(t,e,r,n,i){var h=[],c=[],f=[],d=[],p=!1,g=n||1e4,v=t.length,m=t[0].length,y=0<m,b=[];if(r)h="kmrand"==r?a(t,e):"kmpp"==r?s(t,e,i):r;else for(var w={},x=0;h.length<e;){var _=Math.floor(Math.random()*v);w[_]||(w[_]=!0,h[x++]=t[_])}do{u(e,0,b);for(var E=0;E<v;E++){for(var S=1/0,O=0,T=0;T<e;T++)(d=i?i(t[E],h[T]):y?o(t[E],h[T]):Math.abs(t[E]-h[T]))<=S&&(S=d,O=T);b[f[E]=O]++}var A=[];if(c=[],y)for(var P=0;P<e;P++)A[P]=u(m,0,A[P]),c[P]=h[P];else for(var C=0;C<e;C++)A[C]=0,c[C]=h[C];if(y){for(var M=0;M<e;M++)h[M]=[];for(var I=0;I<v;I++)for(var k=A[f[I]],D=t[I],R=0;R<m;R++)k[R]+=D[R];p=!0;for(var j=0;j<e;j++){for(var L=h[j],B=A[j],N=c[j],F=b[j],U=0;U<m;U++)L[U]=B[U]/F||0;if(p)for(var z=0;z<m;z++)if(N[z]!=L[z]){p=!1;break}}}else{for(var V=0;V<v;V++)A[f[V]]+=t[V];for(var X=0;X<e;X++)h[X]=A[X]/b[X]||0;p=!0;for(var Y=0;Y<e;Y++)if(c[Y]!=h[Y]){p=!1;break}}p=p||--g<=0}while(!p);return{it:(n||1e4)-g,k:e,idxs:f,centroids:h,test:l}}},{"./distance.js":2,"./kinit.js":3}]},{},[1]);var xa,_a={},Ea=function(){var t=function(t){return{error:new Error(t)}},e=function(t){return t};self.onmessage=function(r){var n,i=r.data,o=i.initialization,a=i.k,s=i.maxIterations,u=i.items,l=i.scripts;try{l.forEach((function(t){importScripts(t)}))}catch(f){return void self.postMessage(t("Failed to import skmeans: ".concat(f)))}try{n=u.map(self.valueGetter||e)}catch(f){return void self.postMessage(t("Failed to load features: ".concat(f)))}if(n.length<=a)self.postMessage(t("Need at least ".concat(a," items!")));else try{var h=self.skmeans(n,a,o||"kmpp",s||1e3*Math.log10(n.length),self.distanceFunction||null),c=self.postProcessing&&self.postProcessing(h,n,u);self.postMessage({centroids:h.centroids,labels:h.idxs,postProcessing:c})}catch(f){self.postMessage(t("Failed to run k-means++: ".concat(f)))}}},Sa=function(t){return window.URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Oa=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.distanceFunction,n=void 0===r?null:r,i=e.initialization,o=void 0===i?"kmpp":i,a=e.maxIterations,s=void 0===a?null:a,u=e.valueGetter,l=void 0===u?null:u,h=e.postProcessing,c=void 0===h?null:h,f=[Sa(_a.replace(/window/g,"self"))];return l&&f.push(Sa("(() => { self.valueGetter = ".concat(l.toString(),"; })();"))),n&&f.push(Sa("(() => { self.distanceFunction = ".concat(n.toString(),"; })();"))),c&&f.push(Sa("(() => { self.postProcessing = ".concat(c.toString(),"; })();"))),function(e){return new Promise((function(r,n){var i=Be(Ea);i.onmessage=function(t){t.data.error?n(t.data.error):r(t.data),i.terminate()},i.postMessage({initialization:o,k:t,maxIterations:s,items:e,scripts:f})}))}},Ta=Object.prototype.toString,Aa=function(t){var e=Ta.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"===typeof t&&"number"===typeof t.length&&t.length>=0&&"[object Function]"===Ta.call(t.callee)),r};if(!Object.keys){var Pa=Object.prototype.hasOwnProperty,Ca=Object.prototype.toString,Ma=Aa,Ia=Object.prototype.propertyIsEnumerable,ka=!Ia.call({toString:null},"toString"),Da=Ia.call((function(){}),"prototype"),Ra=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ja=function(t){var e=t.constructor;return e&&e.prototype===t},La={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Ba=function(){if("undefined"===typeof window)return!1;for(var t in window)try{if(!La["$"+t]&&Pa.call(window,t)&&null!==window[t]&&"object"===typeof window[t])try{ja(window[t])}catch(e){return!0}}catch(e){return!0}return!1}(),Na=function(t){if("undefined"===typeof window||!Ba)return ja(t);try{return ja(t)}catch(e){return!1}};xa=function(t){var e=null!==t&&"object"===typeof t,r="[object Function]"===Ca.call(t),n=Ma(t),i=e&&"[object String]"===Ca.call(t),o=[];if(!e&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var a=Da&&r;if(i&&t.length>0&&!Pa.call(t,0))for(var s=0;s<t.length;++s)o.push(String(s));if(n&&t.length>0)for(var u=0;u<t.length;++u)o.push(String(u));else for(var l in t)a&&"prototype"===l||!Pa.call(t,l)||o.push(String(l));if(ka)for(var h=Na(t),c=0;c<Ra.length;++c)h&&"constructor"===Ra[c]||!Pa.call(t,Ra[c])||o.push(Ra[c]);return o}}var Fa=xa,Ua=Array.prototype.slice,za=Object.keys,Va=za?function(t){return za(t)}:Fa,Xa=Object.keys;Va.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return Aa(t)?Xa(Ua.call(t)):Xa(t)})}else Object.keys=Va;return Object.keys||Va};var Ya=Va,Ha="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,Ga=Object.prototype.toString,qa=function(t){return!(Ha&&t&&"object"===typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===Ga.call(t)},Wa=function(t){return!!qa(t)||null!==t&&"object"===typeof t&&"number"===typeof t.length&&t.length>=0&&"[object Array]"!==Ga.call(t)&&"[object Function]"===Ga.call(t.callee)},Ka=function(){return qa(arguments)}();qa.isLegacyArguments=Wa;var $a=Ka?qa:Wa,Za=function(t){return t!==t},Ja=function(t,e){return 0===t&&0===e?1/t===1/e:t===e||!(!Za(t)||!Za(e))},Qa="Function.prototype.bind called on incompatible ",ts=Array.prototype.slice,es=Object.prototype.toString,rs="[object Function]",ns=function(t){var e=this;if("function"!==typeof e||es.call(e)!==rs)throw new TypeError(Qa+e);for(var r,n=ts.call(arguments,1),i=function(){if(this instanceof r){var i=e.apply(this,n.concat(ts.call(arguments)));return Object(i)===i?i:this}return e.apply(t,n.concat(ts.call(arguments)))},o=Math.max(0,e.length-n.length),a=[],s=0;s<o;s++)a.push("$"+s);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var u=function(){};u.prototype=e.prototype,r.prototype=new u,u.prototype=null}return r},is=Function.prototype.bind||ns,os=is.call(Function.call,Object.prototype.hasOwnProperty),as=RegExp.prototype.exec,ss=Object.getOwnPropertyDescriptor,us=function(t){try{var e=t.lastIndex;return t.lastIndex=0,as.call(t),!0}catch(r){return!1}finally{t.lastIndex=e}},ls=Object.prototype.toString,hs="[object RegExp]",cs="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,fs=function(t){if(!t||"object"!==typeof t)return!1;if(!cs)return ls.call(t)===hs;var e=ss(t,"lastIndex"),r=e&&os(e,"value");return!!r&&us(t)},ds="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),ps=Object.prototype.toString,gs=Array.prototype.concat,vs=Object.defineProperty,ms=function(t){return"function"===typeof t&&"[object Function]"===ps.call(t)},ys=function(){var t={};try{for(var e in vs(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(r){return!1}},bs=vs&&ys(),ws=function(t,e,r,n){(!(e in t)||ms(n)&&n())&&(bs?vs(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},xs=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Ya(e);ds&&(n=gs.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)ws(t,n[i],e[n[i]],r[n[i]])};xs.supportsDescriptors=!!bs;var _s=xs,Es=Object,Ss=TypeError,Os=function(){if(null!=this&&this!==Es(this))throw new Ss("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t},Ts=_s.supportsDescriptors,As=Object.getOwnPropertyDescriptor,Ps=TypeError,Cs=function(){if(!Ts)throw new Ps("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var t=As(RegExp.prototype,"flags");if(t&&"function"===typeof t.get&&"boolean"===typeof/a/.dotAll)return t.get}return Os},Ms=_s.supportsDescriptors,Is=Object.getOwnPropertyDescriptor,ks=Object.defineProperty,Ds=TypeError,Rs=Object.getPrototypeOf,js=/a/,Ls=function(){if(!Ms||!Rs)throw new Ds("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=Cs(),e=Rs(js),r=Is(e,"flags");return r&&r.get===t||ks(e,"flags",{configurable:!0,enumerable:!1,get:t}),t},Bs=Function.call.bind(Os);_s(Bs,{getPolyfill:Cs,implementation:Os,shim:Ls});var Ns=Bs,Fs=Date.prototype.getDay,Us=function(t){try{return Fs.call(t),!0}catch(e){return!1}},zs=Object.prototype.toString,Vs="[object Date]",Xs="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,Ys=function(t){return"object"===typeof t&&null!==t&&(Xs?Us(t):zs.call(t)===Vs)},Hs=Date.prototype.getTime;function Gs(t,e,r){var n=r||{};return!!(n.strict?Ja(t,e):t===e)||(!t||!e||"object"!==typeof t&&"object"!==typeof e?n.strict?Ja(t,e):t==e:Ks(t,e,n))}function qs(t){return null===t||void 0===t}function Ws(t){return!(!t||"object"!==typeof t||"number"!==typeof t.length)&&("function"===typeof t.copy&&"function"===typeof t.slice&&!(t.length>0&&"number"!==typeof t[0]))}function Ks(t,e,r){var n,i;if(typeof t!==typeof e)return!1;if(qs(t)||qs(e))return!1;if(t.prototype!==e.prototype)return!1;if($a(t)!==$a(e))return!1;var o=fs(t),a=fs(e);if(o!==a)return!1;if(o||a)return t.source===e.source&&Ns(t)===Ns(e);if(Ys(t)&&Ys(e))return Hs.call(t)===Hs.call(e);var s=Ws(t),u=Ws(e);if(s!==u)return!1;if(s||u){if(t.length!==e.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}if(typeof t!==typeof e)return!1;try{var l=Ya(t),h=Ya(e)}catch(c){return!1}if(l.length!==h.length)return!1;for(l.sort(),h.sort(),n=l.length-1;n>=0;n--)if(l[n]!=h[n])return!1;for(n=l.length-1;n>=0;n--)if(i=l[n],!Gs(t[i],e[i],r))return!1;return!0}var $s,Zs=Gs,Js=(s((function(t){var e,r,n=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}function s(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{return r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(function(){try{e="function"===typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(t){r=o}})();var u,l=[],h=!1,c=-1;function f(){h&&u&&(h=!1,u.length?l=u.concat(l):c=-1,l.length&&d())}function d(){if(!h){var t=a(f);h=!0;var e=l.length;while(e){u=l,l=[];while(++c<e)u&&u[c].run();c=-1,e=l.length}u=null,h=!1,s(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new p(t,e)),1!==l.length||h||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}})),"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});function Qs(t){var e,r=t.Symbol;return"function"===typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}$s="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof Js?Js:n;var tu=Qs($s),eu=function(){return Math.random().toString(36).substring(7).split("").join(".")},ru={INIT:"@@redux/INIT"+eu(),REPLACE:"@@redux/REPLACE"+eu(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+eu()}};function nu(t){if("object"!==typeof t||null===t)return!1;var e=t;while(null!==Object.getPrototypeOf(e))e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function iu(t,e,r){var n;if("function"===typeof e&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"===typeof e&&"undefined"===typeof r&&(r=e,e=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error("Expected the enhancer to be a function.");return r(iu)(t,e)}if("function"!==typeof t)throw new Error("Expected the reducer to be a function.");var i=t,o=e,a=[],s=a,u=!1;function l(){s===a&&(s=a.slice())}function h(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function c(t){if("function"!==typeof t)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var e=!0;return l(),s.push(t),function(){if(e){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");e=!1,l();var r=s.indexOf(t);s.splice(r,1),a=null}}}function f(t){if(!nu(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,o=i(o,t)}finally{u=!1}for(var e=a=s,r=0;r<e.length;r++){var n=e[r];n()}return t}function d(t){if("function"!==typeof t)throw new Error("Expected the nextReducer to be a function.");i=t,f({type:ru.REPLACE})}function p(){var t,e=c;return t={subscribe:function(t){if("object"!==typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function r(){t.next&&t.next(h())}r();var n=e(r);return{unsubscribe:n}}},t[tu]=function(){return this},t}return f({type:ru.INIT}),n={dispatch:f,subscribe:c,getState:h,replaceReducer:d},n[tu]=p,n}function ou(t,e){var r=e&&e.type,n=r&&'action "'+String(r)+'"'||"an action";return"Given "+n+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function au(t){Object.keys(t).forEach((function(e){var r=t[e],n=r(void 0,{type:ru.INIT});if("undefined"===typeof n)throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"===typeof r(void 0,{type:ru.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+ru.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}function su(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++){var i=e[n];0,"function"===typeof t[i]&&(r[i]=t[i])}var o,a=Object.keys(r);try{au(r)}catch(s){o=s}return function(t,e){if(void 0===t&&(t={}),o)throw o;for(var n=!1,i={},s=0;s<a.length;s++){var u=a[s],l=r[u],h=t[u],c=l(h,e);if("undefined"===typeof c){var f=ou(u,e);throw new Error(f)}i[u]=c,n=n||c!==h}return n=n||a.length!==Object.keys(t).length,n?i:t}}var uu="0.7.12",lu=function(){var t=function(t){return function(e){return[Math.floor(e/t),e%t]}};return{rowMajor:t}};function hu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function cu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hu(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var fu=function(t,e){switch(zi(t)){case"object":return Zs(t,e)?e:we(t);default:return t}},du=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r="SET_".concat(Ee(t));return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case r:return fu(i.payload[t],n);default:return n}}},pu=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e=new Set(e);var n="SET_".concat(Ee(t));return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case n:return e.has(o.payload[t])?fu(o.payload[t],i):i;default:return i}}},gu=function(t){var e="SET_".concat(Ee(t));return function(r){return{type:e,payload:g({},t,r)}}},vu=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return[du(t,e),gu(t)]},mu=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return[pu(t,e,r),gu(t)]},yu=function(){return{type:"RESET",payload:{}}},bu=function(t){return{type:"OVERWRITE",payload:{newState:t}}},wu=function(t){return{type:"SOFT_OVERWRITE",payload:{newState:t}}},xu=vu("arrangementType"),_u=j(xu,2),Eu=_u[0],Su=_u[1],Ou=vu("arrangementObjective"),Tu=j(Ou,2),Au=Tu[0],Pu=Tu[1],Cu=vu("arrangeOnGrouping",!1),Mu=j(Cu,2),Iu=Mu[0],ku=Mu[1],Du=vu("arrangementOptions",{}),Ru=j(Du,2),ju=Ru[0],Lu=Ru[1],Bu=vu("groupingType"),Nu=j(Bu,2),Fu=Nu[0],Uu=Nu[1],zu=vu("groupingObjective"),Vu=j(zu,2),Xu=Vu[0],Yu=Vu[1],Hu=vu("groupingOptions",{}),Gu=j(Hu,2),qu=Gu[0],Wu=Gu[1],Ku=vu("splittingType"),$u=j(Ku,2),Zu=$u[0],Ju=$u[1],Qu=vu("splittingObjective"),tl=j(Qu,2),el=tl[0],rl=tl[1],nl=vu("splittingOptions",{}),il=j(nl,2),ol=il[0],al=il[1],sl=vu("backgroundColor",0),ul=j(sl,2),ll=ul[0],hl=ul[1],cl=vu("darkMode",co),fl=j(cl,2),dl=fl[0],pl=fl[1],gl=vu("dimensionalityReducer"),vl=j(gl,2),ml=vl[0],yl=vl[1],bl=vu("gridColor",7895160),wl=j(bl,2),xl=wl[0],_l=wl[1],El=vu("gridOpacity",1),Sl=j(El,2),Ol=Sl[0],Tl=Sl[1],Al=vu("showGrid",!1),Pl=j(Al,2),Cl=Pl[0],Ml=Pl[1],Il=vu("popupBackgroundOpacity",yo),kl=j(Il,2),Dl=kl[0],Rl=kl[1],jl=vu("lassoFillColor"),Ll=j(jl,2),Bl=Ll[0],Nl=Ll[1],Fl=vu("lassoFillOpacity",bo),Ul=j(Fl,2),zl=Ul[0],Vl=Ul[1],Xl=vu("lassoShowStartIndicator",wo),Yl=j(Xl,2),Hl=Yl[0],Gl=Yl[1],ql=vu("lassoStartIndicatorOpacity",xo),Wl=j(ql,2),Kl=Wl[0],$l=Wl[1],Zl=vu("lassoStrokeColor"),Jl=j(Zl,2),Ql=Jl[0],th=Jl[1],eh=vu("lassoStrokeOpacity",_o),rh=j(eh,2),nh=rh[0],ih=rh[1],oh=vu("lassoStrokeSize",Eo),ah=j(oh,2),sh=ah[0],uh=ah[1],lh=vu("itemRenderer"),hh=j(lh,2),ch=hh[0],fh=hh[1],dh=vu("previewRenderer"),ph=j(dh,2),gh=ph[0],vh=ph[1],mh=vu("coverRenderer"),yh=j(mh,2),bh=yh[0],wh=yh[1],xh=vu("previewAggregator"),_h=j(xh,2),Eh=_h[0],Sh=_h[1],Oh=vu("coverAggregator"),Th=j(Oh,2),Ah=Th[0],Ph=Th[1],Ch=vu("orderer",lu().rowMajor),Mh=j(Ch,2),Ih=Mh[0],kh=Mh[1],Dh=vu("itemSize"),Rh=j(Dh,2),jh=Rh[0],Lh=Rh[1],Bh=vu("itemSizeRange",[.5,1]),Nh=j(Bh,2),Fh=Nh[0],Uh=Nh[1],zh=vu("columns",10),Vh=j(zh,2),Xh=Vh[0],Yh=Vh[1],Hh=vu("rowHeight"),Gh=j(Hh,2),qh=Gh[0],Wh=Gh[1],Kh=vu("cellAspectRatio",1),$h=j(Kh,2),Zh=$h[0],Jh=$h[1],Qh=vu("cellPadding",12),tc=j(Qh,2),ec=tc[0],rc=tc[1],nc=vu("cellSize"),ic=j(nc,2),oc=ic[0],ac=ic[1],sc=vu("pileCoverScale",ko),uc=j(sc,2),lc=uc[0],hc=uc[1],cc=vu("pileCoverInvert",!1),fc=j(cc,2),dc=fc[0],pc=fc[1],gc=vu("pileItemBrightness",Do),vc=j(gc,2),mc=vc[0],yc=vc[1],bc=vu("pileItemInvert",!1),wc=j(bc,2),xc=wc[0],_c=wc[1],Ec=vu("pileItemOffset",[5,5]),Sc=j(Ec,2),Oc=Sc[0],Tc=Sc[1],Ac=vu("pileItemOpacity",1),Pc=j(Ac,2),Cc=Pc[0],Mc=Pc[1],Ic=vu("pileOrderItems"),kc=j(Ic,2),Dc=kc[0],Rc=kc[1],jc=vu("pileItemRotation",0),Lc=j(jc,2),Bc=Lc[0],Nc=Lc[1],Fc=vu("pileItemTint",Ro),Uc=j(Fc,2),zc=Uc[0],Vc=Uc[1],Xc=vu("focusedPiles",[]),Yc=j(Xc,2),Hc=Yc[0],Gc=Yc[1],qc=vu("magnifiedPiles",[]),Wc=j(qc,2),Kc=Wc[0],$c=Wc[1],Zc=vu("depileMethod","originalPos"),Jc=j(Zc,2),Qc=Jc[0],tf=Jc[1],ef=vu("depiledPile",[]),rf=j(ef,2),nf=rf[0],of=rf[1],af=vu("temporaryDepiledPiles",[]),sf=j(af,2),uf=sf[0],lf=sf[1],hf=vu("tempDepileDirection","horizontal"),cf=j(hf,2),ff=cf[0],df=cf[1],pf=vu("tempDepileOneDNum",6),gf=j(pf,2),vf=gf[0],mf=gf[1],yf=vu("easing",Yt),bf=j(yf,2),wf=bf[0],xf=bf[1],_f=mu("navigationMode",Io,Po),Ef=j(_f,2),Sf=Ef[0],Of=Ef[1],Tf=vu("previewItemOffset"),Af=j(Tf,2),Pf=Af[0],Cf=Af[1],Mf=vu("previewAlignment","top"),If=j(Mf,2),kf=If[0],Df=If[1],Rf=vu("previewPadding",2),jf=j(Rf,2),Lf=jf[0],Bf=jf[1],Nf=vu("previewScaling",[1,1]),Ff=j(Nf,2),Uf=Ff[0],zf=Ff[1],Vf=vu("previewScaleToCover",[!1,!1]),Xf=j(Vf,2),Yf=Xf[0],Hf=Xf[1],Gf=vu("previewSpacing",2),qf=j(Gf,2),Wf=qf[0],Kf=qf[1],$f=vu("previewOffset",2),Zf=j($f,2),Jf=Zf[0],Qf=Zf[1],td=vu("previewBackgroundColor",Lo),ed=j(td,2),rd=ed[0],nd=ed[1],id=vu("previewBackgroundOpacity",Bo),od=j(id,2),ad=od[0],sd=od[1],ud=vu("previewBorderColor"),ld=j(ud,2),hd=ld[0],cd=ld[1],fd=vu("previewBorderOpacity",.85),dd=j(fd,2),pd=dd[0],gd=dd[1],vd=vu("pileBackgroundColor"),md=j(vd,2),yd=md[0],bd=md[1],wd=vu("pileBackgroundOpacity",0),xd=j(wd,2),_d=xd[0],Ed=xd[1],Sd=vu("pileBackgroundColorHover"),Od=j(Sd,2),Td=Od[0],Ad=Od[1],Pd=vu("pileBackgroundOpacityHover",.85),Cd=j(Pd,2),Md=Cd[0],Id=Cd[1],kd=vu("pileBackgroundColorFocus"),Dd=j(kd,2),Rd=Dd[0],jd=Dd[1],Ld=vu("pileBackgroundOpacityFocus"),Bd=j(Ld,2),Nd=Bd[0],Fd=Bd[1],Ud=vu("pileBackgroundColorActive"),zd=j(Ud,2),Vd=zd[0],Xd=zd[1],Yd=vu("pileBackgroundOpacityActive"),Hd=j(Yd,2),Gd=Hd[0],qd=Hd[1],Wd=vu("pileBorderColor",8421504),Kd=j(Wd,2),$d=Kd[0],Zd=Kd[1],Jd=vu("pileBorderOpacity",1),Qd=j(Jd,2),tp=Qd[0],ep=Qd[1],rp=vu("pileBorderColorHover",8421504),np=j(rp,2),ip=np[0],op=np[1],ap=vu("pileBorderOpacityHover",1),sp=j(ap,2),up=sp[0],lp=sp[1],hp=vu("pileBorderColorFocus",15656034),cp=j(hp,2),fp=cp[0],dp=cp[1],pp=vu("pileBorderOpacityFocus",1),gp=j(pp,2),vp=gp[0],mp=gp[1],yp=vu("pileBorderColorActive",16754138),bp=j(yp,2),wp=bp[0],xp=bp[1],_p=vu("pileBorderOpacityActive",1),Ep=j(_p,2),Sp=Ep[0],Op=Ep[1],Tp=vu("pileBorderSize",0),Ap=j(Tp,2),Pp=Ap[0],Cp=Ap[1],Mp=vu("pileCellAlignment","topLeft"),Ip=j(Mp,2),kp=Ip[0],Dp=Ip[1],Rp=vu("pileContextMenuItems",[]),jp=j(Rp,2),Lp=jp[0],Bp=jp[1],Np=vu("pileSizeBadge",!1),Fp=j(Np,2),Up=Fp[0],zp=Fp[1],Vp=vu("pileSizeBadgeAlign",jo),Xp=j(Vp,2),Yp=Xp[0],Hp=Xp[1],Gp=vu("pileVisibilityItems",!0),qp=j(Gp,2),Wp=qp[0],Kp=qp[1],$p=vu("pileOpacity",1),Zp=j($p,2),Jp=Zp[0],Qp=Zp[1],tg=vu("pileScale",1),eg=j(tg,2),rg=eg[0],ng=eg[1],ig=vu("zoomScale",1),og=j(ig,2),ag=og[0],sg=og[1],ug=vu("pileLabel"),lg=j(ug,2),hg=lg[0],cg=lg[1],fg=vu("pileLabelColor"),dg=j(fg,2),pg=dg[0],gg=dg[1],vg=vu("pileLabelText",!1),mg=j(vg,2),yg=mg[0],bg=mg[1],wg=vu("pileLabelTextMapping",!1),xg=j(wg,2),_g=xg[0],Eg=xg[1],Sg=vu("pileLabelTextColor",0),Og=j(Sg,2),Tg=Og[0],Ag=Og[1],Pg=vu("pileLabelTextOpacity",1),Cg=j(Pg,2),Mg=Cg[0],Ig=Cg[1],kg=vu("pileLabelTextDropShadow",{}),Dg=j(kg,2),Rg=Dg[0],jg=Dg[1],Lg=vu("pileLabelAlign","bottom"),Bg=j(Lg,2),Ng=Bg[0],Fg=Bg[1],Ug=vu("pileLabelStackAlign","horizontal"),zg=j(Ug,2),Vg=zg[0],Xg=zg[1],Yg=vu("pileLabelFontSize",7),Hg=j(Yg,2),Gg=Hg[0],qg=Hg[1],Wg=vu("pileLabelHeight",2),Kg=j(Wg,2),$g=Kg[0],Zg=Kg[1],Jg=vu("pileLabelSizeTransform"),Qg=j(Jg,2),tv=Qg[0],ev=Qg[1],rv=vu("projector"),nv=j(rv,2),iv=nv[0],ov=nv[1],av=vu("zoomBounds",[-1/0,1/0]),sv=j(av,2),uv=sv[0],lv=sv[1],hv=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_ITEMS":var r=!!e.payload.items.length&&"undefined"!==typeof e.payload.items[0].id;return e.payload.items.reduce((function(t,e,n){var i=r?e.id:n;return t[i]=cu({id:i,index:n},e),t}),{});default:return t}},cv=function(t){return{type:"SET_ITEMS",payload:{items:t}}},fv=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_PILES":return Object.entries(e.payload.piles).reduce((function(t,e,r){var n=j(e,2),i=n[0],o=n[1];return t[i]=cu(cu({},o),{},{id:i,index:Number.isNaN(+o.index)?r:+o.index}),t}),{});case"INIT_PILES":var r=!!e.payload.newItems.length&&"undefined"!==typeof e.payload.newItems[0].id,n=e.payload.newItems.reduce((function(t,e,r){var n=void 0===e.id?r.toString():e.id;return t.add(n),t}),new Set);return e.payload.newItems.reduce((function(e,i,o){var a=r?i.id:o.toString(),s=t[a],u=cu({id:a,index:o,items:[a],x:null,y:null},s);if(s)if(s.items.length)u.items=s.items.filter((function(t){return n.has(t)}));else if(n.has(a)){var l=Object.values(t).filter((function(t){return t.items.includes(a)&&n.has(t.id)})).length;l||(u.items=[a])}return e[a]=u,e}),{});case"MERGE_PILES":var i,o=cu({},t);i=void 0===e.payload.targetPileId&&isNaN(e.payload.pileIds[0])?e.payload.pileIds[0]:void 0!==e.payload.targetPileId?e.payload.targetPileId:Math.min.apply([],e.payload.pileIds).toString();var a=e.payload.pileIds.filter((function(t){return t!==i})),s=j(e.payload.targetPos,2),u=s[0],l=s[1];return o[i]=cu(cu({},o[i]),{},{items:A(o[i].items),x:u,y:l}),a.forEach((function(t){var e;(e=o[i].items).push.apply(e,A(o[t].items)),o[t]=cu(cu({},o[t]),{},{items:[],x:null,y:null})})),o;case"MOVE_PILES":var h=cu({},t);return e.payload.movingPiles.forEach((function(t){var e=t.id,r=t.x,n=t.y;h[e]=cu(cu({},h[e]),{},{x:r,y:n})})),h;case"SCATTER_PILES":var c=e.payload.piles.filter((function(t){return t.items.length>1}));if(!c.length)return t;var f=cu({},t);return c.forEach((function(t){t.items.forEach((function(e){f[e]=cu(cu({},f[e]),{},{items:[e],x:t.x,y:t.y})}))})),f;case"SPLIT_PILES":if(!Object.values(e.payload.piles).length)return t;var d=cu({},t);return Object.entries(e.payload.piles).filter((function(t){return t[1].length>1})).forEach((function(t){var e=j(t,2),r=e[0],n=e[1];n.forEach((function(t){d[t[0]]=cu(cu({},d[t[0]]),{},{x:d[r].x,y:d[r].y,items:A(t)})}))})),d;default:return t}},dv=function(t){return{type:"INIT_PILES",payload:{newItems:t}}},pv=function(t,e,r){return{type:"MERGE_PILES",payload:{pileIds:t,targetPos:e,targetPileId:r}}},gv=function(t){return{type:"MOVE_PILES",payload:{movingPiles:t}}},vv=function(t){return{type:"SCATTER_PILES",payload:{piles:t}}},mv=function(t){return{type:"SPLIT_PILES",payload:{piles:t}}},yv=function(t){return{type:"SET_PILES",payload:{piles:t}}},bv=vu("showSpatialIndex",!1),wv=j(bv,2),xv=wv[0],_v=wv[1],Ev=function(){var t=null,e=su({arrangementObjective:Au,arrangementOptions:ju,arrangementType:Eu,arrangeOnGrouping:Iu,backgroundColor:ll,coverRenderer:bh,cellAspectRatio:Zh,cellPadding:ec,cellSize:oc,columns:Xh,coverAggregator:Ah,depiledPile:nf,depileMethod:Qc,dimensionalityReducer:ml,easing:wf,focusedPiles:Hc,gridColor:xl,gridOpacity:Ol,groupingObjective:Xu,groupingOptions:qu,groupingType:Fu,darkMode:dl,popupBackgroundOpacity:Dl,itemRenderer:ch,items:hv,itemSize:jh,itemSizeRange:Fh,lassoFillColor:Bl,lassoFillOpacity:zl,lassoShowStartIndicator:Hl,lassoStartIndicatorOpacity:Kl,lassoStrokeColor:Ql,lassoStrokeOpacity:nh,lassoStrokeSize:sh,magnifiedPiles:Kc,navigationMode:Sf,orderer:Ih,pileBackgroundColor:yd,pileBackgroundColorActive:Vd,pileBackgroundColorFocus:Rd,pileBackgroundColorHover:Td,pileBackgroundOpacity:_d,pileBackgroundOpacityActive:Gd,pileBackgroundOpacityFocus:Nd,pileBackgroundOpacityHover:Md,pileBorderColor:$d,pileBorderColorActive:wp,pileBorderColorFocus:fp,pileBorderColorHover:ip,pileBorderOpacity:tp,pileBorderOpacityActive:Sp,pileBorderOpacityFocus:vp,pileBorderOpacityHover:up,pileBorderSize:Pp,pileCellAlignment:kp,pileContextMenuItems:Lp,pileCoverInvert:dc,pileCoverScale:lc,pileItemOffset:Oc,pileItemBrightness:mc,pileItemInvert:xc,pileItemOpacity:Cc,pileOrderItems:Dc,pileItemRotation:Bc,pileItemTint:zc,pileLabel:hg,pileLabelAlign:Ng,pileLabelColor:pg,pileLabelFontSize:Gg,pileLabelHeight:$g,pileLabelStackAlign:Vg,pileLabelSizeTransform:tv,pileLabelText:yg,pileLabelTextColor:Tg,pileLabelTextMapping:_g,pileLabelTextOpacity:Mg,pileLabelTextStyle:Rg,pileOpacity:Jp,piles:fv,pileScale:rg,pileSizeBadge:Up,pileSizeBadgeAlign:Yp,pileVisibilityItems:Wp,previewAggregator:Eh,previewAlignment:kf,previewBackgroundColor:rd,previewBackgroundOpacity:ad,previewBorderColor:hd,previewBorderOpacity:pd,previewItemOffset:Pf,previewOffset:Jf,previewPadding:Lf,previewRenderer:gh,previewScaleToCover:Yf,previewScaling:Uf,previewSpacing:Wf,projector:iv,rowHeight:qh,splittingObjective:el,splittingOptions:ol,splittingType:Zu,showGrid:Cl,showSpatialIndex:xv,tempDepileDirection:ff,tempDepileOneDNum:vf,temporaryDepiledPiles:uf,zoomBounds:uv,zoomScale:ag}),r=function(r,n){return t=n,"RESET"===n.type?r=void 0:"OVERWRITE"===n.type?r=n.payload.newState:"SOFT_OVERWRITE"===n.type&&(r=_e(r,n.payload.newState)),e(r,n)},n=iu(Xt(r));n.lastAction=function(){return t},Object.defineProperty(n,"lastAction",{get:function(){return t}});var i=function(){var t=we(n.getState());return t.version=uu,t},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.version!==uu&&console.warn('The version of the imported state "'.concat(t.version,'" doesn\'t match the library version "').concat(uu,'". Use at your own risk!')),t.version&&delete t.version,e?n.dispatch(bu(t)):n.dispatch(wu(t))},a=function(){n.dispatch(yu())};return Te(Ie("reduxStore",n),Me("lastAction",(function(){return t})),Me("state",n.getState),Pe("dispatch",n.dispatch),Pe("subscribe",n.subscribe))({export:i,import:o,reset:a})},Sv={initPiles:dv,mergePiles:pv,movePiles:gv,scatterPiles:vv,setPiles:yv,setCoverRenderer:wh,setArrangementObjective:Pu,setArrangeOnGrouping:ku,setArrangementOptions:Lu,setArrangementType:Su,setBackgroundColor:hl,setCellAspectRatio:Jh,setCellPadding:rc,setCellSize:ac,setColumns:Yh,setCoverAggregator:Ph,setDepiledPile:of,setDepileMethod:tf,setDimensionalityReducer:yl,setEasing:xf,setFocusedPiles:Gc,setGridColor:_l,setGridOpacity:Tl,setGroupingObjective:Yu,setGroupingOptions:Wu,setGroupingType:Uu,setDarkMode:pl,setPopupBackgroundOpacity:Rl,setItemRenderer:fh,setItems:cv,setItemSize:Lh,setItemSizeRange:Uh,setLassoFillColor:Nl,setLassoFillOpacity:Vl,setLassoShowStartIndicator:Gl,setLassoStartIndicatorOpacity:$l,setLassoStrokeColor:th,setLassoStrokeOpacity:ih,setLassoStrokeSize:uh,setMagnifiedPiles:$c,setNavigationMode:Of,setOrderer:kh,setPileBackgroundColor:bd,setPileBackgroundColorActive:Xd,setPileBackgroundColorFocus:jd,setPileBackgroundColorHover:Ad,setPileBackgroundOpacity:Ed,setPileBackgroundOpacityActive:qd,setPileBackgroundOpacityFocus:Fd,setPileBackgroundOpacityHover:Id,setPileBorderColor:Zd,setPileBorderColorActive:xp,setPileBorderColorFocus:dp,setPileBorderColorHover:op,setPileBorderOpacity:ep,setPileBorderOpacityActive:Op,setPileBorderOpacityFocus:mp,setPileBorderOpacityHover:lp,setPileBorderSize:Cp,setPileCellAlignment:Dp,setPileContextMenuItems:Bp,setPileCoverInvert:pc,setPileCoverScale:hc,setPileItemOffset:Tc,setPileOrderItems:Rc,setPileItemBrightness:yc,setPileItemInvert:_c,setPileItemOpacity:Mc,setPileItemRotation:Nc,setPileItemTint:Vc,setPileLabel:cg,setPileLabelAlign:Fg,setPileLabelColor:gg,setPileLabelFontSize:qg,setPileLabelHeight:Zg,setPileLabelStackAlign:Xg,setPileLabelSizeTransform:ev,setPileLabelText:bg,setPileLabelTextColor:Ag,setPileLabelTextMapping:Eg,setPileLabelTextOpacity:Ig,setPileLabelTextStyle:jg,setPileVisibilityItems:Kp,setPileOpacity:Qp,setPileScale:ng,setPileSizeBadge:zp,setPileSizeBadgeAlign:Hp,setPreviewAggregator:Sh,setPreviewAlignment:Df,setPreviewBackgroundColor:nd,setPreviewBackgroundOpacity:sd,setPreviewBorderColor:cd,setPreviewBorderOpacity:gd,setPreviewItemOffset:Cf,setPreviewOffset:Qf,setPreviewPadding:Bf,setPreviewRenderer:vh,setPreviewScaleToCover:Hf,setPreviewScaling:zf,setPreviewSpacing:Kf,setProjector:ov,setRowHeight:Wh,setSplittingObjective:rl,setSplittingOptions:al,setSplittingType:Ju,setShowGrid:Ml,setShowSpatialIndex:_v,setTempDepileDirection:df,setTempDepileOneDNum:mf,setTemporaryDepiledPiles:lf,setZoomBounds:lv,setZoomScale:sg,splitPiles:mv},Ov=65280,Tv=.2,Av=0,Pv=function(t){var e=t.background,r=t.backgroundColor,n=t.backgroundOpacity;return function(t){return be(t,{get backgroundColor(){return e.tint},setBackgroundColor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;e.tint=t},get backgroundOpacity(){return e.alpha},setBackgroundOpacity:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;e.alpha=t},rescaleBackground:function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t.width+t.padding*r,i=t.height+t.padding*r;e.x=-n/2,e.y=-i/2,e.width=n,e.height=i}})}},Cv=function(t){return function(e){var r=t;return be(e,{get padding(){return r},setPadding:function(t){r=Number.isNaN(+t)?+t:r}})}},Mv=function t(e){var r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o.anchor,s=void 0===a?[.5,.5]:a,u=o.backgroundColor,l=void 0===u?Ov:u,h=o.backgroundOpacity,c=void 0===h?Tv:h,f=o.padding,d=void 0===f?Av:f,p=new i["c"],g=new i["j"](i["m"].WHITE),v=Vo(e);v instanceof i["m"]?(r=new i["j"](v),(n=r.anchor).set.apply(n,A(s))):r=v;return p.addChild(g),p.addChild(r),Te(Ie("displayObject",p),Ie("sprite",r),Qo(r),ea(r,v.width,v.height),ra(r,v.width,v.height),Cv(d),Pv({background:g,backgroundColor:l,backgroundOpacity:c}),ta(r),Ae(t))({})};function Iv(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}var kv=Iv;function Dv(t,e){if(null==t)return{};var r,n,i=kv(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var Rv=Dv;function jv(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Lv(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jv(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Bv=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.minX,n=void 0===r?0:r,i=e.minY,o=void 0===i?0:i,a=e.maxX,s=void 0===a?1:a,u=e.maxY,l=void 0===u?1:u,h=Rv(e,["minX","minY","maxX","maxY"]);return Te.apply(void 0,[Ie("minX",n),Ie("minY",o),Ie("maxX",s),Ie("maxY",l),Ie("width",s-n),Ie("height",l-o),Ie("cX",n+(s-n)/2),Ie("cY",o+(l-o)/2)].concat(A(Object.entries(Lv(Lv({},t),h)).map((function(t){var e=j(t,2),r=e[0],n=e[1];return Ie(r,n)})))))({})}},Nv=0,Fv=250,Uv=function(){var t,e,r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.duration,a=void 0===o?Fv:o,s=i.delay,u=void 0===s?Nv:s,l=i.interpolator,h=i.easing,c=void 0===h?Yt:h,f=i.endValue,d=i.getter,p=i.setter,g=i.onDone,v=void 0===g?Ne:g,m=f,y=function(){t=d(),n=null!==t,n||console.warn("Invalid start value for animation: ".concat(t))},b=function(){u?setTimeout(y,u):y()},w=function(){return!!n&&(e||(e=performance.now()),r=performance.now()-e,r>=a?(p(m),!0):(p(l(t,m,c(r/a))),!1))},x=function(t){c=t},_=function(t){m=t};return{get dt(){return r},get duration(){return a},onDone:v,register:b,update:w,updateEndValue:_,setEasing:x}},zv=function(t){var e=t.name,r=t.pubSub,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.duration,o=n.delay,a=n.eps,s=void 0===a?1e-6:a;return function(t){var n,a=function(){return t[e]},u=function(r){t["set".concat(Se(e))](r)};return be(t,g({},"animate".concat(Se(e)),(function(t){var e=Math.abs(t-a());if(e<s)u(t);else{var l=i;n&&(r.publish("cancelAnimation",n),n.dt<n.duration&&(l=n.dt)),n=Uv({delay:o,duration:l,interpolator:Gt,endValue:t,getter:a,setter:u}),r.publish("startAnimation",n)}})))}},Vv=function(t){var e=t.name,r=t.pubSub,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.initialValue,o=n.getter,a=n.setter,s=n.cloner,u=n.transformer,l=n.validator,h=n.duration,c=n.delay;return function(t){return Te(Ce(e,{initialValue:i,getter:o,setter:a,cloner:s,transformer:u,validator:l}),zv({name:e,pubSub:r},{duration:h,delay:c}))(t)}},Xv=function(t){return function(e){return be(e,{destroy:function(){return t.destroy()}})}},Yv=function(){return function(t){return be(t,{moveTo:function(e,r){Number.isNaN(+e)||Number.isNaN(+r)||(t.displayObject.x=e,t.displayObject.y=r)}})}},Hv=function(t){return function(e){return be(e,{pointerOverHandler:function(){t.publish("itemOver",{item:e})},pointerOutHandler:function(){t.publish("itemOut",{item:e})},disableInteractivity:function(){e.displayObject.interactive=!1,e.displayObject.buttonMode=!1,e.displayObject.off("pointerover",e.pointerOverHandler),e.displayObject.off("pointerout",e.pointerOutHandler)},enableInteractivity:function(){e.displayObject.interactive=!0,e.displayObject.buttonMode=!0,e.displayObject.on("pointerover",e.pointerOverHandler),e.displayObject.on("pointerout",e.pointerOutHandler)}})}},Gv=function t(e){var r=e.image,n=e.item,o=e.pubSub,a=new i["c"];a.__pilingjs__item=n;var s=function(t){r=t,a.removeChildren(),a.addChild(r.displayObject)},u=function(){return function(t){return be(t,{replaceImage:s})}},l=function(t){return t.displayObject.addChild(t.image.displayObject),t.enableInteractivity(),t};return l(Te(Ie("displayObject",a),Me("x",(function(){return a.x})),Me("y",(function(){return a.y})),Ie("id",n.id),Me("image",(function(){return r})),Ie("item",n),Vv({name:"opacity",pubSub:o},{getter:function(){return a.alpha},setter:function(t){a.alpha=t}}),Xv(a),Yv(),Hv(o),u(),Ae(t))({}))},qv=3,Wv=Symbol("Normal"),Kv=Symbol("Hover"),$v=Symbol("Focus"),Zv=Symbol("Active"),Jv=new Map;Jv.set(Wv,""),Jv.set(Kv,"Hover"),Jv.set($v,"Focus"),Jv.set(Zv,"Active");var Qv=function(t){switch(t){case"left":return 0;case"right":return 1;default:return.5}},tm=function(t){switch(t){case"top":return 0;case"bottom":return 1;default:return.5}},em=function(t){var e,r,n,o,a,s,u,l,h,c,f,d,p=t.render,g=t.id,v=t.pubSub,m=t.store,y=t.badgeFactory,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},w=b.x,x=void 0===w?0:w,_=b.y,E=void 0===_?0:_,S=[],O=new Map,T=new Map,P=new Map,C=new Map,M=new Set,I=new i["c"],k=new i["e"],D=new i["c"],R=new i["c"],L=new i["c"],B=new i["c"],N=new i["c"],F=new i["c"],U=new i["c"],z=new i["c"],V=Bv({id:g}),X=V(),Y=V(),H=!1,G=!1,q=!1,W=!1,K=!1,$=-1,Z=[0,0],J=Wv,Q=1,tt=1,et=1,rt=[],nt=function(){s&&s.destroy(),I.destroy(),rt.forEach((function(t){v.unsubscribe(t)}))},it=function(t){var r=Ii(t.item.image.displayObject);return e?(r.x=N.x,r.y=N.y):(r.x=t.displayObject.x,r.y=t.displayObject.y),r.angle=t.displayObject.angle,r},ot=function(t){var e=t.item;if(H&&!I.isDragging){var r=it(e);if(F.addChild(r),N.visible=!1,he(e)){var n=m.state,i=n.previewBorderColor,o=n.previewBorderOpacity,a=n.items,s=S.indexOf(e),u=to(i,a[e.id],s),l=to(o,a[e.id],s);e.image.setBackgroundColor(st(u)),e.image.setBackgroundOpacity(l),e.image.rescaleBackground(!0),z.addChild(e.displayObject)}p()}},at=function(){var t=m.state,e=t.pileBackgroundColor,r=t.piles,n=t.darkMode,i=eo(e,r[g]);return null!==i?i:n?so:uo},st=function(t){return null!==t?t:m.state.darkMode?uo:so},ut=function(t){var e=t.item;if(H){N.visible=!0;while(F.children.length)F.removeChildAt(0);if(he(e)){var r=m.state,n=r.previewBackgroundColor,i=r.previewBackgroundOpacity,o=r.pileBackgroundOpacity,a=r.items,s=r.piles,u=S.indexOf(e),l=at(),h=n===go?l:to(n,a[e.id],u),c=i===go?eo(o,s[g]):to(i,a[e.id],u);e.image.setBackgroundColor(h),e.image.setBackgroundOpacity(c),B.addChild(e.displayObject)}p()}},lt={drawCall:-1},ht=0,ct=function(){if(lt.drawCall===ht)return lt;var t=k.getBounds(),e=D.getBounds();return lt={drawCall:ht,x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height},lt},ft=function(){if(!q){var t=m.state,e=t.darkMode,r=t.piles,n=t.pileSizeBadgeAlign,i=Jt(n)?n(r[g]):n,o=j(i,2),u=o[0],l=o[1],h=Qv(l),c=tm(u),f=S.length,d=f!==a,v=s;if(d&&(v=y.create(f,{darkMode:e}),void 0!==a&&(I.removeChild(s.displayObject),s.destroy())),L.children.length||N.children.length){var b=ct();v.displayObject.x=b.x-gt+(b.width+2*gt)*h,v.displayObject.y=b.y-gt+(b.height+2*gt)*c,d&&I.addChild(v.displayObject),s=v,a=f,p()}}},dt=!1,pt=function(t){dt=t,dt?ft():s&&(I.removeChild(s.displayObject),s.destroy(),a=void 0)},gt=0,vt=function(t){gt=+t,r?(bt(),r.then((function(){bt()}))):bt()},mt=function(){switch(J){case Kv:case $v:return gt||1;case Zv:return gt||2;case Wv:default:return gt}},yt=function(){var t=m.state,e=t.pileBackgroundOpacityHover,r=t.piles,n=eo(m.state["pileBackgroundOpacity".concat(Jv.get(J)||"")],r[g]);return null===n&&(n=eo(e,r[g])),n},bt=function t(){++ht;var e=mt(),r=yt();if(e||r)if(q)Ft.set("drawBorder",(function(){t()}));else{k.clear();var n=ct(),i=m.state,o=Math.ceil(e/2),a=eo(i["pileBackgroundColor".concat(Jv.get(J)||"")],i.piles[g]);null===a&&(a=at()),k.beginFill(a,r),k.drawRect(n.x-o,n.y-o,n.width+2*o,n.height+2*o),k.endFill();var s=i["pileBorderColor".concat(Jv.get(J)||"")],u=eo(i["pileBorderOpacity".concat(Jv.get(J)||"")],i.piles[g]);s=Jt(s)?ki(s(i.piles[g]))[0]:s,k.lineStyle(e,s,u),k.drawRect(n.x-o,n.y-o,n.width+2*o,n.height+2*o),dt&&ft(),p()}else k.clear()},wt=function(){J=Wv,bt()},xt=function(){J!==Kv&&(J=Kv,bt())},_t=function(){J!==$v&&(J=$v,bt())},Et=function(){J!==Zv&&(J=Zv,bt())},St=!1,Ot=function(t){St=!0,v.publish("pileEnter",{target:m.state.piles[g],event:t}),H?G?Et():_t():xt(),n||(n=v.subscribe("itemOver",ot),rt.push(n)),o||(o=v.subscribe("itemOut",ut),rt.push(o))},Tt=function(t){I.isDragging||(St=!1,v.publish("pileLeave",{target:m.state.piles[g],event:t}),H||wt(),n&&(v.unsubscribe(n),n=void 0),o&&(v.unsubscribe(o),o=void 0),F.removeChildren(),p())},At=function(t){2!==t.data.button&&(I.draggingMouseOffset=[t.data.getLocalPosition(I.parent).x-I.x,t.data.getLocalPosition(I.parent).y-I.y],I.alpha=1,I.isDragging=!0,I.beforeDragX=I.x,I.beforeDragY=I.y,u=!1,v.publish("pileDragStart",{target:m.state.piles[g],event:t}))},Pt=function(t){2!==t.data.button&&I.isDragging&&(I.alpha=1,I.isDragging=!1,I.draggingMouseOffset=null,u&&v.publish("pileDragEnd",{target:m.state.piles[g],event:t}))},Ct=function(t){if(2!==t.data.button&&I.isDragging){u=!0,v.publish("pileDragMove",{target:m.state.piles[g],event:t});var e=t.data.getLocalPosition(I.parent),r=e.x,n=e.y;r-=I.draggingMouseOffset[0],n-=I.draggingMouseOffset[1];var i=mt();i%2===1&&(r=Math.floor(r)+.5,n=Math.floor(n)+.5),K?c.updateEndValue([r,n]):(I.x=r,I.y=n),G?Et():xt(),p()}},Mt=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,o=0,a=0;if(r){if(!N.children.length)return Y;t=N.getBounds(!i)}else if(t=L.getBounds(!i),S.length>1){var s=S[0].displayObject.getBounds(!i);o=t.x-s.x,a=t.y-s.y}return V({localXOffset:o,localYOffset:a,minX:t.x-e,minY:t.y-n,maxX:t.x+t.width-e,maxY:t.y+t.height-n})},It=function(t,e,r){Y=Mt(t,e,r)},kt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,n=R.getBounds(!r);return V({minX:n.x-t,minY:n.y-e,maxX:n.x+n.width-t,maxY:n.y+n.height-e})},Dt=function(t,e,r){X=kt(t,e,r)},Rt=function(t,e,r){It(t,e,r),Dt(t,e,r)},jt=function(){return I.alpha},Lt=function(t){I.alpha=t},Bt=function(t){var e=Math.abs(t-jt());if(e<.01)Lt(t);else{var r=250*Ht(e);l&&(v.publish("cancelAnimation",l),l.dt<l.duration&&(r=l.dt)),l=Uv({duration:r,delay:0,interpolator:Gt,endValue:t,getter:jt,setter:Lt}),v.publish("startAnimation",l)}},Nt=function(t){L.visible=t,B.visible=t},Ft=new Map,Ut=function(t,e,r,n,i,o){var a=t.tmpTargetScale||t.scale.x;t.tmpTargetScale=void 0,delete t.tmpTargetScale;var s=Uv({duration:250,interpolator:qt,endValue:[e,r,a,n],getter:function(){return[t.x,t.y,t.scale.x,t.angle]},setter:function(e){t.x=e[0],t.y=e[1],t.scale.x=e[2],t.scale.y=e[2],t.angle=e[3]},onDone:function(){t.tmpTargetScale=void 0,o&&(q=!1,bt(),Ae(),Ft.forEach((function(t){t()})),Ft.clear(),v.publish("updatePileBounds",{id:g}),Pe&&Me())}});i.add(s)},zt=function(t){var e=new Map;t.forEach((function(t,r){e.set(t.toString(),r)}));var r=function(t){return function(r,n){var i=t.get(r),o=t.get(n);return e.get(i)-e.get(o)}};L.children.sort(r(P)),B.children.sort(r(C)),S.sort((function(t,r){return e.get(t.id)-e.get(r.id)}))},Vt=function(t,e){var n=m.state,i=n.piles,o=n.previewScaleToCover,a=i[g],s=Jt(o)?o(a):o,u=j(s,2),l=u[0],h=u[1],c=function(e){if(!0===l){var r=e.width/t.width;t.scale.x*=r,"auto"===h&&(t.scale.y*=r)}else if(!0===h){var n=e.height/t.height;t.scale.y*=n,"auto"===l&&(t.scale.x*=n)}else!0===l&&!0===h&&(t.scale.x*=e.width/t.width,t.scale.y*=e.height/t.height)};e?c(e):r?r.then(c):c(ct())},Xt=function(t){var e=m.state,n=e.piles,i=e.previewAlignment,o=e.previewItemOffset,a=e.previewOffset,s=e.previewSpacing,u=n[g];r.then((function(e){var r=Jt(i)?i(u):i,n=Jt(a)?a(u):a,l=Jt(s)?s(u):s;n=null!==n?n:l/2;var h=l/2,c=e.width/2,f=e.height/2;q=B.children.length>0;var d=[0,0],p=[0,0];B.children.forEach((function(i,a){var s,l=i.__pilingjs__item,g=m.state.items[l.id];if(Vt(i,e),Jt(o))s=o(g,a,u),s[0]=s[0]*e.scaleFactor-c,s[1]=s[1]*e.scaleFactor-f;else{switch(r){case"left":s=[(0===a)*(-c-n)+d[0]-p[0]/2-i.width/2-h,0];break;case"right":s=[(0===a)*(c+n)+d[0]+p[0]/2+i.width/2+h,0];break;case"bottom":s=[0,(0===a)*(f+n)+d[1]+p[1]/2+i.height/2+h];break;default:case"top":s=[0,(0===a)*(-f-n)+d[1]-p[1]/2-i.height/2-h];break}d=A(s),p=[i.width,i.height]}l.preview.setBackgroundOpacity(0),Ut(i,s[0],s[1],0,t,a===B.children.length-1)}))}))},Yt=function(t,e){var n=e.all,i=void 0!==n&&n,o=m.state,a=o.piles,s=o.pileItemOffset,u=o.pileItemRotation,l=a[g];if(r&&B.children.length)Xt(t);else if(L.children.length>1)if(i)q=!0,L.children.forEach((function(e,r){var n=e.__pilingjs__item,i=O.get(n.id),o=m.state.items[n.id],a=S.indexOf(i),h=Jt(s)?s(o,a,l):s.map((function(t){return t*a})),c=Jt(u)?u(o,a,l):u;Ut(e,h[0],h[1],c,t,r===L.children.length-1)}));else if(M.size){q=!0;var h=0;M.forEach((function(e){h++;var r=e.item,n=e.displayObject,i=$t();if(n.tmpTargetScale=n.scale.x,!Number.isNaN(+r.tmpRelScale)){var o=r.tmpRelScale/i;n.scale.x*=o,n.scale.y=n.scale.x,delete r.tmpRelScale}Number.isNaN(+r.tmpAbsX)||Number.isNaN(+r.tmpAbsY)||(e.moveTo((e.x+r.tmpAbsX-I.x)/i,(e.y+r.tmpAbsY-I.y)/i),delete r.tmpAbsX,delete r.tmpAbsY);var a=m.state.items[r.id],c=S.indexOf(e),f=Jt(s)?s(a,c,l):s.map((function(t){return t*c})),d=Jt(u)?u(a,c,l):u;Ut(n,f[0],f[1],d,t,h===M.size)}))}else Pe&&Me();else Pe&&Me();M.clear()},Wt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q;D.scale.x=t*tt,D.scale.y=t*tt},$t=function(){return D.scale.x/tt},Zt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.isMagnification,n=void 0!==r&&r;n||(Q=t),Wt(t)},Qt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.isMagnification,n=void 0!==r&&r,i=e.onDone,o=void 0===i?Ne:i,a=Kt($t(),t*tt,9),s=function(){bt(),Ae(),a||v.publish("updatePileBounds",{id:g,forceUpdate:!0}),o()},u=function(){Zt(t,{isMagnification:n}),s()};if(Kt($t(),t*tt,3))u();else{n||(Q=t);var l=Math.max(X.width,X.height),c=Math.abs(t/$t()*l-l);if(c<2)u();else{W=!0;var f=250*Ht(Math.min(c,50)/50);h&&(v.publish("cancelAnimation",h),h.dt<h.duration&&(f=h.dt)),h=Uv({duration:f,delay:0,interpolator:Gt,endValue:t,getter:$t,setter:function(t){Zt(t,{isMagnification:n}),bt()},onDone:function(){W=!1,Ft.forEach((function(t){return t()})),Ft.clear(),s()}}),v.publish("startAnimation",h)}}},te=function(t){var e=Math.log(Math.abs(t)+1),r=-Math.sign(t)*e,n=$t(),i=Math.min(Math.max(1,n*(1+.075*r)),Q*qv);return et=i/Q,Zt(i,{isMagnification:!0}),n!==i},ee=function(){et=qv,Qt(Q*qv,{isMagnification:!0})},re=function(){et=1,Qt(Q,{isMagnification:!0})},ne=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.easing,i=r.onDone,o=void 0===i?Ne:i,a=De(t,e,I.x,I.y);if(a<3)return ae(t,e),a>ao&&v.publish("updatePileBounds",{id:g}),o(),null;K=!0;var s=250*Ht(Math.min(a,250)/250);return c&&(v.publish("cancelAnimation",c),c.dt<c.duration&&(s=c.dt)),Uv({duration:s,delay:0,easing:n,interpolator:qt,endValue:[t,e],getter:function(){return[I.x,I.y]},setter:function(t){return ae(t[0],t[1])},onDone:function(){K=!1,v.publish("updatePileBounds",{id:g}),o()}})},ie=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.easing,i=r.onDone,o=void 0===i?Ne:i;return new Promise((function(r){var i=function(){r(m.state.piles[g]),je(),o()};Re(),c=ne(t,e,{easing:n,onDone:i}),c&&v.publish("startAnimation",c)}))},oe=function(){var t=S[0].item.image;t.scaleFactor!==$&&($=t.scaleFactor,Z=t.center)},ae=function(t,e){return I.x=Math.round(t),I.y=Math.round(e),Math.hypot(I.x-t,I.y-e)>ao},se=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!==t){var e=ue(t);if(le(e)){var r=e.item.image;e.replaceImage(r)}else if(he(e)){var n=e.item.preview;n?e.replaceImage(n):fe(e.item)}}else O.forEach((function(t){t.replaceImage(t.item.image)})),T.forEach((function(t){t.item.preview?t.replaceImage(t.item.preview):fe(t.item)}))},ue=function(t){return O.get(t)||T.get(t)},le=function(t){return O.has(t.id)},he=function(t){return T.has(t.id)},ce=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.asPreview,n=void 0===r?null:r;return!1===n?le(t):!0===n?he(t):le(t)||he(t)},fe=function(t){if(!ce(t,{asPreview:!1})){var e=ue(t.id),r=Gv({image:t.image,item:t,pubSub:v}),n=S.indexOf(e);S.splice(n,1,r),C["delete"](T.get(t.id).displayObject),P.set(r.displayObject,t.id),T["delete"](t.id),O.set(t.id,r),B.removeChildAt(B.getChildIndex(e.displayObject)),L.addChild(r.displayObject)}},de=function(t){if(!ce(t,{asPreview:!0})&&t.preview){var e=ue(t.id),r=Gv({image:t.preview,item:t,pubSub:v}),n=S.indexOf(e);S.splice(n,1,r),P["delete"](O.get(t.id).displayObject),C.set(r.displayObject,t.id),O["delete"](t.id),T.set(t.id,r),L.removeChildAt(L.getChildIndex(e.displayObject)),Vt(r.displayObject),B.addChild(r.displayObject)}},pe=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.asPreview,n=void 0!==r&&r;!0===n?de(t):fe(t)},ge=function(t){var e=Gv({image:t.image,item:t,pubSub:v}),r=S.push(e);r>1&&M.add(e),O.set(e.id,e),P.set(e.displayObject,e.id),L.addChild(e.displayObject)},ve=function(t){if(t.preview){var e=Gv({image:t.preview,item:t,pubSub:v});S.push(e),M.add(e),T.set(e.id,e),C.set(e.displayObject,e.id),Vt(e.displayObject),B.addChild(e.displayObject)}},me=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.asPreview,n=void 0!==r&&r;ce(t)?ce(t,{asPreview:!n})&&pe(t,{asPreview:n}):(n?ve(t):ge(t),1===S.length&&oe())},ye=function(t){var e=ue(t.id),r=S.indexOf(e);r>=0&&S.splice(r,1),ce(t,{asPreview:!1})&&(L.removeChildAt(L.getChildIndex(e.displayObject)),P["delete"](e.displayObject)),ce(t,{asPreview:!0})&&(B.removeChildAt(B.getChildIndex(e.displayObject)),C["delete"](e.displayObject)),O["delete"](t.id),T["delete"](t.id)},be=function(){L.removeChildren(),B.removeChildren(),S.splice(0,S.length),O.clear(),T.clear(),P.clear(),C.clear()},we=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.asPreview,n=void 0!==r&&r,i=e.shouldDrawPlaceholder,o=void 0!==i&&i;o&&Ce();var a=Le(O,T);t.forEach((function(t){ce(t)?(a["delete"](t.id),pe(t,{asPreview:n})):me(t,{asPreview:n})})),a.forEach((function(t){ye(t)}))},xe=function(t){t?(r=t,r.then((function(t){e=t;while(N.children.length)N.removeChildAt(0);N.addChild(e.displayObject),v.publish("updatePileBounds",{id:g,forceUpdate:!0}),bt()}))):_e()},_e=function(){if(e){while(N.children.length)N.removeChildAt(0);e=void 0,r=void 0}},Ee=[],Se=[],Oe=[],Te=[],Ae=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Se,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oe,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Te;if(t.length){if(Ee=t,Se=e,Oe=r,Te=n,!q&&!W){f?(f.clear(),f.removeChildren()):(f=new i["e"],I.addChild(f));var o=m.state,a=o.pileLabelHeight,s=o.pileLabelAlign,u=o.pileLabelFontSize,l=o.pileLabelStackAlign,h=o.pileLabelText,c=o.pileLabelTextOpacity,d=o.piles,v=eo(s,d[g]),y=eo(u,d[g]),b=eo(l,d[g]),w=eo(a,d[g]),x=ct(),_=Jt(h)?h(d[g]):h,E=x.width/t.length,S=Oe.length?Math.max(_*(y+1),w):w,O="top"===v?x.y-S:x.y+x.height,T=1+-2*(O<0);if(t.forEach((function(t,r){var i,o,a=O+T,s=S;switch(b){case"vertical":E=x.width*n[r],o=-x.width/2,a+=(s+1)*r*T;break;case"horizontal":default:o=E*r-x.width/2,s=S*n[r],"top"===v&&(a+=S-s);break}var u=e[r];(i=f).beginFill.apply(i,A(u)),f.drawRect(o,a,E,s),f.endFill()})),_){var P=x.width/Oe.length;Oe.forEach((function(t,e){var r=new i["j"](t);switch(r.y=O+T,b){case"vertical":r.anchor.set(0,0),r.x=-x.width/2+2,r.y+=(S+1)*e*T;break;case"horizontal":default:r.anchor.set(.5,0),r.x=P*e-x.width/2+P/2;break}r.width/=2*window.devicePixelRatio,r.height/=2*window.devicePixelRatio,r.alpha=c,f.addChild(r)}))}p()}}else f&&(Ee=[],Se=[],Oe=[],f.clear(),f.removeChildren(),p())},Pe=!1,Ce=function(){d||(d=new i["e"],D.addChild(d));var t=Y.width/Q/tt,e=Y.height/Q/tt,r=t/12,n=m.state.darkMode?16777215:0;d.lineStyle(0).beginFill(n,1).drawCircle(-t/4,0,r).drawCircle(0,0,r).drawCircle(t/4,0,r).endFill(),d.beginFill(n,.1).drawRect(-t/2,-e/2,t,e).endFill(),Pe=!0,p()},Me=function(){d.clear(),Pe=!1,p()},Ie=function(t){tt=t,Wt()},ke=!1,Re=function(){ke&&(S.forEach((function(t){return t.disableInteractivity()})),I.interactive=!1,I.buttonMode=!1,U.interactive=!1,I.off("pointerover",Ot).off("pointerout",Tt).off("pointerdown",At).off("pointerup",Pt).off("pointerupoutside",Pt).off("pointermove",Ct),ke=!1)},je=function(){ke||(S.forEach((function(t){return t.enableInteractivity()})),I.interactive=!0,I.buttonMode=!0,U.interactive=!0,I.on("pointerover",Ot).on("pointerout",Tt).on("pointerdown",At).on("pointerup",Pt).on("pointerupoutside",Pt).on("pointermove",Ct),ke=!0)},Be=function(){I.addChild(R),R.addChild(k),R.addChild(D),D.addChild(L),D.addChild(B),D.addChild(N),D.addChild(F),D.addChild(U),D.addChild(z),I.x=x,I.y=E,je()};return Be(),{get anchorBox(){return Y},get baseScale(){return Q},get bBox(){return X},get cover(){return e},get graphics(){return I},get contentContainer(){return D},get height(){return R.height},get isFocus(){return H},set isFocus(t){H=!!t},get isHover(){return St},get isInteractive(){return ke},get isMagnified(){return et>1},get isTempDepiled(){return G},set isTempDepiled(t){G=!!t},get normalItemContainer(){return L},get offset(){return[(Z[0]-Y.localXOffset)*Q,(Z[1]-Y.localYOffset)*Q]},get previewItemContainer(){return B},get items(){return[].concat(S)},get magnification(){return et},get size(){return S.length},get tempDepileContainer(){return U},get width(){return R.width},get x(){return I.x},get y(){return I.y},id:g,animateMoveTo:ie,animateOpacity:Bt,animateScale:Qt,blur:wt,disableInteractivity:Re,enableInteractivity:je,hover:xt,focus:_t,active:Et,addItem:me,animatePositionItems:Ut,calcBBox:kt,destroy:nt,drawBorder:bt,drawPlaceholder:Ce,drawSizeBadge:ft,getMoveToTweener:ne,getItemById:ue,hasItem:ce,magnifyByWheel:te,magnify:ee,moveTo:ae,positionItems:Yt,removeAllItems:be,removePlaceholder:Me,setBorderSize:vt,setItems:we,drawLabel:Ae,setCover:xe,setScale:Zt,setOpacity:Lt,setVisibilityItems:Nt,setItemOrder:zt,setZoomScale:Ie,showSizeBadge:pt,updateBounds:Rt,updateOffset:oe,replaceItemsImage:se,unmagnify:re}},rm=1e-6,nm=1,im=0;function om(t,e,r){var n=r[0],i=r[1];if(Math.abs(e)<rm)return t<0;var o=t/e;if(e>0){if(o>i)return 0;o>n&&(r[0]=o)}else{if(o<n)return 0;o<i&&(r[1]=o)}return 1}function am(t,e,r,n,i){var o=t[0],a=t[1],s=e[0],u=e[1],l=s-o,h=u-a;if(void 0===n||void 0===i?(n=t,i=e):(n[0]=t[0],n[1]=t[1],i[0]=e[0],i[1]=e[1]),Math.abs(l)<rm&&Math.abs(h)<rm&&o>=r[0]&&o<=r[2]&&a>=r[1]&&a<=r[3])return nm;var c=[0,1];if(om(r[0]-o,l,c)&&om(o-r[2],-l,c)&&om(r[1]-a,h,c)&&om(a-r[3],-h,c)){var f=c[0],d=c[1];return d<1&&(i[0]=o+d*l,i[1]=a+d*h),f>0&&(n[0]+=f*l,n[1]+=f*h),nm}return im}function sm(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function um(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sm(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sm(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var lm=function(t){var e=t.width,r=t.height,n=t.orderer,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.cellSize,a=void 0===o?null:o,s=i.columns,u=void 0===s?10:s,l=i.rowHeight,h=void 0===l?null:l,c=i.cellAspectRatio,f=void 0===c?1:c,d=i.pileCellAlignment,p=void 0===d?"topLeft":d,g=i.cellPadding,v=void 0===g?0:g,m=u;+a||+u||(m=10);var y=e/m,b=y-2*v,w=null;+a&&(y=a+2*v,m=Math.floor(e/y),b=a),+h?f=y/h:(+f||(f=1),h=y/f),w=h-2*v;var x=y/2,_=h/2,E=te([x,_]),S=Math.ceil(r/h),O=function(t,e){return t*m+e},T=n(m),P=function(t,e){return[Math.floor(e/h),Math.floor(t/y)]},C=function(t,e,r,n,i){var o=t*h+v,a=e*y+v;if(!r||!n)return[a,o];switch(a+=i[0],o+=i[1],p){case"topRight":return[a+b-r,o];case"bottomLeft":return[a,o+w-n];case"bottomRight":return[a+b-r,o+w-n];case"center":return[a+(b-r)/2,o+(w-n)/2];case"topLeft":default:return[a,o]}},M=function(t,e,r,n){return C.apply(void 0,A(T(t)).concat([e,r,n]))},I=function(t,n){return[t*e,n*r]},k=function(t){var e="minX",r="minY";switch(p){case"topRight":e="maxX";break;case"bottomLeft":r="maxY";break;case"bottomRight":e="maxX",r="maxY";break;case"center":e="cX",r="cY";break}return[t.anchorBox[e],t.anchorBox[r]]},D=function(t){var e=[],r=[],n=new Map;t.forEach((function(t){var e=k(t),r=j(e,2),i=r[0],o=r[1];n.set(t.id,um(um({id:t.id},t.anchorBox),{},{x:i,y:o,offset:t.offset}))}));var i=function(t){var n,i,o=(t.minY+1)/h,a=(t.minX+1)/y,s=(t.maxY-1)/h,u=(t.maxX-1)/y;switch(p){case"topRight":i=Math.floor(u);break;case"bottomLeft":n=Math.floor(s);break;case"bottomRight":n=Math.floor(s),i=Math.floor(u);break;case"center":n=Math.floor(o+(s-o)/2),i=Math.floor(a+(u-a)/2);break;case"topLeft":default:n=Math.floor(o),i=Math.floor(a);break}var l=O(n,i);return e[l]||(e[l]=new Set),1===e[l].size&&r.push(l),e[l].add(t.id),[n,i]};n.forEach((function(t){var e=i(t),r=j(e,2),o=r[0],a=r[1];n.set(t.id,um(um({},t),{},{i:o,j:a}))}));var o=function(){var t=r.shift(),o=C.apply(void 0,A(T(t))),a=[o[0],o[1],o[0]+y,o[1]+h];o[0]+=x,o[1]+=_;var s=new Set(e[t]),u=ke,l=t-m,c=l<0||e[l]&&e[l].size,f=t-1,d=f<0||t%m===0||e[f]&&e[f].size,p=t+1,g=p%m===0||e[p]&&e[p].size,v=function(t){return t},b=function(t){return t};c&&(o[1]-=_,b=function(t){return Math.max(0,t)}),d&&(o[0]-=x,v=function(t){return Math.max(0,t)}),g&&(o[0]+=x,v=d?function(){return 0}:function(t){return Math.min(0,t)}),d&&g&&(b=function(){return c?1:-1},c&&(u=function(t,e,r,n){return Math.abs(e-n)})),c&&d&&g&&(b=function(){return c?1:-1});var w=1/0,S=void 0;s.forEach((function(t){var e=n.get(t),r=u(e.x,e.y,o[0],o[1]);r<w&&(S=t,w=r)})),s.forEach((function(r){r!==S&&e[t]["delete"](r)})),s.forEach((function(t){if(t!==S){var e=n.get(t),r=[e.x-n.get(S).x,e.y-n.get(S).y];r[0]+=(Math.sign(r[0])||1)*Math.random(),r[1]+=(Math.sign(r[1])||1)*Math.random(),r=le([v(r[0]),b(r[1])]);var o=[e.x+E*r[0],e.y+E*r[1]],s=[].concat(o);am([e.x,e.y],s,a),s[0]+=.1*Math.sign(r[0]),s[1]+=.1*Math.sign(r[1]);var u=s[0]-e.x,l=s[1]-e.y;e.minX+=u,e.minY+=l,e.maxX+=u,e.maxY+=l,e.cX+=u,e.cY+=l,e.x+=u,e.y+=l;var h=i(e),c=j(h,2),f=c[0],d=c[1];n.set(t,um(um({},e),{},{i:f,j:d}))}}))};while(r.length)o();return Array.from(n.entries(),(function(t){var e=j(t,2),r=e[0],i=e[1],o=i.i,a=i.j,s=C(o,a,n.get(r).width,n.get(r).height,n.get(r).offset),u=j(s,2),l=u[0],h=u[1];return{id:r,x:l,y:h}}))};return{get numRows(){return S},set numRows(t){Number.isNaN(+t)||(S=t)},numColumns:m,columnWidth:y,rowHeight:h,cellWidth:b,cellHeight:w,cellAspectRatio:f,cellPadding:v,width:e,height:r,align:D,getPilePosByCellAlignment:k,ijToXy:C,ijToIdx:O,idxToIj:T,idxToXy:M,uvToXy:I,xyToIj:P}},hm=function t(e){var r=e.id,n=e.image,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.preview,a=void 0===o?null:o,s=i.originalPosition,u=void 0===s?[0,0]:s,l=function(){return function(t){return be(t,{destroy:function(){n&&n.destroy(),a&&a.destroy()}})}},h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.destroy(),n=t,a&&(a.destroy(),a=null),a=e},c=function(){return function(t){return be(t,{replaceImage:h})}};return Te(Ie("id",r),Me("image",(function(){return n})),Me("preview",(function(){return a})),Ce("originalPosition",{initialValue:u,cloner:function(t){return A(t)}}),l(),c(),Ae(t))({})},cm=s((function(t,e){function r(t,e){const r=RegExp(t,"g");return t=>{if("string"!==typeof t)throw new TypeError("expected an argument of type string, but got ".concat(typeof styleObj));return t.match(r)?t.replace(r,e):t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=r;e["default"]=n})),fm=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.snakeToKebab=e.camelToKebab=void 0;var r=n(cm);function n(t){return t&&t.__esModule?t:{default:t}}const i=(0,r["default"])(/[A-Z]/,t=>"-".concat(t.toLowerCase()));e.camelToKebab=i;const o=(0,r["default"])(/_/,()=>"-");e.snakeToKebab=o})),dm=s((function(t,e){function r(t,e=fm.camelToKebab){if(!t||"object"!==typeof t||Array.isArray(t))throw new TypeError("expected an argument of type object, but got ".concat(typeof t));const r=Object.keys(t).map(r=>"".concat(e(r),": ").concat(t[r],";"));return r.join("\n")}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=r;e["default"]=n})),pm=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"createParser",{enumerable:!0,get:function(){return n["default"]}}),e.parsers=e["default"]=void 0;var r=a(dm),n=a(cm),i=o(fm);function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e["default"]=t,e}function a(t){return t&&t.__esModule?t:{default:t}}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){u(t,e,r[e])}))}return t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}e.parsers=i;var l=r["default"];e["default"]=l,t.exports=r["default"],t.exports.createParser=n["default"],t.exports.parsers=s({},i)})),gm=a(pm),vm={position:"absolute",zIndex:2,display:"none"},mm={listStyle:"none",padding:0,margin:0,borderRadius:"0.25rem",backgroundColor:"white",boxShadow:"0 0 0 1px rgba(0, 0, 0, 0.25), 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 2px 6px 0 rgba(0, 0, 0, 0.075)"},ym={width:"100%",height:"1.5rem",margin:0,padding:"0.25rem 0.5rem",fontSize:"0.85rem",color:"black",border:"none",backgroundColor:"transparent",cursor:"pointer",outline:"none",whiteSpace:"nowrap"},bm={backgroundColor:"#ff7ff6"},wm={backgroundColor:"#dd33ff"},xm={cursor:"default",opacity:.3,backgroundColor:"transparent !important"},_m={borderRadius:"0.25rem 0.25rem 0 0"},Em={borderRadius:"0 0 0.25rem 0.25rem"},Sm={root:vm,ul:mm,button:ym,"button:hover":bm,"button:active":wm,"button.inactive":xm,"li:first-child > button":_m,"li:last-child > button":Em},Om='<ul id="piling-js-context-menu-list">\n  <li>\n    <button id="depile-button">Depile</button>\n  </li>\n  <li>\n    <button id="temp-depile-button">Temp. Depile</button>\n  </li>\n  <li>\n    <button id="browse-separately">Browse Separately</button>\n  </li>\n  <li>\n    <button id="grid-button">Show Grid</button>\n  </li>\n  <li>\n    <button id="align-button">Align by Grid</button>\n  </li>\n  <li>\n    <button id="magnify-button">Magnify</button>\n  </li>\n</ul>',Tm=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.template,r=void 0===e?Om:e,n=t.styles,i=void 0===n?Sm:n,o=t.customItems,a=void 0===o?[]:o,s=document.createElement("nav");s.id="piling-js-context-menu";var u=document.createElement("style");u.setAttribute("type","text/css");var l="";Object.entries(i).forEach((function(t){var e=j(t,2),r=e[0],n=e[1],i="root"===r?"":" ".concat(r);l+="#piling-js-context-menu".concat(i," { ").concat(gm(n)," }\n")})),u.textContent=l,s.appendChild(u),s.insertAdjacentHTML("beforeend",r);var h=s.querySelector("#piling-js-context-menu-list");return a.forEach((function(t,e){var r=document.createElement("li"),n=document.createElement("button");n.textContent=t.label,t.id?n.id=t.id:n.id="piling-js-context-menu-custom-item-".concat(e),r.appendChild(n),h.appendChild(r)})),s},Am=function(){return pe('<svg class="pilingjs-spinner" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg" width="40" height="40">\n  <circle\n    class="pilingjs-spinner-circle"\n    cx="20"\n    cy="20"\n    r="18"\n    stroke-width="4"\n    fill="none"\n    stroke="black" />\n  <g class="pilingjs-spinner-block-offset" transform="translate(20, 20)">\n    <g class="pilingjs-spinner-blocks">\n      <animateTransform\n        attributeName="transform"\n        attributeType="XML"\n        dur="1.5s"\n        from="0"\n        repeatCount="indefinite"\n        to="360"z\n        type="rotate" />\n      <path\n        class="pilingjs-spinner-block-one"\n        d="M0-20c1.104,0,2,0.896,2,2s-0.896,2-2,2V0l-4,21h25v-42H0V-20z"\n        fill="white">\n        <animateTransform\n          attributeName="transform"\n          attributeType="XML"\n          calcMode="spline"\n          dur="1.5s"\n          from="0"\n          values="0; 360"\n          keyTimes="0; 1"\n          keySplines="0.2 0.2 0.15 1"\n          repeatCount="indefinite"\n          to="360"\n          type="rotate" />\n      </path>\n      <path\n        class="pilingjs-spinner-block-two"\n        d="M0-20c-1.104,0-2,0.896-2,2s0.896,2,2,2V0l4,21h-25v-42H0V-20z"\n        fill="white">\n        <animateTransform\n          attributeName="transform"\n          attributeType="XML"\n          calcMode="spline"\n          dur="1.5s"\n          from="0"\n          values="0; 360"\n          keyTimes="0; 1"\n          keySplines="0.1 0.15 0.8 0.8"\n          repeatCount="indefinite"\n          to="360"\n          type="rotate" />\n      </path>\n    </g>\n  </g>\n</svg>\n')},Pm=function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=Am(),n=function(){var t=e?"white":"black",n=e?"black":"white";r.querySelector(".pilingjs-spinner-circle").setAttribute("stroke",t),r.querySelector(".pilingjs-spinner-block-one").setAttribute("fill",n),r.querySelector(".pilingjs-spinner-block-two").setAttribute("fill",n)},i=function(t){var r=t.darkMode,i=void 0===r?null:r;e=Zi(i,e),n()};return n(),Te(Ie("element",r),Ae(t))({set:i})},Cm=qo(),Mm=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.backgroundOpacity,n=void 0===r?yo:r,i=e.isDarkMode,o=void 0===i?co:i,a=n,s=o,u=function(){return s?"black":"white"},l=function(){return s?"white":"black"},c=function(){return s?"rgba(0, 0, 0, ".concat(a,")"):"rgba(255, 255, 255, ".concat(a,")")},f=document.createElement("div");f.className="pilingjs-popup-background",f.style.position="absolute",f.style.top=0,f.style.left=0,f.style.zIndex=-1,f.style.display="flex",f.style.flexDirection="column",f.style.justifyContent="center",f.style.width="100%",f.style.height="0px",f.style.background=c(),f.style.opacity=0,f.style.transition="opacity 250ms ".concat(ho);var p=document.createElement("div");f.className="pilingjs-popup-wrapper",p.style.position="relative",p.style.display="flex",p.style.margin="2rem",p.style.maxHeight="100%",f.appendChild(p);var g=document.createElement("div");f.className="pilingjs-popup-window",g.style.position="relative",g.style.minwidth="4rem",g.style.maxWidth="100%",g.style.maxHeight="100%",g.style.margin="2rem auto",g.style.color=u(),g.style.borderRadius="0.5rem",g.style.background=l(),g.style.transform="scale(0)",g.style.transition="transform 250ms ".concat(ho),p.appendChild(g);var v=document.createElement("div");f.className="pilingjs-popup-content",v.style.position="relative",v.style.display="flex",v.style.flexDirection="column",v.style.alignItems="center",v.style.padding="1rem",v.style.maxHeight="calc(100vh - 4rem)",v.style.overflow="auto",g.appendChild(v);var m=document.createElement("div");f.className="pilingjs-popup-icon",v.appendChild(m);var y=Pm(!s);m.appendChild(y.element);var b=document.createElement("p");b.style.margin="0",v.appendChild(b);var w=!1,x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.text,r=void 0===e?null:e,n=t.showSpinner,i=void 0===n||n;return new Promise((function(t){f.addEventListener(Cm,t,{once:!0}),w=!0,f.style.zIndex=99,f.style.height="100%",f.style.opacity=1,g.style.transform="scale(1)",m.style.display=i?"block":"none",m.style.margin=r?"0 0 0.5rem 0":"0",b.textContent=r}))},_=function(){return new Promise((function(t){w=!1,f.addEventListener(Cm,d(h.mark((function e(){return h.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f.style.zIndex=-1,f.style.height="0px",b.textContent=null,e.next=5,Ve();case 5:t();case 6:case"end":return e.stop()}}),e)}))),{once:!0}),f.style.opacity=0,g.style.transform="scale(0)"}))},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.backgroundOpacity,r=void 0===e?null:e,n=t.darkMode,i=void 0===n?null:n;a=Zi(r,a),s=Zi(i,s),g.style.color=u(),g.style.background=l(),f.style.background=c(),y.set({darkMode:!s})},S=function(){return function(t){return be(t,{close:_,open:x,set:E})}};return Te(Me("isOpen",(function(){return w})),Ie("element",f),S(),Ae(t))({})},Im=document.createElement("style");document.head.appendChild(Im);var km=Im.sheet,Dm=function(t){var e=km.length;return km.insertRule(t,e),e},Rm=function(t){km.deleteRule(t)},jm="".concat(To,"ms ease scaleInFadeOut 0s 1 normal backwards"),Lm=function(t,e){return"\n@keyframes scaleInFadeOut {\n  0% {\n    opacity: ".concat(t,";\n    transform: translate(-50%,-50%) scale(").concat(e,");\n  }\n  10% {\n    opacity: 1;\n    transform: translate(-50%,-50%) scale(1);\n  }\n  100% {\n    opacity: 0;\n    transform: translate(-50%,-50%) scale(0.9);\n  }\n}\n")},Bm=null,Nm="".concat(Ao,"ms ease fadeScaleOut 0s 1 normal backwards"),Fm=function(t,e){return"\n@keyframes fadeScaleOut {\n  0% {\n    opacity: ".concat(t,";\n    transform: translate(-50%,-50%) scale(").concat(e,");\n  }\n  100% {\n    opacity: 0;\n    transform: translate(-50%,-50%) scale(0);\n  }\n}\n")},Um=null,zm=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.fillColor,n=void 0===r?null:r,o=e.fillOpacity,a=void 0===o?bo:o,s=e.isShowStartIndicator,u=void 0===s?wo:s,l=e.isDarkMode,c=void 0===l?co:l,f=e.onDraw,p=void 0===f?Wt:f,g=e.onStart,v=void 0===g?Wt:g,m=e.startIndicatorOpacity,y=void 0===m?xo:m,b=e.strokeColor,w=void 0===b?null:b,x=e.strokeOpacity,_=void 0===x?_o:x,E=e.strokeSize,S=void 0===E?Eo:E,O=n,T=a,P=u,C=c,M=y,I=w,k=_,D=S,R=p,L=v,B=new i["c"],N=new i["c"],F=new i["e"],U=new i["e"];B.addChild(F),N.addChild(U);var z=function(){return O||C?16777215:0},V=function(){return O||C?16777215:0},X=function(){return C?"rgba(255, 255, 255, ".concat(M,")"):"rgba(0, 0, 0, ".concat(M,")")},Y=document.createElement("div");Y.id="lasso-start-indicator",Y.style.position="absolute",Y.style.zIndex=1,Y.style.width="4rem",Y.style.height="4rem",Y.style.borderRadius="4rem",Y.style.opacity=.5,Y.style.transform="translate(-50%,-50%) scale(0)";var H,G=!1,q=!1,W=[],K=[],$=function(){G=!1},Z=function(t){var e=t.target.parentElement;if(e){var r=e.getBoundingClientRect();rt([t.clientX-r.left,t.clientY-r.top])}},J=function(){G=!0,q=!0,st(),L()},Q=function(){nt()};window.addEventListener("mouseup",$);var tt=function(){Y.style.opacity=.5,Y.style.transform="translate(-50%,-50%) scale(0)"},et=function(){var t=getComputedStyle(Y),e=+t.opacity,r=t.transform.match(/([0-9.-]+)+/g),n=r?+r[0]:1;return{opacity:e,scale:n}},rt=function(){var t=d(h.mark((function t(e){var r,n,i,o,a,s;return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=j(e,2),n=r[0],i=r[1],t.next=3,Ye(0);case 3:if(!G){t.next=5;break}return t.abrupt("return");case 5:return o=.5,a=0,P&&(s=et(),o=s.opacity,a=s.scale,Y.style.opacity=o,Y.style.transform="translate(-50%,-50%) scale(".concat(a,")")),Y.style.animation="none",t.next=11,Ve(2);case 11:return Y.style.top="".concat(i,"px"),Y.style.left="".concat(n,"px"),null!==Bm&&Rm(Bm),Bm=Dm(Lm(o,a)),Y.style.animation=jm,t.next=18,Ve();case 18:tt();case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),nt=function(){var t=d(h.mark((function t(){var e,r,n;return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=et(),r=e.opacity,n=e.scale,Y.style.opacity=r,Y.style.transform="translate(-50%,-50%) scale(".concat(n,")"),Y.style.animation="none",t.next=6,Ve(2);case 6:return null!==Um&&Rm(Um),Um=Dm(Fm(r,n)),Y.style.animation=Nm,t.next=11,Ve();case 11:tt();case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),it=function(){F.clear(),U.clear(),W.length&&(F.lineStyle(D,V(),k),F.moveTo.apply(F,A(W[0])),W.forEach((function(t){F.lineTo.apply(F,A(t)),F.moveTo.apply(F,A(t))})),U.beginFill(z(),T),U.drawPolygon(K)),R()},ot=function(t){if(H){var e=De(t[0],t[1],H[0],H[1]);e>So&&(W.push(t),K.push(t[0],t[1]),H=t,W.length>1&&it())}else q||(q=!0,L()),W=[t],K=[t[0],t[1]],H=t},at=Xe(ot,Oo,Oo),st=function(){W=[],K=[],H=void 0,it()},ut=function(){q=!1;var t=A(W);return at.cancel(),st(),t},lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fillColor,r=void 0===e?null:e,n=t.fillOpacity,i=void 0===n?null:n,o=t.onDraw,a=void 0===o?null:o,s=t.onStart,u=void 0===s?null:s,l=t.showStartIndicator,h=void 0===l?null:l,c=t.startIndicatorOpacity,f=void 0===c?null:c,d=t.strokeColor,p=void 0===d?null:d,g=t.strokeOpacity,v=void 0===g?null:g,m=t.strokeSize,y=void 0===m?null:m,b=t.darkMode,w=void 0===b?null:b;O=Zi(r,O),T=Zi(i,T),R=Zi(a,R),L=Zi(u,L),C=Zi(w,C),P=Zi(h,P),M=Zi(f,M),I=Zi(p,I),k=Zi(v,k),D=Zi(y,D),Y.style.background=X(),P?(Y.addEventListener("click",Z),Y.addEventListener("mousedown",J),Y.addEventListener("mouseleave",Q)):(Y.removeEventListener("mousedown",J),Y.removeEventListener("mouseleave",Q))},ht=function(){window.removeEventListener("mouseup",$),Y.removeEventListener("click",Z),Y.removeEventListener("mousedown",J),Y.removeEventListener("mouseleave",Q)},ct=function(){return function(t){return be(t,{clear:st,destroy:ht,end:ut,extend:ot,extendDb:at,set:lt,showStartIndicator:rt})}};return lt({fillColor:O,fillOpacity:T,isShowStartIndicator:P,isDarkMode:C,onDraw:R,onStart:L,startIndicatorOpacity:M,strokeColor:I,strokeOpacity:k,strokeSize:D}),Te(Ie("startIndicator",Y),Ie("fillContainer",N),Ie("lineContainer",B),ct(),Ae(t))({})};function Vm(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Xm(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vm(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vm(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ym(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=Hm(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r["return"]||r["return"]()}finally{if(s)throw o}}}}function Hm(t,e){if(t){if("string"===typeof t)return Gm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gm(t,e):void 0}}function Gm(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var qm=3,Wm=Re(2),Km=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement("div");r.className="pilingjs-scroll-container";var n=document.createElement("div");n.className="pilingjs-scroll-element";var o=document.createElement("canvas");o.className="pilingjs-canvas";var a,s,u,l,c,f=ot(),p=Ev(),v=va(),m=p.state,y=uo,b=new Float32Array(16),w=new Map,x=t.getBoundingClientRect(),_=x.width,E=x.height,S=!1,O=new i["g"]({width:_,height:E,view:o,antialias:!0,transparent:!0,resolution:window.devicePixelRatio,autoDensity:!0,preserveDrawingBuffer:!1,legacy:!1,powerPreference:"high-performance"}),T=!0,P=null,C=!1,M=Promise.resolve(),I=new i["c"],k=new i["c"];I.addChild(k);var D=new i["e"],R=new i["e"],L=new i["j"](i["m"].WHITE);I.addChild(L),k.mask=L;var B=function(t,e){return function(r){if(Jt(r))return[Sv[t](r)];var n=ki(r,null),i=j(n,2),o=i[0],a=i[1],s=[Sv[t](o)];return null!==a&&s.push(Sv[e](a)),s}},N={center:{get:function(){return c.target},set:function(t){c.lookAt(t,c.scaling,c.rotation)},noAction:!0},gridColor:{set:B("setGridColor","setGridOpacity")},items:{get:function(){return Object.values(m.items)},set:function(t){return[Sv.setItems(t),Sv.initPiles(t)]},batchActions:!0},lassoFillColor:{set:B("setLassoFillColor","setLassoFillOpacity")},lassoStrokeColor:{set:B("setLassoStrokeColor","setLassoStrokeOpacity")},layout:{get:function(){return{cellAspectRatio:ct.cellAspectRatio,cellHeight:ct.cellHeight,cellPadding:ct.cellPadding,cellSize:ct.cellSize,cellWidth:ct.cellWidth,columnWidth:ct.columnWidth,height:ct.height,itemSize:ct.itemSize,numColumns:ct.numColumns,numRows:ct.numRows,rowHeight:ct.rowHeight,width:ct.width}}},pileBorderColor:{set:B("setPileBorderColor","setPileBorderOpacity")},pileBorderColorHover:{set:B("setPileBorderColorHover","setPileBorderOpacityHover")},pileBorderColorFocus:{set:B("setPileBorderColorFocus","setPileBorderOpacityFocus")},pileBorderColorActive:{set:B("setPileBorderColorActive","setPileBorderOpacityActive")},pileBackgroundColor:{set:B("setPileBackgroundColor","setPileBackgroundOpacity")},pileBackgroundColorHover:{set:B("setPileBackgroundColorHover","setPileBackgroundOpacityHover")},pileBackgroundColorFocus:{set:B("setPileBackgroundColorFocus","setPileBackgroundOpacityFocus")},pileBackgroundColorActive:{set:B("setPileBackgroundColorActive","setPileBackgroundOpacityActive")},pileLabel:{set:function(t){var e=Hn(t),r=[Sv.setPileLabel(e)];return r}},pileLabelSizeTransform:{set:function(t){var e=Gn(t),r=[Sv.setPileLabelSizeTransform(e)];return r}},pileLabelTextColor:{set:B("setPileLabelTextColor","setPileLabelTextOpacity")},pileSizeBadgeAlign:{set:function(t){return[Sv.setPileSizeBadgeAlign(Jt(t)?t:zo(t))]}},previewBackgroundColor:{set:B("setPreviewBackgroundColor","setPreviewBackgroundOpacity")},previewBorderColor:{set:B("setPreviewBorderColor","setPreviewBorderOpacity")},renderer:{get:function(){return m.itemRenderer},set:function(t){return[Sv.setItemRenderer(t)]}},rowHeight:!0,scale:{get:function(){return c.scaling},set:function(t){c.scale(t,[O.width/2,O.height/2])},noAction:!0}},z=function(t){return N[t]&&N[t].get?N[t].get():void 0!==m[t]?m[t]:void console.warn('Unknown property "'.concat(t,'"'))},V=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=N[t],i=[];if(n?n.set?i=n.set(e):console.warn('Property "'.concat(t,'" is not settable')):void 0!==m[t]?i=[Sv["set".concat(Se(t))](e)]:console.warn('Unknown property "'.concat(t,'"')),r||n&&n.noAction)return i;n&&n.batchActions?p.dispatch(Vt(i)):i.forEach((function(t){return p.dispatch(t)}))},X=function(t,e){"string"===typeof t||t instanceof String?V(t,e):p.dispatch(Vt(Object.entries(t).flatMap((function(t){var e=j(t,2),r=e[0],n=e[1];return V(r,n,!0)}))))},Y=function(){O.render(I),f.publish("render")},H=ut(Y),G=Ci(Y,f),q=new Map,K=new Map,$=new i["c"],Z=new i["c"],Q=new i["j"](i["m"].WHITE);Q.alpha=0;var tt=function(){$.children.length&&(Z.addChild($.getChildAt(0)),$.removeChildren())},et=function(t){tt(),$.addChild(t)},rt=Mm(),nt=!1,it=function(){nt&&(k.interactive=!1,k.interactiveChildren=!1,K.forEach((function(t){t.disableInteractivity()})),nt=!1)},at=function(){nt||(k.interactive=!0,k.interactiveChildren=!0,K.forEach((function(t){t.enableInteractivity()})),nt=!0)},st=!1,lt=!1,ht=zm({onStart:function(){it(),lt=!0,st=!0},onDraw:function(){H()}});k.addChild(D),k.addChild(R),k.addChild(ht.fillContainer),k.addChild(Z),k.addChild(Q),k.addChild($),k.addChild(ht.lineContainer);var ct,ft,dt,pt=new St,gt=function(t,e){if(p.state.showSpatialIndex&&(R.clear(),R.beginFill(65280,.5),pt.all().forEach((function(t){R.drawRect(t.minX,t.minY,t.width,t.height)})),R.endFill(),t&&(R.beginFill(16711680,1),R.drawRect(t[0]-1,t[1]-1,3,3),R.endFill()),e)){R.lineStyle(1,16711680,1),R.moveTo(e[0],e[1]);for(var r=0;r<e.length;r+=2)R.lineTo(e[r],e[r+1]),R.moveTo(e[r],e[r+1])}},vt=function(){pt.clear();var t=[];K&&(K.forEach((function(e){e.updateBounds.apply(e,A(yt()).concat([!0])),t.push(e.bBox)})),pt.load(t),gt())},mt=function(t){var e=K.get(t);pt.remove(e.bBox,(function(t,e){return t.id===e.id})),gt()},yt=function(){return P?c.translation:[0,k.y]},bt=function(t){var e;return(e=K.get(t)).calcBBox.apply(e,A(yt()))},wt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.forceUpdate,n=void 0!==r&&r,i=K.get(t);pt.remove(i.bBox,(function(t,e){return t.id===e.id})),i.updateBounds.apply(i,A(yt()).concat([n])),pt.insert(i.bBox),gt(),f.publish("pileBoundsUpdate",t)},xt=function(t){var e=t.id,r=t.forceUpdate;return wt(e,{forceUpdate:r})},_t=function(){w.forEach((function(t,e){ge(K.get(e),t[0],t[1])})),H()},Et=function(){var t=p.state.zoomScale,e=Jt(t)?t(c.scaling):t;K.forEach((function(t){t.setZoomScale(e),t.drawBorder()})),H()},Ot=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];c.tick(),_t(),Et(),C=!0,t&&Ye(),f.publish("zoom",c)},Tt=1,At=function(){if(c){var t=p.state,e=t.groupingType,r=t.groupingObjective,n=t.groupingOptions,i=t.splittingType,o=t.splittingObjective,a=t.splittingOptions,s=c.scaling,u=s/Tt;e&&u<1&&Ur(e,r,n),i&&u>1&&Qr(i,o,a),Tt=s}},Pt=ze(At,250),Ct=function(){C&&(C=!1,c.tick(),_t(),f.publish("zoom",c))},Mt=function(){var t=o.getBoundingClientRect().height,e=Math.round(ct.rowHeight)*(ct.numRows+qm);n.style.height="".concat(Math.max(0,e-t),"px"),p.state.showGrid&&jt()},It=function(){return!1!==P&&(Rt(),P=!1,s=Wt,u=Wt,l=Wt,k.y=0,r.style.overflowY="auto",r.scrollTop=0,r.addEventListener("scroll",yi,po),window.addEventListener("mousedown",hi,po),window.addEventListener("mouseup",ci,po),window.addEventListener("mousemove",fi,po),o.addEventListener("wheel",mi,fo),!0)},kt=function(){!1===P&&(k.y=0,r.style.overflowY="hidden",r.scrollTop=0,r.removeEventListener("scroll",yi),window.removeEventListener("mousedown",hi),window.removeEventListener("mouseup",ci),window.removeEventListener("mousemove",fi),o.removeEventListener("wheel",mi))},Dt=function(){return!0!==P&&(kt(),P=!0,s=Be,u=Ne,l=Fe,c=J(o,{isNdc:!1,onMouseDown:hi,onMouseUp:ci,onMouseMove:fi,onWheel:mi,viewCenter:[_/2,E/2],scaleBounds:p.state.zoomBounds.map(Wo)}),c.setView(F(lo)),!0)},Rt=function(){!0===P&&(c.dispose(),c=void 0)},jt=function(){var t=n.getBoundingClientRect().height+o.getBoundingClientRect().height,e=o.getBoundingClientRect(),r=e.width,i=Math.ceil(r/ct.columnWidth),a=Math.ceil(t/ct.rowHeight),s=p.state,u=s.gridColor,l=s.gridOpacity;D.clear(),D.lineStyle(1,u,l);for(var h=1;h<i;h++)D.moveTo(h*ct.columnWidth,0),D.lineTo(h*ct.columnWidth,t);for(var c=1;c<a;c++)D.moveTo(0,c*ct.rowHeight),D.lineTo(r,c*ct.rowHeight)},Lt=function(){D.clear()},Bt=function(){var t=p.state.orderer;ct=lm({width:_,height:E,orderer:t},p.state),Mt()},Nt=function(){var t=p.state.orderer,e=ct;ct=lm({width:_,height:E,orderer:t},p.state),we(e),Mt(),p.state.showGrid&&jt()},Ft=function(t){var e=t.width,r=t.height;f.subscribe("animationEnd",(function(){ct.width===e&&ct.height===r||(ct=lm({width:e,height:r,orderer:p.state.orderer},p.state),Nt())}),1)},zt=wa({element:o,pubSub:f,store:p},{onLeave:Ft}),Xt=function(){var t=d(h.mark((function t(e){return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,rt.open(e);case 2:P?c.config({isFixed:!0}):r.style.overflowY="hidden";case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Yt=function(){rt.close(),P?c.config({isFixed:!1}):r.style.overflowY="auto"},Gt=function(){var t=p.state,e=t.darkMode,r=t.haltBackgroundOpacity;rt.set({backgroundOpacity:r,darkMode:e})},Kt=function(){var t=p.state.darkMode;zt.set({darkMode:t})},Zt=function(){var t=p.state,e=t.darkMode,r=t.lassoFillColor,n=t.lassoFillOpacity,i=t.lassoShowStartIndicator,o=t.lassoStartIndicatorOpacity,a=t.lassoStrokeColor,s=t.lassoStrokeOpacity,u=t.lassoStrokeSize;ht.set({fillColor:r,fillOpacity:n,showStartIndicator:i,startIndicatorOpacity:o,strokeColor:a,strokeOpacity:s,strokeSize:u,darkMode:e})},te=no(),le=no(),fe=function(t){return t.aspectRatio>ct.cellAspectRatio?te(t.originalWidth)/t.originalWidth:le(t.originalHeight)/t.originalHeight},pe=function(){if(q.size){var t=1/0,e=0,r=1/0,n=0;q.forEach((function(i){var o=i.image.originalWidth,a=i.image.originalHeight;o>e&&(e=o),o<t&&(t=o),a>n&&(n=a),a<r&&(r=a)}));var i,o,a=p.state,s=a.itemSizeRange,u=a.itemSize,l=a.piles,h=a.previewScaling,c=u||ct.cellWidth,f=u||ct.cellHeight;s[0]>0&&s[0]<=1&&s[1]>0&&s[1]<=1?(i=[c*s[0],c*s[1]],o=[f*s[0],f*s[1]]):(i=[0,c],o=[0,f]),te=no().domain([t,e]).range(i),le=no().domain([r,n]).range(o),Object.values(l).forEach((function(t){var e=Jt(h)?h(t):h;t.items.forEach((function(t){var r=q.get(t);if(r){var n=fe(r.image);if(r.image.scale(n),r.preview){var i=n*e[0]-1+1,o=n*e[1]-1+1;r.preview.scaleX(i),r.preview.scaleY(o),r.preview.rescaleBackground()}}}))})),K.forEach((function(t){if(t.cover){var e=fe(t.cover);t.cover.scale(e)}t.updateOffset(),t.drawBorder()}))}},ge=function(t,e,r){return t.moveTo.apply(t,A(s([e,r])))},ve=function(t,e,r){ge(t,e,r)&&wt(t.id)},me=function(t,e,r,n){return t.getMoveToTweener.apply(t,A(s([e,r])).concat([n]))},be=function(t,e,r,n){return t.animateMoveTo.apply(t,A(s([e,r])).concat([n]))},we=function(t){var e=p.state,r=e.arrangementType,n=e.items;if(pe(),null!==r||P)Xe();else{var i=[];ct.numRows=Math.ceil(q.size/ct.numColumns),K.forEach((function(e){var r=t.getPilePosByCellAlignment(e),n=t.xyToIj(r[0],r[1]),o=j(n,2),a=o[0],s=o[1];e.updateOffset(),wt(e.id,{forceUpdate:!0});var u=t.ijToIdx(a,s),l=ct.idxToXy(u,e.anchorBox.width,e.anchorBox.height,e.offset),h=j(l,2),c=h[0],f=h[1];i.push({id:e.id,x:c,y:f})})),K.forEach((function(t){t.cover&&He(t.id)})),p.dispatch(Sv.movePiles(i)),q.forEach((function(t){t.setOriginalPosition(ct.idxToXy(n[t.id].index,t.image.width,t.image.height,t.image.center))}))}vt(),p.state.focusedPiles.filter((function(t){return K.has(t)})).forEach((function(t){K.get(t).focus()})),Mt(),H()},xe=function(t){var e=eo(p.state.pileBackgroundColor,t);return null!==e?e:y},_e=function(t){var e=p.state,r=e.itemRenderer,n=e.previewBackgroundColor,i=e.previewBackgroundOpacity,o=e.pileBackgroundOpacity,a=e.previewAggregator,s=e.previewRenderer,u=e.previewPadding,l=e.piles,c=Object.values(t),f=r(c.map((function(t){var e=t.src;return e}))).then((function(t){return t.map(na)})),g=function(t,e){if(null===t)return null;var r=c[e],a=l[r.id],s=xe(a),h={backgroundColor:n===go?s:to(n,r),backgroundOpacity:i===go?eo(o,a):to(i,r),padding:to(u,r)};return Mv(t,h)},v=function(){var t=d(h.mark((function t(e){return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.map((function(t){return t.src})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=s?a||v:null,y=m?Promise.resolve(m(c)).then((function(t){return new Promise((function(e){var r=[];s(t.filter((function(t){return null!==t}))).then((function(n){var i=0;t.forEach((function(t){null===t?r.push(null):r.push(n[i++])})),e(r)}))}))})).then((function(t){return t.map(g)})):Promise.resolve([]);return[f,y]},Ee=function(){var t=d(h.mark((function t(){var e,r,n,i,o=arguments;return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:null,r=p.state,n=r.items,i=r.piles,e||(e=n),t.next=5,Xt();case 5:return t.abrupt("return",Promise.all(_e(e)).then((function(t){var r=j(t,2),n=r[0],o=r[1],a=Object.keys(e);n.forEach((function(t,e){var r=a[e],n=o[r];q.has(r)&&q.get(r).replaceImage(t,n)})),a.forEach((function(t){if(K.has(t)){var e=K.get(t),r=i[t];e.replaceItemsImage(),e.blur(),qe(r,t),Ge(r,t),tt()}else Object.values(i).forEach((function(e){if(e.items.includes(t)){var r=K.get(e.id);r.replaceItemsImage(t),r.blur()}}))})),K.forEach((function(t){Ze(i[t.id],t)})),pe(),H(),Yt()})));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Oe=function(){var t=d(h.mark((function t(e){var r;return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=Object.keys(e),r.length){t.next=3;break}return t.abrupt("return",Promise.resolve());case 3:return t.next=5,Xt();case 5:return t.abrupt("return",Promise.all(_e(e)).then((function(t){var e=j(t,2),n=e[0],i=e[1],o=p.state.piles;n.forEach((function(t,e){var n=i[e],o=r[e],a=hm({id:o,image:t,pubSub:f},{preview:n});q.set(o,a)})),n.forEach((function(t,e){var n=r[e],i=o[n];i.items.length&&Sr(n,i)})),pe(),H(),Yt()})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Te=function(t){return null===t.x||null===t.y},Ae=function(t){var e=K.get(t),r=ct.idxToXy(on[0][t],e.width,e.height,e.offset);return Promise.resolve(r)},Pe=function(t){return Promise.resolve(ln.map((function(e,r){return e(nn[t][r])})))},Ce=new Map,Me=0,Ie=function(){var t=d(h.mark((function t(e){var r,n,i,o,a;return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=p.state.dimensionalityReducer,!Ce.has(e)||cn!==Me){t.next=3;break}return t.abrupt("return",Ce.get(e));case 3:return Me=cn,t.next=6,n.transform([nn[e].flat()]);case 6:return i=t.sent,o=(r=ct).uvToXy.apply(r,A(i[0])),a=K.get(e),1!==a.size||Ce.has(e)||a.items[0].item.setOriginalPosition(o),Ce.set(e,o),t.abrupt("return",o);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ke=function(t,e){var r=p.state,n=r.arrangementObjective,i=r.arrangementOptions,o=r.dimensionalityReducer;return n.length>2||i.forceDimReduction?o?Ie(t):Promise.resolve([e.x,e.y]):n.length>1?Pe(t):n.length?Ae(t):(console.warn("Can't arrange pile by data. No arrangement objective available."),Promise.resolve([e.x,e.y]))},Re=function(t,e){if(e.isCustom)return e.property(t,t.index);var r=p.state.items;return e.aggregator(t.items.map((function(t){return e.property(r[t])})))},Le=function(){var t=d(h.mark((function t(e,r){var n,i,o,a,s,u,l,c,f,d,g,v,m;return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=p.state,o=i.arrangementType,a=i.arrangementObjective,s=i.piles,u=i.projector,l=K.get(e),c=s[e],f=Te(c),d=r||f?o||vo:o,g=r||f?a||mo:a,v=function(t,e){return ct.ijToXy(t,e,l.width,l.height,l.offset)},"data"!==d){t.next=9;break}return t.abrupt("return",ke(e,c));case 9:m=d&&Re(c,g),t.t0=d,t.next="index"===t.t0?13:"ij"===t.t0?14:"xy"===t.t0?15:"uv"===t.t0?16:"custom"===t.t0?17:19;break;case 13:return t.abrupt("return",v.apply(void 0,A(ct.idxToIj(m))));case 14:return t.abrupt("return",v.apply(void 0,A(m)));case 15:return t.abrupt("return",m);case 16:return t.abrupt("return",(n=ct).uvToXy.apply(n,A(m)));case 17:if(!u){t.next=19;break}return t.abrupt("return",u(m));case 19:return t.abrupt("return",Promise.resolve([c.x,c.y]));case 20:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),Be=function(t){var e=Xo(t[0],t[1]);return W(e,e,c.view),e.slice(0,2)},Ne=function(t){var e=Xo(t[0],t[1]);return W(e,e,U(b,c.view)),e.slice(0,2)},Fe=function(t){return[t[0]-c.translation[0],t[1]-c.translation[1]]},Xe=function(){var t=d(h.mark((function t(){var e,r,n,i,o,a,s,u,l,c,f,d,g,v,m,y,b,x,_,E=arguments;return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=E.length>0&&void 0!==E[0]?E[0]:[],r=E.length>1&&void 0!==E[1]?E[1]:{},n=r.immideate,i=void 0!==n&&n,o=p.state,a=o.arrangeOnGrouping,s=o.arrangementType,u=o.items,l=!e.length,l&&(e=Object.keys(p.state.piles)),0!==Object.keys(u).length){t.next=10;break}return vt(),Mt(),H(),t.abrupt("return");case 10:if(c=[],f=e.filter((function(t){return K.has(t)})).map((function(t){return K.get(t)})),f.length){t.next=14;break}return t.abrupt("return");case 14:return t.next=16,M;case 16:d=Ym(f),t.prev=17,d.s();case 19:if((g=d.n()).done){t.next=32;break}return v=g.value,t.next=23,Le(v.id,T);case 23:m=t.sent,w.set(v.id,m),y=j(m,2),b=y[0],x=y[1],(i||T)&&ve(v,b,x),c.push({id:v.id,x:b,y:x}),ct.numRows=Math.max(ct.numRows,Math.ceil(x/ct.rowHeight)),(T||Te(v)||s&&!a)&&q.get(v.id).setOriginalPosition([b,x]);case 30:t.next=19;break;case 32:t.next=37;break;case 34:t.prev=34,t.t0=t["catch"](17),d.e(t.t0);case 37:return t.prev=37,d.f(),t.finish(37);case 40:T=!1,_=a?[]:gn(),p.dispatch(Vt([Sv.movePiles(c)].concat(A(_)))),l&&vt(),Mt(),H();case 46:case"end":return t.stop()}}),t,null,[[17,34,37,40]])})));return function(){return t.apply(this,arguments)}}(),Ye=ze(Xe,Uo),He=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.all,n=void 0!==r&&r,i=p.state,o=i.piles,a=i.pileOrderItems,s=K.get(t);if(s){if(Jt(a)){var u=o[t];s.setItemOrder(a(u))}s.positionItems(G,{all:n})}},Ge=function(t,e){var r=p.state,n=r.items,i=r.pileItemBrightness,o=r.pileItemInvert,a=r.pileItemOpacity,s=r.pileItemTint,u=K.get(e);u.items.forEach((function(e,r){var u=n[e.id];e.animateOpacity(Jt(a)?a(u,r,t):a),e.image.invert(Jt(o)?o(u,r,t):o),o||(e.image.brightness(Jt(i)?i(u,r,t):i),i||e.image.tint(Jt(s)?s(u,r,t):s))}))},qe=function(t,e){var r=K.get(e);if(r){var n=p.state,i=n.pileOpacity,o=n.pileBorderSize,a=n.pileScale,s=n.pileSizeBadge,u=n.pileVisibilityItems;r.animateOpacity(Jt(i)?i(t):i),r.animateScale(Jt(a)?a(t):a),r.setBorderSize(Jt(o)?o(t):o),r.showSizeBadge(Jt(s)?s(t):s),r.setVisibilityItems(Jt(u)?u(t):u),H()}},We=function(t){var e=na(t);return e.scale(fe(e)),e},Ke=function(t){var e=p.state,r=e.previewRenderer,n=e.previewScaling;if(r){var i=Jt(n)?n(t):n;t.items.forEach((function(t){var e=q.get(t);if(e.preview){var r=fe(e.image),n=r*i[0]-1+1,o=r*i[1]-1+1;e.preview.scaleX(n),e.preview.scaleY(o)}}))}},$e=function(t,e){var r=p.state,n=r.items,i=r.coverRenderer,o=r.coverAggregator,a=r.pileCoverInvert,s=r.pileCoverScale,u=r.previewAggregator,l=r.previewRenderer,h=[],c=[];if(t.items.forEach((function(t){h.push(n[t]),c.push(q.get(t))})),e.setItems(c,{asPreview:!(!u&&!l),shouldDrawPlaceholder:!0}),!i)return e.setCover(null),void He(e.id,{all:!0});var f=Promise.resolve(o(h)).then((function(t){return i([t])})).then((function(e){var r=j(e,1),n=r[0],i=We(n);i.invert(Jt(a)?a(t):a);var o=Jt(s)?s(t):s;return i.scale(i.scaleFactor*o),i}));e.setCover(f),f.then((function(){He(e.id),wt(e.id),H()}))},Ze=function(t,e){1===t.items.length?(e.setCover(null),He(e.id),e.setItems([q.get(t.items[0])])):(Ke(t),$e(t,e))},Je=function(){var t=p.state,e=t.arrangementObjective,r=t.arrangementOptions;return e&&(e.length>2||r.forceDimReduction)},Qe=function(t,e){if(K.has(e)){var r=K.get(e);if(0===t.items.length)Or(e);else{Ce["delete"](e);var n=t.items.map((function(t){return q.get(t)}));p.state.coverAggregator?Ze(t,r):(p.state.previewRenderer&&Ke(t),r.setItems(n),He(e)),1===n.length&&Je()&&Ce.set(e,n[0].originalPosition),wt(e,{forceUpdate:!0}),Ge(t,e)}}else Sr(e,t)},tr=function(t,e){var r=K.get(e);return r?(w.set(e,[t.x,t.y]),Promise.all([be(r,t.x,t.y),new Promise((function(t){function r(r){r===e&&(f.unsubscribe("pileBoundsUpdate",this),t())}f.subscribe("pileBoundsUpdate",r)}))])):Promise.resolve()},er=function(t){var e=Pr(new Uint16Array(new Array(ct.numColumns*ct.numRows).fill(0)),[ct.numRows,ct.olNum]);a=e,K.forEach((function(e){if(e.id!==t){var r=Math.floor(e.bBox.minX/ct.columnWidth),n=Math.floor(e.bBox.minY/ct.rowHeight),i=Math.floor(e.bBox.maxX/ct.columnWidth),o=Math.floor(e.bBox.maxY/ct.rowHeight);a.set(n,r,1),a.set(n,i,1),a.set(o,r,1),a.set(o,i,1)}}))},rr=function(t,e){var r,n=1/0;e[0]-1>=0&&t.get(e[0]-1,e[1])<n&&(n=t.get(e[0]-1,e[1]),r=[e[0]-1,e[1]]),e[1]-1>=0&&t.get(e[0],e[1]-1)<n&&(n=t.get(e[0],e[1]-1),r=[e[0],e[1]-1]),e[0]+1<t.shape[0]&&t.get(e[0]+1,e[1])<n&&(n=t.get(e[0]+1,e[1]),r=[e[0]+1,e[1]]),e[1]+1<t.shape[1]&&t.get(e[0],e[1]+1)<n&&(n=t.get(e[0],e[1]+1),r=[e[0],e[1]+1]);var i=t.data.length;if(t.set(e[0],e[1],i),n===t.data.length)for(var o=0;o<t.shape[0];o++)for(var a=0;a<t.shape[1];a++)t.get(o,a)<n&&t.get(o,a)>0&&(n=t.get(o,a)),r=[o,a];return r},nr=function(t,e,r,n){if(-1===t.get(e,r)){var i=De(e,r,n[0],n[1]);t.set(e,r,i)}},ir=function(t,e,r,n){var i,o=A(r),a=0;while(!i&&a<t.data.length)e.get(o[0],o[1])<1&&(i=o),i||(o[0]-1>=0&&nr(t,o[0]-1,o[1],r),o[1]-1>=0&&nr(t,o[0],o[1]-1,r),o[0]+1<t.shape[0]&&nr(t,o[0]+1,o[1],r),o[1]+1<t.shape[1]&&nr(t,o[0],o[1]+1,r),o=rr(t,o),a++);return i||(i=[e.shape[0]+1,Math.floor(n/2)],ct.numRows+=n,Mt()),i},or=function(t,e){var r=Pr(new Float32Array(new Array(t*e).fill(1)),[e,t]),n=Pr(new Float32Array((ct.numRows-e+1)*(ct.numColumns-t+1)),[ct.numRows-e+1,ct.olNum-t+1]);return Ai(n,a,r),n},ar=function(t,e,r){var n=or(e,r),i=Pr(new Float32Array(new Array((ct.numRows-r+1)*(ct.numColumns-e+1)).fill(-1)),[ct.numRows-r+1,ct.numColumns-e+1]),o=ir(i,n,t,r),a=De(o[0],o[1],t[0],t[1]);return{depilePos:o,distance:a}},sr=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise((function(n){var i=p.state.easing,o=[],a=K.get(t);a.blur(),a.drawBorder();var u=e.map((function(t){return K.get(t)})).filter(Wt),l=function(){o.forEach((function(t){wt(t.id)})),p.dispatch(Sv.movePiles(o)),n()},h=0,c=function(){h++,h===u.length&&l()};G.addBatch(u.map((function(t,e){var n=t.getItemById(t.id);o.push({id:t.id,x:n.item.originalPosition[0],y:n.item.originalPosition[1]});var a=r.length>0?r[e]:s(n.item.originalPosition),u=De.apply(void 0,A(a).concat([t.x,t.y])),l=250*Ht(Math.min(u,250)/250);return Uv({duration:l,easing:i,interpolator:qt,endValue:[].concat(A(r.length>0?r[e]:s(n.item.originalPosition)),[0]),getter:function(){return[t.x,t.y,n.displayObject.angle]},setter:function(e){t.moveTo(e[0],e[1]),n.displayObject.angle=e[2]},onDone:c})})))}))},ur=function(t){var e=K.get(t).size;if(1!==e){er(t);var r,n,i,o=K.get(t).bBox,a=Math.floor((o.minX+o.maxX)/(2*ct.columnWidth)),s=Math.floor((o.minY+o.maxY)/(2*ct.rowHeight)),u=[s,a],l=Math.ceil(Math.sqrt(e)),h=Math.ceil(e/l);if(l!==h){var c=ar(u,l,h),f=ar(u,h,l);r=c.distance>f.distance?f.depilePos:c.depilePos,i=c.distance>f.distance?h:l,n=c.distance>f.distance?l:h}else r=ar(u,l,h).depilePos,i=l,n=h;for(var d=p.state.piles,g=[],v=A(d[t].items),m=[],y=0;y<v.length;y++){var b=Math.floor(y/i)+r[0]-Math.floor((n-1)/2),w=y%i+r[1]-Math.floor((i-1)/2);m.push([w*ct.columnWidth,b*ct.rowHeight])}var x={items:v,x:d[t].x,y:d[t].y};g.push(x),p.dispatch(Sv.scatterPiles(g)),sr(t,v,m),p.dispatch(Sv.setDepiledPile([]))}},lr=function(t){var e=p.state.piles,r=A(e[t].items),n={items:r,x:e[t].x,y:e[t].y};p.dispatch(Sv.scatterPiles([n])),Jn(),p.state.arrangementType||sr(t,r)},hr=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.onDone,o=void 0===i?Wt:i;G.add(Uv({interpolator:qt,endValue:[e,r],getter:function(){return[t.x,t.y]},setter:function(e){t.x=e[0],t.y=e[1]},onDone:function(){o()}}))},cr=function(){Q.tint=p.state.darkMode?0:16777215,Q.width=_,Q.height=E,Q.alpha=.9},fr=function(){Q.alpha=0},dr=function(t){var e=p.state.piles;t.forEach((function(t){var e=K.get(t);tt(),fr();var r=function(){e.tempDepileContainer.removeChildren(),e.isTempDepiled=!1,e.focus(),p.dispatch(Sv.setFocusedPiles([e.id])),wt(t)};e.tempDepileContainer.children.forEach((function(t,n){var i=n===e.tempDepileContainer.children.length-1?{onDone:r}:void 0;hr(t,-e.tempDepileContainer.x,-e.tempDepileContainer.y,i)}))})),f.publish("pileInactive",{targets:t.map((function(t){return e[t]}))}),H()},pr=function(t){var e=t.pile,r=t.tempDepileDirection,n=t.items,i=function(){e.isTempDepiled=!0,p.dispatch(Sv.setFocusedPiles([])),p.dispatch(Sv.setFocusedPiles([e.id]))},o=c?c.scaling:1,a=function(t){return t?{onDone:i}:void 0};if("horizontal"===r){e.tempDepileContainer.x=e.bBox.width/o,e.tempDepileContainer.y=0,e.tempDepileContainer.interactive=!0;var s=0;n.forEach((function(t,r){var i=Ii(q.get(t).image.sprite);i.x=-e.tempDepileContainer.x,e.tempDepileContainer.addChild(i);var o=a(r===n.length-1);hr(i,5*r+s,0,o),s+=i.width}))}else if("vertical"===r){e.tempDepileContainer.x=0,e.tempDepileContainer.x=e.bBox.height/o,e.tempDepileContainer.interactive=!0;var u=0;n.forEach((function(t,r){var i=Ii(q.get(t).image.sprite);i.y=-e.tempDepileContainer.y,e.tempDepileContainer.addChild(i);var o=a(r===n.length-1);hr(i,0,5*r+u,o),u+=i.height}))}},gr=function(t){var e=t.pile,r=t.items,n=t.orderer,i=c?c.scaling:1;e.tempDepileContainer.x=e.bBox.width/i,e.tempDepileContainer.y=0;var o=Math.ceil(Math.sqrt(r.length)),a=function(){e.isTempDepiled=!0,p.dispatch(Sv.setFocusedPiles([])),p.dispatch(Sv.setFocusedPiles([e.id]))},s=function(t){return t?{onDone:a}:void 0},u=n(o);r.forEach((function(t,n){var i=Ii(q.get(t).image.sprite);i.x=-e.tempDepileContainer.x,e.tempDepileContainer.addChild(i);var o=u(n),a=j(o,2),l=a[0],h=a[1],c=l*(ct.cellWidth+6),f=h*(ct.cellHeight+6),d=s(n===r.length-1);hr(i,c,f,d)}))},vr=function(t){var e=p.state,r=e.piles,n=e.tempDepileDirection,i=e.tempDepileOneDNum,o=e.orderer;t.forEach((function(t){var e=K.get(t);et(e.graphics),cr(),e.enableInteractivity();var a=A(r[t].items);a.length<i?pr({pile:e,tempDepileDirection:n,items:a}):gr({pile:e,items:a,orderer:o}),wt(t)})),f.publish("pileActive",{targets:t.map((function(t){return r[t]}))}),H()},mr=function(t){var e=o.getBoundingClientRect();return[t.clientX-e.left,t.clientY-e.top-k.y]},yr=function(t){var e=Qi(t),r=pt.search(e),n=[];return r.forEach((function(e){(je([e.minX,e.minY],t)||je([e.minX,e.maxY],t)||je([e.maxX,e.minY],t)||je([e.maxX,e.maxY],t))&&n.push(e.id)})),n},br=function(){var t=d(h.mark((function t(){var e,r,n,i;return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=Promise.resolve(),lt=!1,r=ht.end(),n=r.flatMap(l),gt([n.length-2,n.length-1],n),p.state.temporaryDepiledPiles.length||(i=yr(n),Kn(i),i.length>1&&(p.dispatch(Sv.setFocusedPiles([])),e=wr([i]))),t.next=8,e;case 8:at();case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),wr=function(t,e){var r=function(t){return function(e,r){return e+r/t}},n=function(){return function(t,e){return Math.min(t,e)}},i=function(){return function(t,e){return Math.max(t,e)}},o={x:r,y:r},a={x:0,y:0};switch(e){case"top":o.y=n,a.y=1/0;break;case"bottom":o.y=i,a.y=-1/0;break;case"left":o.x=n,a.x=1/0;break;case"right":o.x=i,a.x=-1/0;break}return Promise.all(t.map((function(t){return new Promise((function(e,r){var n=p.state,i=n.easing,s=n.piles,u=a.x,l=a.y,h=o.x(t.length),c=o.y(t.length);t.forEach((function(t){u=h(u,s[t].x),l=c(l,s[t].y)}));var f=function(){wt(t[0]),e(Sv.mergePiles(t,[u,l]))},d=function(){++g===t.length&&f()},g=0;G.addBatch(t.map((function(t){var e=K.get(t);return e||r(new Error("Pile #".concat(t," not ready"))),me(K.get(t),u,l,{easing:i,onDone:d})})).filter((function(t){return null===t&&d(),t})))}))}))).then((function(t){p.dispatch(Vt(t))}))},xr=function(t,e){var r=K.get(t);r.magnifyByWheel(e)&&(wt(t,{forceUpdate:!0}),r.drawBorder()),H()},_r=function(t){q.has(t)&&q.get(t).destroy(),q["delete"](t),Or(t)},Er=function(t){return Object.keys(t).forEach(_r),Promise.resolve()},Sr=function(t,e){var r=s([e.x,e.y]),n=j(r,2),i=n[0],o=n[1],a=e.items.length?e.items.map((function(t){return q.get(t)})):[q.get(t)],u=em({render:H,id:t,pubSub:f,store:p,badgeFactory:v},{x:i,y:o});K.set(t,u),p.state.coverAggregator?Ze(e,u):(p.state.previewRenderer&&Ke(e),u.setItems(a),He(t)),Z.addChild(u.graphics),wt(t,{forceUpdate:!0}),Ge(e,t),w.set(t,[e.x,e.y])},Or=function(t){K.has(t)&&(K.get(t).destroy(),mt(t)),K["delete"](t),w["delete"](t),delete nn[t]},Tr=function(t){var e=t.bBoxifier,r=t.absComparator,n=t.relComparator;return function(){var t=d(h.mark((function t(i){var o,a,s,u,l,c,f,d,v,m,y,b,w,x=arguments;return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o=x.length>1&&void 0!==x[1]?x[1]:{},a=o.conditions,s=void 0===a?[]:a,u=o.centerAggregator,l=void 0===u?ie:u,c=p.state.piles,f=new Map,d={},v={},m=function(t,e,r){if(!d[t.id]){d[t.id]=g({},t.id,!0),f.set(t.id,[t.id,1]);var i=t.maxX-t.minX,o=t.maxY-t.minY;v[t.id]={w:i,h:o,c:[[t.minX+i/2,t.minY+o/2]]}}if(d[t.id][e.id])return!1;d[t.id][e.id]=!0,f.set(e.id,[t.id,n(r,t)[0]]);var a=e.maxX-e.minX,s=e.maxY-e.minY;return v[t.id].w=Math.max(v[t.id].w,a),v[t.id].h=Math.max(v[t.id].h,s),v[t.id].c.push([e.minX+a/2,e.minY+s/2]),!0},y=function(t){var o=pt.search(e(t,i)),a=0;return 1===o.length||o.forEach((function(e){if(e.id!==t.id){var o=r(t,e,i),u=j(o,2),l=u[0],h=u[1],p=h&&s.every((function(r){return r(c[t.id],c[e.id])}));if(p){if(f.has(e.id)&&(!d[t.id]||!d[t.id][e.id])){var g=f.get(e.id),v=j(g,2),y=v[0],b=v[1];if(!n(l,t,b)[1])return;delete d[y][e.id]}a+=m(t,e,l)}}})),a},pt.all().forEach((function(t){f.has(t.id)||y(t)})),b=!1;while(!b)w=Object.keys(d).reduce((function(t,e){var r=v[e],n=r.w,i=r.h,o=r.c,a=l(o),s=j(a,2),u=s[0],h=s[1],c={id:e,minX:u-n/2,maxX:u+n/2,minY:h-i/2,maxY:h+i/2};return t+y(c)}),0),b=0===w;return t.abrupt("return",Object.values(d).map(Object.keys));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ar=function(t,e,r){var n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),o=Math.min(t.maxX,e.maxX),a=Math.min(t.maxY,e.maxY),s=(o-n)*(a-i);return[s,s>=r]},Cr=function(t,e,r){var n=t/((e.maxX-e.minX)*(e.maxY-e.minY));return[n,void 0!==r&&n>r]},Mr=Tr({bBoxifier:Wt,absComparator:Ar,relComparator:Cr}),Ir=function(t,e){return{minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e}},kr=function(t,e,r){var n=Wm(t,e);return[n,n<r]},Dr=function(t,e,r){return[t,void 0===r&&t<r]},Rr=Tr({bBoxifier:Ir,absComparator:kr,relComparator:Dr}),jr=function(){var t=d(h.mark((function t(e){var r,n,i,o;return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=p.state,n=r.orderer,i=r.piles,o=e?lm({width:_,height:E,orderer:n},e):ct,t.abrupt("return",Object.entries(i).reduce((function(t,e){var r=j(e,2),n=r[0],i=r[1];if(!i.items.length)return t;var a=o.xyToIj(i.x,i.y),s=o.ijToIdx.apply(o,A(a));return t[s]||(t[s]=[]),t[s].push(n),t}),[]));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Lr=function(){var t=d(h.mark((function t(){return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object.entries(p.state.piles).reduce((function(t,e){var r=j(e,2),n=r[0],i=r[1];if(i.items.length){var o=ct.xyToIj(i.x,i.y);t[o[1]]||(t[o[1]]=[]),t[o[1]].push(n)}return t}),[]));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Br=function(){var t=d(h.mark((function t(){return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object.entries(p.state.piles).reduce((function(t,e){var r=j(e,2),n=r[0],i=r[1];if(i.items.length){var o=ct.xyToIj(i.x,i.y);t[o[0]]||(t[o[0]]=[]),t[o[0]].push(n)}return t}),[]));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Nr=function(){var t=d(h.mark((function t(e){return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object.values(Object.entries(p.state.piles).reduce((function(t,r){var n=j(r,2),i=n[0],o=n[1];if(!o.items.length)return t;var a=e.map((function(t){return t.aggregator(o.items.map((function(e,r){return t.property(p.state.items[e],e,r,q.get(e))})))})).join("|");return t[a]?t[a].push(i):t[a]=[i],t}),{})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Fr=function(){var t=d(h.mark((function t(e){var r,n,i,o,a,s,u,l=arguments;return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},n=Object.entries(p.state.piles).reduce((function(t,r){var n=j(r,2),i=n[0],o=n[1];return o.items.length?(t.push({id:i,data:e.flatMap((function(t){return t.aggregator(o.items.map((function(e,r){return t.property(p.state.items[e],e,r,q.get(e))})))}))}),t):t}),[]),i=r.clusterer,i||(o=r.clustererOptions||{},a=o.k,o.valueGetter=function(t){return t.data},a||(a=Math.max(2,Math.ceil(Math.sqrt(n.length/2)))),i=Oa(a,o)),t.next=6,i(n);case 6:return s=t.sent,u=s.labels,t.abrupt("return",Object.values(Array.from(u).reduce((function(t,e,r){return-1===e||(t[e]||(t[e]=[]),t[e].push(n[r].id)),t}),{})));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ur=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="mean";switch(t){case"overlap":e=Mr(r,n);break;case"distance":e=Rr(r,n);break;case"grid":e=jr(r);break;case"column":i=r,e=Lr(r);break;case"row":i=r,e=Br(r);break;case"category":e=Nr(r);break;case"cluster":e=Fr(r,n);break;default:e=Promise.reject(new Error("Unknown group by type: ".concat(t)));break}return e.then((function(t){return p.dispatch(Sv.setFocusedPiles([])),Kn(t.flatMap(Wt)),wr(t.filter((function(t){return t.length>1})),i)}))},zr=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Un(t,e);Ur(t,n,r),"distance"!==t&&"overlap"!==t||!r.onZoom||(delete r.onZoom,p.dispatch(Vt([].concat(A(V("groupingObjective",n,!0)),A(V("groupingOptions",r,!0)),A(V("groupingType",t,!0))))))},Vr=function(t,e){var r="uv"===e?function(t){return t*_}:Wt,n="uv"===e?function(t){return t*E}:Wt,i=new St,o=new Map,a=t.map((function(t){var e=Fe(s([r(t.cX),n(t.cY)])),i=j(e,2),a=i[0],u=i[1],l={id:t.id,minX:a-t.width/2,maxX:a+t.width/2,minY:u-t.height/2,maxY:u+t.height/2};return o.set(t.id,l),l}));return i.load(a),[i,o]},Xr=function(t){var e=t.toBBox,r=t.compare,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.coordType,o=void 0===i?"uv":i;return function(){var t=d(h.mark((function t(n){var i,a,s,u,l,c,f,d,g,v,m,y,b,w,x=arguments;return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=x.length>1&&void 0!==x[1]?x[1]:{},a=i.conditions,s=void 0===a?[]:a,u=p.state.piles,l=Vr(n.basedOn,o),c=j(l,2),f=c[0],d=c[1],g={},v=function(t,e,n){var i=-1,o=1/0;return t.forEach((function(t,a){var s={minX:t.centroid[0]-t.width/2,maxX:t.centroid[0]+t.width/2,minY:t.centroid[1]-t.height/2,maxY:t.centroid[1]+t.height/2},u=r(s,e,n),l=j(u,2),h=l[0],c=l[1];h&&c<o&&(o=c,i=a)})),i},m=function(t){g[t.id]={keep:[t.id],split:[]}},y=function(t,e){g[t.id].keep.push(e.id)},b=function(t,e){var r=e.maxX-e.minX,i=e.maxY-e.minY,o=[e.minX+r/2,e.minY+i/2];if(g[t.id].split.length){var a=v(g[t.id].split,e,n.threshold);if(-1===a)g[t.id].split.push({centroid:o,width:r,height:i,items:[e.id]});else{var s=g[t.id].split[a],u=s.items.length,l=u+1,h=[s.centroid[0]*u/l+o[0]/l,s.centroid[1]*u/l+o[1]/l];s.centroid=h,s.items.push(e.id)}}else g[t.id].split.push({centroid:o,width:r,height:i,items:[e.id]})},w=function(t){if(!(u[t.id].items.length<2)){var i=f.search(e(t,n.threshold)),o=new Set;o.add(t.id),m(t),i.forEach((function(e){if(-1!==u[t.id].items.indexOf(e.id)&&e.id!==t.id){var i=r(t,e,n.threshold)[0]&&s.every((function(r){return r(u[t.id],u[e.id])}));i?y(t,e):b(t,e),o.add(e.id)}})),u[t.id].items.forEach((function(e){if(!o.has(e)){var r=d.get(e);e===t.id?y(t,r):b(t,r)}}))}},pt.all().forEach(w),Object.keys(g).forEach((function(t){var e=[];g[t].keep.length&&e.push(g[t].keep),g[t].split.length&&e.push.apply(e,A(g[t].split.map((function(t){return t.items})))),e.length>1?g[t]=e:delete g[t]})),t.abrupt("return",g);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Yr=function(t,e,r){var n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),o=Math.min(t.maxX,e.maxX),a=Math.min(t.maxY,e.maxY),s=(o-n)*(a-i);return[s>=r,s]},Hr=Xr({toBBox:Wt,compare:Yr}),Gr=function(t,e){return{minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e}},qr=function(t,e,r){var n=Wm(t,e);return[n<r,n]},Wr=Xr({toBBox:Gr,compare:qr}),Kr=function(){var t=d(h.mark((function t(e){return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object.entries(p.state.piles).filter((function(t){return t[1].items.length>1})).reduce((function(t,r){var n=j(r,2),i=n[0],o=n[1],a=o.items.reduce((function(t,r,n){var i=e.map((function(t){return t(p.state.items[r],r,n,q.get(r))})).join("|");return t[i]?t[i].push(r):t[i]=[r],t}),{});return Object.keys(a).length>1&&(t[i]=Object.values(a)),t}),{}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$r=function(){var t=d(h.mark((function t(e){var r,n,i,o,a,s,u,l,c=arguments;return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},n=new Map,i=Object.entries(p.state.items).map((function(t,r){var i=j(t,2),o=i[0],a=i[1];return n.set(o,r),{id:o,data:e.flatMap((function(t){return t.property(a,o,0,q.get(o))}))}})),o=r.clusterer,o||(a=r.clustererOptions||{},s=a.k,a.valueGetter=function(t){return t.data},s||(s=Math.max(2,Math.ceil(Math.sqrt(i.length/2)))),o=Oa(s,a)),t.next=7,o(i);case 7:return u=t.sent,l=u.labels,t.abrupt("return",Object.entries(p.state.piles).reduce((function(t,e){var r=j(e,2),i=r[0],o=r[1];if(!o.items.length)return t;var a=o.items.reduce((function(t,e){var r=l[n.get(e)];return t[r]?t[r].push(e):t[r]=[e],t}),{});return Object.keys(a).length>1&&(t[i]=Object.values(a)),t}),{}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Zr=!1,Jr=Promise.resolve(),Qr=function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Zr)return Jr;switch(Zr=!0,t){case"overlap":r=Hr(e,n);break;case"distance":r=Wr(e,n);break;case"category":r=Kr(e);break;case"cluster":r=$r(e,n);break}return Jr=r.then((function(t){return Object.keys(t).length?(p.dispatch(Vt([Sv.setFocusedPiles([]),Sv.splitPiles(t)])),Promise.all(Object.entries(t).filter((function(t){return t[1].length>1})).map((function(t){var e=j(t,2),r=e[0],n=e[1],i=n.map((function(t){return t[0]}));return sr(r,i)})))):Promise.resolve()})),Jr.then((function(){Zr=!1})),Jr},tn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Yn(t,e),i=Qr(t,n,r);return"distance"!==t&&"overlap"!==t||!r.onZoom||(delete r.onZoom,p.dispatch(Vt([].concat(A(V("splittingObjective",n,!0)),A(V("splittingOptions",r,!0)),A(V("splittingType",t,!0)))))),i},en=function(){return tn("category","id")},rn=function(){var t=p.state,e=t.arrangementType,r=t.arrangementObjective,n=t.arrangementOptions,i=t.navigationMode,o=!1;switch(i){case Co:o=Dt();break;case Mo:o=It();break;case Po:default:switch(e){case"data":o=r.length>1||n.forceDimReduction?Dt():It();break;case"xy":case"uv":o=Dt();break;case"index":case"ij":o=It();break}break}o&&(_t(),Mt())},nn={},on=[],an=[],sn=[],un=function(t){var e=p.state,r=e.arrangementObjective,n=e.arrangementOptions,i=e.items,o=e.piles,a=t.length>=K.size;r.forEach((function(e,s){var u="undefined"===typeof an[s]||a?1/0:an[s],l="undefined"===typeof sn[s]||a?-1/0:sn[s],h=a;if(!a&&on[s]&&r.length<3&&!n.forceDimReduction){var c=0,f=K.size,d=!1,p=!1;if(t.forEach((function(t){var e=on[s][t];e===c&&(c++,d=!0,h=!0),e===f&&(f--,p=!0,h=!0)})),d){var g=Object.entries(on[s]).find((function(t){return t[1]===c})),v=j(g,1),m=v[0];u=nn[m][s]}if(p){var y=Object.entries(on[s]).find((function(t){return t[1]===f})),b=j(y,1),w=b[0];l=nn[w][s]}}t.forEach((function(t){var n=o[t].items.map((function(t,r){return e.property(i[t],t,r,q.get(t))})),a=e.aggregator(n);a<u&&(u=a,h=!0),a>l&&(l=a,h=!0),nn[t]||(nn[t]=[]),nn[t][s]=Number.isNaN(a)?null:a,nn[t].splice(r.length)})),on[s]=Ue(nn,{getter:function(t){return t[s]},ignoreNull:!0}),h&&(an[s]=u,sn[s]=l)})),on.splice(r.length),an.splice(r.length),sn.splice(r.length)},ln=[],hn=function(){var t=p.state.arrangementObjective,e=[_,E];return ln=t.map((function(t,r){var n=ln[r],i=an[r],o=sn[r];if(n){var a=n.domain(),s=j(a,2),u=s[0],l=s[1];if(i===u&&o===l)return ln[r]}var h=t.inverted?[o,i]:[i,o],c=ne(te.range()),f=ne(te.range());return t.scale().domain(h).range([c/2,e[r]-f/2])})),Promise.resolve()},cn=0,fn=function(){var t=d(h.mark((function t(e){var r,n,i,o,a,s,u;return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=p.state,n=r.arrangementObjective,i=r.arrangementOptions,o=r.dimensionalityReducer,a=r.items,o){t.next=4;break}return console.warn("No dimensionality reducer provided. Unable to arrange piles by multiple dimensions."),t.abrupt("return",Promise.resolve());case 4:if(!cn||e||i.runDimReductionOnPiles){t.next=6;break}return t.abrupt("return",Promise.resolve());case 6:return Xt(),t.next=9,Ve();case 9:return s=!0===i.runDimReductionOnPiles?Object.values(nn).filter((function(t){return null!==t[0]})):Object.entries(a).map((function(t){var e=j(t,2),r=e[0],i=e[1];return n.flatMap((function(t){return t.property(i,r,0,q.get(r))}))})),u=o.fit(s),Ce.clear(),u.then((function(){cn++,Yt()})),t.abrupt("return",u);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),dn=function(t,e){var r=p.state,n=r.arrangementObjective,i=r.arrangementOptions;return un(t),n.length>2||i.forceDimReduction?fn(e):n.length>1?hn():Promise.resolve()},pn=function(){var t=d(h.mark((function t(e,r){var n,i,o,a;return h.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=p.state,i=n.arrangementType,o=n.piles,a=e.length?e:Object.keys(o),"data"!==i){t.next=6;break}return M=dn(a,r),t.next=6,M;case 6:rn();case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),gn=function(){return null===p.state.arrangementType?[]:[].concat(A(V("arrangeOnGrouping",!1,!0)),A(V("arrangementOptions",{},!0)),A(V("arrangementObjective",null,!0)),A(V("arrangementType",null,!0)))},vn=new Map,mn=new Map,yn=function(){var t=p.state,e=t.items,r=t.piles,n=t.pileLabel,o=t.pileLabelColor,a=t.pileLabelText,s=t.pileLabelTextMapping,u=t.pileLabelTextColor,l=t.pileLabelFontSize,h=t.pileLabelTextStyle;vn.forEach((function(t){t.pixiText&&t.pixiText.destroy()})),vn.clear(),mn.clear();var c=new Set;Object.values(e).forEach((function(t){var e=n.flatMap((function(e){return e(t)})).join("-");mn.set(t.id,e),!c.has(e)&&e&&(vn.set(e,{text:e,index:c.size}),c.add(e))})),vn.forEach((function(t){var e;if(null!==o)if(Jt(o))e=ki(o(t.text,vn));else{var n=o;Array.isArray(o)||(n=[o]);var c=n.length;e=ki(n[t.index%c])}else{var f=No.length;e=ki(No[t.index%f])}t.color=e;var d=Jt(a)?Object.values(r).some((function(t){return a(t)})):a;if(d){var p=t.text;Jt(s)?p=s(t.text,vn):Array.isArray(a)&&(p=a[t.index]);var g=new i["l"](p,Xm({fill:u,fontSize:2*l*window.devicePixelRatio,align:"center"},h||{}));g.updateText(),t.texture=g.texture,t.pixiText=g}}))},bn=function(t,e){var r=p.state.pileLabelSizeTransform,n=t.reduce((function(t,e){return t[e]=+!r,t}),{});return r?(e.forEach((function(t){n[t]++})),r(Object.values(n),Object.keys(n))):Object.values(n)},wn=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=K.get(e);if(n)if(p.state.pileLabel){var i=p.state,o=i.pileLabel,a=i.items;mn.size&&!r||yn();var s=t.items.flatMap((function(t){return o.map((function(e){return e(a[t])})).join("-")})).filter((function(t){return t.length})),u=$t(s);u.sort((function(t,e){return(vn.get(t.toString()).index||1/0)-(vn.get(e.toString()).index||1/0)}));var l=u.length>1?bn(u,s):[1],h=u.reduce((function(t,e){var r=e&&e.toString&&vn.get(e.toString())||Fo;return t[0].push(r.text),t[1].push(r.color),t[2].push(r.texture),t}),[[],[],[]]);n.drawLabel.apply(n,A(h).concat([l]))}else n.drawLabel([])},xn=[],_n=[],En=0,Sn=function(t){if(t.length){xn.push.apply(xn,A(t));var e=++En;Promise.all(xn).then((function(){if(e===En)return Promise.all(_n.map((function(t){return t()})))})).then((function(){_n.splice(0,_n.length),xn.splice(0,xn.length),O.textureGC.run(),f.publish("itemUpdate")}))}},On=function(){if(!S){var e=p.state,r=new Set,n=[],i=[];if(m.items!==e.items&&m.itemRenderer){var o=Xm({},m.items),a={},s={},u={};Object.entries(e.items).forEach((function(t){var r=j(t,2),n=r[0],i=r[1];m.items[n]?i.src!==m.items[n].src&&(s[n]=i,Object.values(e.piles).forEach((function(t){t.items.length>1&&t.items.includes(n)&&(u[t.id]=t)}))):a[n]=i,delete o[n]}));var l=Object.keys(a).length,c=Object.keys(s).length,g=Object.keys(o).length,b=Object.keys(u).length;l&&n.push(Oe(a)),c&&n.push(Ee(s)),g&&n.push(Er(o)),b&&n.push(Object.entries(u).forEach((function(t){var e=j(t,2),r=e[0],n=e[1],i=K.get(r);i.cover&&$e(n,i),wn(n,r)}))),(l||g)&&(r.add("grid"),r.add("layout"))}if(!Object.values(e.items).length||m.itemRenderer===e.itemRenderer&&m.previewRenderer===e.previewRenderer&&m.coverRenderer===e.coverRenderer&&m.previewAggregator===e.previewAggregator&&m.coverAggregator===e.coverAggregator||(q.size?n.push(Ee()):n.push(Oe(e.items))),m.itemSizeRange!==e.itemSizeRange&&r.add("layout"),m.piles!==e.piles&&Object.keys(m.piles).length){var w={},x=[];Object.entries(e.piles).forEach((function(t){var e=j(t,2),r=e[0],n=e[1];m.piles[r]&&n!==m.piles[r]&&(w[r]=n)})),Object.entries(w).forEach((function(t){var e=j(t,2),r=e[0],n=e[1],o=n.items.length!==m.piles[r].items.length,a=(n.x!==m.piles[r].x||n.y!==m.piles[r].y)&&0!==n.items.length;o&&(Qe(n,r),i.push(r)),a&&x.push(tr(n,r)),(o||a)&&(qe(n,r),wn(n,r))})),x.length&&Promise.all(x).then((function(t){f.publish("pilesPositionEnd",{targets:t})}))}if(!K.size||m.pileLabel===e.pileLabel&&m.pileLabelColor===e.pileLabelColor&&m.pileLabelText===e.pileLabelText&&m.pileLabelAlign===e.pileLabelAlign&&m.pileLabelFontSize===e.pileLabelFontSize&&m.pileLabelHeight===e.pileLabelHeight&&m.pileLabelStackAlign===e.pileLabelStackAlign||Object.entries(e.piles).filter((function(t){return t[1].items.length})).forEach((function(t,e){var r=j(t,2),n=r[0],i=r[1];wn(i,n,!e)})),!K.size||m.pileItemOpacity===e.pileItemOpacity&&m.pileItemBrightness===e.pileItemBrightness&&m.pileItemInvert===e.pileItemInvert&&m.pileItemTint===e.pileItemTint||Object.entries(e.piles).forEach((function(t){var e=j(t,2),r=e[0],n=e[1];Ge(n,r)})),!K.size||m.pileOpacity===e.pileOpacity&&m.pileBorderSize===e.pileBorderSize&&m.pileScale===e.pileScale&&m.pileSizeBadge===e.pileSizeBadge&&m.pileSizeBadgeAlign===e.pileSizeBadgeAlign&&m.pileVisibilityItems===e.pileVisibilityItems||(Object.entries(e.piles).forEach((function(t){var e=j(t,2),r=e[0],n=e[1];qe(n,r)})),!1===e.pileSizeBadge&&v.clear()),m.orderer!==e.orderer&&r.add("layout"),m.itemSize===e.itemSize&&m.columns===e.columns&&m.rowHeight===e.rowHeight&&m.cellAspectRatio===e.cellAspectRatio&&m.cellPadding===e.cellPadding&&m.cellSize===e.cellSize&&m.orderer===e.orderer&&m.pileCellAlignment===e.pileCellAlignment||(r.add("grid"),r.add("layout")),m.itemSize===e.itemSize&&m.pileItemOffset===e.pileItemOffset&&m.pileItemRotation===e.pileItemRotation&&m.previewPadding===e.previewPadding&&m.previewSpacing===e.previewSpacing&&m.previewScaleToCover===e.previewScaleToCover&&m.previewOffset===e.previewOffset&&m.previewItemOffset===e.previewItemOffset||r.add("positionItems"),K.size&&m.previewScaling!==e.previewScaling&&Object.values(e.piles).forEach((function(t){Ke(t)})),m.tempDepileDirection===e.tempDepileDirection&&m.tempDepileOneDNum===e.tempDepileOneDNum||r.add("layout"),m.temporaryDepiledPiles!==e.temporaryDepiledPiles&&(m.temporaryDepiledPiles.length&&dr(m.temporaryDepiledPiles),e.temporaryDepiledPiles.length?(K.forEach((function(t){t.disableInteractivity()})),vr(e.temporaryDepiledPiles)):K.forEach((function(t){t.enableInteractivity()})),H()),m.focusedPiles!==e.focusedPiles){var _=ro(m.focusedPiles,e.focusedPiles),E=j(_,2),O=E[0],T=E[1];O.filter((function(t){return K.has(t)})).forEach((function(t){var e=K.get(t);e.isTempDepiled||(e.blur(),e.isFocus=!1)})),T.filter((function(t){return K.has(t)})).forEach((function(t){var e=K.get(t);e.isTempDepiled?e.active():e.focus(),e.isFocus=!0}));var A=p.state.piles;T.length&&f.publish("pileFocus",{targets:T.map((function(t){return A[t]}))}),O.length&&f.publish("pileBlur",{targets:O.map((function(t){return A[t]}))}),H()}if(m.magnifiedPiles!==e.magnifiedPiles&&(m.magnifiedPiles.map((function(t){return K.get(t)})).filter((function(t){return t})).forEach((function(t){t.unmagnify(),delete t.magnifiedByWheel,wt(t.id),tt()})),e.magnifiedPiles.map((function(t){return K.get(t)})).filter((function(t){return t})).forEach((function(t){t.magnifiedByWheel||t.magnify(),et(t.graphics)})),H()),m.depileMethod!==e.depileMethod&&r.add("layout"),m.depiledPile!==e.depiledPile&&0!==e.depiledPile.length&&ur(e.depiledPile[0]),m.showGrid!==e.showGrid&&(e.showGrid?jt():Lt()),Object.keys(e.items).length&&e.arrangementType&&(m.arrangementType!==e.arrangementType||m.arrangementObjective!==e.arrangementObjective||n.length||i.length||e.arrangementObjective.length>2&&m.dimensionalityReducer!==e.dimensionalityReducer)){r.add("layout");var P=function(t,e){return d(h.mark((function r(){return h.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",pn(t,e));case 1:case"end":return r.stop()}}),r)})))}([].concat(i),m.arrangementObjective!==e.arrangementObjective);n.length?_n.push(P):P()}if(m.navigationMode!==e.navigationMode&&r.add("navigation"),m.darkMode===e.darkMode&&m.haltBackgroundOpacity===e.haltBackgroundOpacity||Gt(),m.darkMode!==e.darkMode&&(Kt(),e.darkMode?(y=so,de(t,"pilingjs-darkmode")):(y=uo,ye(t,"pilingjs-darkmode"))),m.darkMode===e.darkMode&&m.lassoFillColor===e.lassoFillColor&&m.lassoFillOpacity===e.lassoFillOpacity&&m.lassoShowStartIndicator===e.lassoShowStartIndicator&&m.lassoStartIndicatorOpacity===e.lassoStartIndicatorOpacity&&m.lassoStrokeColor===e.lassoStrokeColor&&m.lassoStrokeOpacity===e.lassoStrokeOpacity&&m.lassoStrokeSize===e.lassoStrokeSize||Zt(),m=e,f.publish("update",{action:p.lastAction}),r.has("grid")&&Nt(),r.has("layout")||n.length>0||i.length>0){var C=m.arrangeOnGrouping?[]:[].concat(i),M=function(t){return d(h.mark((function e(){return h.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(t));case 1:case"end":return e.stop()}}),e)})))}(C);n.length?_n.push(M):M()}r.has("navigation")&&rn(),r.has("positionItems")&&Object.values(m.piles).filter((function(t){return t.items.length>1})).forEach((function(t){He(t.id,{all:!0})})),Sn(n)}},Tn=function(){K.forEach((function(t){t&&t.blur()}))},An=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.serialize,r=void 0!==e&&e;return r?Ho(p["export"]()):p["export"]()},Pn=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.deserialize,i=void 0!==n&&n,o=r.overwriteState,a=void 0!==o&&o;T=!1;var s=new Promise((function(t){e=f.subscribe("update",(function(e){var r=e.action;r.type.indexOf("OVERWRITE")>=0&&t()}))}));return p["import"](i?$i(t):t,a),Tn(),s.then((function(){f.unsubscribe(e)})),s},Cn=function(t){return Jt(t)?t:function(e){return e[t]}},Mn=function(t){if(Jt(t.aggregator))return t.aggregator;switch(t.aggregator){case"max":return t.propertyIsVector?re:ee;case"median":return t.propertyIsVector?ae:oe;case"min":return t.propertyIsVector?ue:se;case"sum":return t.propertyIsVector?ce:he;case"mean":default:return t.propertyIsVector?ie:ne}},In=function(t){if(Jt(t))return t;switch(t){case"linear":default:return no}},kn=function(t){Array.isArray(t)||(t=[t]);var e=[];return t.forEach((function(t){var r={};t.constructor!==Object?(r.property=Cn(t),r.aggregator=t.propertyIsVector?ie:ne,r.scale=no,r.inverse=!1):(r.property=Cn(t.property),r.aggregator=Mn(t),r.scale=In(t.scale),r.inverse=!!t.inverse),e.push(r)})),e},Dn=function(t,e){var r={};return t.constructor!==Object?(r.property=Cn(t),r.isCustom=Jt(t),r.aggregator=e?ie:ne):(r.property=Cn(t.property),r.aggregator=Mn(t)),r},Rn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e;switch(t){case"data":n=kn(e);break;case"xy":case"ij":case"uv":case"custom":n=Dn(e,!0);break;case"index":n=Dn(e);break}var i=!!r.onGrouping;return delete r.onGrouping,p.dispatch(Vt([].concat(A(V("arrangeOnGrouping",i,!0)),A(V("arrangementOptions",r,!0)),A(V("arrangementObjective",n,!0)),A(V("arrangementType",t,!0))))),new Promise((function(t){f.subscribe("pilesPositionEnd",t,1)}))},jn=function(t){return t||1},Ln=function(t){return t||1},Bn=function(t){var e=null;return Qt(t)?e=Xm(Xm({},e),t):+t&&(e.columns={columns:+t,cellAspectRatio:ct.cellAspectRatio}),e},Nn=function(t){var e=Array.isArray(t)?t:[t];return e.map((function(e){var r={};return Qt(t)?(r.property=Cn(e.property),r.aggregator=Jt(e.aggregator)?e.aggregator:Go):(r.property=Cn(e),r.aggregator=Go),r}))},Fn=function(t){var e=Array.isArray(t)?t:[t];return e.map((function(e){var r={};return e.constructor!==Object?(r.property=Cn(e),r.aggregator=t.propertyIsVector?ie:ne):(r.property=Cn(e.property),r.aggregator=Mn(e)),r}))},Un=function(t,e){switch(t){case"overlap":return Ln(e);case"grid":return Bn(e);case"distance":return jn(e);case"category":return Nn(e);case"cluster":return Fn(e);default:return e}},zn=function(){var t=p.state.piles,e=pt.all().reduce((function(t,e){var r=e.maxX-e.minX,n=e.maxY-e.minY;return t[e.id]={cX:(e.minX+r/2)/_,cY:(e.minY+r/2)/E,width:r,height:n,id:e.id},t}),{});return Object.entries(t).forEach((function(t){var r=j(t,2),n=r[0],i=r[1];i.items.forEach((function(t){e[t]||(e[t]=Xm(Xm({},e[n]),{},{id:t}))}))})),Object.values(e)},Vn=function(t){var e={};if(Qt(t)?(e.threshold=t.threshold,t.basedOn&&(e.basedOn=Cn(t.basedOn))):Array.isArray(t)?(e.threshold=t[0],t.length>1&&(e.basedOn=Cn(t[1]))):e.threshold=t,e.basedOn){var r=p.state,n=r.items,i=r.piles;e.basedOn=Object.values(i).flatMap((function(t){return t.items.map((function(t,r){var i=q.get(t),o=e.basedOn(n[t],t,r,i),a=j(o,2),s=a[0],u=a[1];return{id:t,cX:s,cY:u,width:i.image.width,height:i.image.height}}))}))}else e.basedOn=zn();return e},Xn=function(t){var e=Array.isArray(t)?t:[t];return e.map((function(t){return Cn(t)}))},Yn=function(t,e){switch(t){case"overlap":return Vn(e);case"distance":return Vn(e);case"category":return Xn(e);case"cluster":return Xn(e);default:return e}},Hn=function(t){if(null===t)return null;var e=Array.isArray(t)?t:[t];return e.map((function(t){return Cn(t)}))},Gn=function(t){if(Jt(t))return t;switch(t){case"histogram":return function(t){var e=Object.values(t),r=ee(e);return e.map((function(t){return t/r}))};default:return function(t){return t.map((function(){return 1}))}}},qn=!1,Wn=function(t,e){if(!qn){qn=!0;var r=p.state.piles,n=r[t].x,i=r[t].y,o=function(){qn=!1,p.dispatch(Sv.mergePiles([t].concat(A(e)),[n,i],t))},a=function(){++s===e.length&&o()},s=0;G.addBatch(e.map((function(t){return me(K.get(t),n,i,{onDone:a})})))}},Kn=function(t){var e=p.state.piles;t.filter((function(t){return K.has(t)&&1===K.get(t).size})).forEach((function(t){q.get(t).setOriginalPosition([e[t].x,e[t].y])}))},$n=function(t){var e=t.target;ft=!1,wt(e.id);var r=K.get(e.id),n=r.graphics;if(!r.isTempDepiled){if(r.x!==n.beforeDragX||r.y!==n.beforeDragY){var i=bt(e.id),o=pt.search(i).filter((function(t){return t.id!==e.id}));if(1===o.length){if(!r.isTempDepiled){var a=o[0].id,s=K.get(a),l=p.state.piles[a];if(ft=!s.isTempDepiled,ft){r.items.forEach((function(t){t.item.tmpAbsX=n.x,t.item.tmpAbsY=n.y,t.item.tmpRelScale=r.scale})),Kn([a,e.id]);var h=p.state,c=h.previewAggregator,f=h.previewRenderer;c||f?Wn(a,[e.id]):p.dispatch(Sv.mergePiles([e.id,a],[l.x,l.y],a))}}}else{var d=u([r.x,r.y]),g=j(d,2),v=g[0],m=g[1];p.dispatch(Sv.movePiles([{id:e.id,x:v,y:m}]))}}ft||tt(),Jn()}},Zn=[],Jn=function(){Zn.map((function(t){return K.get(t.id)})).filter(Wt).forEach((function(t){t.blur()})),Zn=[]},Qn=function(t){if(!p.state.temporaryDepiledPiles.length){var e=pt.search(bt(t)).filter((function(e){return e.id!==t}));Jn(),e.map((function(t){return K.get(t.id)})).filter(Wt).forEach((function(t){t.hover()})),Zn=A(e)}},ti=function(t){var e=t.target,r=t.event,n=K.get(e.id);if(n&&n.isMagnified){var i=r.data.getLocalPosition(n.graphics.parent);n.graphics.draggingMouseOffset[0]/=n.magnification,n.graphics.draggingMouseOffset[1]/=n.magnification,be(n,i.x-n.graphics.draggingMouseOffset[0],i.y-n.graphics.draggingMouseOffset[1])}p.dispatch(Sv.setMagnifiedPiles([])),et(n.graphics)},ei=function(t){var e=t.target;Qn(e.id)},ri=function(t){var e=t.target,r=K.get(e.id);et(r.graphics)},ni=function(t){var e=t.target,r=K.get(e.id);r&&r.isTempDepiled||tt()},ii=function(e){e.style.display="none",t.removeChild(e)},oi=function(t,e){return function(){var r=p.state.depileMethod;"originalPos"===r?lr(e):"cloestPos"===r&&p.dispatch(Sv.setDepiledPile([e])),p.dispatch(Sv.setFocusedPiles([])),ii(t)}},ai=function(t,e){return function(){var r=p.state,n=r.piles,i=r.temporaryDepiledPiles;if(n[e].items.length>1){var o=A(i);o=o.includes(e)?o.filter((function(t){return t!==e})):[e],p.dispatch(Sv.setTemporaryDepiledPiles(A(o)))}ii(t)}},si=function(t){return function(){var e=p.state.showGrid;p.dispatch(Sv.setShowGrid(!e)),ii(t),H()}},ui=function(t,e){return function(){var r=K.get(e);r.isMagnified?p.dispatch(Sv.setMagnifiedPiles([])):p.dispatch(Sv.setMagnifiedPiles([e])),ii(t)}},li=[0,0],hi=function(t){if(0===t.button){H(),li=mr(t);var e=l(li);st=!pt.collides({minX:e[0],minY:e[1],maxX:e[0]+1,maxY:e[1]+1}),gt(e)}},ci=function(){st&&(st=!1,lt?br():P&&Ct())},fi=function(t){st&&(t.shiftKey||lt?ht.extendDb(mr(t)):P&&Ot(!1))},di=!1,pi=function(e){if(di)di=!1;else{di=!0,setTimeout((function(){di=!1}),300);var r=t.querySelector("#piling-js-context-menu"),n=!!r;n&&t.removeChild(r);var i=mr(e);if(i[0]===li[0]&&i[1]===li[1]){var o=l(i),a=pt.search({minX:o[0],minY:o[1],maxX:o[0]+1,maxY:o[1]+1});if(0!==a.length)if(e.shiftKey){var s=p.state.focusedPiles,u=a[0].id;s.includes(u)?gi(u):p.dispatch(Sv.setFocusedPiles([].concat(A(s),[u])))}else if(e.altKey){var h=p.state.depileMethod;"originalPos"===h?lr(a[0].id):"cloestPos"===h&&p.dispatch(Sv.setDepiledPile([a[0].id])),p.dispatch(Sv.setFocusedPiles([]))}else a.forEach((function(t){var e=K.get(t.id);e.isHover&&p.dispatch(Sv.setFocusedPiles([t.id]))}));else{var c=p.state,f=c.focusedPiles,d=c.magnifiedPiles;f.length&&p.dispatch(Sv.setFocusedPiles([])),d.length&&p.dispatch(Sv.setMagnifiedPiles([])),n||f.length||d.length||ht.showStartIndicator(li)}}}},gi=function(t){var e=p.state.focusedPiles,r=e.filter((function(e){return e!==t}));r.length&&(p.dispatch(Sv.setFocusedPiles([t])),Wn(t,r))},vi=function(t){var e=mr(t),r=l(e),n=p.state,i=n.temporaryDepiledPiles,o=n.piles,a=pt.search({minX:r[0],minY:r[1],maxX:r[0]+1,maxY:r[1]+1});if(0===a.length||i.length)p.dispatch(Sv.setTemporaryDepiledPiles([])),p.dispatch(Sv.setFocusedPiles([]));else{var s=a[0].id;if(t.shiftKey)gi(s);else if(o[s].items.length>1){var u=A(i);u=u.includes(s)?u.filter((function(t){return t!==s})):[s],p.dispatch(Sv.setTemporaryDepiledPiles(A(u)))}}},mi=function(t){if(t.altKey){var e=mr(t),r=l(e),n=pt.search({minX:r[0],minY:r[1],maxX:r[0]+1,maxY:r[1]+1});if(0!==n.length){var i=K.get(n[0].id);t.preventDefault(),i.isMagnified?(i.magnifiedByWheel=!0,p.dispatch(Sv.setMagnifiedPiles([i.id]))):(delete i.magnifiedByWheel,p.dispatch(Sv.setMagnifiedPiles([]))),xr(n[0].id,Ut(t).pixelY)}}else P&&(Ot(),Pt())},yi=function(){k.y=-r.scrollTop,H()},bi=function(){var e=t.getBoundingClientRect(),r=e.width,n=e.height;_=r,E=n,O.resize(_,E),c&&c.setViewCenter([_/2,E/2]),L.width=r,L.height=n,Nt(),f.publish("resize",{width:r,height:n})},wi=ze(bi,500),xi=function(){var t=ct.align(K),e=[];t.filter((function(t){var e=t.id,r=t.x,n=t.y,i=K.get(e),o=De(r,n,i.x,i.y);return!(o<3)||(ge(i,r,n),o>ao&&wt(i.id),!1)})).forEach((function(r,n,i){var o=r.id,a=r.x,s=r.y,u=K.get(o),l=De(a,s,u.x,u.y);e.push(Uv({duration:Math.max(125,250*Ht(Math.min(l,250)/250)),interpolator:qt,endValue:[a,s],getter:function(){return[u.x,u.y]},setter:function(t){ge(u,t[0],t[1])},onDone:function(){wt(u.id),n===i.length-1&&(p.dispatch(Sv.movePiles(t)),vt(),Mt(),H())}}))})),G.addBatch(e)},_i=function(){var e=t.querySelector("#piling-js-context-menu");e&&t.removeChild(e)},Ei=function(){xi(),_i()},Si=function(t,e){return function(){zt.enter([e]),lr(e),ii(t)}},Oi=function(e){_i();var r=mr(e),n=l(r);if(!e.altKey){var i=p.state,a=i.pileContextMenuItems,s=i.showGrid;e.preventDefault();var u=pt.search({minX:n[0],minY:n[1],maxX:n[0]+1,maxY:n[1]+1}),h=u.length>0,c=Tm({customItems:a.filter((function(t){return t.label&&t.callback}))});t.appendChild(c);var f=c.querySelector("#depile-button"),d=c.querySelector("#temp-depile-button"),g=c.querySelector("#browse-separately"),v=c.querySelector("#grid-button"),m=c.querySelector("#align-button"),y=c.querySelector("#magnify-button");if(h){var b;v.style.display="none",m.style.display="none",u.forEach((function(t){K.get(t.id).isHover&&(b=K.get(t.id))})),b&&1===b.size?(f.setAttribute("disabled",""),f.setAttribute("class","inactive"),d.setAttribute("disabled",""),d.setAttribute("class","inactive"),g.setAttribute("disabled",""),g.setAttribute("class","inactive")):b.isTempDepiled&&(f.setAttribute("disabled",""),f.setAttribute("class","inactive"),y.setAttribute("disabled",""),y.setAttribute("class","inactive"),g.setAttribute("disabled",""),g.setAttribute("class","inactive"),d.innerHTML="Close Temp. Depile"),b.isMagnified&&(y.innerHTML="Unmagnify"),c.style.display="block";var w=c.getBoundingClientRect(),x=w.width;r[0]>o.getBoundingClientRect().width-x?c.style.left="".concat(r[0]-x,"px"):c.style.left="".concat(r[0],"px"),c.style.top="".concat(r[1]+k.y,"px"),f.addEventListener("click",oi(c,b.id),po),d.addEventListener("click",ai(c,b.id),po),g.addEventListener("click",Si(c,b.id),po),y.addEventListener("click",ui(c,b.id),po),a.forEach((function(t,e){var r=t.id?c.querySelector("#".concat(t.id)):c.querySelector("#piling-js-context-menu-custom-item-".concat(e));r.addEventListener("click",(function(){t.callback(Xm({id:b.id},p.state.piles[b.id])),t.keepOpen||_i()}),{once:!t.keepOpen,passive:!0})}))}else{f.style.display="none",d.style.display="none",g.style.display="none",y.style.display="none",s&&(v.innerHTML="Hide Grid"),c.style.display="block";var _=c.getBoundingClientRect(),E=_.width;r[0]>o.getBoundingClientRect().width-E?c.style.left="".concat(r[0]-E,"px"):c.style.left="".concat(r[0],"px"),c.style.top="".concat(r[1]+k.y,"px"),v.addEventListener("click",si(c),po),m.addEventListener("click",Ei,po),a.forEach((function(t,e){var r=t.id?c.querySelector("#".concat(t.id)):c.querySelector("#piling-js-context-menu-custom-item-".concat(e));r.addEventListener("click",(function(){t.callback(),t.keepOpen||_i()}),{once:!t.keepOpen,passive:!0})}))}}},Ti=function(t){t.setEasing(p.state.easing),G.add(t)},Pi=function(t){G.cancel(t)},Mi=function(){window.addEventListener("resize",wi,po),window.addEventListener("orientationchange",wi,po),o.addEventListener("contextmenu",Oi,fo),o.addEventListener("click",pi,po),o.addEventListener("dblclick",vi,po),f.subscribe("pileDragStart",ti),f.subscribe("pileDragMove",ei),f.subscribe("pileDragEnd",$n),f.subscribe("pileEnter",ri),f.subscribe("pileLeave",ni),f.subscribe("startAnimation",Ti),f.subscribe("cancelAnimation",Pi),f.subscribe("updatePileBounds",xt),dt=p.subscribe(On),t.appendChild(r),t.appendChild(zt.nav),t.appendChild(rt.element),de(t,"pilingjs"),p.state.darkMode&&de(t,"pilingjs-darkmode"),t.style.overflow="hidden",r.appendChild(o),r.appendChild(n),r.appendChild(ht.startIndicator),r.style.position="absolute",r.style.overflowX="hidden",r.style.top=0,r.style.right=0,r.style.bottom=0,r.style.left=0,o.style.position="sticky",o.style.display="block",o.style.top="0px",o.style.left="0px",bi(),Bt(),It(),at(),X(e),!e.piles&&e.items&&p.dispatch(Sv.initPiles(e.items))},Di=function(){S=!0,window.removeEventListener("mousedown",hi),window.removeEventListener("mouseup",ci),window.removeEventListener("mousemove",fi),window.removeEventListener("resize",wi),window.removeEventListener("orientationchange",wi),r.removeEventListener("scroll",yi),o.removeEventListener("contextmenu",Oi),o.removeEventListener("click",pi),o.removeEventListener("dblclick",vi),o.removeEventListener("wheel",mi),p.reset(),I.destroy(!0),I=null,O.destroy(!0),O=null,ht.destroy(),v.destroy(),dt&&(dt(),dt=void 0);while(t.firstChild)t.firstChild.remove();f.clear()};return Mi(),{get renderer(){return O},get version(){return uu},arrangeBy:Rn,destroy:Di,exportState:An,get:z,groupBy:zr,halt:Xt,importState:Pn,render:H,resume:Yt,set:X,splitAll:en,splitBy:tn,subscribe:f.subscribe,unsubscribe:f.unsubscribe}},$m=(s((function(t,e){!function(e,r){t.exports=r()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=5)}([function(t,e,r){const n=Object.prototype.toString;t.exports=function(t){return n.call(t).endsWith("Array]")}},function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}};function i(t,e){return Math.floor(e()*t)}function o(t){for(var e=[],r=0;r<t;r++)e.push(void 0);return e}function a(t,e){return o(t).map((function(){return e}))}function s(t){return a(t,0)}function u(t){return t.reduce((function(t,e){return t+e}))}Object.defineProperty(e,"__esModule",{value:!0}),e.tauRandInt=i,e.tauRand=function(t){return t()},e.norm=function(t){var e,r,i=0;try{for(var o=n(t),a=o.next();!a.done;a=o.next()){var s=a.value;i+=Math.pow(s,2)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return Math.sqrt(i)},e.empty=o,e.range=function(t){return o(t).map((function(t,e){return e}))},e.filled=a,e.zeros=s,e.ones=function(t){return a(t,1)},e.linear=function(t,e,r){return o(r).map((function(n,i){return t+i*((e-t)/(r-1))}))},e.sum=u,e.mean=function(t){return u(t)/t.length},e.max=function(t){for(var e=0,r=0;r<t.length;r++)e=t[r]>e?t[r]:e;return e},e.max2d=function(t){for(var e=0,r=0;r<t.length;r++)for(var n=0;n<t[r].length;n++)e=t[r][n]>e?t[r][n]:e;return e},e.rejectionSample=function(t,e,r){for(var n=s(t),o=0;o<t;o++)for(var a=!0;a;){for(var u=i(e,r),l=!1,h=0;h<o;h++)if(u===n[h]){l=!0;break}l||(a=!1),n[o]=u}return n},e.reshape2d=function(t,e,r){var n=[],i=0;if(t.length!==e*r)throw new Error("Array dimensions must match input length.");for(var o=0;o<e;o++){for(var a=[],s=0;s<r;s++)a.push(t[i]),i+=1;n.push(a)}return n}},function(t,e,r){var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=n(r(1));function o(t,e){var r=function(r){return i.empty(t).map((function(){return i.filled(e,r)}))},n=[];return n.push(r(-1)),n.push(r(1/0)),n.push(r(0)),n}function a(t,e,r,n,i){e=Math.floor(e);var o=t[0][e],a=t[1][e];if(t[2][e],r>=a[0])return 0;for(var u=0;u<o.length;u++)if(n===o[u])return 0;return s(t,e,r,n,i)}function s(t,e,r,n,i){var o=t[0][e],a=t[1][e],s=t[2][e];if(r>=a[0])return 0;a[0]=r,o[0]=n,s[0]=i;for(var u=0,l=0;;){var h=2*u+1,c=h+1,f=t[0][0].length;if(h>=f)break;if(c>=f){if(!(a[h]>r))break;l=h}else if(a[h]>=a[c]){if(!(r<a[h]))break;l=h}else{if(!(r<a[c]))break;l=c}a[u]=a[l],o[u]=o[l],s[u]=s[l],u=l}return a[u]=r,o[u]=n,s[u]=i,1}function u(t,e,r,n){for(;2*n+1<r;){var i=2*n+1,o=i+1,a=n;if(t[a]<t[i]&&(a=i),o<r&&t[a]<t[o]&&(a=o),a===n)break;var s=t[n];t[n]=t[a],t[a]=s;var u=e[n];e[n]=e[a],e[a]=u,n=a}}e.makeHeap=o,e.rejectionSample=function(t,e,r){for(var n=i.zeros(t),o=0;o<t;o++){for(var a=!0,s=0;a;){s=i.tauRandInt(e,r);for(var u=!1,l=0;l<o;l++)if(s===n[l]){u=!0;break}u||(a=!1)}n[o]=s}return n},e.heapPush=a,e.uncheckedHeapPush=s,e.buildCandidates=function(t,e,r,n,s){for(var u=o(e,n),l=0;l<e;l++)for(var h=0;h<r;h++)if(!(t[0][l][h]<0)){var c=t[0][l][h],f=t[2][l][h],d=i.tauRand(s);a(u,l,d,c,f),a(u,c,d,l,f),t[2][l][h]=0}return u},e.deheapSort=function(t){for(var e=t[0],r=t[1],n=0;n<e.length;n++)for(var i=e[n],o=r[n],a=0;a<i.length-1;a++){var s=i.length-a-1,l=o.length-a-1,h=i[0];i[0]=i[s],i[s]=h;var c=o[0];o[0]=o[l],o[l]=c,u(o,i,l,0)}return{indices:e,weights:r}},e.smallestFlagged=function(t,e){for(var r=t[0][e],n=t[1][e],i=t[2][e],o=1/0,a=-1,s=0;s>r.length;s++)1===i[s]&&n[s]<o&&(o=n[s],a=s);return a>=0?(i[a]=0,Math.floor(r[a])):-1}},function(t,e,r){var n,i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s=a(r(1)),u=function(){function t(t,e,r,n){if(this.entries=new Map,this.nRows=0,this.nCols=0,t.length!==e.length||t.length!==r.length)throw new Error("rows, cols and values arrays must all have the same length");this.nRows=n[0],this.nCols=n[1];for(var i=0;i<r.length;i++){var o=t[i],a=e[i];this.checkDims(o,a);var s=this.makeKey(o,a);this.entries.set(s,{value:r[i],row:o,col:a})}}return t.prototype.makeKey=function(t,e){return t+":"+e},t.prototype.checkDims=function(t,e){if(!(t<this.nRows&&e<this.nCols))throw new Error("row and/or col specified outside of matrix dimensions")},t.prototype.set=function(t,e,r){this.checkDims(t,e);var n=this.makeKey(t,e);this.entries.has(n)?this.entries.get(n).value=r:this.entries.set(n,{value:r,row:t,col:e})},t.prototype.get=function(t,e,r){void 0===r&&(r=0),this.checkDims(t,e);var n=this.makeKey(t,e);return this.entries.has(n)?this.entries.get(n).value:r},t.prototype.getAll=function(t){void 0===t&&(t=!0);var e=[];return this.entries.forEach((function(t){e.push(t)})),t&&e.sort((function(t,e){return t.row===e.row?t.col-e.col:t.row-e.row})),e},t.prototype.getDims=function(){return[this.nRows,this.nCols]},t.prototype.getRows=function(){return Array.from(this.entries,(function(t){var e=i(t,2);return e[0],e[1].row}))},t.prototype.getCols=function(){return Array.from(this.entries,(function(t){var e=i(t,2);return e[0],e[1].col}))},t.prototype.getValues=function(){return Array.from(this.entries,(function(t){var e=i(t,2);return e[0],e[1].value}))},t.prototype.forEach=function(t){this.entries.forEach((function(e){return t(e.value,e.row,e.col)}))},t.prototype.map=function(e){var r=[];this.entries.forEach((function(t){r.push(e(t.value,t.row,t.col))}));var n=[this.nRows,this.nCols];return new t(this.getRows(),this.getCols(),r,n)},t.prototype.toArray=function(){var t=this,e=s.empty(this.nRows).map((function(){return s.zeros(t.nCols)}));return this.entries.forEach((function(t){e[t.row][t.col]=t.value})),e},t}();e.SparseMatrix=u,e.transpose=function(t){var e=[],r=[],n=[];t.forEach((function(t,i,o){e.push(i),r.push(o),n.push(t)}));var i=[t.nCols,t.nRows];return new u(r,e,n,i)},e.identity=function(t){for(var e=i(t,1)[0],r=new u([],[],[],t),n=0;n<e;n++)r.set(n,n,1);return r},e.pairwiseMultiply=function(t,e){return h(t,e,(function(t,e){return t*e}))},e.add=function(t,e){return h(t,e,(function(t,e){return t+e}))},e.subtract=function(t,e){return h(t,e,(function(t,e){return t-e}))},e.maximum=function(t,e){return h(t,e,(function(t,e){return t>e?t:e}))},e.multiplyScalar=function(t,e){return t.map((function(t){return t*e}))},e.eliminateZeros=function(t){for(var e=new Set,r=t.getValues(),n=t.getRows(),i=t.getCols(),o=0;o<r.length;o++)0===r[o]&&e.add(o);var a=function(t,r){return!e.has(r)},s=r.filter(a),l=n.filter(a),h=i.filter(a);return new u(l,h,s,t.getDims())},e.normalize=function(t,e){var r,n;void 0===e&&(e="l2");var i=l[e],a=new Map;t.forEach((function(t,e,r){var n=a.get(e)||[];n.push(r),a.set(e,n)}));var s=new u([],[],[],t.getDims()),h=function(e){for(var r=a.get(e).sort(),n=r.map((function(r){return t.get(e,r)})),o=i(n),u=0;u<o.length;u++)s.set(e,r[u],o[u])};try{for(var c=o(a.keys()),f=c.next();!f.done;f=c.next())h(f.value)}catch(t){r={error:t}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return s};var l=((n={}).max=function(t){for(var e=-1/0,r=0;r<t.length;r++)e=t[r]>e?t[r]:e;return t.map((function(t){return t/e}))},n.l1=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return t.map((function(t){return t/e}))},n.l2=function(t){for(var e=0,r=0;r<t.length;r++)e+=Math.pow(t[r],2);return t.map((function(t){return Math.sqrt(Math.pow(t,2)/e)}))},n);function h(t,e,r){for(var n=new Set,i=[],o=[],a=[],s=function(n,s){i.push(n),o.push(s);var u=r(t.get(n,s),e.get(n,s));a.push(u)},l=t.getValues(),h=t.getRows(),c=t.getCols(),f=0;f<l.length;f++){var d=(m=h[f])+":"+(y=c[f]);n.add(d),s(m,y)}var p=e.getValues(),g=e.getRows(),v=e.getCols();for(f=0;f<p.length;f++){var m,y;d=(m=g[f])+":"+(y=v[f]),n.has(d)||s(m,y)}var b=[t.nRows,t.nCols];return new u(i,o,a,b)}e.getCSR=function(t){var e=[];t.forEach((function(t,r,n){e.push({value:t,row:r,col:n})})),e.sort((function(t,e){return t.row===e.row?t.col-e.col:t.row-e.row}));for(var r=[],n=[],i=[],o=-1,a=0;a<e.length;a++){var s=e[a],u=s.row,l=s.col,h=s.value;u!==o&&(o=u,i.push(a)),r.push(l),n.push(h)}return{indices:r,values:n,indptr:i}}},function(t,e,r){var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s=a(r(1)),u=function(){return function(t,e,r,n){this.hyperplanes=t,this.offsets=e,this.children=r,this.indices=n}}();function l(t,e,r,n){for(var i=e,o=0;o<r.length;o++)i+=t[o]*r[o];return 0===i?s.tauRandInt(2,n):i>0?0:1}e.FlatTree=u,e.makeForest=function(t,e,r,n){var o=Math.max(10,e);return s.range(r).map((function(e,r){return function(t,e,r,n){void 0===e&&(e=30);var i=s.range(t.length);return function t(e,r,n,i,o){if(void 0===n&&(n=30),r.length>n){var a=function(t,e,r){var n=t[0].length,i=s.tauRandInt(e.length,r),o=s.tauRandInt(e.length,r);o=(o+=i===o?1:0)%e.length;for(var a=e[i],u=e[o],l=0,h=s.zeros(n),c=0;c<h.length;c++)h[c]=t[a][c]-t[u][c],l-=h[c]*(t[a][c]+t[u][c])/2;var f=0,d=0,p=s.zeros(e.length);for(c=0;c<e.length;c++){for(var g=l,v=0;v<n;v++)g+=h[v]*t[e[c]][v];0===g?(p[c]=s.tauRandInt(2,r),0===p[c]?f+=1:d+=1):g>0?(p[c]=0,f+=1):(p[c]=1,d+=1)}var m=s.zeros(f),y=s.zeros(d);for(var c in f=0,d=0,s.range(p.length))0===p[c]?(m[f]=e[c],f+=1):(y[d]=e[c],d+=1);return{indicesLeft:m,indicesRight:y,hyperplane:h,offset:l}}(e,r,o),u=a.indicesLeft,l=a.indicesRight,h=a.hyperplane,c=a.offset,f=t(e,u,n,i+1,o),d=t(e,l,n,i+1,o),p={leftChild:f,rightChild:d,isLeaf:!1,hyperplane:h,offset:c};return p}p={indices:r,isLeaf:!0};return p}(t,i,e,r,n)}(t,o,r,n)})).map((function(t){return function(t,e){var r=function t(e){return e.isLeaf?1:1+t(e.leftChild)+t(e.rightChild)}(t),n=function t(e){return e.isLeaf?1:t(e.leftChild)+t(e.rightChild)}(t),o=s.range(r).map((function(){return s.zeros(t.hyperplane?t.hyperplane.length:0)})),a=s.zeros(r),l=s.range(r).map((function(){return[-1,-1]})),h=s.range(n).map((function(){return s.range(e).map((function(){return-1}))}));return function t(e,r,n,o,a,s,u){var l;if(e.isLeaf)return o[s][0]=-u,(l=a[u]).splice.apply(l,i([0,e.indices.length],e.indices)),{nodeNum:s,leafNum:u+=1};r[s]=e.hyperplane,n[s]=e.offset,o[s][0]=s+1;var h=s,c=t(e.leftChild,r,n,o,a,s+1,u);return s=c.nodeNum,u=c.leafNum,o[h][1]=s+1,{nodeNum:(c=t(e.rightChild,r,n,o,a,s+1,u)).nodeNum,leafNum:c.leafNum}}(t,o,a,l,h,0,0),new u(o,a,l,h)}(t,o)}))},e.makeLeafArray=function(t){var e,r;if(t.length>0){var n=[];try{for(var a=o(t),s=a.next();!s.done;s=a.next()){var u=s.value;n.push.apply(n,i(u.indices))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n}return[[-1]]},e.searchFlatTree=function(t,e,r){for(var n=0;e.children[n][0]>0;)n=0===l(e.hyperplanes[n],e.offsets[n],t,r)?e.children[n][0]:e.children[n][1];var i=-1*e.children[n][0];return e.indices[i]}},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n=r(6);e.UMAP=n.UMAP},function(t,e,r){var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(a,s)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=s(r(2)),h=s(r(3)),c=s(r(7)),f=s(r(4)),d=s(r(1)),p=u(r(8)),g=function(){function t(t){void 0===t&&(t={});var e=this;this.learningRate=1,this.localConnectivity=1,this.minDist=.1,this.nComponents=2,this.nEpochs=0,this.nNeighbors=15,this.negativeSampleRate=5,this.random=Math.random,this.repulsionStrength=1,this.setOpMixRatio=1,this.spread=1,this.transformQueueSize=4,this.targetMetric="categorical",this.targetWeight=.5,this.targetNNeighbors=this.nNeighbors,this.distanceFn=v,this.isInitialized=!1,this.rpForest=[],this.embedding=[],this.optimizationState=new m;var r=function(r){void 0!==t[r]&&(e[r]=t[r])};r("distanceFn"),r("learningRate"),r("localConnectivity"),r("minDist"),r("nComponents"),r("nEpochs"),r("nNeighbors"),r("negativeSampleRate"),r("random"),r("repulsionStrength"),r("setOpMixRatio"),r("spread"),r("transformQueueSize")}return t.prototype.fit=function(t){return this.initializeFit(t),this.optimizeLayout(),this.embedding},t.prototype.fitAsync=function(t,e){return void 0===e&&(e=function(){return!0}),n(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return this.initializeFit(t),[4,this.optimizeLayoutAsync(e)];case 1:return r.sent(),[2,this.embedding]}}))}))},t.prototype.setSupervisedProjection=function(t,e){void 0===e&&(e={}),this.Y=t,this.targetMetric=e.targetMetric||this.targetMetric,this.targetWeight=e.targetWeight||this.targetWeight,this.targetNNeighbors=e.targetNNeighbors||this.targetNNeighbors},t.prototype.setPrecomputedKNN=function(t,e){this.knnIndices=t,this.knnDistances=e},t.prototype.initializeFit=function(t){if(t.length<=this.nNeighbors)throw new Error("Not enough data points ("+t.length+") to create nNeighbors: "+this.nNeighbors+".  Add more data points or adjust the configuration.");if(this.X===t&&this.isInitialized)return this.getNEpochs();if(this.X=t,!this.knnIndices&&!this.knnDistances){var e=this.nearestNeighbors(t);this.knnIndices=e.knnIndices,this.knnDistances=e.knnDistances}this.graph=this.fuzzySimplicialSet(t,this.nNeighbors,this.setOpMixRatio),this.makeSearchFns(),this.searchGraph=this.makeSearchGraph(t),this.processGraphForSupervisedProjection();var r=this.initializeSimplicialSetEmbedding(),n=r.head,i=r.tail,o=r.epochsPerSample;return this.optimizationState.head=n,this.optimizationState.tail=i,this.optimizationState.epochsPerSample=o,this.initializeOptimization(),this.prepareForOptimizationLoop(),this.isInitialized=!0,this.getNEpochs()},t.prototype.makeSearchFns=function(){var t=c.makeInitializations(this.distanceFn),e=t.initFromTree,r=t.initFromRandom;this.initFromTree=e,this.initFromRandom=r,this.search=c.makeInitializedNNSearch(this.distanceFn)},t.prototype.makeSearchGraph=function(t){for(var e=this.knnIndices,r=this.knnDistances,n=[t.length,t.length],i=new h.SparseMatrix([],[],[],n),o=0;o<e.length;o++)for(var a=e[o],s=r[o],u=0;u<a.length;u++){var l=a[u],c=s[u];c>0&&i.set(o,l,c)}var f=h.transpose(i);return h.maximum(i,f)},t.prototype.transform=function(t){var e=this,r=this.X;if(void 0===r||0===r.length)throw new Error("No data has been fit.");var n=Math.floor(this.nNeighbors*this.transformQueueSize);n=Math.min(r.length,n);var i=c.initializeSearch(this.rpForest,r,t,n,this.initFromRandom,this.initFromTree,this.random),o=this.search(r,this.searchGraph,i,t),a=l.deheapSort(o),s=a.indices,u=a.weights;s=s.map((function(t){return t.slice(0,e.nNeighbors)})),u=u.map((function(t){return t.slice(0,e.nNeighbors)}));var f=Math.max(0,this.localConnectivity-1),p=this.smoothKNNDistance(u,this.nNeighbors,f),g=p.sigmas,v=p.rhos,m=this.computeMembershipStrengths(s,u,g,v),y=m.rows,b=m.cols,w=m.vals,x=[t.length,r.length],_=new h.SparseMatrix(y,b,w,x),S=h.normalize(_,"l1"),O=h.getCSR(S),T=t.length,A=E(d.reshape2d(O.indices,T,this.nNeighbors),d.reshape2d(O.values,T,this.nNeighbors),this.embedding),P=this.nEpochs?this.nEpochs/3:_.nRows<=1e4?100:30,C=_.getValues().reduce((function(t,e){return e>t?e:t}),0);_=_.map((function(t){return t<C/P?0:t})),_=h.eliminateZeros(_);var M=this.makeEpochsPerSample(_.getValues(),P),I=_.getRows(),k=_.getCols();return this.assignOptimizationStateParameters({headEmbedding:A,tailEmbedding:this.embedding,head:I,tail:k,currentEpoch:0,nEpochs:P,nVertices:_.getDims()[1],epochsPerSample:M}),this.prepareForOptimizationLoop(),this.optimizeLayout()},t.prototype.processGraphForSupervisedProjection=function(){var t=this.Y,e=this.X;if(t){if(t.length!==e.length)throw new Error("Length of X and y must be equal");if("categorical"===this.targetMetric){var r=this.targetWeight<1?1/(1-this.targetWeight)*2.5:1e12;this.graph=this.categoricalSimplicialSetIntersection(this.graph,t,r)}}},t.prototype.step=function(){var t=this.optimizationState.currentEpoch;return t<this.getNEpochs()&&this.optimizeLayoutStep(t),this.optimizationState.currentEpoch},t.prototype.getEmbedding=function(){return this.embedding},t.prototype.nearestNeighbors=function(t){var e,r=this.distanceFn,n=this.nNeighbors,i=c.makeNNDescent(r,this.random),o=5+Math.floor(.5===(e=Math.pow(t.length,.5)/20)?0:Math.round(e)),a=Math.max(5,Math.floor(Math.round(function(t){return Math.log(t)/Math.log(2)}(t.length))));this.rpForest=f.makeForest(t,n,o,this.random);var s=i(t,f.makeLeafArray(this.rpForest),n,a);return{knnIndices:s.indices,knnDistances:s.weights}},t.prototype.fuzzySimplicialSet=function(t,e,r){void 0===r&&(r=1);var n=this.knnIndices,i=void 0===n?[]:n,o=this.knnDistances,a=void 0===o?[]:o,s=this.localConnectivity,u=this.smoothKNNDistance(a,e,s),l=u.sigmas,c=u.rhos,f=this.computeMembershipStrengths(i,a,l,c),d=f.rows,p=f.cols,g=f.vals,v=[t.length,t.length],m=new h.SparseMatrix(d,p,g,v),y=h.transpose(m),b=h.pairwiseMultiply(m,y),w=h.subtract(h.add(m,y),b),x=h.multiplyScalar(w,r),_=h.multiplyScalar(b,1-r);return h.add(x,_)},t.prototype.categoricalSimplicialSetIntersection=function(t,e,r,n){void 0===n&&(n=1);var i=x(t,e,n,r);return _(i=h.eliminateZeros(i))},t.prototype.smoothKNNDistance=function(t,e,r,n,i){void 0===r&&(r=1),void 0===n&&(n=64),void 0===i&&(i=1);for(var o=Math.log(e)/Math.log(2)*i,a=d.zeros(t.length),s=d.zeros(t.length),u=0;u<t.length;u++){var l=0,h=1/0,c=1,f=t[u],p=f.filter((function(t){return t>0}));if(p.length>=r){var g=Math.floor(r),v=r-g;g>0?(a[u]=p[g-1],v>1e-5&&(a[u]+=v*(p[g]-p[g-1]))):a[u]=v*p[0]}else p.length>0&&(a[u]=d.max(p));for(var m=0;m<n;m++){for(var y=0,b=1;b<t[u].length;b++){var w=t[u][b]-a[u];y+=w>0?Math.exp(-w/c):1}if(Math.abs(y-o)<1e-5)break;y>o?c=(l+(h=c))/2:(l=c,h===1/0?c*=2:c=(l+h)/2)}if(s[u]=c,a[u]>0){var x=d.mean(f);s[u]<.001*x&&(s[u]=.001*x)}else{var _=d.mean(t.map(d.mean));s[u]<.001*_&&(s[u]=.001*_)}}return{sigmas:s,rhos:a}},t.prototype.computeMembershipStrengths=function(t,e,r,n){for(var i=t.length,o=t[0].length,a=d.zeros(i*o),s=d.zeros(i*o),u=d.zeros(i*o),l=0;l<i;l++)for(var h=0;h<o;h++){var c=0;-1!==t[l][h]&&(c=t[l][h]===l?0:e[l][h]-n[l]<=0?1:Math.exp(-(e[l][h]-n[l])/r[l]),a[l*o+h]=l,s[l*o+h]=t[l][h],u[l*o+h]=c)}return{rows:a,cols:s,vals:u}},t.prototype.initializeSimplicialSetEmbedding=function(){for(var t=this,e=this.getNEpochs(),r=this.nComponents,n=this.graph.getValues(),i=0,o=0;o<n.length;o++){var a=n[o];i<n[o]&&(i=a)}var s=this.graph.map((function(t){return t<i/e?0:t}));this.embedding=d.zeros(s.nRows).map((function(){return d.zeros(r).map((function(){return 20*d.tauRand(t.random)-10}))}));var u=[],l=[],h=[],c=s.getAll();for(o=0;o<c.length;o++){var f=c[o];f.value&&(u.push(f.value),h.push(f.row),l.push(f.col))}return{head:l,tail:h,epochsPerSample:this.makeEpochsPerSample(u,e)}},t.prototype.makeEpochsPerSample=function(t,e){var r=d.filled(t.length,-1),n=d.max(t),i=t.map((function(t){return t/n*e}));return i.forEach((function(t,n){t>0&&(r[n]=e/i[n])})),r},t.prototype.assignOptimizationStateParameters=function(t){Object.assign(this.optimizationState,t)},t.prototype.prepareForOptimizationLoop=function(){var t=this.repulsionStrength,e=this.learningRate,r=this.negativeSampleRate,n=this.optimizationState,i=n.epochsPerSample,o=n.headEmbedding,s=n.tailEmbedding,u=o[0].length,l=o.length===s.length,h=i.map((function(t){return t/r})),c=a(h),f=a(i);this.assignOptimizationStateParameters({epochOfNextSample:f,epochOfNextNegativeSample:c,epochsPerNegativeSample:h,moveOther:l,initialAlpha:e,alpha:e,gamma:t,dim:u})},t.prototype.initializeOptimization=function(){var t=this.embedding,e=this.embedding,r=this.optimizationState,n=r.head,i=r.tail,o=r.epochsPerSample,a=this.getNEpochs(),s=this.graph.nCols,u=w(this.spread,this.minDist),l=u.a,h=u.b;this.assignOptimizationStateParameters({headEmbedding:t,tailEmbedding:e,head:n,tail:i,epochsPerSample:o,a:l,b:h,nEpochs:a,nVertices:s})},t.prototype.optimizeLayoutStep=function(t){for(var e=this.optimizationState,r=e.head,n=e.tail,i=e.headEmbedding,o=e.tailEmbedding,a=e.epochsPerSample,s=e.epochOfNextSample,u=e.epochOfNextNegativeSample,l=e.epochsPerNegativeSample,h=e.moveOther,c=e.initialAlpha,f=e.alpha,p=e.gamma,g=e.a,v=e.b,m=e.dim,w=e.nEpochs,x=e.nVertices,_=0;_<a.length;_++)if(!(s[_]>t)){var E=r[_],S=n[_],O=i[E],T=o[S],A=b(O,T),P=0;A>0&&(P=-2*g*v*Math.pow(A,v-1),P/=g*Math.pow(A,v)+1);for(var C=0;C<m;C++){var M=y(P*(O[C]-T[C]),4);O[C]+=M*f,h&&(T[C]+=-M*f)}s[_]+=a[_];for(var I=Math.floor((t-u[_])/l[_]),k=0;k<I;k++){var D=d.tauRandInt(x,this.random),R=o[D],j=b(O,R),L=0;if(j>0)L=2*p*v,L/=(.001+j)*(g*Math.pow(j,v)+1);else if(E===D)continue;for(C=0;C<m;C++)M=4,L>0&&(M=y(L*(O[C]-R[C]),4)),O[C]+=M*f}u[_]+=I*l[_]}return e.alpha=c*(1-t/w),e.currentEpoch+=1,i},t.prototype.optimizeLayoutAsync=function(t){var e=this;return void 0===t&&(t=function(){return!0}),new Promise((function(r,o){var a=function(){return n(e,void 0,void 0,(function(){var e,n,s,u,l,h;return i(this,(function(i){try{if(e=this.optimizationState,n=e.nEpochs,s=e.currentEpoch,this.embedding=this.optimizeLayoutStep(s),u=this.optimizationState.currentEpoch,l=!1===t(u),h=u===n,l||h)return[2,r(h)];setTimeout((function(){return a()}),0)}catch(t){o(t)}return[2]}))}))};setTimeout((function(){return a()}),0)}))},t.prototype.optimizeLayout=function(t){void 0===t&&(t=function(){return!0});for(var e=!1,r=[];!e;){var n=this.optimizationState,i=n.nEpochs,o=n.currentEpoch;r=this.optimizeLayoutStep(o);var a=this.optimizationState.currentEpoch,s=!1===t(a);e=a===i||s}return r},t.prototype.getNEpochs=function(){var t=this.graph;if(this.nEpochs>0)return this.nEpochs;var e=t.nRows;return e<=2500?500:e<=5e3?400:e<=7500?300:200},t}();function v(t,e){for(var r=0,n=0;n<t.length;n++)r+=Math.pow(t[n]-e[n],2);return Math.sqrt(r)}e.UMAP=g,e.euclidean=v,e.cosine=function(t,e){for(var r=0,n=0,i=0,o=0;o<t.length;o++)r+=t[o]*e[o],n+=Math.pow(t[o],2),i+=Math.pow(e[o],2);return 0===n&&0===i?0:0===n||0===i?1:1-r/Math.sqrt(n*i)};var m=function(){return function(){this.currentEpoch=0,this.headEmbedding=[],this.tailEmbedding=[],this.head=[],this.tail=[],this.epochsPerSample=[],this.epochOfNextSample=[],this.epochOfNextNegativeSample=[],this.epochsPerNegativeSample=[],this.moveOther=!0,this.initialAlpha=1,this.alpha=1,this.gamma=1,this.a=1.5769434603113077,this.b=.8950608779109733,this.dim=2,this.nEpochs=500,this.nVertices=0}}();function y(t,e){return t>e?e:t<-e?-e:t}function b(t,e){for(var r=0,n=0;n<t.length;n++)r+=Math.pow(t[n]-e[n],2);return r}function w(t,e){var r=d.linear(0,3*t,300).map((function(t){return t<e?1:t})),n=d.zeros(r.length).map((function(n,i){return r[i]>=e?Math.exp(-(r[i]-e)/t):n})),i={x:r,y:n},a={damping:1.5,initialValues:[.5,.5],gradientDifference:.1,maxIterations:100,errorTolerance:.01},s=p.default(i,(function(t){var e=o(t,2),r=e[0],n=e[1];return function(t){return 1/(1+r*Math.pow(t,2*n))}}),a).parameterValues,u=o(s,2);return{a:u[0],b:u[1]}}function x(t,e,r,n){return void 0===r&&(r=1),void 0===n&&(n=5),t.map((function(t,i,o){return-1===e[i]||-1===e[o]?t*Math.exp(-r):e[i]!==e[o]?t*Math.exp(-n):t}))}function _(t){t=h.normalize(t,"max");var e=h.transpose(t),r=h.pairwiseMultiply(e,t);return t=h.add(t,h.subtract(e,r)),h.eliminateZeros(t)}function E(t,e,r){for(var n=d.zeros(t.length).map((function(t){return d.zeros(r[0].length)})),i=0;i<t.length;i++)for(var o=0;o<t[0].length;o++)for(var a=0;a<r[0].length;a++){var s=t[i][o];n[i][a]+=e[i][o]*r[s][a]}return n}e.findABParams=w,e.fastIntersection=x,e.resetLocalConnectivity=_,e.initTransform=E},function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var o=i(r(2)),a=i(r(3)),s=i(r(4)),u=i(r(1));e.makeNNDescent=function(t,e){return function(r,n,i,a,s,l,h,c){void 0===a&&(a=10),void 0===s&&(s=50),void 0===l&&(l=.001),void 0===h&&(h=.5),void 0===c&&(c=!0);for(var f=r.length,d=o.makeHeap(r.length,i),p=0;p<r.length;p++)for(var g=o.rejectionSample(i,r.length,e),v=0;v<g.length;v++){var m=t(r[p],r[g[v]]);o.heapPush(d,p,m,g[v],1),o.heapPush(d,g[v],m,p,1)}if(c)for(var y=0;y<n.length;y++)for(p=0;p<n[y].length&&!(n[y][p]<0);p++)for(v=p+1;v<n[y].length&&!(n[y][v]<0);v++)m=t(r[n[y][p]],r[n[y][v]]),o.heapPush(d,n[y][p],m,n[y][v],1),o.heapPush(d,n[y][v],m,n[y][p],1);for(y=0;y<a;y++){var b=o.buildCandidates(d,f,i,s,e),w=0;for(p=0;p<f;p++)for(v=0;v<s;v++){var x=Math.floor(b[0][p][v]);if(!(x<0||u.tauRand(e)<h))for(var _=0;_<s;_++){var E=Math.floor(b[0][p][_]),S=b[2][p][v],O=b[2][p][_];E<0||!S&&!O||(m=t(r[x],r[E]),w+=o.heapPush(d,x,m,E,1),w+=o.heapPush(d,E,m,x,1))}}if(w<=l*i*r.length)break}return o.deheapSort(d)}},e.makeInitializations=function(t){return{initFromRandom:function(e,r,n,i,a){for(var s=0;s<n.length;s++)for(var l=u.rejectionSample(e,r.length,a),h=0;h<l.length;h++)if(!(l[h]<0)){var c=t(r[l[h]],n[s]);o.heapPush(i,s,c,l[h],1)}},initFromTree:function(e,r,n,i,a){for(var u=0;u<n.length;u++)for(var l=s.searchFlatTree(n[u],e,a),h=0;h<l.length;h++){if(l[h]<0)return;var c=t(r[l[h]],n[u]);o.heapPush(i,u,c,l[h],1)}}}},e.makeInitializedNNSearch=function(t){return function(e,r,i,s){for(var u,l,h=a.getCSR(r),c=h.indices,f=h.indptr,d=0;d<s.length;d++)for(var p=new Set(i[0][d]);;){var g=o.smallestFlagged(i,d);if(-1===g)break;var v=c.slice(f[g],f[g+1]);try{for(var m=n(v),y=m.next();!y.done;y=m.next()){var b=y.value;if(b!==g&&-1!==b&&!p.has(b)){var w=t(e[b],s[d]);o.uncheckedHeapPush(i,d,w,b,1),p.add(b)}}}catch(t){u={error:t}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(u)throw u.error}}}return i}},e.initializeSearch=function(t,e,r,i,a,s,u){var l,h,c=o.makeHeap(r.length,i);if(a(i,e,r,c,u),t)try{for(var f=n(t),d=f.next();!d.done;d=f.next())s(d.value,e,r,c,u)}catch(t){l={error:t}}finally{try{d&&!d.done&&(h=f.return)&&h.call(f)}finally{if(l)throw l.error}}return c}},function(t,e,r){var n=r(9);function i(t,e,r){var n=0;const i=r(e);for(var o=0;o<t.x.length;o++)n+=Math.abs(t.y[o]-i(t.x[o]));return n}function o(t,e,r,i,o){var a=n.Matrix.eye(e.length).mul(r*i*i),s=t.x.length,u=new Array(s);const l=o(e);for(var h=0;h<s;h++)u[h]=l(t.x[h]);var c=function(t,e,r,i,o){const a=r.length,s=t.x.length;for(var u=new Array(a),l=0;l<a;l++){u[l]=new Array(s);var h=r.concat();h[l]+=i;for(var c=o(h),f=0;f<s;f++)u[l][f]=e[f]-c(t.x[f])}return new n.Matrix(u)}(t,u,e,i,o),f=function(t,e){const r=t.x.length;for(var i=new Array(r),o=0;o<r;o++)i[o]=t.y[o]-e[o];return new n.Matrix([i])}(t,u).transposeView(),d=n.inverse(a.add(c.mmul(c.transposeView())));return(e=(e=new n.Matrix([e])).sub(d.mmul(c).mmul(f).mul(i).transposeView())).to1DArray()}t.exports=function(t,e,r={}){let{maxIterations:n=100,gradientDifference:a=.1,damping:s=0,errorTolerance:u=.01,initialValues:l}=r;if(s<=0)throw new Error("The damping option must be a positive number");if(!t.x||!t.y)throw new Error("The data parameter must have x and y elements");if(!Array.isArray(t.x)||t.x.length<2||!Array.isArray(t.y)||t.y.length<2)throw new Error("The data parameter elements must be an array with more than 2 points");if(t.x.length!==t.y.length)throw new Error("The data parameter elements must have the same size");var h=l||new Array(e.length).fill(1);if(!Array.isArray(h))throw new Error("initialValues must be an array");for(var c=i(t,h,e),f=c<=u,d=0;d<n&&!f;d++)f=(c=i(t,h=o(t,h,s,a,e),e))<=u;return{parameterValues:h,parameterError:c,iterations:d}}},function(t,e,r){r.r(e);var n=r(0),i=r.n(n),o=function(t){if(!i()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var e=t[0],r=1;r<t.length;r++)t[r]>e&&(e=t[r]);return e},a=function(t){if(!i()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var e=t[0],r=1;r<t.length;r++)t[r]<e&&(e=t[r]);return e},s=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==r.output){if(!i()(r.output))throw new TypeError("output option must be an array if specified");e=r.output}else e=new Array(t.length);var n=a(t),s=o(t);if(n===s)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var u=r.min,l=void 0===u?r.autoMinMax?n:0:u,h=r.max,c=void 0===h?r.autoMinMax?s:1:h;if(l>=c)throw new RangeError("min option must be smaller than max option");for(var f=(c-l)/(s-n),d=0;d<t.length;d++)e[d]=(t[d]-n)*f+l;return e};class u{constructor(t){var e,r,n,i,o,a,s,u,l,h=(t=R.checkMatrix(t)).clone(),c=h.rows,f=h.columns,d=new Array(c),p=1;for(e=0;e<c;e++)d[e]=e;for(u=new Array(c),r=0;r<f;r++){for(e=0;e<c;e++)u[e]=h.get(e,r);for(e=0;e<c;e++){for(l=Math.min(e,r),o=0,n=0;n<l;n++)o+=h.get(e,n)*u[n];u[e]-=o,h.set(e,r,u[e])}for(i=r,e=r+1;e<c;e++)Math.abs(u[e])>Math.abs(u[i])&&(i=e);if(i!==r){for(n=0;n<f;n++)a=h.get(i,n),h.set(i,n,h.get(r,n)),h.set(r,n,a);s=d[i],d[i]=d[r],d[r]=s,p=-p}if(r<c&&0!==h.get(r,r))for(e=r+1;e<c;e++)h.set(e,r,h.get(e,r)/h.get(r,r))}this.LU=h,this.pivotVector=d,this.pivotSign=p}isSingular(){for(var t=this.LU,e=t.columns,r=0;r<e;r++)if(0===t[r][r])return!0;return!1}solve(t){t=k.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var r,n,i,o=t.columns,a=t.subMatrixRow(this.pivotVector,0,o-1),s=e.columns;for(i=0;i<s;i++)for(r=i+1;r<s;r++)for(n=0;n<o;n++)a[r][n]-=a[i][n]*e[r][i];for(i=s-1;i>=0;i--){for(n=0;n<o;n++)a[i][n]/=e[i][i];for(r=0;r<i;r++)for(n=0;n<o;n++)a[r][n]-=a[i][n]*e[r][i]}return a}get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var e=this.pivotSign,r=t.columns,n=0;n<r;n++)e*=t[n][n];return e}get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new k(e,r),i=0;i<e;i++)for(var o=0;o<r;o++)n[i][o]=i>o?t[i][o]:i===o?1:0;return n}get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new k(e,r),i=0;i<e;i++)for(var o=0;o<r;o++)n[i][o]=i<=o?t[i][o]:0;return n}get pivotPermutationVector(){return this.pivotVector.slice()}}function l(t,e){var r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}function h(t,e,r){for(var n=new Array(t),i=0;i<t;i++){n[i]=new Array(e);for(var o=0;o<e;o++)n[i][o]=r}return n}class c{constructor(t,e={}){var r=(t=R.checkMatrix(t)).rows,n=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:a=!1}=e;var s,u=Boolean(i),c=Boolean(o),f=!1;if(r<n)if(a){r=(s=t.transpose()).rows,n=s.columns,f=!0;var d=u;u=c,c=d}else s=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else s=t.clone();var p=Math.min(r,n),g=Math.min(r+1,n),v=new Array(g),m=h(r,p,0),y=h(n,n,0),b=new Array(n),w=new Array(r),x=new Array(g);for(let l=0;l<g;l++)x[l]=l;var _=Math.min(r-1,n),E=Math.max(0,Math.min(n-2,r)),S=Math.max(_,E);for(let h=0;h<S;h++){if(h<_){v[h]=0;for(let t=h;t<r;t++)v[h]=l(v[h],s[t][h]);if(0!==v[h]){s[h][h]<0&&(v[h]=-v[h]);for(let t=h;t<r;t++)s[t][h]/=v[h];s[h][h]+=1}v[h]=-v[h]}for(let t=h+1;t<n;t++){if(h<_&&0!==v[h]){let e=0;for(let n=h;n<r;n++)e+=s[n][h]*s[n][t];e=-e/s[h][h];for(let n=h;n<r;n++)s[n][t]+=e*s[n][h]}b[t]=s[h][t]}if(u&&h<_)for(let t=h;t<r;t++)m[t][h]=s[t][h];if(h<E){b[h]=0;for(let t=h+1;t<n;t++)b[h]=l(b[h],b[t]);if(0!==b[h]){b[h+1]<0&&(b[h]=0-b[h]);for(let t=h+1;t<n;t++)b[t]/=b[h];b[h+1]+=1}if(b[h]=-b[h],h+1<r&&0!==b[h]){for(let t=h+1;t<r;t++)w[t]=0;for(let t=h+1;t<r;t++)for(let e=h+1;e<n;e++)w[t]+=b[e]*s[t][e];for(let t=h+1;t<n;t++){let e=-b[t]/b[h+1];for(let n=h+1;n<r;n++)s[n][t]+=e*w[n]}}if(c)for(let t=h+1;t<n;t++)y[t][h]=b[t]}}let O=Math.min(n,r+1);if(_<n&&(v[_]=s[_][_]),r<O&&(v[O-1]=0),E+1<O&&(b[E]=s[E][O-1]),b[O-1]=0,u){for(let t=_;t<p;t++){for(let e=0;e<r;e++)m[e][t]=0;m[t][t]=1}for(let t=_-1;t>=0;t--)if(0!==v[t]){for(let e=t+1;e<p;e++){let n=0;for(let i=t;i<r;i++)n+=m[i][t]*m[i][e];n=-n/m[t][t];for(let i=t;i<r;i++)m[i][e]+=n*m[i][t]}for(let e=t;e<r;e++)m[e][t]=-m[e][t];m[t][t]=1+m[t][t];for(let e=0;e<t-1;e++)m[e][t]=0}else{for(let e=0;e<r;e++)m[e][t]=0;m[t][t]=1}}if(c)for(let l=n-1;l>=0;l--){if(l<E&&0!==b[l])for(let t=l+1;t<n;t++){let e=0;for(let r=l+1;r<n;r++)e+=y[r][l]*y[r][t];e=-e/y[l+1][l];for(let r=l+1;r<n;r++)y[r][t]+=e*y[r][l]}for(let t=0;t<n;t++)y[t][l]=0;y[l][l]=1}for(var T=O-1,A=Number.EPSILON;O>0;){let t,e;for(t=O-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+A*Math.abs(v[t]+Math.abs(v[t+1]));if(Math.abs(b[t])<=e||Number.isNaN(b[t])){b[t]=0;break}}if(t===O-2)e=4;else{let r;for(r=O-1;r>=t&&r!==t;r--){let e=(r!==O?Math.abs(b[r]):0)+(r!==t+1?Math.abs(b[r-1]):0);if(Math.abs(v[r])<=A*e){v[r]=0;break}}r===t?e=3:r===O-1?e=1:(e=2,t=r)}switch(t++,e){case 1:{let e=b[O-2];b[O-2]=0;for(let r=O-2;r>=t;r--){let i=l(v[r],e),o=v[r]/i,a=e/i;if(v[r]=i,r!==t&&(e=-a*b[r-1],b[r-1]=o*b[r-1]),c)for(let t=0;t<n;t++)i=o*y[t][r]+a*y[t][O-1],y[t][O-1]=-a*y[t][r]+o*y[t][O-1],y[t][r]=i}break}case 2:{let e=b[t-1];b[t-1]=0;for(let n=t;n<O;n++){let i=l(v[n],e),o=v[n]/i,a=e/i;if(v[n]=i,e=-a*b[n],b[n]=o*b[n],u)for(let e=0;e<r;e++)i=o*m[e][n]+a*m[e][t-1],m[e][t-1]=-a*m[e][n]+o*m[e][t-1],m[e][n]=i}break}case 3:{const e=Math.max(Math.abs(v[O-1]),Math.abs(v[O-2]),Math.abs(b[O-2]),Math.abs(v[t]),Math.abs(b[t])),i=v[O-1]/e,o=v[O-2]/e,a=b[O-2]/e,s=v[t]/e,h=b[t]/e,f=((o+i)*(o-i)+a*a)/2,d=i*a*(i*a);let p=0;0===f&&0===d||(p=d/(f+(p=f<0?0-Math.sqrt(f*f+d):Math.sqrt(f*f+d))));let g=(s+i)*(s-i)+p,w=s*h;for(let x=t;x<O-1;x++){let e=l(g,w);0===e&&(e=Number.MIN_VALUE);let i=g/e,o=w/e;if(x!==t&&(b[x-1]=e),g=i*v[x]+o*b[x],b[x]=i*b[x]-o*v[x],w=o*v[x+1],v[x+1]=i*v[x+1],c)for(let t=0;t<n;t++)e=i*y[t][x]+o*y[t][x+1],y[t][x+1]=-o*y[t][x]+i*y[t][x+1],y[t][x]=e;if(0===(e=l(g,w))&&(e=Number.MIN_VALUE),i=g/e,o=w/e,v[x]=e,g=i*b[x]+o*v[x+1],v[x+1]=-o*b[x]+i*v[x+1],w=o*b[x+1],b[x+1]=i*b[x+1],u&&x<r-1)for(let t=0;t<r;t++)e=i*m[t][x]+o*m[t][x+1],m[t][x+1]=-o*m[t][x]+i*m[t][x+1],m[t][x]=e}b[O-2]=g;break}case 4:if(v[t]<=0&&(v[t]=v[t]<0?-v[t]:0,c))for(let e=0;e<=T;e++)y[e][t]=-y[e][t];for(;t<T&&!(v[t]>=v[t+1]);){let e=v[t];if(v[t]=v[t+1],v[t+1]=e,c&&t<n-1)for(let r=0;r<n;r++)e=y[r][t+1],y[r][t+1]=y[r][t],y[r][t]=e;if(u&&t<r-1)for(let n=0;n<r;n++)e=m[n][t+1],m[n][t+1]=m[n][t],m[n][t]=e;t++}O--}}if(f){var P=y;y=m,m=P}this.m=r,this.n=n,this.s=v,this.U=m,this.V=y}solve(t){var e=t,r=this.threshold,n=this.s.length,i=k.zeros(n,n);for(let c=0;c<n;c++)Math.abs(this.s[c])<=r?i[c][c]=0:i[c][c]=1/this.s[c];var o=this.U,a=this.rightSingularVectors,s=a.mmul(i),u=a.rows,l=o.length,h=k.zeros(u,l);for(let c=0;c<u;c++)for(let t=0;t<l;t++){let e=0;for(let r=0;r<n;r++)e+=s[c][r]*o[t][r];h[c][t]=e}return h.mmul(e)}solveForDiagonal(t){return this.solve(k.diag(t))}inverse(){var t=this.V,e=this.threshold,r=t.length,n=t[0].length,i=new k(r,this.s.length);for(let l=0;l<r;l++)for(let r=0;r<n;r++)Math.abs(this.s[r])>e?i[l][r]=t[l][r]/this.s[r]:i[l][r]=0;var o=this.U,a=o.length,s=o[0].length,u=new k(r,a);for(let l=0;l<r;l++)for(let t=0;t<a;t++){let e=0;for(let r=0;r<s;r++)e+=i[l][r]*o[t][r];u[l][t]=e}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s,n=0,i=r.length;n<i;n++)r[n]>t&&e++;return e}get diagonal(){return this.s}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return k.isMatrix(this.U)||(this.U=new k(this.U)),this.U}get rightSingularVectors(){return k.isMatrix(this.V)||(this.V=new k(this.V)),this.V}get diagonalMatrix(){return k.diag(this.s)}}function f(t,e,r){var n=r?t.rows:t.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function d(t,e,r){var n=r?t.columns:t.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function p(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function g(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function v(t,e,r){return{row:m(t,e),column:y(t,r)}}function m(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for row indices");if(e.some(e=>e<0||e>=t.rows))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function y(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for column indices");if(e.some(e=>e<0||e>=t.columns))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function b(t,e,r,n,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(w("startRow",e),w("endRow",r),w("startColumn",n),w("endColumn",i),e>r||n>i||e<0||e>=t.rows||r<0||r>=t.rows||n<0||n>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function w(t,e){if("number"!=typeof e)throw new TypeError(t+" must be a number")}class x extends(I()){constructor(t,e,r){super(),this.matrix=t,this.rows=e,this.columns=r}static get[Symbol.species](){return k}}class _ extends x{constructor(t){super(t,t.columns,t.rows)}set(t,e,r){return this.matrix.set(e,t,r),this}get(t,e){return this.matrix.get(e,t)}}class E extends x{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,r){return this.matrix.set(this.row,e,r),this}get(t,e){return this.matrix.get(this.row,e)}}class S extends x{constructor(t,e,r,n,i){b(t,e,r,n,i),super(t,r-e+1,i-n+1),this.startRow=e,this.startColumn=n}set(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}class O extends x{constructor(t,e,r){var n=v(t,e,r);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}class T extends x{constructor(t,e){super(t,(e=m(t,e)).length,t.columns),this.rowIndices=e}set(t,e,r){return this.matrix.set(this.rowIndices[t],e,r),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}}class A extends x{constructor(t,e){e=y(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,r){return this.matrix.set(t,this.columnIndices[e],r),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}}class P extends x{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,r){return this.matrix.set(t,this.column,r),this}get(t){return this.matrix.get(t,this.column)}}class C extends x{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}class M extends x{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}function I(t){void 0===t&&(t=Object);class e extends t{static get[Symbol.species](){return this}static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError("Data length does not match given dimensions");for(var n=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r[i*e+o]);return n}static rowVector(t){for(var e=new this(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){for(var e=new this(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,r){void 0===r&&(r=Math.random);for(var n=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r());return n}static randInt(t,e,r,n){void 0===r&&(r=1e3),void 0===n&&(n=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var a=0;a<e;a++){var s=Math.floor(n()*r);i.set(o,a,s)}return i}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);for(var n=Math.min(t,e),i=this.zeros(t,e),o=0;o<n;o++)i.set(o,o,r);return i}static diag(t,e,r){var n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);for(var i=Math.min(n,e,r),o=this.zeros(e,r),a=0;a<i;a++)o.set(a,a,t[a]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var a=0;a<n;a++)i.set(o,a,Math.min(t.get(o,a),e.get(o,a)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var a=0;a<n;a++)i.set(o,a,Math.max(t.get(o,a),e.get(o,a)));return i}static checkMatrix(t){return e.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=this.rows,r=this.columns,n=0;n<e;n++)for(var i=0;i<r;i++)t.call(this,n,i);return this}to1DArray(){for(var t=new Array(this.size),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t[e*this.columns+r]=this.get(e,r);return t}to2DArray(){for(var t=new Array(this.rows),e=0;e<this.rows;e++){t[e]=new Array(this.columns);for(var r=0;r<this.columns;r++)t[e][r]=this.get(e,r)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(t,e,r){throw new Error("set method is unimplemented")}get(t,e){throw new Error("get method is unimplemented")}repeat(t,e){t=t||1,e=e||1;for(var r=new this.constructor[Symbol.species](this.rows*t,this.columns*e),n=0;n<t;n++)for(var i=0;i<e;i++)r.setSubMatrix(this,this.rows*n,this.columns*i);return r}fill(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){f(this,t);for(var e=new Array(this.columns),r=0;r<this.columns;r++)e[r]=this.get(t,r);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){f(this,t),e=p(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){f(this,t),f(this,e);for(var r=0;r<this.columns;r++){var n=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,n)}return this}getColumn(t){d(this,t);for(var e=new Array(this.rows),r=0;r<this.rows;r++)e[r]=this.get(r,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){d(this,t),e=g(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){d(this,t),d(this,e);for(var r=0;r<this.rows;r++){var n=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,n)}return this}addRowVector(t){t=p(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=p(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=p(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=p(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=g(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=g(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=g(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=g(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){f(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){d(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){f(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){f(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){f(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){f(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){d(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){d(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){d(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){d(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){for(var t=Math.min(this.rows,this.columns),e=new Array(t),r=0;r<t;r++)e[r]=this.get(r,r);return e}sum(t){switch(t){case"row":return function(t){for(var e=k.zeros(t.rows,1),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e.set(r,0,e.get(r,0)+t.get(r,n));return e}(this);case"column":return function(t){for(var e=k.zeros(1,t.columns),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e.set(0,n,e.get(0,n)+t.get(r,n));return e}(this);default:return function(t){for(var e=0,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e+=t.get(r,n);return e}(this)}}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t*=this.get(e,r);return t}norm(t="frobenius"){var e=0;if("max"===t)return this.max();if("frobenius"===t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)e+=this.get(r,n)*this.get(r,n);return Math.sqrt(e)}throw new RangeError("unknown norm type: "+t)}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){e.isMatrix(t)&&(t=t.to1DArray());var r=this.to1DArray();if(r.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,i=0;i<r.length;i++)n+=r[i]*t[i];return n}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var e=this.rows,r=this.columns,n=t.columns,i=new this.constructor[Symbol.species](e,n),o=new Array(r),a=0;a<n;a++){for(var s=0;s<r;s++)o[s]=t.get(s,a);for(var u=0;u<e;u++){var l=0;for(s=0;s<r;s++)l+=this.get(u,s)*o[s];i.set(u,a,l)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2);const r=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),l=t.get(1,1),h=(r+u)*(n+l),c=(a+u)*n,f=r*(o-l),d=u*(s-n),p=(r+i)*l,g=h+d-p+(i-u)*(s+l),v=f+p,m=c+d,y=h-c+f+(a-r)*(n+o);return e.set(0,0,g),e.set(0,1,v),e.set(1,0,m),e.set(1,1,y),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3);const r=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),l=this.get(2,1),h=this.get(2,2),c=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),g=t.get(1,1),v=t.get(1,2),m=t.get(2,0),y=t.get(2,1),b=t.get(2,2),w=(r-o)*(-f+g),x=(-r+o+a)*(c-f+g),_=(o+a)*(-c+f),E=r*c,S=(-r+u+l)*(c-d+v),O=(-r+u)*(d-v),T=(u+l)*(-c+d),A=(-i+l+h)*(g+m-y),P=(i-h)*(g-y),C=i*m,M=(l+h)*(-m+y),I=(-i+a+s)*(v+m-b),k=(i-s)*(v-b),D=(a+s)*(-m+b),R=E+C+n*p,j=(r+n+i-o-a-l-h)*g+x+_+E+A+C+M,L=E+S+T+(r+n+i-a-s-u-l)*v+C+I+D,B=w+a*(-c+f+p-g-v-m+b)+x+E+C+I+k,N=w+x+_+E+s*y,F=C+I+k+D+o*d,U=E+S+O+l*(-c+d+p-g-v-m+y)+A+P+C,z=A+P+C+M+u*f,V=E+S+O+T+h*b;return e.set(0,0,R),e.set(0,1,j),e.set(0,2,L),e.set(1,0,B),e.set(1,1,N),e.set(1,2,F),e.set(2,0,U),e.set(2,1,z),e.set(2,2,V),e}mmulStrassen(t){var r=this.clone(),n=r.rows,i=r.columns,o=t.rows,a=t.columns;function s(t,r,n){var i=t.rows,o=t.columns;if(i===r&&o===n)return t;var a=e.zeros(r,n);return a.setSubMatrix(t,0,0)}i!==o&&console.warn(`Multiplying ${n} x ${i} and ${o} x ${a} matrix: dimensions do not match.`);var u=Math.max(n,o),l=Math.max(i,a);return function t(r,n,i,o){if(i<=512||o<=512)return r.mmul(n);i%2==1&&o%2==1?(r=s(r,i+1,o+1),n=s(n,i+1,o+1)):i%2==1?(r=s(r,i+1,o),n=s(n,i+1,o)):o%2==1&&(r=s(r,i,o+1),n=s(n,i,o+1));var a=parseInt(r.rows/2,10),u=parseInt(r.columns/2,10),l=r.subMatrix(0,a-1,0,u-1),h=n.subMatrix(0,a-1,0,u-1),c=r.subMatrix(0,a-1,u,r.columns-1),f=n.subMatrix(0,a-1,u,n.columns-1),d=r.subMatrix(a,r.rows-1,0,u-1),p=n.subMatrix(a,n.rows-1,0,u-1),g=r.subMatrix(a,r.rows-1,u,r.columns-1),v=n.subMatrix(a,n.rows-1,u,n.columns-1),m=t(e.add(l,g),e.add(h,v),a,u),y=t(e.add(d,g),h,a,u),b=t(l,e.sub(f,v),a,u),w=t(g,e.sub(p,h),a,u),x=t(e.add(l,c),v,a,u),_=t(e.sub(d,l),e.add(h,f),a,u),E=t(e.sub(c,g),e.add(p,v),a,u),S=e.add(m,w);S.sub(x),S.add(E);var O=e.add(b,x),T=e.add(y,w),A=e.sub(m,y);A.add(b),A.add(_);var P=e.zeros(2*S.rows,2*S.columns);return(P=(P=(P=(P=P.setSubMatrix(S,0,0)).setSubMatrix(O,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(r=s(r,u,l),t=s(t,u,l),u,l)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var r=this.constructor.empty(this.rows,this.columns),n=0;n<this.rows;n++){var i=s(this.getRow(n),{min:t,max:e});r.setRow(n,i)}return r}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var r=this.constructor.empty(this.rows,this.columns),n=0;n<this.columns;n++){var i=s(this.getColumn(n),{min:t,max:e});r.setColumn(n,i)}return r}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*n,r*i),a=0;a<e;a++)for(var s=0;s<r;s++)for(var u=0;u<n;u++)for(var l=0;l<i;l++)o[n*a+u][i*s+l]=this.get(a,s)*t.get(u,l);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t){void 0===t&&(t=r);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=r);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){b(this,t,e,r,n);for(var i=new this.constructor[Symbol.species](e-t+1,n-r+1),o=t;o<=e;o++)for(var a=r;a<=n;a++)i[o-t][a-r]=this.get(o,a);return i}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||e<0||e>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");for(var n=new this.constructor[Symbol.species](t.length,r-e+1),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError("Row index out of range: "+t[i]);n.set(i,o-e,this.get(t[i],o))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||e<0||e>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");for(var n=new this.constructor[Symbol.species](r-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError("Column index out of range: "+t[i]);n.set(o-e,i,this.get(o,t[i]))}return n}setSubMatrix(t,e,r){b(this,e,e+(t=this.constructor.checkMatrix(t)).rows-1,r,r+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this[e+n][r+i]=t.get(n,i);return this}selection(t,e){for(var r=v(this,t,e),n=new this.constructor[Symbol.species](t.length,e.length),i=0;i<r.row.length;i++)for(var o=r.row[i],a=0;a<r.column.length;a++){var s=r.column[a];n[i][a]=this.get(o,s)}return n}trace(){for(var t=Math.min(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}transposeView(){return new _(this)}rowView(t){return f(this,t),new E(this,t)}columnView(t){return d(this,t),new P(this,t)}flipRowView(){return new C(this)}flipColumnView(){return new M(this)}subMatrixView(t,e,r,n){return new S(this,t,e,r,n)}selectionView(t,e){return new O(this,t,e)}rowSelectionView(t){return new T(this,t)}columnSelectionView(t){return new A(this,t)}det(){var t,e,r,n,i,o;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),r=this.get(1,0),t*this.get(1,1)-e*r):3===this.columns?(n=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),o=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),r=this.get(0,2),t*n.det()-e*i.det()+r*o.det()):new u(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=Number.EPSILON);for(var e=new c(this,{autoTranspose:!0}),r=e.leftSingularVectors,n=e.rightSingularVectors,i=e.diagonal,o=0;o<i.length;o++)Math.abs(i[o])>t?i[o]=1/i[o]:i[o]=0;return i=this.constructor[Symbol.species].diag(i),n.mmul(i.mmul(r.transposeView()))}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}}function r(t,e){return t-e}e.prototype.klass="Matrix",e.random=e.rand,e.diagonal=e.diag,e.prototype.diagonal=e.prototype.diag,e.identity=e.eye,e.prototype.negate=e.prototype.neg,e.prototype.tensorProduct=e.prototype.kroneckerProduct,e.prototype.determinant=e.prototype.det;var n,i="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",o=eval;for(var a of[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]]){var l=o(X("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",{name:a[1],op:a[0]})),h=o(X("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",{name:a[1]+"S",op:a[0]})),m=o(X("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",{name:a[1]+"M",op:a[0]})),y=o(X("\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",{name:a[1]}));for(n=1;n<a.length;n++)e.prototype[a[n]]=l,e.prototype[a[n]+"S"]=h,e.prototype[a[n]+"M"]=m,e[a[n]]=y}var w=[["~","not"]];for(var x of(["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach((function(t){w.push(["Math."+t,t])})),w)){var I=o(X("\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",{name:x[1],method:x[0]})),D=o(X("\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",{name:x[1]}));for(n=1;n<x.length;n++)e.prototype[x[n]]=I,e[x[n]]=D}for(var R of[["Math.pow",1,"pow"]]){var j="arg0";for(n=1;n<R[1];n++)j+=", arg"+n;if(1!==R[1]){var L=o(X("\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",{name:R[2],method:R[0],args:j})),B=o(X(i,{name:R[2],args:j}));for(n=2;n<R.length;n++)e.prototype[R[n]]=L,e[R[n]]=B}else{var N={name:R[2],args:j,method:R[0]},F=o(X("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",N)),U=o(X("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",N)),z=o(X("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",N)),V=o(X("\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",N));for(n=2;n<R.length;n++)e.prototype[R[n]]=F,e.prototype[R[n]+"M"]=z,e.prototype[R[n]+"S"]=U,e[R[n]]=V}}function X(t,e){for(var r in e)t=t.replace(new RegExp(`%${r}%`,"g"),e[r]);return t}return e}class k extends(I(Array)){constructor(t,e){var r;if(1===arguments.length&&"number"==typeof t)return new Array(t);if(k.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>0){if(super(t),!(Number.isInteger(e)&&e>0))throw new TypeError("nColumns must be a positive integer");for(r=0;r<t;r++)this[r]=new Array(e)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");{const n=t;if(t=n.length,"number"!=typeof(e=n[0].length)||0===e)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),r=0;r<t;r++){if(n[r].length!==e)throw new RangeError("Inconsistent array dimensions");this[r]=[].concat(n[r])}}}return this.rows=t,this.columns=e,this}set(t,e,r){return this[t][e]=r,this}get(t,e){return this[t][e]}removeRow(t){if(f(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),f(this,t,!0),e=p(this,e),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(d(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),d(this,t,!0),e=g(this,e);for(var r=0;r<this.rows;r++)this[r].splice(t,0,e[r]);return this.columns+=1,this}}class D extends(I()){constructor(t,e={}){const{rows:r=1}=e;if(t.length%r!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=r,this.columns=t.length/r,this.data=t}set(t,e,r){var n=this._calculateIndex(t,e);return this.data[n]=r,this}get(t,e){var r=this._calculateIndex(t,e);return this.data[r]}_calculateIndex(t,e){return t*this.columns+e}static get[Symbol.species](){return k}}class R extends(I()){constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}static get[Symbol.species](){return k}}function j(t,e){if(Array.isArray(t))return t[0]&&Array.isArray(t[0])?new R(t):new D(t,e);throw new Error("the argument is not an array")}class L{constructor(t){var e,r,n,i,o=(t=R.checkMatrix(t)).clone(),a=t.rows,s=t.columns,u=new Array(s);for(n=0;n<s;n++){var h=0;for(e=n;e<a;e++)h=l(h,o.get(e,n));if(0!==h){for(o.get(n,n)<0&&(h=-h),e=n;e<a;e++)o.set(e,n,o.get(e,n)/h);for(o.set(n,n,o.get(n,n)+1),r=n+1;r<s;r++){for(i=0,e=n;e<a;e++)i+=o.get(e,n)*o.get(e,r);for(i=-i/o.get(n,n),e=n;e<a;e++)o.set(e,r,o.get(e,r)+i*o.get(e,n))}}u[n]=-h}this.QR=o,this.Rdiag=u}solve(t){t=k.checkMatrix(t);var e=this.QR,r=e.rows;if(t.rows!==r)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var n,i,o,a,s=t.columns,u=t.clone(),l=e.columns;for(o=0;o<l;o++)for(i=0;i<s;i++){for(a=0,n=o;n<r;n++)a+=e[n][o]*u[n][i];for(a=-a/e[o][o],n=o;n<r;n++)u[n][i]+=a*e[n][o]}for(o=l-1;o>=0;o--){for(i=0;i<s;i++)u[o][i]/=this.Rdiag[o];for(n=0;n<o;n++)for(i=0;i<s;i++)u[n][i]-=u[o][i]*e[n][o]}return u.subMatrix(0,l-1,0,s-1)}isFullRank(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}get upperTriangularMatrix(){var t,e,r=this.QR,n=r.columns,i=new k(n,n);for(t=0;t<n;t++)for(e=0;e<n;e++)i[t][e]=t<e?r[t][e]:t===e?this.Rdiag[t]:0;return i}get orthogonalMatrix(){var t,e,r,n,i=this.QR,o=i.rows,a=i.columns,s=new k(o,a);for(r=a-1;r>=0;r--){for(t=0;t<o;t++)s[t][r]=0;for(s[r][r]=1,e=r;e<a;e++)if(0!==i[r][r]){for(n=0,t=r;t<o;t++)n+=i[t][r]*s[t][e];for(n=-n/i[r][r],t=r;t<o;t++)s[t][e]+=n*i[t][r]}}return s}}function B(t,e=!1){return t=R.checkMatrix(t),e?new c(t).inverse():N(t,k.eye(t.rows))}function N(t,e,r=!1){return t=R.checkMatrix(t),e=R.checkMatrix(e),r?new c(t).solve(e):t.isSquare()?new u(t).solve(e):new L(t).solve(e)}function F(t,e){for(var r=[],n=0;n<t;n++)n!==e&&r.push(n);return r}function U(t,e,r,n=1e-9,i=1e-9){if(t>i)return new Array(e.rows+1).fill(0);for(var o=e.addRow(r,[0]),a=0;a<o.rows;a++)Math.abs(o.get(a,0))<n&&o.set(a,0,0);return o.to1DArray()}function z(t,e={}){const{thresholdValue:r=1e-9,thresholdError:n=1e-9}=e;for(var i=t.rows,a=new k(i,i),s=0;s<i;s++){var u=k.columnVector(t.getRow(s)),l=t.subMatrixRow(F(i,s)).transposeView(),h=new c(l).solve(u),f=o(k.sub(u,l.mmul(h)).abs().to1DArray());a.setRow(s,U(f,h,s,r,n))}return a}class V{constructor(t,e={}){const{assumeSymmetric:r=!1}=e;if(!(t=R.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");var n,i,o=t.columns,a=h(o,o,0),s=new Array(o),u=new Array(o),c=t;if(r||t.isSymmetric()){for(n=0;n<o;n++)for(i=0;i<o;i++)a[n][i]=c.get(n,i);!function(t,e,r,n){var i,o,a,s,u,l,h,c;for(u=0;u<t;u++)r[u]=n[t-1][u];for(s=t-1;s>0;s--){for(c=0,a=0,l=0;l<s;l++)c+=Math.abs(r[l]);if(0===c)for(e[s]=r[s-1],u=0;u<s;u++)r[u]=n[s-1][u],n[s][u]=0,n[u][s]=0;else{for(l=0;l<s;l++)r[l]/=c,a+=r[l]*r[l];for(i=r[s-1],o=Math.sqrt(a),i>0&&(o=-o),e[s]=c*o,a-=i*o,r[s-1]=i-o,u=0;u<s;u++)e[u]=0;for(u=0;u<s;u++){for(i=r[u],n[u][s]=i,o=e[u]+n[u][u]*i,l=u+1;l<=s-1;l++)o+=n[l][u]*r[l],e[l]+=n[l][u]*i;e[u]=o}for(i=0,u=0;u<s;u++)e[u]/=a,i+=e[u]*r[u];for(h=i/(a+a),u=0;u<s;u++)e[u]-=h*r[u];for(u=0;u<s;u++){for(i=r[u],o=e[u],l=u;l<=s-1;l++)n[l][u]-=i*e[l]+o*r[l];r[u]=n[s-1][u],n[s][u]=0}}r[s]=a}for(s=0;s<t-1;s++){if(n[t-1][s]=n[s][s],n[s][s]=1,0!==(a=r[s+1])){for(l=0;l<=s;l++)r[l]=n[l][s+1]/a;for(u=0;u<=s;u++){for(o=0,l=0;l<=s;l++)o+=n[l][s+1]*n[l][u];for(l=0;l<=s;l++)n[l][u]-=o*r[l]}}for(l=0;l<=s;l++)n[l][s+1]=0}for(u=0;u<t;u++)r[u]=n[t-1][u],n[t-1][u]=0;n[t-1][t-1]=1,e[0]=0}(o,u,s,a),function(t,e,r,n){var i,o,a,s,u,h,c,f,d,p,g,v,m,y,b,w;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;var x=0,_=0,E=Number.EPSILON;for(h=0;h<t;h++){for(_=Math.max(_,Math.abs(r[h])+Math.abs(e[h])),c=h;c<t&&!(Math.abs(e[c])<=E*_);)c++;if(c>h)do{for(i=r[h],f=(r[h+1]-i)/(2*e[h]),d=l(f,1),f<0&&(d=-d),r[h]=e[h]/(f+d),r[h+1]=e[h]*(f+d),p=r[h+1],o=i-r[h],a=h+2;a<t;a++)r[a]-=o;for(x+=o,f=r[c],v=g=1,m=g,y=e[h+1],b=0,w=0,a=c-1;a>=h;a--)for(m=v,v=g,w=b,i=g*e[a],o=g*f,d=l(f,e[a]),e[a+1]=b*d,b=e[a]/d,f=(g=f/d)*r[a]-b*i,r[a+1]=o+b*(g*i+b*r[a]),u=0;u<t;u++)o=n[u][a+1],n[u][a+1]=b*n[u][a]+g*o,n[u][a]=g*n[u][a]-b*o;f=-b*w*m*y*e[h]/p,e[h]=b*f,r[h]=g*f}while(Math.abs(e[h])>E*_);r[h]=r[h]+x,e[h]=0}for(a=0;a<t-1;a++){for(u=a,f=r[a],s=a+1;s<t;s++)r[s]<f&&(u=s,f=r[s]);if(u!==a)for(r[u]=r[a],r[a]=f,s=0;s<t;s++)f=n[s][a],n[s][a]=n[s][u],n[s][u]=f}}(o,u,s,a)}else{var f=h(o,o,0),d=new Array(o);for(i=0;i<o;i++)for(n=0;n<o;n++)f[n][i]=c.get(n,i);!function(t,e,r,n){var i,o,a,s,u,l,h,c=t-1;for(l=1;l<=c-1;l++){for(h=0,s=l;s<=c;s++)h+=Math.abs(e[s][l-1]);if(0!==h){for(a=0,s=c;s>=l;s--)r[s]=e[s][l-1]/h,a+=r[s]*r[s];for(o=Math.sqrt(a),r[l]>0&&(o=-o),a-=r[l]*o,r[l]=r[l]-o,u=l;u<t;u++){for(i=0,s=c;s>=l;s--)i+=r[s]*e[s][u];for(i/=a,s=l;s<=c;s++)e[s][u]-=i*r[s]}for(s=0;s<=c;s++){for(i=0,u=c;u>=l;u--)i+=r[u]*e[s][u];for(i/=a,u=l;u<=c;u++)e[s][u]-=i*r[u]}r[l]=h*r[l],e[l][l-1]=h*o}}for(s=0;s<t;s++)for(u=0;u<t;u++)n[s][u]=s===u?1:0;for(l=c-1;l>=1;l--)if(0!==e[l][l-1]){for(s=l+1;s<=c;s++)r[s]=e[s][l-1];for(u=l;u<=c;u++){for(o=0,s=l;s<=c;s++)o+=r[s]*n[s][u];for(o=o/r[l]/e[l][l-1],s=l;s<=c;s++)n[s][u]+=o*r[s]}}}(o,f,d,a),function(t,e,r,n,i){var o,a,s,u,l,h,c,f,d,p,g,v,m,y,b,w=t-1,x=t-1,_=Number.EPSILON,E=0,S=0,O=0,T=0,A=0,P=0,C=0,M=0;for(o=0;o<t;o++)for((o<0||o>x)&&(r[o]=i[o][o],e[o]=0),a=Math.max(o-1,0);a<t;a++)S+=Math.abs(i[o][a]);for(;w>=0;){for(u=w;u>0&&(0===(P=Math.abs(i[u-1][u-1])+Math.abs(i[u][u]))&&(P=S),!(Math.abs(i[u][u-1])<_*P));)u--;if(u===w)i[w][w]=i[w][w]+E,r[w]=i[w][w],e[w]=0,w--,M=0;else if(u===w-1){if(c=i[w][w-1]*i[w-1][w],O=(i[w-1][w-1]-i[w][w])/2,T=O*O+c,C=Math.sqrt(Math.abs(T)),i[w][w]=i[w][w]+E,i[w-1][w-1]=i[w-1][w-1]+E,f=i[w][w],T>=0){for(C=O>=0?O+C:O-C,r[w-1]=f+C,r[w]=r[w-1],0!==C&&(r[w]=f-c/C),e[w-1]=0,e[w]=0,f=i[w][w-1],P=Math.abs(f)+Math.abs(C),O=f/P,T=C/P,A=Math.sqrt(O*O+T*T),O/=A,T/=A,a=w-1;a<t;a++)C=i[w-1][a],i[w-1][a]=T*C+O*i[w][a],i[w][a]=T*i[w][a]-O*C;for(o=0;o<=w;o++)C=i[o][w-1],i[o][w-1]=T*C+O*i[o][w],i[o][w]=T*i[o][w]-O*C;for(o=0;o<=x;o++)C=n[o][w-1],n[o][w-1]=T*C+O*n[o][w],n[o][w]=T*n[o][w]-O*C}else r[w-1]=f+O,r[w]=f+O,e[w-1]=C,e[w]=-C;w-=2,M=0}else{if(f=i[w][w],d=0,c=0,u<w&&(d=i[w-1][w-1],c=i[w][w-1]*i[w-1][w]),10===M){for(E+=f,o=0;o<=w;o++)i[o][o]-=f;P=Math.abs(i[w][w-1])+Math.abs(i[w-1][w-2]),f=d=.75*P,c=-.4375*P*P}if(30===M&&(P=(P=(d-f)/2)*P+c)>0){for(P=Math.sqrt(P),d<f&&(P=-P),P=f-c/((d-f)/2+P),o=0;o<=w;o++)i[o][o]-=P;E+=P,f=d=c=.964}for(M+=1,l=w-2;l>=u&&(C=i[l][l],O=((A=f-C)*(P=d-C)-c)/i[l+1][l]+i[l][l+1],T=i[l+1][l+1]-C-A-P,A=i[l+2][l+1],P=Math.abs(O)+Math.abs(T)+Math.abs(A),O/=P,T/=P,A/=P,l!==u)&&!(Math.abs(i[l][l-1])*(Math.abs(T)+Math.abs(A))<_*(Math.abs(O)*(Math.abs(i[l-1][l-1])+Math.abs(C)+Math.abs(i[l+1][l+1]))));)l--;for(o=l+2;o<=w;o++)i[o][o-2]=0,o>l+2&&(i[o][o-3]=0);for(s=l;s<=w-1&&(y=s!==w-1,s!==l&&(O=i[s][s-1],T=i[s+1][s-1],A=y?i[s+2][s-1]:0,0!==(f=Math.abs(O)+Math.abs(T)+Math.abs(A))&&(O/=f,T/=f,A/=f)),0!==f);s++)if(P=Math.sqrt(O*O+T*T+A*A),O<0&&(P=-P),0!==P){for(s!==l?i[s][s-1]=-P*f:u!==l&&(i[s][s-1]=-i[s][s-1]),f=(O+=P)/P,d=T/P,C=A/P,T/=O,A/=O,a=s;a<t;a++)O=i[s][a]+T*i[s+1][a],y&&(O+=A*i[s+2][a],i[s+2][a]=i[s+2][a]-O*C),i[s][a]=i[s][a]-O*f,i[s+1][a]=i[s+1][a]-O*d;for(o=0;o<=Math.min(w,s+3);o++)O=f*i[o][s]+d*i[o][s+1],y&&(O+=C*i[o][s+2],i[o][s+2]=i[o][s+2]-O*A),i[o][s]=i[o][s]-O,i[o][s+1]=i[o][s+1]-O*T;for(o=0;o<=x;o++)O=f*n[o][s]+d*n[o][s+1],y&&(O+=C*n[o][s+2],n[o][s+2]=n[o][s+2]-O*A),n[o][s]=n[o][s]-O,n[o][s+1]=n[o][s+1]-O*T}}}if(0!==S){for(w=t-1;w>=0;w--)if(O=r[w],0===(T=e[w]))for(u=w,i[w][w]=1,o=w-1;o>=0;o--){for(c=i[o][o]-O,A=0,a=u;a<=w;a++)A+=i[o][a]*i[a][w];if(e[o]<0)C=c,P=A;else if(u=o,0===e[o]?i[o][w]=0!==c?-A/c:-A/(_*S):(f=i[o][o+1],d=i[o+1][o],T=(r[o]-O)*(r[o]-O)+e[o]*e[o],h=(f*P-C*A)/T,i[o][w]=h,i[o+1][w]=Math.abs(f)>Math.abs(C)?(-A-c*h)/f:(-P-d*h)/C),h=Math.abs(i[o][w]),_*h*h>1)for(a=o;a<=w;a++)i[a][w]=i[a][w]/h}else if(T<0)for(u=w-1,Math.abs(i[w][w-1])>Math.abs(i[w-1][w])?(i[w-1][w-1]=T/i[w][w-1],i[w-1][w]=-(i[w][w]-O)/i[w][w-1]):(b=X(0,-i[w-1][w],i[w-1][w-1]-O,T),i[w-1][w-1]=b[0],i[w-1][w]=b[1]),i[w][w-1]=0,i[w][w]=1,o=w-2;o>=0;o--){for(p=0,g=0,a=u;a<=w;a++)p+=i[o][a]*i[a][w-1],g+=i[o][a]*i[a][w];if(c=i[o][o]-O,e[o]<0)C=c,A=p,P=g;else if(u=o,0===e[o]?(b=X(-p,-g,c,T),i[o][w-1]=b[0],i[o][w]=b[1]):(f=i[o][o+1],d=i[o+1][o],v=(r[o]-O)*(r[o]-O)+e[o]*e[o]-T*T,m=2*(r[o]-O)*T,0===v&&0===m&&(v=_*S*(Math.abs(c)+Math.abs(T)+Math.abs(f)+Math.abs(d)+Math.abs(C))),b=X(f*A-C*p+T*g,f*P-C*g-T*p,v,m),i[o][w-1]=b[0],i[o][w]=b[1],Math.abs(f)>Math.abs(C)+Math.abs(T)?(i[o+1][w-1]=(-p-c*i[o][w-1]+T*i[o][w])/f,i[o+1][w]=(-g-c*i[o][w]-T*i[o][w-1])/f):(b=X(-A-d*i[o][w-1],-P-d*i[o][w],C,T),i[o+1][w-1]=b[0],i[o+1][w]=b[1])),h=Math.max(Math.abs(i[o][w-1]),Math.abs(i[o][w])),_*h*h>1)for(a=o;a<=w;a++)i[a][w-1]=i[a][w-1]/h,i[a][w]=i[a][w]/h}for(o=0;o<t;o++)if(o<0||o>x)for(a=o;a<t;a++)n[o][a]=i[o][a];for(a=t-1;a>=0;a--)for(o=0;o<=x;o++){for(C=0,s=0;s<=Math.min(a,x);s++)C+=n[o][s]*i[s][a];n[o][a]=C}}}(o,u,s,a,f)}this.n=o,this.e=u,this.d=s,this.V=a}get realEigenvalues(){return this.d}get imaginaryEigenvalues(){return this.e}get eigenvectorMatrix(){return k.isMatrix(this.V)||(this.V=new k(this.V)),this.V}get diagonalMatrix(){var t,e,r=this.n,n=this.e,i=this.d,o=new k(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)o[t][e]=0;o[t][t]=i[t],n[t]>0?o[t][t+1]=n[t]:n[t]<0&&(o[t][t-1]=n[t])}return o}}function X(t,e,r,n){var i,o;return Math.abs(r)>Math.abs(n)?[(t+(i=n/r)*e)/(o=r+i*n),(e-i*t)/o]:[((i=r/n)*t+e)/(o=n+i*r),(i*e-t)/o]}class Y{constructor(t){if(!(t=R.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var e,r,n,i=t,o=i.rows,a=new k(o,o),s=!0;for(r=0;r<o;r++){var u=a[r],l=0;for(n=0;n<r;n++){var h=a[n],c=0;for(e=0;e<n;e++)c+=h[e]*u[e];u[n]=c=(i.get(r,n)-c)/a[n][n],l+=c*c}for(s&=(l=i.get(r,r)-l)>0,a[r][r]=Math.sqrt(Math.max(l,0)),n=r+1;n<o;n++)a[r][n]=0}if(!s)throw new Error("Matrix is not positive definite");this.L=a}solve(t){t=R.checkMatrix(t);var e=this.L,r=e.rows;if(t.rows!==r)throw new Error("Matrix dimensions do not match");var n,i,o,a=t.columns,s=t.clone();for(o=0;o<r;o++)for(i=0;i<a;i++){for(n=0;n<o;n++)s[o][i]-=s[n][i]*e[o][n];s[o][i]/=e[o][o]}for(o=r-1;o>=0;o--)for(i=0;i<a;i++){for(n=o+1;n<r;n++)s[o][i]-=s[n][i]*e[n][o];s[o][i]/=e[o][o]}return s}get lowerTriangularMatrix(){return this.L}}r.d(e,"default",(function(){return k})),r.d(e,"Matrix",(function(){return k})),r.d(e,"abstractMatrix",(function(){return I})),r.d(e,"wrap",(function(){return j})),r.d(e,"WrapperMatrix2D",(function(){return R})),r.d(e,"WrapperMatrix1D",(function(){return D})),r.d(e,"solve",(function(){return N})),r.d(e,"inverse",(function(){return B})),r.d(e,"linearDependencies",(function(){return z})),r.d(e,"SingularValueDecomposition",(function(){return c})),r.d(e,"SVD",(function(){return c})),r.d(e,"EigenvalueDecomposition",(function(){return V})),r.d(e,"EVD",(function(){return V})),r.d(e,"CholeskyDecomposition",(function(){return Y})),r.d(e,"CHO",(function(){return Y})),r.d(e,"LuDecomposition",(function(){return u})),r.d(e,"LU",(function(){return u})),r.d(e,"QrDecomposition",(function(){return L})),r.d(e,"QR",(function(){return L}))}])}))})),function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(r,n){var i=new Image;e&&(i.crossOrigin="Anonymous"),i.onload=function(){r(i)},i.onerror=function(e){console.error("Could't load ".concat(t)),n(e)},i.src=t}))}),Zm=function(){return function(t){return Promise.all(t.map((function(t){var e=!0;return $m(t,e)})))}};e["b"]=Km}).call(this,r("c8ba"),r("dd40")(t))},"9ff4":function(t,e,r){"use strict";(function(t){function n(t,e){const r=Object.create(null),n=t.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return e?t=>!!r[t.toLowerCase()]:t=>!!r[t]}r.d(e,"a",(function(){return x})),r.d(e,"b",(function(){return w})),r.d(e,"c",(function(){return E})),r.d(e,"d",(function(){return _})),r.d(e,"e",(function(){return q})),r.d(e,"f",(function(){return $})),r.d(e,"g",(function(){return tt})),r.d(e,"h",(function(){return A})),r.d(e,"i",(function(){return nt})),r.d(e,"j",(function(){return J})),r.d(e,"k",(function(){return M})),r.d(e,"l",(function(){return K})),r.d(e,"m",(function(){return Q})),r.d(e,"n",(function(){return I})),r.d(e,"o",(function(){return j})),r.d(e,"p",(function(){return o})),r.d(e,"q",(function(){return g})),r.d(e,"r",(function(){return X})),r.d(e,"s",(function(){return k})),r.d(e,"t",(function(){return T})),r.d(e,"u",(function(){return N})),r.d(e,"v",(function(){return O})),r.d(e,"w",(function(){return F})),r.d(e,"x",(function(){return Y})),r.d(e,"y",(function(){return v})),r.d(e,"z",(function(){return D})),r.d(e,"A",(function(){return s})),r.d(e,"B",(function(){return L})),r.d(e,"C",(function(){return B})),r.d(e,"D",(function(){return y})),r.d(e,"E",(function(){return b})),r.d(e,"F",(function(){return n})),r.d(e,"G",(function(){return f})),r.d(e,"H",(function(){return u})),r.d(e,"I",(function(){return P})),r.d(e,"J",(function(){return Z})),r.d(e,"K",(function(){return et})),r.d(e,"L",(function(){return V}));const i="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl",o=n(i);const a="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",s=n(a);function u(t){if(I(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],i=u(L(n)?c(n):n);if(i)for(const t in i)e[t]=i[t]}return e}if(N(t))return t}const l=/;(?![^(]*\))/g,h=/:(.+)/;function c(t){const e={};return t.split(l).forEach(t=>{if(t){const r=t.split(h);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function f(t){let e="";if(L(t))e=t;else if(I(t))for(let r=0;r<t.length;r++)e+=f(t[r])+" ";else if(N(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const d="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",p="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",g=n(d),v=n(p);function m(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=y(t[n],e[n]);return r}function y(t,e){if(t===e)return!0;let r=R(t),n=R(e);if(r||n)return!(!r||!n)&&t.getTime()===e.getTime();if(r=I(t),n=I(e),r||n)return!(!r||!n)&&m(t,e);if(r=N(t),n=N(e),r||n){if(!r||!n)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const r in t){const n=t.hasOwnProperty(r),i=e.hasOwnProperty(r);if(n&&!i||!n&&i||!y(t[r],e[r]))return!1}}return String(t)===String(e)}function b(t,e){return t.findIndex(t=>y(t,e))}const w={},x=[],_=()=>{},E=()=>!1,S=/^on[^a-z]/,O=t=>S.test(t),T=t=>t.startsWith("onUpdate:"),A=Object.assign,P=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},C=Object.prototype.hasOwnProperty,M=(t,e)=>C.call(t,e),I=Array.isArray,k=t=>"[object Map]"===z(t),D=t=>"[object Set]"===z(t),R=t=>t instanceof Date,j=t=>"function"===typeof t,L=t=>"string"===typeof t,B=t=>"symbol"===typeof t,N=t=>null!==t&&"object"===typeof t,F=t=>N(t)&&j(t.then)&&j(t.catch),U=Object.prototype.toString,z=t=>U.call(t),V=t=>z(t).slice(8,-1),X=t=>L(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,Y=n(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),H=t=>{const e=Object.create(null);return r=>{const n=e[r];return n||(e[r]=t(r))}},G=/-(\w)/g,q=H(t=>t.replace(G,(t,e)=>e?e.toUpperCase():"")),W=/\B([A-Z])/g,K=H(t=>t.replace(W,"-$1").toLowerCase()),$=H(t=>t.charAt(0).toUpperCase()+t.slice(1)),Z=H(t=>t?"on"+$(t):""),J=(t,e)=>t!==e&&(t===t||e===e),Q=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},tt=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},et=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let rt;const nt=()=>rt||(rt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:{})}).call(this,r("c8ba"))},b383:function(t,e,r){"use strict";e.decode=e.parse=r("91dd"),e.encode=e.stringify=r("e099")},bbad:function(t,e,r){"use strict";function n(t,e){if(t){e=e||{};var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[e.strictMode?"strict":"loose"].exec(t),i={},o=14;while(o--)i[r.key[o]]=n[o]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,(function(t,e,n){e&&(i[r.q.name][e]=n)})),i}}t.exports=n},c8ba:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}t.exports=r},d5e4:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e,r,n){void 0===r&&(r=!1),i(this,t),this._fn=e,this._once=r,this._thisArg=n,this._next=this._prev=this._owner=null}return n(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function a(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var s=function(){function t(){i(this,t),this._head=this._tail=void 0}return n(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;var r=[];while(e)r.push(e),e=e._next;return r}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;while(t)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!==typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return a(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!==typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return a(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;this._head=this._tail=null;while(t)t._owner=null,t=t._next;return this}}]),t}();s.MiniSignalBinding=o,e["default"]=s,t.exports=e["default"]},dd40:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},e099:function(t,e,r){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,s){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"===typeof t?o(a(t),(function(a){var s=encodeURIComponent(n(a))+r;return i(t[a])?o(t[a],(function(t){return s+encodeURIComponent(n(t))})).join(e):s+encodeURIComponent(n(t[a]))})).join(e):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var a=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},eb0a:function(t,e,r){"use strict";(function(t){var e=r("3907"),n=r("320c"),i=r.n(n);
/*!
 * @pixi/polyfill - v5.1.6
 * Compiled Thu, 13 Feb 2020 04:58:13 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
window.Promise||(window.Promise=e["Polyfill"]),Object.assign||(Object.assign=i.a);var o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},a=16;if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!o.performance||!o.performance.now){var s=Date.now();o.performance||(o.performance={}),o.performance.now=function(){return Date.now()-s}}for(var u=Date.now(),l=["ms","moz","webkit","o"],h=0;h<l.length&&!o.requestAnimationFrame;++h){var c=l[h];o.requestAnimationFrame=o[c+"RequestAnimationFrame"],o.cancelAnimationFrame=o[c+"CancelAnimationFrame"]||o[c+"CancelRequestAnimationFrame"]}o.requestAnimationFrame||(o.requestAnimationFrame=function(t){if("function"!==typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=a+u-e;return r<0&&(r=0),u=e,setTimeout((function(){u=Date.now(),t(performance.now())}),r)}),o.cancelAnimationFrame||(o.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return t=Number(t),0===t||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array)}).call(this,r("c8ba"))},f142:function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function o(){}function a(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function s(t,e,r,n,o){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new a(r,n||t,o),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0===--t._eventsCount?t._events=new o:delete t._events[e]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),l.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},l.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,a=new Array(o);n<o;n++)a[n]=r[n].fn;return a},l.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},l.prototype.emit=function(t,e,r,n,o,a){var s=i?i+t:t;if(!this._events[s])return!1;var u,l,h=this._events[s],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,n),!0;case 5:return h.fn.call(h.context,e,r,n,o),!0;case 6:return h.fn.call(h.context,e,r,n,o,a),!0}for(l=1,u=new Array(c-1);l<c;l++)u[l-1]=arguments[l];h.fn.apply(h.context,u)}else{var f,d=h.length;for(l=0;l<d;l++)switch(h[l].once&&this.removeListener(t,h[l].fn,void 0,!0),c){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,e);break;case 3:h[l].fn.call(h[l].context,e,r);break;case 4:h[l].fn.call(h[l].context,e,r,n);break;default:if(!u)for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];h[l].fn.apply(h[l].context,u)}}return!0},l.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},l.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},l.prototype.removeListener=function(t,e,r,n){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||n&&!a.once||r&&a.context!==r||u(this,o);else{for(var s=0,l=[],h=a.length;s<h;s++)(a[s].fn!==e||n&&!a[s].once||r&&a[s].context!==r)&&l.push(a[s]);l.length?this._events[o]=1===l.length?l[0]:l:u(this,o)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,t.exports=l}}]);
//# sourceMappingURL=chunk-vendors.b22996cf.js.map